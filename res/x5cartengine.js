!function(k,C,S){"use strict";k.extend(!0,C.cart,{ecommerce:function(b){b=k.extend(!0,{settings:{indexpage:"cart/index.html",loginpage:"imlogin.php",vat:0,coupon:!1,vattype:"none",vatName:"",taxConfigurationGroups:[],currency:"â‚¬",currency_id:"EUR",currency_format:"#.###,@@[C]",currency_format_zeroas:"0",post_url:"cart/x5cart.php",order_no_format:"[yy][mm][dd]-[A-Z][0-9][A-Z][0-9]",form_autocomplete:!0,form_validation:"tip",showShipmentFields:!1,continue_shopping_page:"index.html",minimumAmount:0,currencies:["USD","EUR"],cartCookie:"x5CartProducts",formCookie:"x5CartForm",lastOrderCookie:"x5CartLastOrder",registerUsers:0},products:{},shippings:{},payments:{},form:{fields:{},agreement:"",acceptAgreement:!1}},b);var t,e,h={},x=null,s=null,o={},i=0,n={},r=0,c=null,l=null,d=null,u=0,p={},f={},w="",a=[-2,-4,-1,-3,-2,-5,-1],g={"x5cart.priceChanged":k.Callbacks(),"x5cart.quantityChanged":k.Callbacks()};for(t in b.shippings)b.shippings[t]&&(r++,n[t]=new C.cart.shipping(b.shippings[t]),null===x&&(x=t));for(e in b.payments)b.payments[e]&&(i++,o[e]=new C.cart.payment(b.payments[e]),null===s&&(s=e));this.formatCurrency=function(t,e,i,r){i=i||b.settings.currency,(e=e||b.settings.currency_format).match(/(\[C\]\s?)?[#]+(,|\.|\s)?[#]*(,|\.)?([@]*)(\s?\[C\])?/gi);var n,a,e=C.utils,s=RegExp.$2,o=RegExp.$3,c=RegExp.$4,l=RegExp.$1,d=RegExp.$5,u="",p=e.round(t,c.length),h=0|p,f=e.round(p-h,c.length);if(0===t&&"-"==b.settings.currency_format_zeroas&&!r)return"-";for(s.length&&!o.length&&c.length&&(o=s,s=""),a=(n=(h+="").length)-1;0<=a;a--)(n-a-1)%3==0&&0<n-a-1&&(u=s+u),u=h.charAt(a)+u;if(c.length){for(f=(f+"").replace(/0\./,"").substring(0,c.length);f.length<c.length;)f+="0";u+=o+f}return(l?l.replace("[C]",i):"")+u+(d?d.replace("[C]",i):"")},this.settings=function(t){return t&&k.extend(b.settings,t),b.settings},this.mustShowPayLater=function(){for(var t in b.payments)if(b.payments[t]&&b.payments[t].extra&&b.payments[t].extra.ppcpPayLater&&!0===b.payments[t].extra.ppcpPayLater)return!0},this.form=function(){return b.form},this.updateUserData=function(){var n=k.Deferred(),a=this;return!C.utils.isOnline()||0===b.settings.registerUsers||2===b.settings.registerUsers&&-1!==S.location.hash.indexOf("guest_order")?n.resolve():k.ajax({url:"../"+b.settings.post_url+"?action=userdata&"+Math.round(1e4*Math.random()),type:"GET",dataType:"json",success:function(t){if(t.success){var e,i,r=function(t){for(var e=0;e<b.form.fields.length;e++)if(b.form.fields[e].id==t)return b.form.fields[e].name};if(a.isSetUserData()){for(e=a.userInvoiceData(),i=0;i<t.invoiceData.length;i++)"Email"==t.invoiceData[i].field_id&&(e.Email.value=t.invoiceData[i].value);a.userInvoiceData(e,!0)}else{if(t.invoiceData){for(e={},i=0;i<t.invoiceData.length;i++)e[t.invoiceData[i].field_id]={value:t.invoiceData[i].value,label:r(t.invoiceData[i].field_id)};a.userInvoiceData(e,!0)}if(t.shippingData){for(e={},i=0;i<t.shippingData.length;i++)e[t.shippingData[i].field_id]={value:t.shippingData[i].value,label:r(t.shippingData[i].field_id)};a.userShippingData(e,!0)}}n.resolve()}else n.reject()},error:function(){n.reject()}}),n},this.callWithProductsDynamicAvailability=function(t){this.callAndDo("prddnvl",t)},this.callWithDiscountedProductsArray=function(t){this.callAndDo("dscprd",t,{discountedProducts:x5CartData.offlineDiscountedProducts})},this.callWithSearchPageAdditionalInfos=function(t){this.callAndDo("srcpg",t,{discountedProducts:x5CartData.offlineDiscountedProducts})},this.callAndDo=function(t,e,i){var r;C.utils.isOnline()?(r=b.settings.post_url,r+=-1==r.indexOf("?")?"?":"&",k.ajax({url:C.settings.currentPath+r+"action="+t,success:function(t){t&&t.status&&"ok"==t.status&&e(t.data)}})):i&&e(i)},this.add=function(t,r,e,i,n){var a=k.Deferred(),s=this;new C.cart.product(b.products[t],{quantity:r,option:e,suboption:i,postUrl:b.settings.post_url,onProductCreated:function(t,i){t.done(function(){function t(){h[e]=i,s.save(),g["x5cart.priceChanged"].fire(),g["x5cart.quantityChanged"].fire(),a.resolve(e)}var e=i.hash();e in h&&!n?i.setQuantity(h[e].quantity()+r).done(t).fail(function(t){a.reject(t)}):t()}).fail(function(t){a.reject(t)})}});return a.promise()},this.remove=function(t){if(!(t in h&&h[t]))return!1;var e,i={};for(e in h)e!=t&&(i[e]=h[e]);return h=i,this.save(),g["x5cart.priceChanged"].fire(),g["x5cart.quantityChanged"].fire(),!0},this.update=function(r,t,e,i){var n=k.Deferred(),a=(r in h||(n.reject({message:C.l10n.get("cart_product_unknown","Unknown product")}),n.promise()),h[r]),s=this;return a.quiet(!1),e&&a.option()!=e||!isNaN(i)&&a.subOption()!=i?this.add(a.id(),t,e||a.option(),isNaN(i)?a.subOption():i).done(function(t){var e,i={};for(e in h)e!=t&&e!=r&&(i[e]=h[e]),e==r&&(i[t]=h[t]);h=i,g["x5cart.priceChanged"].fire(),s.save(),n.resolve(t)}).fail(function(t){n.reject(t)}):h[r].quantity()!=t?h[r].setQuantity(t).done(function(){g["x5cart.priceChanged"].fire(),g["x5cart.quantityChanged"].fire(),s.save(),n.resolve(r)}).fail(function(t){n.reject(t)}):n.resolve(r),n.promise()},this.cart=function(){return h},this.count=function(t){t=null==t||t;var e,i=0;for(e in h)i+=t?+h[e].quantity():1;return i},this.category=function(t){var e,i,r={};for(i in b.products)(e=b.products[i]).category==t&&(r[i]=new C.cart.product(b.products[e.id],{quiet:!0}));return r},this.store=function(t){if(t)return t in b.products?(r=b.products[t],new C.cart.product(r,{quiet:!0})):null;var e,i={};for(var r in b.products)e=b.products[r],i[r]=new C.cart.product(e,{quiet:!0});return i},this.shippings=function(){return n},this.shippingsCount=function(){return r},this.allowedShippings=function(){var t,e=this.cart();for(t in e)if(e[t].base().physical_delivery)return this.shippings();return{}},this.allowedShippingsCount=function(){var t,e=this.cart();for(t in e)if(e[t].base().physical_delivery)return this.shippingsCount();return 0},this.payments=function(){return o},this.paymentsCount=function(){return i},this.payment=function(t,e){return e=null==e||e,t&&o[t]&&(s=t,e&&this.save()),g["x5cart.priceChanged"].fire(),null!==s&&o[s]?o[s]:null},this.shipping=function(t,e){e=null==e||e;var i,r=this.allowedShippings();return t&&n[t]&&(i=r[x]!==r[t],x=t,e&&this.save(),i&&g["x5cart.priceChanged"].fire()),r[x]},this.userInvoiceData=function(t,e){return e=null==e||e,null!=t&&(p=t,e&&this.save()),p||[]},this.userShippingData=function(t,e){return e=null==e||e,t&&(f=t,e&&this.save()),f},this.vatByCountry=function(t,e,i){if("none"==b.settings.vattype)return 0;if(void 0===e)return t;if(void 0===b.settings.taxConfigurationGroups||!Array.isArray(b.settings.taxConfigurationGroups)||0==b.settings.taxConfigurationGroups.length)return t;var r=b.settings.taxConfigurationGroups[0];if(void 0!==r.id&&void 0!==i&&r.id!==i)for(var n=0;n<b.settings.taxConfigurationGroups.length;n++)void 0!==b.settings.taxConfigurationGroups[n].id&&b.settings.taxConfigurationGroups[n].id===i&&(r=b.settings.taxConfigurationGroups[n]);if(void 0===r.configurations||!Array.isArray(r.configurations))return t;for(var a=[],s=[],n=0;n<r.configurations.length;n++)if(void 0!==r.configurations[n]){var o=r.configurations[n];if(o.predefined&&a.push(o),void 0!==o.places&&Array.isArray(o.places))for(var c=0;c<o.places.length;c++)o.places[c].toUpperCase()===e.toUpperCase()&&s.push(o)}var l=0;if(0<s.length)s.forEach(t=>{void 0!==t.value&&(l+=t.value)});else{if(!(0<a.length))return t;a.forEach(t=>{void 0!==t.value&&(l+=t.value)})}return l},this.vatNameByCountry=function(t,e,i){if("none"==b.settings.vattype)return"";if(void 0===e)return t;if(void 0===b.settings.taxConfigurationGroups||!Array.isArray(b.settings.taxConfigurationGroups)||0==b.settings.taxConfigurationGroups.length)return t;var r=b.settings.taxConfigurationGroups[0];if(void 0!==r.id&&void 0!==i&&r.id!==i)for(var n=0;n<b.settings.taxConfigurationGroups.length;n++)void 0!==b.settings.taxConfigurationGroups[n].id&&b.settings.taxConfigurationGroups[n].id===i&&(r=b.settings.taxConfigurationGroups[n]);if(void 0===r.configurations||!Array.isArray(r.configurations))return t;for(var a=[],s=[],n=0;n<r.configurations.length;n++)if(void 0!==r.configurations[n]){var o=r.configurations[n];if(o.predefined&&a.push(o),void 0!==o.places&&Array.isArray(o.places))for(var c=0;c<o.places.length;c++)o.places[c].toUpperCase()===e.toUpperCase()&&s.push(o)}var l=[];if(0<s.length)s.forEach(t=>{void 0!==t.name&&l.push(t.name)});else{if(!(0<a.length))return t;a.forEach(t=>{void 0!==t.name&&l.push(t.name)})}return l.filter((t,e,i)=>i.indexOf(t)===e).join(", ")},this.vat=function(t){var e=this.shipping(),e=this.goodsVat(t)+(e?e.vat(t,this.goodsWeight(),this.goodsPrice(t,"included"==b.settings.vattype),this.getCountryCode()):0)+(s&&o[s]&&this.count()?this.paymentVat(s,t):0);return Math.max(0,e)},this.vatName=function(t){var e=this.goodsVatName(t).split(", "),i=this.shipping();return i&&(i=i.vatName(t).split(", "),e=e.concat(i)),s&&o[s]&&this.count()&&(i=this.paymentVatName(s,t).split(", "),e=e.concat(i)),e.filter((t,e,i)=>i.indexOf(t)===e).join(", ")},this.cartDiscount=function(t){if("absolute"==l)return u;if("relative"!=l)return 0;if(!d)return this.goodsPrice(t,!0)*u;var e=this.goodsPrice(t,!0),i=this.shipping();return(e+(i?i.price(t,!0,this.goodsWeight(),e,this.getCountryCode()):0)+(s&&o[s]&&this.count()?this.paymentPrice(s,t,!0,!1):0))*u},this.fullPrice=function(t,e){var i=this.shipping();return this.goodsFullPrice(t,e)+(i?i.price(t,e,this.goodsWeight(),this.goodsPrice(t,"included"==b.settings.vattype),this.getCountryCode()):0)+(s&&o[s]&&this.count()?this.paymentPrice(s,t,e,!0):0)},this.price=function(t,e,i){void 0===i&&(i=!1);var r=this.shipping(),r=this.goodsPrice(t,e)+(r?r.price(t,e,this.goodsWeight(),this.goodsPrice(t,"included"==b.settings.vattype),this.getCountryCode()):0)+(s&&o[s]&&this.count()?this.paymentPrice(s,t,e,!1):0);return i?Math.max(0,r-this.cartDiscount(t)):Math.max(0,r)},this.paymentPrice=function(t,e,i,r){t=t||s,void 0===r&&(r=!1);var n,a="included"==b.settings.vattype;return t&&o[t]?o[t].price(e,(t=e,e=a,a=this,r=r?a.goodsFullPrice(t,e):a.goodsPrice(t,e),n=a.shipping(),r+(n?n.price(t,e,a.goodsWeight(),a.goodsPrice(t,"included"==b.settings.vattype),a.getCountryCode()):0)),i):0},this.paymentVat=function(t,e,i){t=t||s,void 0===i&&(i=!1);var r,n="included"==b.settings.vattype;return t&&o[t]?o[t].vat(e,(t=e,e=n,n=this,i=i?n.goodsFullPrice(t,e):n.goodsPrice(t,e),r=n.shipping(),i+(r?r.price(t,e,n.goodsWeight(),n.goodsPrice(t,"included"==b.settings.vattype),n.getCountryCode()):0))):0},this.paymentVatName=function(t,e){return(t=t||s)&&o[t]?o[t].vatName(e):""},this.goodsFullPrice=function(t,e){var i,r=0;for(i in h)h[i]&&(r+=h[i].fullPrice(t,e));return r},this.goodsPrice=function(t,e){var i,r=0;for(i in h)h[i]&&(r+=h[i].price(t,e));return r},this.goodsWeight=function(){var t,e=0;for(t in h)h[t]&&(e+=h[t].weight());return e},this.goodsVat=function(t){return this.goodsPrice(t,!0)-this.goodsPrice(t,!1)},this.goodsVatName=function(t){var e,i=[];for(e in h)h[e]&&i.push(h[e].vatName(t));return i.filter((t,e,i)=>i.indexOf(t)===e).join(", ")},this.getCountryCode=function(t){var e,i=this.userShippingData(),r=this.userInvoiceData();return k.isEmptyObject(i)||!i.CountryCode||t?!k.isEmptyObject(r)&&r.CountryCode&&(e=r.CountryCode.value):e=i.CountryCode.value,e},this.coupon=function(i,r,n){var t,a=this;if(r=null==r||r,i){for(t in u=0,c=d=l=null,h)h[t].disableCoupon();if(C.utils.isOnline())k.ajax({url:C.settings.currentPath+b.settings.post_url+"?action=chkcpn&"+Math.round(1e4*Math.random()),type:"POST",async:!1,data:{coupon:i},dataType:"json",success:function(t){if(!1!==t)if("cart"==t.type)c=i,l=t.discount_type,void 0!==t.apply_on_shipping_and_payment&&(d=t.apply_on_shipping_and_payment),u=t.amount;else for(var e in h)-1!=k.inArray(h[e].id(),t.ids)&&(h[e].enableCoupon(i),c=i);r&&a.save(),k.isFunction(n)&&n(c||"")}});else{if(!1!==b.settings.coupon&&i in b.settings.coupon){var e=new Date,s=!0,e=new Date(e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate(),e.getUTCHours(),e.getUTCMinutes(),e.getUTCSeconds());(s="start_date"in b.settings.coupon[i]&&b.settings.coupon[i].start_date>=e||"end_date"in b.settings.coupon[i]&&b.settings.coupon[i].end_date<=e?!1:s)&&(c=i,l=b.settings.coupon[c].type,u=b.settings.coupon[c].amount,void 0!==b.settings.coupon[c].apply_on_shipping_and_payment&&(d=b.settings.coupon[c].apply_on_shipping_and_payment))}else for(t in h)h[t].enableCoupon(i)&&(c=i);r&&this.save(),k.isFunction(n)&&n(c||"")}g["x5cart.priceChanged"].fire()}return c||""},this.canApplyCoupon=function(){if(!1!==b.settings.coupon)return!0;for(var t in h)if(h[t].base().discount.coupon)return!0;return!1},this.canSetOrder=function(t){var e={success:!1,message:""};return 0===this.count()?e.message=C.l10n.get("cart_err_emptycart"):0<this.allowedShippingsCount()&&null===this.shipping()?e.message=C.l10n.get("cart_err_shipping"):0<i&&null===this.payment()?e.message=C.l10n.get("cart_err_payment"):b.settings.minimumAmount>this.goodsPrice(t,"included"==b.settings.vattype)?e.message=C.l10n.get("cart_err_minimum_price").replace(/\[PRICE\]/g,this.formatCurrency(b.settings.minimumAmount)):e.success=!0,e},this.minimumAmountReached=function(t){var e={success:!0,message:""};return b.settings.minimumAmount>this.goodsPrice(t,"included"==b.settings.vattype)&&(e.message=C.l10n.get("cart_err_minimum_price").replace(/\[PRICE\]/g,this.formatCurrency(b.settings.minimumAmount)),e.success=!1),e},this.isSetUserData=function(){if(k.isEmptyObject(this.userInvoiceData()))return!1;function t(t,e){for(var i=b.form.fields,r=0;r<i.length;r++)if(i[r].mandatory&&(!e||i[r].shipping)&&(!(i[r].id in t)||!t[i[r].id].value.length))return;return 1}return!!t(this.userInvoiceData(),!1)&&!(!k.isEmptyObject(this.userShippingData())&&!t(this.userShippingData(),!0))},this.paymentHTML=function(){var t,e,i,r=this.payment()?this.payment().html():"",n=C.utils.htmlspecialchars,a=b.form.fields,s=this.userInvoiceData(),o=this.userShippingData(),c=!k.isEmptyObject(o),l=["Company","Name","LastName","Address1","Address2","ZipPostalCode","City","StateRegion","Country","CountryCode","Email","Phone","Mobile","Fax","VAT","CustomerID","Adverts","Note"],d=this.getCountryCode(!0);if(!r)return"";r=r.replace(/\[ORDER_NO\]/g,w).replace(/\[HESCAPE_ORDER_NO\]/g,n(w)).replace(/\[UESCAPE_ORDER_NO\]/g,S.encodeURIComponent(w));var u=0===this.allowedShippingsCount();for(r=r.replace("[NO_SHIPPING]",u?"true":"false"),t=this.formatCurrency(this.price(d,!0,!0),"#.@@@"),r=(r=(r=r.replace(/\[PRICE\]/g,t).replace(/\[HESCAPE_PRICE\]/g,n(t)).replace(/\[UESCAPE_PRICE\]/g,S.encodeURIComponent(t))).replace(/\[SHIPPING_ID\]/g,x)).replace(/\[ORDER_ENC_DATA\]/g,this.getStringifiedEncodedData());i=r.match(/\[PRICE,\s*([0-9]+),\s*([\w#@\.,\[\]]+)\]/);)t=this.price(d,!0,!0)*parseInt(i[1],10),t=this.formatCurrency(t.toString(),i[2]),e=i[0].replace(/\[/g,"\\[").replace(/\]/g,"\\]").replace(/\(/g,"\\(").replace(/\)/g,"\\)").replace(/\./g,"\\."),r=r.replace(new RegExp(e,"g"),t);for(;i=r.match(/\[(H|U)ESCAPE_PRICE,\s*([0-9]+),\s*([\w#@\.,\[\]]+)\]/);)t=this.price(d,!0,!0)*parseInt(i[2],10),t=this.formatCurrency(t.toString(),i[3]),e=i[0].replace(/\[/g,"\\[").replace(/\]/g,"\\]").replace(/\(/g,"\\(").replace(/\)/g,"\\)").replace(/\./g,"\\."),r=r.replace(new RegExp(e,"g"),"U"==RegExp.$1?S.encodeURIComponent(t):n(t));for(var p=0;p<l.length;p++){var h=l[p],f=h.toUpperCase(),g=s[h]?s[h].value:"",h=o[h]?o[h].value:"";"COUNTRYCODE"===f&&2<g.length&&(g=g.substring(0,2)),"COUNTRYCODE"===f&&2<h.length&&(h=h.substring(0,2)),r=r.replace(new RegExp("\\["+f+"\\]","g"),g).replace(new RegExp("\\[HESCAPE_"+f+"\\]","g"),n(g)).replace(new RegExp("\\[UESCAPE_"+f+"\\]","g"),S.encodeURIComponent(g)).replace(new RegExp("\\[UAESCAPE_"+f+"\\]","g"),C.utils.replaceAll(S.encodeURIComponent(g),"'","%27")).replace(new RegExp("\\[SHIPPING_"+f+"\\]","g"),c?h:g).replace(new RegExp("\\[HESCAPE_SHIPPING_"+f+"\\]","g"),n(c?h:g)).replace(new RegExp("\\[UESCAPE_SHIPPING_"+f+"\\]","g"),c?S.encodeURIComponent(h):S.encodeURIComponent(g)).replace(new RegExp("\\[UAESCAPE_SHIPPING_"+f+"\\]","g"),c?C.utils.replaceAll(S.encodeURIComponent(h),"'","%27"):C.utils.replaceAll(S.encodeURIComponent(g),"'","%27"))}for(var m,v,_,y,p=0;p<a.length;p++)a[p].custom&&(y=a[p].id,v=a[p].name,m=y.toUpperCase(),v=C.utils.escapeRegExp(v.toUpperCase()),_=s[y]?s[y].value:"",y=o[y]?o[y].value:"",r=r.replace(new RegExp("\\["+v+"\\]","g"),_).replace(new RegExp("\\[HESCAPE_"+v+"\\]","g"),n(_)).replace(new RegExp("\\[UESCAPE_"+v+"\\]","g"),S.encodeURIComponent(_)).replace(new RegExp("\\[UAESCAPE_"+v+"\\]","g"),C.utils.replaceAll(S.encodeURIComponent(_),"'","%27")).replace(new RegExp("\\[SHIPPING_"+v+"\\]","g"),c?y:_).replace(new RegExp("\\[HESCAPE_SHIPPING_"+v+"\\]","g"),n(c?y:_)).replace(new RegExp("\\[UESCAPE_SHIPPING_"+v+"\\]","g"),c?S.encodeURIComponent(y):S.encodeURIComponent(_)).replace(new RegExp("\\[UAESCAPE_SHIPPING_"+v+"\\]","g"),c?C.utils.replaceAll(S.encodeURIComponent(y),"'","%27"):C.utils.replaceAll(S.encodeURIComponent(_),"'","%27")).replace(new RegExp("\\["+m+"\\]","g"),_).replace(new RegExp("\\[HESCAPE_"+m+"\\]","g"),n(_)).replace(new RegExp("\\[UESCAPE_"+m+"\\]","g"),S.encodeURIComponent(_)).replace(new RegExp("\\[UAESCAPE_"+m+"\\]","g"),C.utils.replaceAll(S.encodeURIComponent(_),"'","%27")).replace(new RegExp("\\[SHIPPING_"+m+"\\]","g"),c?y:_).replace(new RegExp("\\[HESCAPE_SHIPPING_"+m+"\\]","g"),n(c?y:_)).replace(new RegExp("\\[UESCAPE_SHIPPING_"+m+"\\]","g"),c?S.encodeURIComponent(y):S.encodeURIComponent(_)).replace(new RegExp("\\[UAESCAPE_SHIPPING_"+m+"\\]","g"),c?C.utils.replaceAll(S.encodeURIComponent(y),"'","%27"):C.utils.replaceAll(S.encodeURIComponent(_),"'","%27")));return r=r.replace(/\[USE_SHIPPING_DATA\]/g,c)},this.setOrder=function(t,r){var e,i,n,a,s=this.canSetOrder(t),o={},c={},l=this.getCountryCode(),t=this.getCountryCode(!0);if(!0!==s.success)k.isFunction(r)&&r({success:!1,message:s});else{var d={success:!0,orderNo:w=function(){var t=b.settings.order_no_format,e=new Date,i=e.getDate(),r=e.getMonth()+1,n=e.getFullYear().toString().substring(2);for(parseInt(i,10)<10&&(i="0"+i),parseInt(r,10)<10&&(r="0"+r),t=t.replace(/\[dd\]/g,i).replace(/\[mm\]/g,r).replace(/\[yy\]/g,n).replace(/\[yyyy\]/g,e.getFullYear());-1!=t.indexOf("[A-Z]");)t=t.replace("[A-Z]",String.fromCharCode(Math.round(25*Math.random()+65)));for(;-1!=t.indexOf("[a-z]");)t=t.replace("[a-z]",String.fromCharCode(Math.round(25*Math.random()+97)));for(;-1!=t.indexOf("[0-9]");)t=t.replace("[0-9]",Math.round(9*Math.random()));return t}(),shipping:this.shipping(),payment:this.payment(),cart:this.cart(),userInvoiceData:this.userInvoiceData(),userShippingData:this.userShippingData()};if(this.save(),C.utils.isOnline()){for(n in h)i=(e="options"in(a=h[n]).base()&&a.option()&&a.base().options[a.option()]?a.base().options[a.option()].name:null)&&"suboptions"in a.base().options[a.option()]?a.base().options[a.option()].suboptions[a.subOption()]:null,o[n]={id:a.base().id,name:a.base().name,description:a.base().description,option:e,suboption:i,rawSinglePrice:a.singlePrice(t,!1),rawSinglePricePlusVat:a.singlePrice(t,!0),rawSingleFullPrice:a.singleFullPrice(t,!1),rawSingleFullPricePlusVat:a.singleFullPrice(t,!0),rawPrice:a.price(t,!1),rawPricePlusVat:a.price(t,!0),rawFullPrice:a.fullPrice(t,!1),rawFullPricePlusVat:a.fullPrice(t,!0),rawSingleVat:a.singleVat(t),rawVat:a.vat(t),vatName:a.vatName(t),singlePrice:this.formatCurrency(a.singlePrice(t,!1)),singlePricePlusVat:this.formatCurrency(a.singlePrice(t,!0)),singleFullPrice:this.formatCurrency(a.singleFullPrice(t,!1)),singleFullPricePlusVat:this.formatCurrency(a.singleFullPrice(t,!0)),price:this.formatCurrency(a.price(t,!1)),pricePlusVat:this.formatCurrency(a.price(t,!0)),fullPrice:this.formatCurrency(a.fullPrice(t,!1)),fullPricePlusVat:this.formatCurrency(a.fullPrice(t,!0)),vat:this.formatCurrency(a.vat(t)),singleVat:this.formatCurrency(a.singleVat(t)),quantity:a.quantity()};c={orderNo:w,userInvoiceData:this.userInvoiceData(),userShippingData:this.userShippingData(),products:o,rawTotalPrice:this.price(t,!1),rawTotalPricePlusVat:this.price(t,!0),rawTotalVat:this.vat(t),vatName:this.vatName(t),totalPrice:this.formatCurrency(this.price(t,!1)),totalPricePlusVat:this.formatCurrency(this.price(t,!0)),totalVat:this.formatCurrency(this.vat(t)),totalToPay:this.formatCurrency(this.price(t,!0,!0)),coupon:this.coupon(),rawCouponDiscount:this.cartDiscount(t),couponDiscount:this.formatCurrency(this.cartDiscount(t)),currency:b.settings.currency_id},this.shipping()&&(s=this.goodsWeight(),u=this.goodsPrice(t,!1),p=this.goodsPrice(t,!0),c=k.extend(c,{shipping:{id:this.shipping().id(),name:this.shipping().name(),description:this.shipping().description(),icon:this.shipping().base().image,email_text:this.shipping().email(),price:this.formatCurrency(this.shipping().price(t,!1,s,u,l)),pricePlusVat:this.formatCurrency(this.shipping().price(t,!0,s,p,l)),rawPrice:this.shipping().price(t,!1,s,"included"==b.vattype?p:u,l),rawPricePlusVat:this.shipping().price(t,!0,s,"included"==b.vattype?p:u,l),vat:this.formatCurrency(this.shipping().vat(t,s,"included"==b.vattype?p:u,l)),rawVat:this.shipping().vat(t,s,"included"==b.vattype?p:u,l),vatName:this.shipping().vatName(t)}})),this.payment()&&(c=k.extend(c,{payment:{id:this.payment().id(),name:this.payment().name(),description:this.payment().description(),icon:this.payment().base().image,price:this.formatCurrency(this.paymentPrice(null,t,!1)),pricePlusVat:this.formatCurrency(this.paymentPrice(null,t,!0)),rawPrice:this.paymentPrice(null,t,!1),rawPricePlusVat:this.paymentPrice(null,t,!0),email_text:this.payment().email(),vat:this.formatCurrency(this.paymentVat(null,t)),rawVat:this.paymentVat(null,t),vatName:this.paymentVatName(null,t),enc:this.payment().isDirectPayment()?this.getStringifiedEncodedData():""}}));var u,p,s=b.settings.post_url;s+=-1==s.indexOf("?")?"?":"&",k.ajax({url:C.settings.currentPath+s+"action=sndrdr&"+Math.round(1e4*Math.random()),type:"POST",dataType:"json",data:{orderData:c},success:function(t){if(t&&"status"in t)if("ok"==t.status)w=t.orderNumber,d.orderNo=t.orderNumber;else{var e,i;for(i in d.success=!1,t.productsData){e=t.productsData[i];break}"invalid_product_quantity"==t.errorType?0<+e.availableQuantity?d.message=C.l10n.get("cart_product_quantitynotavailable","The selected quantity for [PRODUCTNAME] is not available.\nThe maximum quantity you can add to the cart is [MAXQUANTITY]").replace("[PRODUCTNAME]",e.name).replace("[MAXQUANTITY]",e.availableQuantity):d.message=C.l10n.get("cart_product_notavailable","The product [PRODUCTNAME] is not available now").replace("[PRODUCTNAME]",e.name):d.message="Generic Error"}else d=k.extend(d,{success:!1,message:"Generic Error"});d.success&&S.imStorage.setItem(b.settings.lastOrderCookie,d.orderNo),k.isFunction(r)&&r(d)},error:function(){k.isFunction(r)&&r({success:!1,message:"Generic Error"})}})}else S.imStorage.setItem(b.settings.lastOrderCookie,w),k.isFunction(r)&&r(d)}},this.orderNumber=function(){return w},this.empty=function(t){t=null==t||t,c=w=null,h={},g["x5cart.priceChanged"].fire(),g["x5cart.quantityChanged"].fire(),t&&this.save()},this.getStringifiedEncodedData=function(){var t='{ "pData": '+this.getStringifiedOrderData()+', "fData": '+this.getStringifiedFormData()+" }";return"btoa"in S?encodeURIComponent(S.btoa(unescape(encodeURIComponent(t)),a)):encodeURIComponent(C.utils.encrypt2(t,a))},this.getStringifiedFormData=function(){return JSON.stringify({ivc:this.userInvoiceData(),shp:this.userShippingData()})},this.getStringifiedOrderData=function(){var t,e={crt:[],shp:null,pay:null,cpn:null,orderNo:null};for(t in x&&(e.shp=x),s&&(e.pay=s),c&&(e.cpn=c),w&&(e.orderNo=w),h){var i=h[t],r={id:i.id(),qnt:i.quantity(),opt:null,sopt:null};i.option()&&(r.opt=i.option(),i.subOption()&&(r.sopt=i.subOption())),e.crt.push(r)}return JSON.stringify(e)},this.save=function(){S.imStorage.setItem(b.settings.cartCookie,this.getStringifiedOrderData()),S.imStorage.setItem(b.settings.formCookie,this.getStringifiedFormData())},this.load=function(t){t=k.extend({pData:null,fData:null,quiet:!1},t);try{var e=t.pData||JSON.parse(S.imStorage.getItem(b.settings.cartCookie,null)),i=t.fData||JSON.parse(S.imStorage.getItem(b.settings.formCookie,null));if(e){if("crt"in e){h={};for(var r=0;r<e.crt.length;r++){var n,a=e.crt[r];b.products[a.id]&&(n=new C.cart.product(b.products[a.id],{quantity:+a.qnt,option:a.opt,suboption:a.sopt,quiet:t.quiet}),h[n.hash()]=n)}}"shp"in e&&b.shippings[e.shp]&&(x=e.shp),"pay"in e&&b.payments[e.pay]&&(s=e.pay),"cpn"in e?this.coupon(e.cpn,!1):c=null,w="orderNo"in e?e.orderNo:null,g["x5cart.priceChanged"].fire()}return i&&(p="ivc"in i?i.ivc:{},f="shp"in i?i.shp:{}),!0}catch(t){}return!1},this.bind=function(t,e){return t in g&&(g[t].has(e)||g[t].add(e)),this},this.unbind=function(t,e){return t in g&&(e?g[t].remove(e):g[t].empty()),this},this.restore=function(e){function t(t){if(!t)throw"Empty json string";if("object"!=typeof(i=JSON.parse(t)))throw"Wrong json type";return r.empty(!1),r.load(k.extend(i,{quiet:!0}))}var i,r=this;try{if("atob"in S)return t(i=decodeURIComponent(escape(S.atob(decodeURIComponent(e)))))}catch(t){"console"in S&&console.log("Safe encrypt "+t,"data:",e,i)}try{return t(i=C.utils.decrypt2(e,a))}catch(t){"console"in S&&console.log("Method 2 "+t,"data:",e,i)}try{return t(i=C.utils.decrypt(e,"fj293ur2/we02"))}catch(t){"console"in S&&console.log("Method 1 "+t,"data:",e,i)}return!1},this.getLastOrderNumber=function(){return S.imStorage.getItem(b.settings.lastOrderCookie)},this.clearLastOrderNumber=function(){S.imStorage.removeItem(b.settings.lastOrderCookie)},this.load({quiet:!0})}})}(_jq,x5engine,window),function(n,h){"use strict";n.extend(!0,h.cart,{product:function(t,e){var d=n.extend(!0,{id:null,id_user:null,category:null,description:"",price:0,images:[],link:null,vat:0,vattype:"none",vatName:"",taxConfigurationGroup:"",physical_delivery:!0,digital_delivery:!1,weight:0,availabilityType:"fixed",staticAvailValue:"unknown",offlineAvailableItems:0,precision:5,options:{},discount:{type:"relative",amount:0,start_date:null,end_date:null,coupon:!1},quantityDiscounts:{},minQuantity:0},t),u=n.extend(!0,{quantity:0<d.minQuantity?d.minQuantity:1,quiet:!1,option:null,suboption:null,postUrl:"cart/x5cart.php",onProductCreated:null},e),p=!1,i=(this.hash=function(){return h.utils.imHash(this.id()+(u.option||"")+(isNaN(u.suboption)?"":u.suboption))},this.base=function(){return n.extend(!0,d,{optionsLength:function(){var t,e=0;for(t in d.options)d.options.hasOwnProperty(t)&&e++;return e}})},this.quiet=function(t){return"boolean"==typeof t&&(u.quiet=t),u.quiet},this.id=function(){return d.id},this.setQuantity=function(e){var i=n.Deferred();return isNaN(e)||!/[0-9]+/.test(e)||parseInt(e,10)<1?(i.reject({name:"Product Quantity",message:h.l10n.get("cart_err_qty")}),i.promise()):d.minQuantity>e&&!u.quiet?(i.reject({name:"Product Quantity",message:h.l10n.get("cart_err_quantity").replace(/\[QUANTITY\]/g,d.min_quantity)}),i.promise()):"fixed"!=d.availabilityType||"notavailable"!=d.staticAvailValue||u.quiet?"dynamic"!=d.availabilityType||u.quiet?(u.quantity=e,i.resolve(e),i.promise()):(h.settings.islocal?d.offlineAvailableItems?e>d.offlineAvailableItems?i.reject({name:"Product Quantity",message:h.l10n.get("cart_product_quantitynotavailable","The selected quantity for [PRODUCTNAME] is not available.\nThe maximum quantity you can add to the cart is [MAXQUANTITY]").replace("[PRODUCTNAME]",d.id_user).replace("[MAXQUANTITY]",d.offlineAvailableItems)}):(u.quantity=e,i.resolve(e)):i.reject({name:"Product Quantity",message:h.l10n.get("cart_product_notavailable","The product [PRODUCTNAME] is not available now").replace("[PRODUCTNAME]",d.id_user)}):n.ajax({url:h.settings.currentPath+u.postUrl+"?action=productstatus&rand="+Math.round(1e5*Math.random()),type:"POST",data:{product_id:d.id},dataType:"text"}).done(function(t){t*=1,isNaN(t)||(t?t<e?i.reject({name:"Product Quantity",message:h.l10n.get("cart_product_quantitynotavailable","The selected quantity for [PRODUCTNAME] is not available.\nThe maximum quantity you can add to the cart is [MAXQUANTITY]").replace("[PRODUCTNAME]",d.id_user).replace("[MAXQUANTITY]",t)}):(u.quantity=e,i.resolve(e)):i.reject({name:"Product Quantity",message:h.l10n.get("cart_product_notavailable","The product [PRODUCTNAME] is not available now").replace("[PRODUCTNAME]",d.id_user)}))}).fail(function(){i.reject({name:"Generic Error",message:"Generic error"})}),i):(i.reject({name:"Product Quantity",message:h.l10n.get("cart_product_notavailable","The product [PRODUCTNAME] is not available now").replace("[PRODUCTNAME]",d.id_user)}),i)},this.quantity=function(t){return u.quantity},this.option=function(t){return t&&t in d.options&&(u.option=t,"suboptions"in d.options[t]&&null===u.suboption&&(u.suboption=0)),u.option},this.subOption=function(t){return t&&u.option in d.options&&t in d.options[u.option].suboptions&&(u.suboption=t),u.suboption},this.discount=function(t,e){var i,r,n=0,a=d.discount,s=0,o=new Date,o=new Date(o.getUTCFullYear(),o.getUTCMonth(),o.getUTCDate(),o.getUTCHours(),o.getUTCMinutes(),o.getUTCSeconds());if(a.start_date&&a.start_date>o)return 0;if(a.end_date&&a.end_date<o)return 0;if(!a.coupon||a.coupon&&p)switch(a.type){case"absolute":var c,l=a.amount;e^"included"===d.vattype&&(c=h.cart.manager.vatByCountry(d.vat,t,d.taxConfigurationGroup),e?l*=1+c:l/=1+c),n+=l;break;case"relative":n+=this.singleFullPrice(t,e)*a.amount}for(r in d.quantityDiscounts)u.quantity>=parseFloat(r,10)&&s<d.quantityDiscounts[r]&&(i=r,s=d.quantityDiscounts[i]);return s&&(n+=(this.singleFullPrice(t,e)-n)*s),n},this.singleFullPrice=function(t,e){var i=d.price,r=d.options[this.option()];return r&&"pricevar"in r&&(i+=r.pricevar),e^"included"===d.vattype&&(r=h.cart.manager.vatByCountry(d.vat,t,d.taxConfigurationGroup),e?i*=1+r:i/=1+r),+i.toFixed(d.precision)},this.singlePrice=function(t,e){t=this.singleFullPrice(t,e)-this.discount(t,e);return Math.max(0,t)},this.fullPrice=function(t,e){return this.singleFullPrice(t,e)*u.quantity},this.price=function(t,e){return this.singlePrice(t,e)*u.quantity},this.singleVat=function(t){var e=h.cart.manager.vatByCountry(d.vat,t,d.taxConfigurationGroup);return this.singlePrice(t,!1)*e},this.fullVat=function(t){var e=h.cart.manager.vatByCountry(d.vat,t,d.taxConfigurationGroup);return this.fullPrice(t,!1)*e},this.vat=function(t){var e=h.cart.manager.vatByCountry(d.vat,t,d.taxConfigurationGroup);return this.price(t,!1)*e},this.vatName=function(t){return h.cart.manager.vatNameByCountry(d.vatName,t,d.taxConfigurationGroup)},this.weight=function(){var t=d.weight,e=d.options[this.option()];return e&&"weightvar"in e&&(t+=e.weightvar),t*u.quantity},this.enableCoupon=function(t){var e=new Date,i=h.utils.isOnline(),e=new Date(e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate(),e.getUTCHours(),e.getUTCMinutes(),e.getUTCSeconds());return(!i||!1!==d.discount.coupon)&&(!(!i&&d.discount.coupon!=t)&&(!(d.discount.start_date&&d.discount.start_date>e)&&(!(d.discount.end_date&&d.discount.end_date<e)&&(p=!0))))},this.disableCoupon=function(){return!(p=!1)},this),r=n.Deferred();this.setQuantity(u.quantity).done(function(){if(null===u.option)for(var t in d.options){i.option(t);break}else i.option(u.option);r.resolve()}).fail(function(t){r.reject(t)}),n.isFunction(u.onProductCreated)&&u.onProductCreated(r,i)}})}(_jq,x5engine),function(t,u){"use strict";t.extend(!0,u.cart,{shipping:function(d){d=t.extend(!0,{id:null,name:"",description:"",precision:5,vat:0,vattype:"none",vatname:"",taxConfigurationGroup:"",type:"FIXED",price:0,countryPrice:0,email:"",image:""},d);this.base=function(){return d},this.id=function(){return d.id},this.name=function(){return d.name},this.description=function(){return d.description},this.image=function(){return d.image},this.price=function(t,e,i,r,n){var a,s,o=0,c=0,l=0;switch(d.type){case"WEIGHT":for(a in d.price)(s=parseFloat(a,10))<=i&&(!o||s>parseFloat(o,10))&&(o=a,isNaN(d.price[o])||(c=d.price[o]));l=c;break;case"AMOUNT":for(a in d.price)(s=parseFloat(a,10))<=r&&(!o||s>parseFloat(o,10))&&(o=a,isNaN(d.price[o])||(c=d.price[o]));l=c;break;default:l=d.price}return l=n?this.countryPrice(n)+l:l,e^"included"===d.vattype&&(n=u.cart.manager.vatByCountry(d.vat,t,d.taxConfigurationGroup),e?l*=1+n:l/=1+n),+Math.max(0,l).toFixed(d.precision)},this.vat=function(t,e,i,r){return u.cart.manager.vatByCountry(d.vat,t,d.taxConfigurationGroup)*this.price(t,!1,e,i,r)},this.vatName=function(t){return u.cart.manager.vatNameByCountry(d.vatName,t,d.taxConfigurationGroup)},this.email=function(){var t=d.email;return null==t||""===t?"":t},this.countryPrice=function(t){if(!t)return 0;var e=x5CartData.shippings[this.id()].additionalCountryPrices;return e&&e[t]?e[t]:0}}})}(_jq,x5engine),function(t,a){"use strict";t.extend(!0,a.cart,{payment:function(n){n=t.extend(!0,{id:null,name:"",description:"",image:"",email:"",precision:5,vat:0,vattype:"none",vatName:"",taxConfigurationGroup:"",pricetype:"fixed",price:0,html:"",emailHtml:"",enableAfterPaymentEmail:!1},n),this.base=function(){return n},this.id=function(){return n.id},this.price=function(t,e,i){var r=n.price;return"percentual"==n.pricetype&&(r*=e),i^"included"===n.vattype&&(e=a.cart.manager.vatByCountry(n.vat,t,n.taxConfigurationGroup),i?r*=1+e:r/=1+e),+r.toFixed(n.precision)},this.vat=function(t,e){return a.cart.manager.vatByCountry(n.vat,t,n.taxConfigurationGroup)*this.price(t,e,!1)},this.vatName=function(t){return a.cart.manager.vatNameByCountry(n.vatName,t,n.taxConfigurationGroup)},this.name=function(){return n.name},this.description=function(){return n.description},this.extra=function(){return n.extra},this.html=function(){var t=n.html;return t||""},this.isDirectPayment=function(){return!!n.html},this.emailHtml=function(){var t=n.emailHtml;return t||""},this.email=function(){var t=n.email;return null==t||""===t?"":t},this.enableAfterPaymentEmail=function(){return n.enableAfterPaymentEmail},this.image=function(){return n.image}}})}(_jq,x5engine),function(z,j,H){"use strict";z.extend(!0,j.cart.ui,{getWindow:function(){try{H.top.location.href;return H.top}catch(t){return H}},clickButtonAddToCart:function(t,e){t&&0<t?(z.imCookie("x5CartContinue",j.cart.ui.getWindow().location.href,{path:"/"}),j.utils.location(e)):z("div#add-to-cart.splashbox").find(".close").trigger("click")},show:function(){function s(){1<j.settings.breakPoints.length&&"function"==typeof checkStyle&&checkStyle()}function b(){var t=z("#imContent");z("#imCartContainer img").one("load",function(){t.trigger("change")}),t.trigger("change")}function o(){f=g=e=M=null}function c(t,e){var i,r=P.shipping(),n="";if(e?(i=new Object)[r.id()]=r:i=P.allowedShippings(),P.allowedShippingsCount()){for(var a in n='<div><table cellpadding="0" cellspacing="0" border="0" class="cart-table shipping-table"><thead><tr><td class="first-column">'+A("cart_shipping")+'</td><td class="second-column mobile-hide">'+A("cart_price")+"</td></tr></thead><tbody>",i){var s=""!=i[a].name()?i[a].name():"&nbsp;",o=""!=i[a].description()?i[a].description():"&nbsp;",c=i[a].price(_,v,P.goodsWeight(),P.goodsPrice(_,v),P.getCountryCode()),n=(n=n+"<tr>"+'<td class="first-column">')+'<div class="ship-pay-all-cont">'+'<div class="ship-pay-cont">';t||(n+='<div class="ship-pay-chk-cont"><input type="radio" id="chk-shipping-'+a+'" name="shipping-method" data-id="'+a+'"'+(r&&r.id()==a?" checked":"")+"></div>"),i[a].image()?n+='<div class="ship-pay-image-cont"><img class="ship-pay-image" src="../'+i[a].image()+'" alt="'+s+'" /></div>':n+='<div class="ship-pay-image-cont" style="width: 1px; min-width: 1px;"></div>',n=(n=(n+='<div class="ship-pay-name-desc-cont">')+('<label for="chk-shipping-'+a+'"><b>'+s+"</b><p>"+o+"</p></label>")+'<div class="price-mobile mobile-show field-space-reverse text-right">')+('<div style="font-size: 1.2em;">'+P.formatCurrency(c)+"</div>"),n=(n=(n=(n=(n="none"!=m&&0<c?(n=(n+='<div style="font-size: 0.8em;">')+("included"==m?A("cart_vat_included","[NAME] (included)").replace("[NAME]",i[a].vatName(_))+": ":A("cart_vat_excluded","[NAME] (excluded)").replace("[NAME]",i[a].vatName(_))+": "))+P.formatCurrency(i[a].vat(_,P.goodsWeight(),P.goodsPrice(_,v),P.getCountryCode()))+"</div>":n)+"</div>"+"</div>")+"</div>"+"</div></td>")+'<td class="text-right mobile-hide second-column">'+'<div class="col-price-ship-pay">')+('<div style="font-size: 1.2em;">'+P.formatCurrency(c)+"</div>"),"none"!=m&&0<c&&(n=(n=(n+='<div style="font-size: 0.8em;">')+("included"==m?A("cart_vat_included","[NAME] (included)").replace("[NAME]",i[a].vatName(_))+": ":A("cart_vat_excluded","[NAME] (excluded)").replace("[NAME]",i[a].vatName(_))+": "))+P.formatCurrency(i[a].vat(_,P.goodsWeight(),P.goodsPrice(_,v),P.getCountryCode()))+"</div>"),n=(n+="</div>")+"</td>"+"</tr>"}(n=z(n+="</tbody></table></div>")).find("tbody > tr:odd > td").not(".invisible").addClass("odd"),n.find("tr").each(function(){var t=z(this).find("td").not(".invisible");t.first().addClass("first-x"),t.last().addClass("last-x")}),n.find("tr").last().find("td").not(".invisible").addClass("last-y"),n.find("input[type=radio]").on("click",function(){var t=z(this).attr("data-id");t&&(P.shipping(t),F(),O(A("cart_gonext"),P))}),null===f?S.append(n):f.replaceWith(n),f=n}else f&&f.remove()}function x(t){return n[t.toLowerCase()]||n[document.documentElement.lang.toLowerCase()]}function a(d){var u,p,h,f,g,m,v=z('<div class="user-form"/>'),_=z('<div class="user-form"/>'),y=P.form().fields;P.canSetOrder().success?(o(),P.updateUserData().fail(function(){P.userInvoiceData([]),P.userShippingData([]),H.top.location="../"+P.settings().loginpage+"?landing_page="+encodeURIComponent(P.settings().indexpage+"?#step1")+"&redirect_after_registration=true&cart=true"}).done(function(){h=P.userInvoiceData(),f=P.userShippingData(),z(".imTip").remove(),j.utils.scrollTo(0),k.attr("data-step","1"),C.empty(),S.empty(),j.cart.ui.steps.active&&(z("#im-cart-steps-banner").remove(),w.prepend(j.cart.ui.getStepStyleDom(0))),C.append('<h2 id="imPgTitle" class="imTitleMargin">'+A("cart_step1")+"</h2>").append("<p>"+A("cart_step1_descr").replace("[FIELD]",A("cart_step1_gonext"))+"</p>"),v.append('<div class="field-row"><div class="field-item caption">'+A("cart_vat_address")+"</div></div>");function t(n,a,s){n.on("change","select",function(){for(g=0;g<y.length;g++)if(!s||y[g].shipping)if(y[g].isVisible(a)){if(!n.find("[data-uuid="+a+y[g].uuid+"]").length){for(var t=0,e=0;e<y.length&&e<g;e++)!y[e].isVisible(a)||s&&!y[g].shipping||t++;var i=n.find("select, input").eq(t).closest(".field-item").hasClass("first-column"),r=n.find("select, input").eq(t).attr("id")==a+y[g].id;i&&!r||0==n.find("select, input").eq(t).length?(t--,n.find("select, input").eq(t).closest(".field-item").after(l(y[g],a,s,!i))):r?n.find("select, input").eq(t).closest(".field-item").before(l(y[g],a,s,i)):n.find("select, input").eq(t).closest(".field-item").before(l(y[g],a,s,!i))}}else n.find("[data-uuid="+a+y[g].uuid+"]").closest(".field-item").remove()}).find("select:first").trigger("change")}var o,c,e,l=function(t,e,i,r){var n="",a=i?D.formAutocomplete&&f[t.id]?f[t.id].value:t.value||"":D.formAutocomplete&&h[t.id]?h[t.id].value:t.value||"";switch(t.type){case"TextArea":n='<textarea id="'+e+t.id+'" class="'+t.filter+'" data-uuid="'+e+t.uuid+'">'+a+"</textarea>";break;case"DropDownList":for("Country"!==t.id||a&&!Array.isArray(a)||(a=x(navigator.language||navigator.userLanguage)),n='<select id="'+e+t.id+'" class="'+t.filter+'" data-uuid="'+e+t.uuid+'">',c=0;c<t.value.length;c++)o=t.value[c].text==a||t.value[c].value==a?" selected":"",n+='<option value="'+t.value[c].value+'"'+o+">"+t.value[c].text+"</option>";n+="</select>";break;case"Attachment":n='<input type="File" id="'+e+t.id+'" value="'+a+'" class="'+t.filter+'" data-uuid="'+e+t.uuid+'">';break;case"Telephone":n='<input type="tel" id="'+e+t.id+'" value="'+a+'" class="'+t.filter+'" data-uuid="'+e+t.uuid+'">';break;default:var s=!1;"Email"==t.id&&1===D.registerUsers&&(j.utils.isValidEmail(a)?s=!0:a=""),n="<input "+(s?"readonly":"")+' type="'+t.type+'" id="'+e+t.id+'" value="'+a+'" class="'+t.filter+'" data-uuid="'+e+t.uuid+'">'}i="field-item",r='<div class="'+(i+=r?" first-column":" second-column")+'">';return r+='<div><label for="'+e+t.id+'">'+t.name+(t.mandatory?"*":"")+" </label></div><div>"+n+"</div></div>"},i="";for(g=0;g<y.length;g++)m=y[g],e=0<g?y[g-1].id:"","TextArea"==m.type&&0<g&&""!=i&&(i+="</div>"),g%2!=1&&e!=m.id||"TextArea"==m.type?i=(i+='<div class="field-row">')+l(m,"",!1,!0):i+=l(m,"",!1,!1),(g%2==1&&e!=m.id||g==y.length-1||"TextArea"==m.type)&&(v.append(i+="</div>"),i="");S.append(v.css("margin","0 auto")),t(v,"",!1);var r=v.find("input").first();if(r.length&&0===r.val().length&&r.focus(),D.showShipmentFields){var n=!1,a=0,s=!1,i="";for(_.append('<div class="field-row"><div class="field-item caption">'+A("cart_shipping_address")+"</div></div>"),g=0;g<y.length;g++)m=y[g],e=0<g?y[g-1].id:"",m.shipping&&(n=n||!!f[m.id],a%2==0&&e!=m.id?i=(i+='<div class="field-row">')+l(m,"shipping-",s=!0,!0):i+=l(m,"shipping-",!0,!1),a%2==1&&e!=m.id&&(s=!1,_.append(i+"</div>"),i=""),a++);s&&_.append(i+"</div>"),S.append(z('<div id="shippingForm" />').append(z('<input type="checkbox" id="chk-shipping"'+(n?" checked":"")+" />").on("change",function(){z(this).prop("checked")?z("#shippingFormWrapper").slideDown(250,function(){z("#imContent").triggerHandler("change")}):z("#shippingFormWrapper").slideUp(250,function(){z("#imContent").triggerHandler("change")})})).append(z('<label for="chk-shipping">'+A("cart_shipping_option")+"</label>"))).append(_),t(_,"shipping-",!0),_.css("margin","20px auto").wrap('<div id="shippingFormWrapper">'),n||z("#shippingFormWrapper").slideUp(0)}u=z('<div class="btn-action btn-next"><input type="button" class="btn-go-next" value="'+A("cart_step1_gonext",A("cart_gonext"))+'" /></div>').on("click",function(){var t,e,i,r,n=j.imForm.validate,a={type:D.formValidation,showAll:!0,position:"right"};for(h={},g=0;g<y.length;g++)"Country"==y[g].id?(h[y[g].id+"Code"]={label:y[g].name+" (ISO 3166/A2)",value:z("#"+y[g].id).val().toUpperCase()},h[y[g].id]={label:y[g].name,value:z("#"+y[g].id+" :selected").text()}):"Attachment"==y[g].id?(t=y[g].id,e=y[g].name,(i=z("#Attachment")[0].files[0])?((r=new FormData).append("attachment",i),N=function(e,i){var t=D.post_url;return t+=-1==t.indexOf("?")?"?":"&",h[e]={label:i,value:z("#"+y[g].id).val().replace(/^.*[\\\/]/,"")},j.utils.isOnline()?z.ajax({url:j.settings.currentPath+t+"action=uploadattachment&"+Math.round(1e4*Math.random()),type:"POST",dataType:"json",data:r,contentType:!1,cache:!1,processData:!1}).done(function(t){"ok"==t.status&&(h[e]={label:i,value:t.fileName})}):z.Deferred().resolve().promise()}(t,e)):h[y[g].id]={label:y[g].name,value:""}):h[y[g].id]={label:y[g].name,value:j.utils.htmlspecialchars(z("#"+y[g].id).val())};if(P.userInvoiceData(h),f={},D.showShipmentFields&&z("#chk-shipping").prop("checked"))for(g=0;g<y.length;g++)y[g].shipping&&("Country"==y[g].id?(f[y[g].id+"Code"]={label:y[g].name+" (ISO 3166/A2)",value:z("#shipping-"+y[g].id).val().toUpperCase()},f[y[g].id]={label:y[g].name,value:z("#shipping-"+y[g].id+" :selected").text()}):f[y[g].id]={label:y[g].name,value:j.utils.htmlspecialchars(z("#shipping-"+y[g].id).val())});P.userShippingData(f),n(v,a)&&(!D.showShipmentFields||!z("#chk-shipping").prop("checked")||z("#chk-shipping").prop("checked")&&n(_,a))&&(H.top.location.hash="#step2")}),p=z('<div class="btn-action"><input type="button" class="btn-go-back" value="'+A("cart_goback","Back")+'" /></div>').on("click",function(){H.top.location.hash=""}),S.append(z("<div />").addClass("buttons-container").append(p).append(u)),b(),d&&j.utils.scrollTo("#"+d)})):T.location.hash=""}function l(){var t,a=null,e=(P.cart(),P.payment()),i=P.shipping();P.canSetOrder().success?P.isSetUserData()?(o(),z(".imTip").remove(),j.utils.scrollTo(0),k.attr("data-step","3"),C.empty(),S.empty(),j.cart.ui.steps.active&&(z("#im-cart-steps-banner").remove(),w.prepend(j.cart.ui.getStepStyleDom(2))),C.append('<h2 id="imPgTitle" class="imTitleMargin">'+A("cart_step3")+"</h2>").append("<p>"+A("cart_step3_descr").replace("[FIELD]",A("cart_step3_gonext"))+"</p>"),t='<div class="invoice-shipping-container">',t=(t+=U())+$(),S.append(t+="</div>"),i&&c(!0,!0),e&&F(!0,!0),I(!0,!0),r(S),t=z('<div class="btn-action btn-next"><input type="button" class="btn-go-next" value="'+A("cart_step3_gonext",A("cart_gonext"))+'" /></div>').on("click",function(t,e){var i=P.canSetOrder(),r=z(this),n=r.attr("value"),e=null!=e?e:z("#agreement-text");if(P.form().acceptAgreement&&!j.imForm.validate(e))return!1;!0!==i.success?H.alert(i.message):(r.attr("value",A("cart_order_process")).off("click"),a.off("click").hide(),N.done(function(t){void 0===t||"ok"==t.status?P.setOrder(P.getCountryCode(!0),function(t){t.success?T.location.hash="#step4":(r.attr("value",n),H.alert(t.message))}):H.alert(A("cart_err_attachment_generic"))}).fail(function(t){H.alert(A("cart_err_attachment_generic"))}))}),a=z('<div class="btn-action"><input type="button" class="btn-go-back" value="'+A("cart_step3_goback",A("cart_goback"))+'" /></div>').on("click",function(){0==P.allowedShippingsCount()&&0==P.paymentsCount()?H.top.location.hash="#step1":T.location.hash="#step2"}),S.append(z('<div style="margin-top: 2em;" />').addClass("buttons-container").append(a).append(t)),O(A("cart_step3_gonext"),P),b(),s()):T.location.hash="#step1":T.location.hash=""}function d(t){t=void 0===t||t;var e=P.payment(),i=P.paymentHTML();if(o(),t){if(!P.canSetOrder().success)return T.location.hash="";if(!P.isSetUserData())return T.location.hash="#step1";if(!P.orderNumber())return T.location.hash="#step3"}z(".imTip").remove(),j.utils.scrollTo(0),k.attr("data-step","4"),S.empty(),C.empty(),j.cart.ui.steps.active&&(z("#im-cart-steps-banner").remove(),w.prepend(j.cart.ui.getStepStyleDom(3))),C.append('<h2 id="imPgTitle" class="imTitleMargin">'+A("cart_step4")+"</h2>").append("<p>"+A("cart_step4_descr")+"</p>"),S.append('<div class="summary">  <div class="ord-number">    <div class="ord-number-col col">'+A("cart_order_no")+':</div>    <div class="ord-number-val">'+P.orderNumber()+'</div>  </div>  <div class="ord-date">    <div class="ord-date-col col">'+A("cart_order_date")+':</div>    <div class="ord-date-val">'+j.utils.getCurrentDate()+'</div>  </div>  <div class="ord-total">    <div class="ord-total-col col">'+A("cart_total")+':</div>    <div class="ord-total-val">'+P.formatCurrency(P.price(_,!0,!0)).replace(/\s/g,"&nbsp;")+"</div>  </div></div>"),S.append('<hr class="summary-line">'),e&&(t='<div class="payment-container">',e.image()&&""!=e.image()&&(t+='<div class="payment-image-cont"><img class="payment-image" src="../'+e.image()+'" alt="'+e.name()+'" /></div>'),t=t+('<div class="payment-data-cont"><p><b>'+e.name()+"</b><br />"+e.email())+"</p></div></div>",""!==i&&(t+='<div id="payment-html">'+i+"</div>"),S.append(t)),j.utils.isOnline()||j.utils.showOfflineMessage(A("cart_err_offline_email").replace(/\[MAIL\]/g,P.userInvoiceData().Email.value)),P.empty(!0),b()}var u=z("#cart-loading"),w=z("#imCartContainer"),k=z("#cart-container"),C=z("#cart-header"),S=z("#cart-content"),p=z("#cart-sidebar"),P=j.cart.manager,T=j.cart.ui.getWindow(),D=P.settings(),m=D.vattype,v="included"==m,_=void 0,y=j.cart.ui.showProductIcons,N=z.Deferred().resolve().promise(),A=j.l10n.get,h='<div id="cart-empty"><h2 style="text-align: center; line-height: 1.5; font-size: 28px; font-weight: 400; text-rendering: optimizeLegibility;">'+A("cart_err_emptycart","The cart is empty")+'</h2><p style="text-align: center; margin-top: 10px; line-height: 1.2;">'+A("cart_err_emptycart_desc",'To add items to your cart, browse the site and, when you find an item that interests you, click on "Add to cart".')+'</p><div style="text-align: center; margin-top: 20px;"><input type="button" value="'+A("cart_continue_shopping","Continue shopping")+'" /></div></div>',M=null,e=null,f=null,g=null,i=function(t){var e=t.count(!0),i=e<2?A("cart_article","product"):A("cart_articles","products"),r="",n="included"===m;return r+='<div class="cart-total big-font"><span class="price-desc">'+e+" "+i+"</span><span>"+t.formatCurrency(t.goodsPrice(_,n)).replace(/\s/g,"&nbsp;")+"</span></div>","none"!==m&&(r+='<div class="cart-vat"><span class="price-desc">'+(n?A("cart_vat_included","[NAME] (Included)"):A("cart_vat_excluded","[NAME] (Excluded)")).replace("[NAME]",t.goodsVatName(_))+"</span><span>"+t.formatCurrency(t.goodsVat(_)).replace(/\s/g,"&nbsp;")+"</span></div>"),r},O=function(t,e){t='<table class="cart-table sidebar" cellpadding="0" cellspacing="0" border="0" style="margin-bottom: 0;"><thead><tr><td class="first-x last-x">'+A("cart_order_summary","Order Summary")+'</td></tr></thead><tbody><tr><td class="first-x last-x last-y">'+q(t,e)+"</td></tr></tbody></table>",t=z(t);p.html("").append(t),z("#cart-sidebar input.btn-proceed-to-order").on("click",function(){3==parseInt(z("#cart-container").attr("data-step"))?z("#cart-container .btn-action.btn-next").find("[type=button]").trigger("click",[z("#agreement-text-sidebar")]):z("#cart-container .btn-action.btn-next").find("[type=button]").trigger("click")}),r(z("#cart-sidebar .agreement-cont"),!0)},q=function(t,e){var i="",r=e.count(!0),n=r<2?A("cart_article","product"):A("cart_articles","products"),a=(i+='<div class="provisional-amount"><p style="line-height: 1.5;"'+(""!==A("cart_provisional_amount_info")?" onmouseover=\"x5engine.imTip.Show(this, {target: $(this).find('img'), text: '"+A("cart_provisional_amount_info").replace("'","&amp;apos;").replace('"',"&amp;quot;")+"'})\"":"")+">"+A("cart_provisional_amount","Provisional amount")+(""!==A("cart_provisional_amount_info")?' <img alt="" width="16" height="16" src="../res/info.gif" style="vertical-align: text-bottom;" />':"")+"</p></div>","included"===m),s=e.goodsPrice(_,a),o=null!=e.payment()?e.paymentPrice(e.payment().id(),_,a,!1):void 0,a=null!=e.shipping()?e.shipping().price(_,a,e.goodsWeight(),e.goodsPrice(_,v),e.getCountryCode()):void 0,c=e.vat(_),l=e.vatName(_),d=e.price(_,!0,!0);switch(i+='<div class="cart-total s-flex"><span class="s-cell-desc ">'+r+" "+n+'</span><span class="s-cell right">'+e.formatCurrency(s).replace(/\s/g,"&nbsp;")+"</span></div>",null!=a&&(i+='<div class="cart-total s-flex"><span class="s-cell-desc ">'+A("cart_shipping")+'</span><span class="s-cell right">'+e.formatCurrency(a).replace(/\s/g,"&nbsp;")+"</span></div>"),null!=o&&(i+='<div class="cart-total s-flex"><span class="s-cell-desc ">'+A("cart_payment")+'</span><span class="s-cell right">'+e.formatCurrency(o).replace(/\s/g,"&nbsp;")+"</span></div>"),""!==e.coupon()&&(0<e.cartDiscount()?i+='<div class="cart_coupon_code s-flex"><span class="s-cell-desc">'+A("cart_coupon_code","Coupon Code")+" ("+e.coupon()+')</span><span class="s-cell right">-'+e.formatCurrency(e.cartDiscount()).replace(/\s/g,"&nbsp;")+"</span></div>":i+='<div class="cart_coupon_code s-flex"><span class="s-cell-desc">'+A("cart_coupon_code","Coupon Code")+'</span><span class="s-cell right">'+e.coupon().replace(/\s/g,"&nbsp;")+"</span></div>"),m){case"excluded":i=(i+='<div class="cart-vat s-flex"><span class="s-cell">'+l+'</span><span class="s-cell right">'+e.formatCurrency(c).replace(/\s/g,"&nbsp;")+"</span></div>")+('<div class="cart-total s-flex big-font"><span class="s-cell">'+A("cart_total")+'</span><span class="s-cell right">'+e.formatCurrency(d).replace(/\s/g,"&nbsp;")+"</span></div>");break;case"included":i=(i+='<div class="cart-total s-flex big-font"><span class="s-cell-desc">'+A("cart_total")+'</span><span class="s-cell right">'+e.formatCurrency(d).replace(/\s/g,"&nbsp;")+"</span></div>")+('<div class="cart-vat-included s-flex"><span class="s-cell-desc">&nbsp;</span><span class="s-cell right vat">'+A("cart_vat_included","[NAME] (Included)").replace("[NAME]",l)+": "+e.formatCurrency(c).replace(/\s/g,"&nbsp;")+"</span></div>");break;case"none":i+='<div class="cart-total s-flex big-font"><span class="s-cell">'+A("cart_total")+'</span><span class="s-cell right">'+e.formatCurrency(d).replace(/\s/g,"&nbsp;")+"</span></div>"}return e.mustShowPayLater()&&(i+='<div class="ppcp-pay-later"></div>'),i=(i+='<div class="agreement-cont"></div>')+('<div class="s-flex proceed-to-order"><input type="button" class="btn-proceed-to-order" value="'+(t=null!=t?t:A("cart_proceedtoorder"))+'" /></div>')},I=function(t,e){var i,r=P.cart(),n=!1,a=!1,s="",o="",c=A("cart_article").charAt(0).toUpperCase()+A("cart_article").slice(1),l=!1;for(s in r)if(null!==r[s].option()){n=!0;break}for(s in o+='<div><table class="cart-table products-table" cellpadding="0" cellspacing="0" border="0" style="margin-bottom: 0;"><thead><tr><td class="first-column">'+c+(n?" / "+A("cart_opt"):"")+'</td><td class="second-column mobile-hide">'+A("cart_price")+"</td></tr></thead><tbody>",r)if(i=r[s]){var d,u=i.base().options,a=!1,p=i.singlePrice(_,v),o=(o+="<tr>")+'<td style="position: relative;" class="first-column">'+'<div class="product-col-image-details">';if(y&&i.base().media.length?o+='<div class="product-image-cont'+(e?" image-small":"")+'"><img class="product-image" src="../'+("video"===(d=i.base().media[0]).type||"youtube"===d.type||"vimeo"===d.type?"res/video_thumb.svg":j.utils.isNullOrEmpty(d.url)?x5CartData.settings.noPreviewImage:d.url)+'" alt="'+i.base().name+'" /></div>':o+='<div class="product-image-cont" style="width: 1px; min-width: 1px;"></div>',o=(o+='<div class="product-info">')+('<div class="product-name product-data-info">'+i.base().name+"</div>"),""!=i.base().description&&(o=o+('<div class="product-description product-data-info field-space">'+i.base().description)+'<div class="product-description-fade"></div></div>'),n&&0<i.base().optionsLength()){if(l=!0,t)o=(o+='<div class="product-options product-data-info field-space">')+'<span class="lbl-variant">'+u[i.option()].name+"</span>",a="object"==typeof u[i.option()].suboptions;else{for(var h in o=o+'<div class="product-options product-data-info">'+('<select data-type="option" data-hash="'+s+'" class="field-space" style="margin-right: 5px;">'),u)o+='<option value="'+h+'"'+(i.option()==h?" selected":"")+">"+u[h].name+"</option>",i.option()==h&&(a="object"==typeof i.base().options[h].suboptions);o+="</select>"}if(a){var f=i.base().options[i.option()].suboptions;if(t)o+=' | <span class="lbl-sub-variant">'+u[i.option()].suboptions[i.subOption()]+"</span>";else{o+='<select data-type="suboption" data-hash="'+s+'" class="field-space">';for(var g=0;g<f.length;g++)o+='<option value="'+g+'"'+(g==i.subOption()?" selected":"")+">"+f[g]+"</option>";o+="</select>"}}o+="</div>"}else o+='<div class="product-options product-data-info field-space"><select data-type="suboption" style="visibility: hidden;"><option value="-1"></option></select></div>';o+='<div class="price-mobile mobile-show field-space">',0<i.discount()&&(o+='<span style="text-decoration: line-through; margin-right: 0.5em">'+P.formatCurrency(i.singleFullPrice(_,v)).replace(/\s/g,"&nbsp;")+"</span>"),o+='<span style="font-size: 1.2em;">'+P.formatCurrency(p).replace(/\s/g,"&nbsp;")+"</span>","none"!=m&&0<p&&("included"==m?o+='<div style="font-size: 0.8em;">'+A("cart_vat_included","[NAME] (included)").replace("[NAME]",i.vatName(_))+": "+P.formatCurrency(i.vat(_)/i.quantity()).replace(/\s/g,"&nbsp;")+"</div>":"excluded"==m&&(o+='<div style="font-size: 0.8em;">'+A("cart_vat_excluded","[NAME] (excluded)").replace("[NAME]",i.vatName(_))+": "+P.formatCurrency(i.vat(_)/i.quantity()).replace(/\s/g,"&nbsp;")+"</div>")),o=(o=o+"</div>"+'<div class="product-quantity product-data-info">')+('<span class="product-quantity-desc">'+A("cart_qty")+":  </span>"),t?o+="<span>"+i.quantity()+" </span>":o=(o+='<input data-hash="'+s+'" type="number" min="1" value="'+i.quantity()+'"">')+'<span>|</span><span class="product-remove" data-hash="'+s+'" data-action="delete"> '+A("cart_remove")+"</span>",o=(o=(o=o+"</div>"+"</div>")+"</div>"+"</td>")+'<td class="text-right mobile-hide second-column">'+'<div class="col-price">',0<i.discount()&&(o+='<div style="text-decoration: line-through; ">'+P.formatCurrency(i.singleFullPrice(_,v)).replace(/\s/g,"&nbsp;")+"</div>"),o+='<div style="font-size: 1.2em;">'+P.formatCurrency(p).replace(/\s/g,"&nbsp;")+"</div>","none"!=m&&0<p&&(o+='<div style="font-size: 0.8em;">',"included"==m?o+=A("cart_vat_included","[NAME] (included)").replace("[NAME]",i.vatName(_))+": ":"excluded"==m&&(o+=A("cart_vat_excluded","[NAME] (excluded)").replace("[NAME]",i.vatName(_))+": "),o+=P.formatCurrency(i.singleVat(_)).replace(/\s/g,"&nbsp;")+"</div>"),o=(o+="</div>")+"</td>"+"</tr>"}(o=z(o+="</tbody></table></div>")).find("tbody > tr:odd > td").not(".invisible").addClass("odd"),o.find("tbody > tr:odd > td .product-description-fade").not(".invisible").addClass("odd"),o.find("table").each(function(i){var t=z(this).find("tr");t.each(function(t){var e=z(this).find("td").not(".invisible");e.first().addClass("first-x"),e.last().addClass("last-x"),1==i&&0===t&&e.css({"border-top-left-radius":0,"border-top-right-radius":0,"border-top-color":"transparent"})}),t.last().find("td").not(".invisible").addClass("last-y")}),o.find("select").on("change",function(){var t,e=z(this),i=e.attr("data-hash"),r=null;return i&&(r=P.cart()[i])&&(e="option"==e.attr("data-type")?(t=e.val(),r.base().options[t].suboptions?0:null):(t=r.option(),e.val()),P.update(i,+r.quantity(),t,e).always(function(){var t;P.canApplyCoupon()&&(t=P.coupon())&&t.length&&P.coupon(t,!0),I(),E(),O(A("cart_proceedtoorder"),P)}).fail(function(t){H.alert(t.message)})),!1}),o.find(".product-remove[data-action=delete]").on("click",function(){var t=z(this).attr("data-hash");if(H.confirm(A("cart_remove_q"))&&t&&P.remove(t)){if(0===P.count())return void R();I(),E(),O(A("cart_proceedtoorder"),P)}return!1}),o.find("input").on("change",function(){var t=z(this),e=z(this).attr("data-hash"),t=t.val();return r[e]&&P.update(e,t,r[e].option(),r[e].subOption()).always(function(){I(),E(),O(A("cart_proceedtoorder"),P)}).fail(function(t){H.alert(t.message)}),!1}),null===M?S.append(o):M.replaceWith(o),M=o,l||z(o).find(".product-options").css("display","none"),j.responsive.isMobileDevice()||(c=j.utils.getCurrentBrowser(),z(".product-description").css({overflow:"hidden"}),z(".product-description-fade").show(),z(".product-description").hover(function(){z(this).css("overflow","auto"),z(this).children(".product-description-fade").css("visibility","hidden")},function(){z(this).css("overflow","hidden"),z(this).children(".product-description-fade").css("visibility","visible")}),"Microsoft Edge"!=c&&"Microsoft Internet Explorer"!=c||(z(".product-description").hover(function(){z(this).css("overflow-y","auto")},function(){z(this).css("overflow-y","hidden")}),z(".product-description .product-description-fade").remove()))},E=function(){var t='<div class="price-container">'+i(P)+"</div>",t=z(t);null===e?z(".container-copoun-and-totalprice").append(t):e.replaceWith(t),e=t},F=function(t,e){var i,r=P.payment(),n="";if(e?(i={})[r.id()]=r:i=P.payments(),0!==P.paymentsCount()){var a,n='<div><table cellpadding="0" cellspacing="0" border="0" class="cart-table pay-table"><thead><tr><td class="first-column">'+A("cart_payment")+'</td><td class="second-column mobile-hide">'+A("cart_price")+"</td></tr></thead><tbody>";for(a in i){var s=""!=i[a].name()?i[a].name():"&nbsp;",o=""!=i[a].description()?i[a].description():"&nbsp;",c=P.paymentPrice(a,_,v,!1);n=(n+='<td class="first-column">')+'<div class="ship-pay-all-cont">'+'<div class="ship-pay-cont">',t||(n+='<div class="ship-pay-chk-cont"><input type="radio" id="chk-payment-'+a+'" name="payment-method" data-id="'+a+'"'+(r&&r.id()==a?" checked":"")+"></div>"),i[a].image()?n+='<div class="ship-pay-image-cont"><img class="ship-pay-image" src="../'+i[a].image()+'" alt="'+s+'" /></div>':n+='<div class="ship-pay-image-cont" style="width: 1px; min-width: 1px;"></div>',n=n+'<div class="ship-pay-name-desc-cont">'+('<label for="chk-payment-'+a+'"><b>'+s+"</b><p>"+o+"</p></label>"),!e&&i[a].extra()&&!0===i[a].extra().ppcpPayLater&&(s=i[a].image()?"none":"primary",n+='<div data-pp-message data-pp-amount="'+P.price(_,!0,!0)+'" data-pp-placement="payment" data-pp-style-layout="text" data-pp-style-logo-type="'+s+'"></div>'),n=(n+='<div class="price-mobile mobile-show field-space-reverse text-right">')+('<div style="font-size: 1.2em;">'+P.formatCurrency(c)+"</div>"),n=(n=(n=(n=(n="none"!=m&&0<c?(n=(n+='<div style="font-size: 0.8em;">')+("included"==m?A("cart_vat_included","[NAME] (included)").replace("[NAME]",P.paymentVatName(a,_))+": ":A("cart_vat_excluded","[NAME] (excluded)").replace("[NAME]",P.paymentVatName(a,_))+": "))+P.formatCurrency(P.paymentVat(a,_,!1))+"</div>":n)+"</div>"+"</div>")+"</div>"+"</div></td>")+'<td class="text-right mobile-hide second-column">'+'<div class="col-price-ship-pay">')+('<div style="font-size: 1.2em;">'+P.formatCurrency(c)+"</div>"),"none"!=m&&0<c&&(n=(n=(n+='<div style="font-size: 0.8em;">')+("included"==m?A("cart_vat_included","[NAME] (included)").replace("[NAME]",P.paymentVatName(a,_))+": ":A("cart_vat_excluded","[NAME] (excluded)").replace("[NAME]",P.paymentVatName(a,_))+": "))+P.formatCurrency(P.paymentVat(a,_,!1))+"</div>"),n=(n+="</div>")+"</td>"+"</tr>"}(n=z(n+="</tbody></table></div>")).find("tbody > tr:odd > td").not(".invisible").addClass("odd"),n.find("tr").each(function(){var t=z(this).find("td").not(".invisible");t.first().addClass("first-x"),t.last().addClass("last-x")}),n.find("tr").last().find("td").not(".invisible").addClass("last-y"),n.find("input").on("click",function(){var t=z(this).attr("data-id");t&&(P.payment(t),O(A("cart_gonext"),P))}),null===g?S.append(n):g.replaceWith(n),g=n}},r=function(t,e){var i;(P.form().acceptAgreement||P.form().agreement)&&(i='<div class="small-font">'+P.form().agreement+"</div>",i=z("<div id="+(e?"agreement-text-sidebar":"agreement-text")+' class="agreement-text-c m-b" />').append(i),t.append(i),P.form().acceptAgreement&&(t='<input type="checkbox" id="'+(e?"chk-agreement-sidebar":"chk-agreement")+'" class="chk-agreement mandatory">',t+='<label for="'+(e?"chk-agreement-sidebar":"chk-agreement")+'" class="label-chk-agreement" id="'+(e?"lbl-agreement-sidebar":"lbl-agreement")+'">'+A("cart_agree","I Agree")+"</label>",e=z('<div style="margin-bottom: 10px;" />').append(t),i.prepend(e),z("#cart-container label.label-chk-agreement").click(function(t){var e=!z("#cart-container input.chk-agreement").prop("checked");z("#cart-container input.chk-agreement").prop("checked",e),t.stopImmediatePropagation(),t.preventDefault()}),z("#cart-container input#chk-agreement").click(function(t){var e=z(this).is(":checked");z("#cart-container input#chk-agreement-sidebar").prop("checked",e)}),z("#cart-container input#chk-agreement-sidebar").click(function(t){var e=z(this).is(":checked");z("#cart-container input#chk-agreement").prop("checked",e)})))},$=function(){var t=P.userShippingData(),e="";return D.showShipmentFields&&"{}"!=JSON.stringify(t)&&("Company"in t&&t.Company.value&&(e+='<div class="shipping-resume-field field-line">'+t.Company.value+"</div>"),("Name"in t&&t.Name.value||"LastName"in t&&t.LastName.value||"Email"in t&&t.Email.value)&&(e=(e=(e+='<div class="shipping-resume-field field-line">')+("Name"in t?t.Name.value+" ":""))+("LastName"in t?t.LastName.value+" ":"")+"</div>"),"Email"in t&&t.Email.value&&(e+='<div class="shipping-resume-field field-line">'+t.Email.value+"</div>"),"Address1"in t&&t.Address1.value&&(e+='<div class="shipping-resume-field field-line">'+t.Address1.value+"</div>"),"Address2"in t&&t.Address2.value&&(e+='<div class="shipping-resume-field field-line">'+t.Address2.value+"</div>"),("ZipPostalCode"in t&&t.ZipPostalCode.value||"City"in t&&t.City.value||"StateRegion"in t&&t.StateRegion.value)&&(e=(e=(e=(e+='<div class="shipping-resume-field field-line">')+("ZipPostalCode"in t&&""!=t.ZipPostalCode.value?t.ZipPostalCode.value+", ":""))+("City"in t?t.City.value+" ":""))+("StateRegion"in t&&""!=t.StateRegion.value?" ("+t.StateRegion.value+")":"")+"</div>"),"Country"in t&&t.Country.value&&(e+='<div class="shipping-resume-field field-line">'+t.Country.value+"</div>"),"Phone"in t&&t.Phone.value&&(e+='<div class="shipping-resume-field field-line">'+t.Phone.value+"</div>"),"Note"in t&&t.Note.value&&(e+='<div class="shipping-resume-field"><u>'+t.Note.label+":</u> "+t.Note.value+"</div>"),""!=e&&(e='<div class="shipping-resume m-b"><table class="cart-table" cellpadding="0" cellspacing="0" border="0"><thead><tr><td class="first-x last-x">'+A("cart_shipping_address","Shipping address")+'</td></tr></thead><tbody><tr><td class="first-x last-x last-y">'+e+"</td></tr></tbody></table></div>")),e},U=function(){var t=P.userInvoiceData(),e="";return t&&("Company"in t&&t.Company.value&&(e+='<div class="invoice-resume-field field-line">'+t.Company.value+"</div>"),("Name"in t&&t.Name.value||"LastName"in t&&t.LastName.value||"Email"in t&&t.Email.value)&&(e=(e=(e+='<div class="invoice-resume-field field-line">')+("Name"in t?t.Name.value+" ":""))+("LastName"in t?t.LastName.value+" ":"")+"</div>"),"Email"in t&&t.Email.value&&(e+='<div class="shipping-resume-field field-line">'+t.Email.value+"</div>"),"Address1"in t&&t.Address1.value&&(e+='<div class="invoice-resume-field field-line">'+t.Address1.value+"</div>"),"Address2"in t&&t.Address2.value&&(e+='<div class="invoice-resume-field field-line">'+t.Address2.value+"</div>"),("ZipPostalCode"in t&&t.ZipPostalCode.value||"City"in t&&t.City.value||"StateRegion"in t&&t.StateRegion.value)&&(e=(e=(e=(e+='<div class="invoice-resume-field field-line">')+("ZipPostalCode"in t&&""!=t.ZipPostalCode.value?t.ZipPostalCode.value+", ":""))+("City"in t?t.City.value+" ":""))+("StateRegion"in t&&""!=t.StateRegion.value?" ("+t.StateRegion.value+")":"")+"</div>"),"Country"in t&&t.Country.value&&(e+='<div class="invoice-resume-field field-line">'+t.Country.value+"</div>"),"Phone"in t&&t.Phone.value&&(e+='<div class="invoice-resume-field field-line">'+t.Phone.value+"</div>"),"Attachment"in t&&t.Attachment.value&&(e+='<div class="invoice-resume-field field-line"><u>'+t.Attachment.label+":</u> "+t.Attachment.value+"</div>"),"Note"in t&&t.Note.value&&(e+='<div class="invoice-resume-field"><u>'+t.Note.label+":</u> "+t.Note.value+"</div>"),""!=e&&(e='<div class="invoice-resume m-b"><table class="cart-table" cellpadding="0" cellspacing="0" border="0"><thead><tr><td class="first-x last-x">'+A("cart_vat_address","Invoice Address")+'</td></tr></thead><tbody><tr><td class="first-x last-x last-y">'+e+"</td></tr></tbody></table></div>")),e},n={"af-za":"ZA","ar-ae":"AE","ar-bh":"BH","ar-dz":"DZ","ar-eg":"EG","ar-iq":"IQ","ar-jo":"JO","ar-kw":"KW","ar-lb":"LB","ar-ly":"LY","ar-ma":"MA","ar-om":"OM","ar-qa":"QA","ar-sa":"SA","ar-sy":"SY","ar-tn":"TN","ar-ye":"YE","az-az":"AZ","be-by":"BY","bg-bg":"BG","bs-ba":"BA","ca-es":"ES","cs-cz":"CZ","cy-gb":"GB","da-dk":"DK","de-at":"AT","de-ch":"CH","de-de":"DE","de-li":"LI","de-lu":"LU","dv-mv":"MV","el-gr":"GR","en-au":"AU","en-bz":"BZ","en-ca":"CA","en-gb":"GB","en-ie":"IE","en-jm":"JM","en-nz":"NZ","en-ph":"PH","en-tt":"TT","en-us":"US","en-za":"ZA","en-zw":"ZW","es-ar":"AR","es-bo":"BO","es-cl":"CL","es-co":"CO","es-cr":"CR","es-do":"DO","es-ec":"EC","es-es":"ES","es-gt":"GT","es-hn":"HN","es-mx":"MX","es-ni":"NI","es-pa":"PA","es-pe":"PE","es-pr":"PR","es-py":"PY","es-sv":"SV","es-uy":"UY","es-ve":"VE","et-ee":"EE","eu-es":"ES","fa-ir":"IR","fi-fi":"FI","fo-fo":"FO","fr-be":"BE","fr-ca":"CA","fr-ch":"CH","fr-fr":"FR","fr-lu":"LU","fr-mc":"MC","gl-es":"ES","gu-in":"IN","he-il":"IL","hi-in":"IN","hr-ba":"BA","hr-hr":"HR","hu-hu":"HU","hy-am":"AM","id-id":"ID","is-is":"IS","it-ch":"CH","it-it":"IT","ja-jp":"JP","ka-ge":"GE","kk-kz":"KZ","kn-in":"IN","ko-kr":"KR","kok-in":"IN","ky-kg":"KG","lt-lt":"LT","lv-lv":"LV","mi-nz":"NZ","mk-mk":"MK","mn-mn":"MN","mr-in":"IN","ms-bn":"BN","ms-my":"MY","mt-mt":"MT","nb-no":"NO","nl-be":"BE","nl-nl":"NL","nn-no":"NO","ns-za":"ZA","pa-in":"IN","pl-pl":"PL","ps-af":"AF","pt-br":"BR","pt-pt":"PT","qu-bo":"BO","qu-ec":"EC","qu-pe":"PE","ro-ro":"RO","ru-ru":"RU","sa-in":"IN","se-fi":"FI","se-no":"NO","se-se":"SE","sk-sk":"SK","sl-si":"SI","sq-al":"AL","sr-ba":"BA","sv-fi":"FI","sv-se":"SE","sw-ke":"KE","syr-sy":"SY","ta-in":"IN","te-in":"IN","th-th":"TH","tl-ph":"PH","tn-za":"ZA","tr-tr":"TR","tt-ru":"RU","uk-ua":"UA","ur-pk":"PK","uz-uz":"UZ","vi-vn":"VN","xh-za":"ZA","zh-cn":"CN","zh-hk":"HK","zh-mo":"MO","zh-sg":"SG","zh-tw":"TW","zu-za":"ZA",af:"ZA",ar:"AE",az:"AZ","az-cyrl-az":"AZ",be:"BY",bg:"BG",ca:"ES",cs:"CZ",cy:"GB",da:"DK",de:"DE",dv:"MV",el:"GR",en:"GB","en-cb":"VG",eo:"FR",es:"ES",et:"EE",eu:"ES",fa:"IR",fi:"FI",fo:"FO",fr:"FR",gl:"ES",gu:"IN",he:"IL",hi:"IN",hr:"HR",hu:"HU",hy:"AM",id:"ID",is:"IS",it:"IT",ja:"JP",ka:"GE",kk:"KZ",kn:"IN",ko:"KR",kok:"IN",ky:"KG",lt:"LT",lv:"LV",mi:"NZ",mk:"MK",mn:"MN",mr:"IN",ms:"MY",mt:"MT",nb:"NO",nl:"NL",ns:"ZA",pa:"IN",pl:"PL",ps:"AF",pt:"PT",qu:"PE",ro:"RO",ru:"RU",sa:"IN",se:"FI",sk:"SK",sl:"SI",sq:"AL","sr-cyrl-ba":"BA","sr-sp":"RS","sr-cyrl-sp":"RS",sv:"SE",sw:"KE",syr:"SY",ta:"IN",te:"IN",th:"TH",tl:"PH",tn:"ZA",tr:"TR",tt:"RU",ts:"MZ",uk:"UA",ur:"PK",uz:"UZ","uz-cyrl-uz":"UZ",vi:"VN",xh:"ZA",zh:"CN",zu:"ZA"},R=function(){var t=null,e=null;if(o(),z(".imTip").remove(),j.utils.scrollTo(0),k.attr("data-step","0"),S.empty(),C.empty(),z("#im-cart-steps-banner").remove(),0===P.count())return p.empty(),0===w.find("#cart-empty").length&&w.prepend(h),e=w.find("[type=button]"),j.cart.ui.canResumeShopping()||e.hide(),void e.on("click",j.cart.ui.resumeShopping);C.append('<h2 id="imPgTitle" class="imTitleMargin">'+A("cart_shopping_cart")+"</h2>"),C.append("<p>"+A("cart_step0_cartlist").replace("[FIELD]",A("cart_step0_gonext"))+"</p>"),I(),S.append('<div class="container-copoun-and-totalprice"></div>'),P.canApplyCoupon()&&z(".container-copoun-and-totalprice").append(z('<div class="coupon-code-container" />').html("<p>"+A("cart_coupon_description","Enter your Coupon Code here")+'</p><input type="text" style="margin: 5px 0.8em 0 0;" id="x5CouponCode" placeholder="'+A("cart_coupon_code","Coupon Code")+'" value="'+P.coupon()+'">').append(z('<input type="button" style="margin: 5px 5px 0 0;" id="x5ApplyCouponCode" value="'+A("cart_apply","Apply")+'" />').on("click",function(){var t=z("#x5CouponCode").val(),i=z(this),r=i.val();t.length&&(i.val(A("cart_loading","Loading...")),P.coupon(t,!0,function(t){var e=z("<span />").text(""!==t?A("cart_coupon_enabled","The coupon is active"):A("cart_coupon_disabled","The coupon is not active")).addClass("alert").addClass(""!==t?"alert-green":"alert-red").fadeOut(0);i.siblings(".alert").stop(!1,!1).remove(),i.after(e),e.fadeIn().delay(1e4).fadeOut(250,function(){z(this).remove()}),I(),E(),O(A("cart_proceedtoorder"),P),z("#x5CouponCode").val(t),i.val(r),b(),""!==t&&j.responsive.isMobileDevice()&&j.utils.scrollTo("#cart-sidebar")}))}))),E(),e=z('<div class="btn-action"><input type="button" class="btn-go-back" value="'+A("cart_continue_shopping","Continue shopping")+'" /></div>'),j.cart.ui.canResumeShopping()||e.find("[type=button]").hide(),e.find("[type=button]").on("click",j.cart.ui.resumeShopping),(t=z('<div class="btn-action btn-next"><input type="button" class="btn-go-next" value="'+A("cart_proceedtoorder","Proceed to order")+'" /></div>')).find("[type=button]").on("click",function(){var t=P.minimumAmountReached();!0!==t.success?H.alert(t.message):T.location.hash="#step1"}),S.append(z("<div />").addClass("buttons-container").append(e).append(t));for(var i=P.userShippingData(),r=!z.isEmptyObject(i),n=(r||(i=P.userInvoiceData()),P.form().fields),a=0;a<n.length;a++)if("Country"==n[a].id){i[n[a].id+"Code"]||(i[n[a].id+"Code"]={label:n[a].name+" (ISO 3166/A2)",value:x(navigator.language||navigator.userLanguage)},r?P.userShippingData(i):P.userInvoiceData(i));break}O(A("cart_proceedtoorder"),P),P.mustShowPayLater()&&paypal&&paypal.Messages&&(e={amount:P.price(_,!0,!0),placement:"cart",style:{layout:"text",logo:{position:"top"},text:{size:11}}},paypal.Messages(e).render(".ppcp-pay-later")),b(),s()};!function t(e){if(e=e||!1)u.fadeOut(250,t);else{_=P.getCountryCode(!0);var i,r,e=j.utils.getParam("paynow");if(e)P.restore(e),d(!1);else{var n=T.location.hash.replace("#","").split("/");switch(n[0]){case"step1":a(1<n.length?n[1]:null);break;case"step2":P.canSetOrder().success?P.isSetUserData()?0==P.allowedShippingsCount()&&0==P.paymentsCount()?H.top.location.hash="#step3":(r=i=null,o(),z(".imTip").remove(),j.utils.scrollTo(0),k.attr("data-step","2"),C.empty(),S.empty(),j.cart.ui.steps.active&&(z("#im-cart-steps-banner").remove(),w.prepend(j.cart.ui.getStepStyleDom(1))),C.append('<h2 id="imPgTitle" class="imTitleMargin">'+A("cart_step2")+"</h2>"),C.append("<p>"+A("cart_step2_shiplist").replace("[FIELD]",A("cart_gonext"))+"</p>"),c(),F(),r=z('<div class="btn-action"><input type="button" class="btn-go-back" value="'+A("cart_goback","Back")+'" /></div>').on("click",function(){H.top.location.hash="#step1"}),i=z('<div class="btn-action btn-next"><input type="button" class="btn-go-next" value="'+A("cart_gonext","Next")+'" /></div>').on("click",function(){var t=P.canSetOrder();!0!==t.success?H.alert(t.message):T.location.hash="#step3"}),S.append(z("<div />").addClass("buttons-container").append(r).append(i)),g&&1==g.find("input[type=radio]").length?g.find("input[type=radio]").trigger("click"):g&&!P.payment()&&g.find("input[type=radio]:first").trigger("click"),f&&1==f.find("input[type=radio]").length?f.find("input[type=radio]").trigger("click"):f&&!P.shipping()&&f.find("input[type=radio]:first").trigger("click"),O(A("cart_gonext"),P),b(),s()):T.location.hash="#step1":T.location.hash="";break;case"step3":l();break;case"step4":d();break;default:_=void 0,R()}}z(H).one("hashchange",t)}}(u.is(":visible"))},addToCart:function(a,s,u,p,h,f){var g,m=j.cart.manager;null!==m&&(s=s||1,h=void 0===h||h,g=(f=f||"")+m.settings().indexpage,m.add(a,parseInt(s,10),u,p).done(function(){var t,o,i,c,l,d,e,r,n;h?(z.imCookie("x5CartContinue",j.cart.ui.getWindow().location.href,{path:"/"}),j.utils.location(g)):(t=function(){var t="",e=j.l10n.get,i=m.goodsPrice(void 0,!0),r=m.goodsPrice(void 0,!1),n=m.goodsVat(),a=m.goodsVatName(),s=m.count(!0),o=s<2?e("cart_article","product"):e("cart_articles","products");switch(m.settings().vattype){case"excluded":t=(t=(t+='<div class="cart-total s-flex"><span class="s-cell-desc left">'+s+" "+o+'</span><span class="s-cell right">'+m.formatCurrency(r).replace(/\s/g,"&nbsp;")+"</span></div>")+('<div class="cart-vat s-flex"><span class="s-cell-desc left">'+a+'</span><span class="s-cell right">'+m.formatCurrency(n).replace(/\s/g,"&nbsp;")+"</span></div>"))+('<div class="cart-total-vat s-flex big-font"><span class="s-cell-desc left">'+e("cart_total")+'</span><span class="s-cell right">'+m.formatCurrency(i).replace(/\s/g,"&nbsp;")+"</span></div>");break;case"included":t=(t+='<div class="cart-total-vat s-flex big-font"><span class="s-cell-desc left">'+s+" "+o+'</span><span class="s-cell right">'+m.formatCurrency(i).replace(/\s/g,"&nbsp;")+"</span></div>")+('<div class="cart-vat-included s-flex"><span class="s-cell-desc">&nbsp;</span><span class="s-cell right vat">'+e("cart_vat_included","[NAME] (Included)").replace("[NAME]",a)+": "+m.formatCurrency(n).replace(/\s/g,"&nbsp;")+"</span></div>");break;case"none":t+='<div class="cart-total s-flex big-font"><span class="s-cell-desc left">'+s+" "+o+'</span><span class="s-cell right">'+m.formatCurrency(r).replace(/\s/g,"&nbsp;")+"</span></div>"}return t},o=function(t,e,i,r,n,a){t?(e.addClass("wrapped"),i.removeClass("left"),r.removeClass("right"),t=Math.max(n.width(),a.width()),n.width(t),a.width(t)):(e.removeClass("wrapped"),i.addClass("left"),r.addClass("right"),n.css("width","auto"),a.css("width","auto"))},n={text:(e=x5CartData.products[a],r='<div id="cart-product-added-container" style="min-height: '+(r=325)+'px;"><table class="cart-table cart-product-added" cellpadding="0" cellspacing="0" border="0" style="height: 0; min-height: '+r+'px; margin-bottom: 0;"><thead><tr><td class="first-x last-x"><div class="head-title">'+j.l10n.get("cart_product_added")+'</div></td></tr></thead><tbody><tr><td class="first-x last-x last-y">',r+='<div class="box-master"><div class="box-cont"><div class="product-col-image-details-btn"><div class="cont-product-col-image-details"><div class="product-col-image-details">',j.cart.ui.showProductIcons&&e.media.length?(n=e.media[0],r+='<div class="product-image-cont"><img class="product-image" src="'+(f+("video"===n.type||"youtube"===n.type||"vimeo"===n.type?"res/video_thumb.svg":j.utils.isNullOrEmpty(n.url)?x5CartData.settings.noPreviewImage:n.url))+'" alt="'+e.name+'" /></div>'):r+='<div class="product-image-cont" style="width: 1px; min-width: 1px;"></div>',r=r+'<div class="product-info"><div class="product-name product-data-info">'+e.name+"</div>",u&&(r=r+'<div class="product-options product-data-info"><span class="lbl-variant">'+e.options[u].name+"</span>",p&&(r+=' | <span class="lbl-sub-variant">'+e.options[u].suboptions[p]+"</span>"),r+="</div>"),r=(r=(r=(r=(r=(r=(r=(r+='<div class="product-quantity product-data-info">')+"<span>"+j.l10n.get("cart_qty")+":&nbsp;</span>")+"<span>"+s+' </span></div></div></div><div class="hl"></div>')+'<div class="lbl-summary product-data-info">'+j.l10n.get("cart_articles_summary")+"</div>")+'<div class="ord-total mobile">'+t()+'</div></div></div><div class="vl"></div><div class="price-info">')+'<div class="lbl-summary product-data-info">'+j.l10n.get("cart_articles_summary")+"</div>")+'<div class="ord-total">'+t()+"</div></div></div>")+'<div class="s-flex buttons-container"><div class="btn-action btn-action-left left"><input type="button" class="btn-go-back" onclick="x5engine.cart.ui.clickButtonAddToCart(0); return false;" value="'+j.l10n.get("cart_continue_shopping")+'" /></div><div class="btn-action btn-action-right right"><input type="button" class="btn-go-next" onclick="x5engine.cart.ui.clickButtonAddToCart(1,\''+g+'\'); return false;" value="'+j.l10n.get("cart_proceedtoorder")+'" /></div></div></div></td></tr></tbody></table>'),id:"add-to-cart",position:"center",elementClose:'<svg class="svgClose imCloseInn" viewBox="0 0 1792 1792" xmlns="http://www.w3.org/2000/svg"><path d="M1490 1322q0 40-28 68l-136 136q-28 28-68 28t-68-28l-294-294-294 294q-28 28-68 28t-68-28l-136-136q-28-28-28-68t28-68l294-294-294-294q-28-28-28-68t28-68l136-136q28-28 68-28t68 28l294 294 294-294q28-28 68-28t68 28l136 136q28 28 28 68t-28 68l-294 294 294 294q28 28 28 68z"/></svg>',desiredWidth:800,desiredHeight:325},j.imSplashBox(n),i=null,d=!(c=0),j.utils.onElementResize(document.getElementById("add-to-cart"),function(t,e){c!=t.width&&(c=t.width,i&&clearTimeout(i),i=setTimeout(function(){var t,e,i,r,n,a,s;d&&(r=z("#cart-product-added-container .cart-product-added thead").height(),z("#add-to-cart .imClose").css({height:r,width:r}),d=!1),c=0<c?c:Math.min(z("#imContent").width()-40,800),l=z("#add-to-cart .buttons-container"),r=z("#add-to-cart .buttons-container .btn-action-left"),n=z("#add-to-cart .buttons-container .btn-action-right"),a=z("#add-to-cart .buttons-container .btn-go-back"),s=z("#add-to-cart .buttons-container .btn-go-next"),a.css("width","auto"),s.css("width","auto"),c<750?(z("#cart-product-added-container").addClass("mobile"),c<450?z("#cart-product-added-container").addClass("hide-image"):z("#cart-product-added-container").removeClass("hide-image"),t=!1,(c<400||(i=s,0<(e=a).length&&0<i.length&&e.offset().top!=i.offset().top))&&(t=!0),o(t,l,r,n,a,s)):(z("#cart-product-added-container").removeClass("mobile"),o(t=!1,l,r,n,a,s))},50))}))}).fail(function(t){H.alert(t.message)}))},canResumeShopping:function(){return!!z.imCookie("x5CartContinue",null,{path:"/"})},resumeShopping:function(){var t=z.imCookie("x5CartContinue",null,{path:"/"}),e=j.cart.ui.getWindow();t&&(e.location.href=t)},updatePLOTo:null,updateProductListOptions:function(t,e,i,r,n){var a;if(!j.cart.manager)return a=j.cart.ui,clearTimeout(a.updatePLOTo),void(a.updatePLOTo=setTimeout(function(){a.updateProductListOptions(t,e,i,r)},1e3));var s,o,c=j.cart.manager,l=c.store(t),d=z(e),u=z("#"+i+"_fullprice");if(l.option(d.val()),u.length&&(u.html(c.formatCurrency(l.fullPrice(void 0,r))),z("#"+i+"_price").html(c.formatCurrency(l.price(void 0,r)))),l)if(z("#"+i+"_subopt").remove(),"suboptions"in(s=l.base().options[l.option()])){var p='<select id="'+i+'_subopt"';for(null!=n&&n||(p+=' style="float: right; width: 47%;"/>'),p=z(p+="/>"),o=0;o<s.suboptions.length;o++)p.append('<option value="'+o+'">'+j.utils.htmlDecode(s.suboptions[o])+"</option>");p.val(0),null!=n&&n||d.width("47%"),d.after(p)}else null!=n&&n||d.outerWidth("99%").css("float","none")},updateWidget:function(){var t=j.cart.manager,e=j.cart.ui.updateWidget;if(null===t)return setTimeout(e,500);z(".widget_weight_total").text(j.utils.round(t.goodsWeight(),2)),z(".widget_quantity_total").text(t.count()),z(".widget_amount_total").text(t.formatCurrency(t.price(void 0,"included"==t.settings().vattype))),t.bind("x5cart.priceChanged",e).bind("x5cart.quantityChanged",e)},getStepStyleDom:function(t){for(var e,i=j.cart.ui.steps,r=0,n=j.l10n.get,a=z("body"),s=z('<div id="im-cart-steps-banner" />'),o=0;o<t;o++)r-=i.image.steps[o].height;for(o=0;o<i.image.steps.length;o++){var c=z("<span>"+n("cart_step"+(o+1)+"_header","Step description "+(o+1))+"</span>").css(i.font).css({"text-align":"center",position:"absolute",top:-1e3});a.append(c),e=c.outerWidth(!0),c.remove(),s.append(c.css({left:i.image.steps[t].offsetX[o]-e/2,top:i.image.steps[t].offsetY[o]})),o===t&&c.css("color",i.font.activeColor)}return s.height(i.image.steps[t].height).css({"background-image":"url('"+j.settings.currentPath+i.image.url+"')","background-position":"0 "+r+"px",margin:"15px auto",position:"relative","max-width":i.image.width})}}),j.cart.loaded=!0}(_jq,x5engine,window),function(g,m){"use strict";g.extend(!0,m.cart.search,{cartSearchContainer:g("#im-cartsearch-container"),jsonFilter:{start:0,length:10,sortOrderBy:"relevance",custom:"",rootCategory:"",rootCategoryCategories:[],rootCategoryFilterIgnore:!1,categories:[],priceStart:-1,priceEnd:-1,onlyNew:0,onlyDiscounted:0,onlyAvailable:0},jsonFilterCache:{},currentUrl:window.location.href+(-1<window.location.href.indexOf("?")?"":"?"),dataSource:"",checkedNodes:[],hiddenNodes:{},numTotCategories:0,buildInProgress:!1,istanceRangeSlider:"",initRangeSlider:function(){var t=void 0===g(".js-range-slider").data().from?0:g(".js-range-slider").data().from,e=void 0===g(".js-range-slider").data().to?1e12:g(".js-range-slider").data().to,i=g("#im-cartsearch-container .range-slider-container .js-range-slider");i.ionRangeSlider({type:"double",min:t,max:e,from:t,to:e,grid:!0,hide_min_max:!0,hide_from_to:!1,force_edges:!0,decorate_both:!0,skin:"round",grid_num:2,prettify_enabled:!0,prettify:function(t){return m.cart.formatCurrency(t,void 0,void 0,!0)},onChange:function(t){m.cart.search.istanceRangeSlider.userFrom=t.from,m.cart.search.istanceRangeSlider.userTo=t.to},onFinish:function(t){m.cart.search.refreshProducts(!0)}}),m.cart.search.istanceRangeSlider=i.data("ionRangeSlider")},updateRangeSlider:function(t,e,i,r){var n,a;x5CartData.searchPage.searchFieldVisibility.price&&(n=null!=(n=m.cart.search.istanceRangeSlider.userFrom)&&t<=n?n:t,a=null!=(a=m.cart.search.istanceRangeSlider.userTo)&&a<=e?a:e,i={from:i||n,to:r||a},m.cart.search.istanceRangeSlider.result.min!=t&&(i.min=t),m.cart.search.istanceRangeSlider.result.max!=e&&(i.max=e),m.cart.search.istanceRangeSlider.update(i))},clickPagination:function(t,e){m.cart.search.jsonFilter.start=t,m.cart.search.refreshProducts()},paginate:function(){var t=m.cart.htmlProducts.getCounterProducts(),e=m.cart.search.jsonFilter.start,i=m.cart.search.jsonFilter.length,r='<div id="im-cartsearch-pagination" class="im-cartsearch-pagination pagination-container">',n=(m.l10n.get,Math.ceil(t/i)),a=e/i+1;if(n<2)return"";0<e&&(r+='<a class="page page-prev" onclick="x5engine.cart.search.clickPagination('+(e-i)+', this); return false;" data-history="start='+(e-i)+"&length="+i+'"></a>');for(var s=!1,o=!1,c=1;c<=n;c++)n<7||1==c||c==n||a-1<=c&&c<=1+a?r+='<a onclick="x5engine.cart.search.clickPagination('+i*(c-1)+', this); return false;" class="page'+(c==a?" current":"")+'" data-history="start='+i*(c-1)+"&length="+i+'">'+c+"</a>":c<a-1&&!s?(r+='<span class="dots-page">...</span>',s=!0):1+a<c&&!o&&(r+='<span class="dots-page">...</span>',o=!0);return e+i<t&&(r+='<a class="page page-next" onclick="x5engine.cart.search.clickPagination('+(e+i)+', this); return false;" data-history="start='+(e+i)+"&length="+i+'"></a>'),r+="</div>"},paginateCheckOverflow:function(){var t,e,i,r=g("#im-cartsearch-pagination");r.length&&(i=g("#im-cartsearch-container .items-container"),t=g("#im-cartsearch-pagination .page-prev"),e=g("#im-cartsearch-pagination .page-next"),r.css("display","none"),i=i.width(),r.css("visibility","hidden"),r.css("display","block"),t.text(m.l10n.get("cmn_pagination_prev")),e.text(m.l10n.get("cmn_pagination_next")),r.width()>i&&(t.text("<"),e.text(">")),r.css("visibility","visible"))},init:function(){var t,e,i,r,n=x5CartData.searchPage.searchFieldVisibility,s=(m.cart.ecommerce(x5CartData),3);function a(t){m.cart.search.cartSearchContainer.hasClass("filter-sidebar-open")&&m.cart.search.closeSidebarCSS(),m.cart.search.refreshProducts(!0),t.stopPropagation()}m.cart.search.jsonFilter.length=x5CartData.searchPage.cardStyle.cardsPerRow*x5CartData.searchPage.cardStyle.rowsPerPage,m.cart.search.urlToJsonFilter(),m.cart.search.cartSearchContainer.click(function(t){t.stopPropagation(),"main"==t.target.parentNode.nodeName.toLowerCase()&&m.cart.search.cartSearchContainer.hasClass("cart-overlay")&&m.cart.search.closeSidebarCSS()}),0!=g("#im-cartsearch-container .btn-sidebar").length&&(t=Math.floor(g("#im-cartsearch-container .bar-order .sort-by").height()),g("#im-cartsearch-container .btn-sidebar").css({height:t,width:t}),g("#im-cartsearch-container .btn-sidebar").click(function(t){t.stopPropagation(),m.cart.search.cartSearchContainer.hasClass("filter-sidebar-open")?m.cart.search.closeSidebarCSS():m.cart.search.openSidebarCSS()}),g("#im-cartsearch-container .to-close-sidebar").click(function(t){t.stopPropagation(),m.cart.search.closeSidebarCSS()})),n.custom&&(g("#im-cartsearch-container .search").val(m.cart.search.jsonFilter.custom||""),g("#im-cartsearch-container .search-button").click(a),g("#im-cartsearch-container .search").keydown(function(t){if(13==t.which||13==t.keyCode)return a(t),!1})),n.sortOrderBy&&(e=g("#im-cartsearch-container .items-container .bar-order .sort-by .c-order > ul.dropdown-sort .icon-arrow"),i=g("#im-cartsearch-container .items-container .bar-order .sort-by .c-order > ul.dropdown-sort .dropdown-sort-inside"),g("#im-cartsearch-container .items-container .bar-order .sort-by .c-order > ul.dropdown-sort").click(function(){(i.hasClass("show")?d:l)()}),g("#im-cartsearch-container .items-container .bar-order .sort-by .c-order > ul.dropdown-sort .dropdown-sort-inside li").click(function(t){t.stopPropagation();t=m.l10n.get("cart_search_page_sort_by")+" "+g(this).text();g("#im-cartsearch-container .items-container .bar-order .sort-by .c-order > ul.dropdown-sort li .order-selected").text(t),d(),m.cart.search.refreshProducts(!0)})),n.price&&m.cart.search.initRangeSlider(),f(n.discounted,g('input[type="checkbox"][data-id="discounted-products"]'),m.cart.search.jsonFilter.onlyDiscounted),f(n.available,g('input[type="checkbox"][data-id="available-products"]'),m.cart.search.jsonFilter.onlyAvailable),f(n.new,g('input[type="checkbox"][data-id="new-products"]'),m.cart.search.jsonFilter.onlyNew),g('#im-cartsearch-container .filter-sidebar .filter-container[data-id^="property-"]').each(function(){var t=g(this),e=m.cart.search.jsonFilter.properties&&m.cart.search.jsonFilter.properties[t.attr("data-id").slice(9)]||[];t.find('input[type="checkbox"]').each(function(){var t=g(this);f(!0,t,e.includes(t.attr("data-id"))?1:0)})}),"Mozilla Firefox"==m.utils.getCurrentBrowser()&&g("body").append("<style>#im-cartsearch-container .filter-sidebar .checkbox-list .k-checkbox-label:before { left: 0; }</style>");var o=!1,c=!1;g("#treeview").kendoTreeView({checkboxes:{checkChildren:!1},loadOnDemand:!0,check:function(t){p(t,this)},collapse:function(t){o||(o=!0,t.preventDefault(),this.collapse(t.node),o=!1)},expand:function(t){c||(c=!0,t.preventDefault(),this.expand(t.node),c=!1)},dataBound:function(t){this.expandRoot&&this.expand(t.node.find(".k-item"))},select:function(t){t.preventDefault(),this.dataItem(t.node).set("checked",!this.dataItem(t.node).checked),p(t,this)},dataSource:function(){if(null==x5CartData.categories||null==x5CartData.categories.dataSource||0==x5CartData.categories.dataSource.length)return m.cart.search.dataSource;0<m.cart.search.jsonFilter.rootCategory.length?function(t,e){for(var i=0;i<e.length;i++){if(0<m.cart.search.dataSource.length)return;if(e[i].id==t)return m.cart.search.dataSource=e[i].items,g('#im-cartsearch-container [data-id="categories"] .lbl-title').html("").html(e[i].text);!function t(e,i){if(null==e)return;for(var r=0;r<e.length;r++){if(0<m.cart.search.dataSource.length)return;if("category"==e[r].type&&null!=e[r].items&&0<e[r].items.length){if(i==e[r].id)return m.cart.search.dataSource=e[r].items,void g('#im-cartsearch-container [data-id="categories"] .lbl-title').html("").html(e[r].text);t(e[r].items,i)}}}(e[i].items,t)}}(m.cart.search.jsonFilter.rootCategory,x5CartData.categories.dataSource):m.cart.search.dataSource=x5CartData.categories.dataSource;for(var t=[],e=0;e<m.cart.search.dataSource.length;e++){var i,r=m.cart.search.dataSource[e];"category"==r.type&&(m.cart.search.numTotCategories++,(i={}).id=r.id,i.text=r.text,i.type=r.type,i.items=[],i.expanded=!1,i.checked=-1<m.cart.search.jsonFilter.categories.indexOf(i.id),function t(e,i,r){if(null==r)return;for(var n=0;n<r.length;n++){var a;"category"==r[n].type&&null!=r[n].items&&0<r[n].items.length&&(m.cart.search.numTotCategories++,(a={}).id=r[n].id,a.text=r[n].text,a.type=r[n].type,a.items=[],a.checked=-1<m.cart.search.jsonFilter.categories.indexOf(a.id),e<s?t(e+1,a,r[n].items):h(a,r[n].items),i.items.push(a),0!=m.cart.search.jsonFilter.categories.length&&!i.checked||m.cart.search.checkedNodes.push(a.id))}return}(2,i,r.items),t.push(i),0!=m.cart.search.jsonFilter.categories.length&&!i.checked||m.cart.search.checkedNodes.push(r.id))}0<m.cart.search.jsonFilter.rootCategory.length&&(m.cart.search.jsonFilter.rootCategoryCategories=m.cart.search.checkedNodes);return t}()}),0==m.cart.search.jsonFilter.categories.length&&(m.cart.search.jsonFilter.categories=m.cart.search.checkedNodes),n.categories&&0<g("#treeview").data("kendoTreeView").options.dataSource.length&&(0==g("#im-cartsearch-container #treeview .k-item div .k-icon").length&&g("#im-cartsearch-container #treeview .k-item").css("padding","0px"),5<g("#treeview").data("kendoTreeView").options.dataSource.length&&(g("#im-cartsearch-container #treeview > ul.k-treeview-lines > li.k-item:nth-child(1n+6)").css("display","none"),(r=g('#im-cartsearch-container [data-id="categories"] .show-all-categories')).css("display","block"),r.click(function(t){g("#im-cartsearch-container #treeview > ul.k-treeview-lines > li.k-item:nth-child(1n+6)").css("display","block"),r.css("display","none")})),g('#im-cartsearch-container [data-id="categories"]').removeClass("hidden"));g("#im-cartsearch-container .filter-sidebar .filter-container").each(function(){var e=g(this);e.find(".lbl-title").click(function(t){e.toggleClass("closed")})}),m.cart.search.fastRefreshProducts();var l=function(){i.addClass("show"),e.addClass("open")},d=function(){i.removeClass("show"),e.removeClass("open")};function u(t,e){for(var i,r=0;r<t.length;r++)(t[r].checked||(i=t[r],0<g("#im-cartsearch-container #treeview .k-item input#_"+i.uid+"[type=checkbox]:indeterminate").length))&&e.push(t[r].id),t[r].hasChildren&&u(t[r].children.view(),e)}function p(i,t){t.expandRoot=i.node,t.expand(g(t.expandRoot).find(".k-item").addBack());var r=g(i.node).find("input[type=checkbox]").filter(":first").is(":checked"),t=(g(i.node).find(".k-group input").prop("checked",r),g(i.node).find(".k-group li.k-item").each(function(t,e){i.sender.dataSource.getByUid(g(e).attr("data-uid")).checked=r}),[]);u(i.sender.dataSource.view(),t),m.cart.search.checkedNodes=t,m.cart.search.jsonFilter.rootCategoryFilterIgnore=""!=m.cart.search.jsonFilter.rootCategory&&0<t.length,m.cart.search.refreshProducts(!0,!0)}function h(t,e){if(null!=e)for(var i,r=0;r<e.length;r++)"category"==e[r].type&&null!=e[r].items&&0<e[r].items.length&&((i={}).id=e[r].id,i.type=e[r].type,i.items=[],null==m.cart.search.hiddenNodes[t.id]&&(m.cart.search.hiddenNodes[t.id]=[]),m.cart.search.hiddenNodes[t.id].push(i.id),h(t,e[r].items))}function f(t,e,i){var r;t&&(i&&1==i&&e.prop("checked",!0),(r=e.parent().parent()).on("click",function(){r.find(".k-checkbox-wrapper").find(e).prop("checked",!e.prop("checked")),m.cart.search.refreshProducts(!0)}))}},updateFiltersVisibilityAfterSearchExecution:function(i){var t=g('#im-cartsearch-container .filter-sidebar .filter-container[data-id="price"]');i.minPrice||i.maxPrice?(t.show(),m.cart.search.updateRangeSlider(i.minPrice,i.maxPrice,i.priceStart,i.priceEnd)):t.hide(),g('#im-cartsearch-container .filter-sidebar .filter-container[data-id^="property-"]').each(function(){var t=g(this),e=i.properties[t.attr("data-id").slice(9)];e&&e.length?(t.show(),t.find("li").each(function(){var t=g(this);t.toggle(e.includes(t.attr("data-id")))})):t.hide()})},urlToJsonFilter:function(){var t=m.cart.search.jsonFilter,e=window.location.search.substring(1);if(""!=e){var i,e=function(t){for(var e=t.split("&"),i={},r=0;r<e.length;r++){var n,a=e[r].split("="),s=decodeURIComponent(a[0]),a=decodeURIComponent(a[1]);void 0===i[s]?i[s]=a:"string"==typeof i[s]?(n=[i[s],a],i[s]=n):i[s].push(a)}return i}(e);if(null!=e.start&&null!=e.length&&(t.start=e.start,t.length=e.length),null!=e.sortOrderBy&&(t.sortOrderBy=e.sortOrderBy),null!=e.q&&(t.custom=e.q.replace(/\+/g," ").trim()),e.rootCategory&&(t.rootCategory=e.rootCategory),e.categories){var r=e.categories.split("|");if(0<r.length){t.categories=[];for(var n=0;n<r.length;n++)t.categories.push(r[n])}}e.prc&&(i=e.prc.split("-"),t.priceStart=i[0],t.priceEnd=i[1]),null!=e.new&&(t.onlyNew=e.new),null!=e.discounted&&(t.onlyDiscounted=e.discounted),null!=e.available&&(t.onlyAvailable=e.available),e.properties&&(t.properties=JSON.parse(decodeURIComponent(escape(window.atob(decodeURIComponent(e.properties))))))}},fieldsToJsonFilter:function(){var t,e=x5CartData.searchPage.searchFieldVisibility,i=m.cart.search.jsonFilter;if(e.sortOrderBy&&(t=(t=g(".order-selected").text().replace(m.l10n.get("cart_search_page_sort_by"),"").trim())==m.l10n.get("cart_search_page_sort_price_asc")?"price_asc":t==m.l10n.get("cart_search_page_sort_price_desc")?"price_desc":"relevance",i.sortOrderBy=t),e.custom&&(t=g("#im-cartsearch-container .filter-sidebar .search").val(),i.custom=t.replace(/\+/g," ").trim()),e.categories){var r=m.cart.search.checkedNodes;if(i.categories=[],0<r.length)for(var n=0;n<r.length;n++)i.categories.push(r[n]);else if(0<m.cart.search.jsonFilter.rootCategory.length)for(n=0;n<m.cart.search.jsonFilter.rootCategoryCategories.length;n++)i.categories.push(m.cart.search.jsonFilter.rootCategoryCategories[n])}e.price&&(i.priceStart=null!=m.cart.search.istanceRangeSlider.userFrom?m.cart.search.istanceRangeSlider.userFrom:-1,i.priceEnd=null!=m.cart.search.istanceRangeSlider.userTo?m.cart.search.istanceRangeSlider.userTo:-1),e.new&&(t=g('input[type="checkbox"][data-id="new-products"]'),i.onlyNew=t.is(":checked")?1:0),e.discounted&&(t=g('input[type="checkbox"][data-id="discounted-products"]'),i.onlyDiscounted=t.is(":checked")?1:0),e.available&&(t=g('input[type="checkbox"][data-id="available-products"]'),i.onlyAvailable=t.is(":checked")?1:0),delete i.properties,g('#im-cartsearch-container .filter-sidebar [data-id^="property-"]').each(function(){var t=[];g(this).find('input[type="checkbox"]:checked').each(function(){t.push(g(this).attr("data-id"))}),0<t.length&&(i.properties=i.properties||{},i.properties[g(this).attr("data-id").slice(9)]=t)})},jsonFilterToUrl:function(){var t=m.cart.search.jsonFilter,e="";if(0!==Object.keys(t).length){if(t.start&&t.length&&(e+="&start="+t.start+"&length="+t.length),t.sortOrderBy&&(e+="&sortOrderBy="+t.sortOrderBy),t.custom&&""!=t.custom&&(e+="&q="+t.custom.trim().replace(/ /g,"+")),t.rootCategory&&""!=t.rootCategory&&(e+="&rootCategory="+t.rootCategory),t.categories){var i=m.cart.search.checkedNodes;if(0<i.length){e+="&categories=";for(var r=0;r<i.length;r++)e+=i[r]+"|";e=e.substring(0,e.length-1)}}null!=t.priceStart&&-1<t.priceStart&&(e+="&prc="+t.priceStart+"-"+t.priceEnd),t.onlyNew&&(e+="&new="+t.onlyNew),t.onlyDiscounted&&(e+="&discounted="+t.onlyDiscounted),t.onlyAvailable&&(e+="&available="+t.onlyAvailable),t.properties&&(e+="&properties="+encodeURIComponent(window.btoa(unescape(encodeURIComponent(JSON.stringify(t.properties)))))),""!=e&&(e="?"+e),m.cart.search.currentUrl=(x5CartData.settings.searchpage_url+e).replace("?&","?"),window.history.pushState("","",m.cart.search.currentUrl)}},refreshProducts:function(t,e){m.cart.search.buildInProgress=!0,m.cart.search.showSidebarLoading(),t&&(m.cart.search.jsonFilter.start=0),e&&(m.cart.search.jsonFilterCache={}),m.utils.scrollTo(0),m.cart.search.fieldsToJsonFilter(),m.cart.search.loadProducts(),m.cart.search.jsonFilterToUrl()},fastRefreshProducts:function(){m.cart.search.buildInProgress=!0,m.cart.search.showLoading(),m.cart.search.loadProducts()},loadProducts:function(){m.cart.search.deepCompare(m.cart.search.jsonFilter,m.cart.search.jsonFilterCache)?m.cart.search.hideLoading():(m.cart.search.jsonFilterCache=JSON.parse(JSON.stringify(m.cart.search.jsonFilter)),m.cart.htmlProducts.build(m.cart.search.jsonFilter))},draw:function(t){""==(t+=m.cart.search.paginate())&&(t='<p class="search-empty">'+m.l10n.get("search_empty")+"</p>"),g("#im-products").html("").append(t),g("#im-cartsearch-container .bar-order .total-results .total_product_found").html("").html(m.cart.htmlProducts.getCounterProducts()),1==m.cart.htmlProducts.getCounterProducts()?g("#im-cartsearch-container .bar-order .total-results .label-products-found").html("").html(" "+m.l10n.get("cart_search_page_product_found")):g("#im-cartsearch-container .bar-order .total-results .label-products-found").html("").html(" "+m.l10n.get("cart_search_page_products_found")),m.cart.search.paginateCheckOverflow(),m.cart.search.buildInProgress=!1,m.cart.search.hideLoading()},deepCompare:function(t,e){var n,a;return n=[],a=[],!!function t(e,i){if(isNaN(e)&&isNaN(i)&&"number"==typeof e&&"number"==typeof i)return 1;if(e===i)return 1;if("function"==typeof e&&"function"==typeof i||e instanceof Date&&i instanceof Date||e instanceof RegExp&&i instanceof RegExp||e instanceof String&&i instanceof String||e instanceof Number&&i instanceof Number)return e.toString()===i.toString();if(e instanceof Object&&i instanceof Object&&!e.isPrototypeOf(i)&&!i.isPrototypeOf(e)&&e.constructor===i.constructor&&e.prototype===i.prototype&&!(-1<n.indexOf(e)||-1<a.indexOf(i))){for(var r in i){if(i.hasOwnProperty(r)!==e.hasOwnProperty(r))return;if(typeof i[r]!=typeof e[r])return}for(r in e){if(i.hasOwnProperty(r)!==e.hasOwnProperty(r))return;if(typeof i[r]!=typeof e[r])return;switch(typeof e[r]){case"object":case"function":if(n.push(e),a.push(i),!t(e[r],i[r]))return;n.pop(),a.pop();break;default:if(e[r]!==i[r])return}}return 1}}(t,e)},closeSidebarCSS:function(){g("body").removeClass("filter-sidebar-open"),m.cart.search.cartSearchContainer.removeClass("filter-sidebar-open"),m.cart.search.cartSearchContainer.removeClass("cart-overlay")},openSidebarCSS:function(){g("body").addClass("filter-sidebar-open"),m.cart.search.cartSearchContainer.addClass("filter-sidebar-open"),m.cart.search.cartSearchContainer.addClass("cart-overlay")},cleanOverlay:function(){"fixed"!=g("#im-cartsearch-container .filter-sidebar").css("position")&&m.cart.search.cartSearchContainer.hasClass("cart-overlay")&&m.cart.search.closeSidebarCSS();var t=Math.floor(g("#im-cartsearch-container .bar-order .sort-by").height());g("#im-cartsearch-container .btn-sidebar").css({height:t,width:t})},showSidebarLoading:function(){m.cart.search.cartSearchContainer.hasClass("filter-sidebar-open")&&(g("#im-cartsearch-container .search-button").hide(),g("#im-cartsearch-container .search-spinner").show())},showLoading:function(){m.cart.search.showSidebarLoading(),m.cart.search.buildInProgress&&g("#im-spinner-overlay").length<1&&(g("#im-cartsearch-container").prepend('<div id="im-spinner-overlay" style="position: absolute; top: 0px; left: 0px; bottom: 0px; right: 0px; z-index: 10703;"></div>'),g("#im-cartsearch-container .items-container .content #im-spinner-wrapper").css("display","flex"))},hideLoading:function(){g("#im-cartsearch-container .search-button").show(),g("#im-cartsearch-container .search-spinner").hide(),0<g("#im-spinner-overlay").length&&g("#im-spinner-overlay").fadeOut(500,function(){g("#im-cartsearch-container .items-container .content #im-spinner-wrapper").css("display","none"),g("#im-spinner-overlay").remove()})}})}(_jq,x5engine,window),function(t,e){"use strict";t.extend(!0,e.cart,{productsDataSettings:{getSearchPageCardLinks:function(t){var e=x5CartData.searchPage.cardStyle.card.image.isLink&&t.showboxLink;return{image:e||t.link,title:t.link||e}},showAvailability:function(){return x5CartData.searchPage.cardStyle.card.txtBlock.details.showAvailability},showOptions:function(){return x5CartData.searchPage.cardStyle.card.txtBlock.details.showOptions},showCategory:function(){return x5CartData.searchPage.cardStyle.card.txtBlock.details.showCategory},showPrice:function(){return x5CartData.searchPage.cardStyle.card.txtBlock.details.showPrice},showQuantity:function(){return x5CartData.searchPage.cardStyle.card.txtBlock.details.showQuantity},showVat:function(){return x5CartData.searchPage.cardStyle.card.txtBlock.details.showVat},showName:function(){return x5CartData.searchPage.cardStyle.card.txtBlock.name.show},showDescription:function(){return x5CartData.searchPage.cardStyle.card.txtBlock.description.show},showButton:function(){return x5CartData.searchPage.cardStyle.card.txtBlock.button.show},buttonType:function(){return x5CartData.searchPage.cardStyle.card.txtBlock.button.useAddToCartImage},goToCartAfterProductAdding:function(){return x5CartData.searchPage.cardStyle.card.goCartAfterProductAdding},availabilityImage:function(){return"../"+x5CartData.settings.availabilityImage},noPreviewImage:function(){return x5CartData.settings.noPreviewImage},cockadesNewImage:function(){return x5CartData.searchPage.cardStyle.card.cockades.new},cockadesDiscountImage:function(){return x5CartData.searchPage.cardStyle.card.cockades.discount},addToCartImage:function(){return x5CartData.searchPage.cardStyle.card.txtBlock.button.image_obj}}})}(_jq,x5engine),function(r,G){"use strict";r.extend(!0,G.cart,{htmlProducts:{counterProducts:0,getCounterProducts:function(){return G.cart.htmlProducts.counterProducts},setCounterProducts:function(t){G.cart.htmlProducts.counterProducts=t},prodCache:{},build:function(t){function e(){var t,e="relevance"==_.sortOrderBy?(t=x5CartData.products,Object.keys(t).length):(t=x5CartData.products_ordered_by_price.slice(0),x5CartData.products_ordered_by_price.length),i="",r=[],n=0,a=(G.cart.htmlProducts.setCounterProducts(n),"price_desc"==_.sortOrderBy?e-1:0),s=_.start,o=e<s+_.length?e:s+_.length;if(!(e<=s||o<=s)){for(var c=new Date,l=!1,d=function(t){var e,i={properties:{}};for(e in t.priceStart&&-1!=t.priceStart&&(i.priceStart=t.priceStart),t.priceEnd&&-1!=t.priceEnd&&(i.priceEnd=t.priceEnd),t.properties){i.properties[e]=[];for(var r=0;r<t.properties[e].length;r++)i.properties[e].push(t.properties[e][r])}return i}(_),u=function(t,e){function i(t,e){e&&(d.properties[t]=d.properties[t]||[],d.properties[t].includes(e)||d.properties[t].push(e))}var r;e&&"price"!=e||(r=y(t).singlePrice(void 0,!0),(null==d.minPrice||d.minPrice>r)&&(d.minPrice=r),(null==d.maxPrice||d.maxPrice<r)&&(d.maxPrice=r));if(e)e.startsWith("property-")&&i(n=e.slice(9),t.properties[n]);else for(var n in t.properties)i(n,t.properties[n])},p=function(c){var t=[];if(c.custom!="")t.push({id:"custom",check:function(t){var e=t.name!=""?t.name.toLowerCase().trim():"";var i=t.description!=""?t.description.toLowerCase().trim():"";var r=t.sku!=""?t.sku.toLowerCase().trim():"";var n=c.custom.toLowerCase();var a='"';var s=G.utils.splitWordByText(n," ",a);for(var o=0;o<s.length;o++)if(e.indexOf(s[o])>-1||i.indexOf(s[o])>-1||r.indexOf(s[o])>-1)return true;return false}});if(c.rootCategory||c.categories.length&&c.categories.length!=G.cart.search.numTotCategories)t.push({id:"category",check:function(n){var t=function(t){for(var e=0;e<t.length;e++){if(t[e]==n.category)return true;if(t[e]in G.cart.search.hiddenNodes){var i=G.cart.search.hiddenNodes[t[e]];for(var r=0;r<i.length;r++)if(i[r]==n.category)return true}}return false};if(!c.rootCategoryFilterIgnore&&c.rootCategory==n.category)return true;else if(c.categories.length<=G.cart.search.numTotCategories)return t(c.categories);return false}});if(c.onlyNew==1)t.push({id:"only-new",check:function(t){return t.isNew}});if(c.onlyDiscounted==1)t.push({id:"only-discounted",check:V});if(c.onlyAvailable==1)t.push({id:"only-available",check:function(t){if(t.availabilityType!="unset")if(t.availabilityType=="fixed"){if(t.staticAvailValue=="notavailable"||t.staticAvailValue=="unknown")return false}else if(!G.utils.isOnline()){if(t.staticAvailValue=="notavailable"||t.staticAvailValue=="unknown")return false}else if(S[t.id])if(S[t.id].availability=="notavailable")return false;return true}});var e=function(e,i){return{id:"property-"+e,check:function(t){return t.properties&&t.properties[e]&&i.includes(t.properties[e])}}};if(c.properties)for(var i in c.properties)t.push(e(i,c.properties[i]));if(c.priceStart>=0||c.priceEnd>=0)t.push({id:"price",check:function(t){var e=y(t).singlePrice(undefined,true);return e>=c.priceStart&&(c.priceEnd<0||e<=c.priceEnd)}});return t}(_);"price_desc"==_.sortOrderBy?-1<a:a<e;){var h,f=new Date,f=(!l&&1<=(f-c)/1e3&&(G.cart.search.showLoading(),l=!0),f=("relevance"==_.sortOrderBy?Object.keys(t):t)[a],x5CartData.products[f]),g=function(t,e){for(var i=[],r=0;r<t.length&&i.length<2;r++)if(!t[r].check(e))i.push(t[r].id);return i}(p,f);0==g.length?(u(f),s<=n&&n<o&&(null!=(h=function(t){var e='\t<div id="'+P+"_"+t.id+'" class="im-products-card'+(N&&t.availabilityType!="unset"?" im-products-card-with-availability":"")+(A&&t.options!=undefined?" im-products-card-with-options":"")+'">\n',i=D.getSearchPageCardLinks(t),r="",n="im-products-image",a,s,o;if(t.media!=null&&t.media.length>0&&t.media[0]!=null)r="../"+(t.media[0].type==="video"?"res/video_thumb.svg":t.media[0].url);else{r="../"+D.noPreviewImage();n+=" contain"}if(e=(e+='\t\t<div class="im-wrapper-products-image">')+('\t\t\t<img class="'+n+'"'+(r!=""?' src="'+r+'"':"")+" "+G.utils.linkJs(i.image,{baseUrl:"../"})+"/>")+"\t\t</div>",M)e+='\t\t<div class="im-products-name">'+G.utils.linkHtml(i.title,{content:t.name,baseUrl:"../"})+"</div>\n";if(I){var c=null;if(x5CartData.categories!=undefined&&x5CartData.categories.dataSource!=undefined){var l=function(t,e){if(e==undefined||e==null)return;for(var i=0;i<e.length;i++)if(e[i].type=="category")if(e[i].id==t)return e[i].text;else if(e[i].items!=undefined&&e[i].items.length>0){var r=l(t,e[i].items);if(r)return r}return null};c=l(t.category,x5CartData.categories.dataSource);if(c!=null)e+='\t\t<div class="im-products-category">'+c+"</div>\n"}}if(O){var d=t.description.replace("\n","<br />").replace("\r","").replace("\\","\\\\").replace("'","&#39;");e+='\t\t<div class="im-products-description">'+d+'<div class="im-products-description-fade"></div></div>\n'}if(A||N||E||q)e+='\t\t<div class="im-products-separator"></div>\n';if(N&&t.availabilityType!="unset"){e+='\t\t<div class="im-products-availability">';if(t.availabilityType=="fixed"){if(!G.utils.isNullOrEmpty($)&&t.staticAvailValue!="unknown")e+=U(t.staticAvailValue)+j(t.staticAvailValue)}else if(!T){e+="<table><tr>"+'<td style="vertical-align: middle">'+U(t.staticAvailValue)+"</td>";e+='<td style="vertical-align: middle">'+H(t.staticAvailValue,t.offlineAvailableItems)+"</td>";e+="</tr></table>"}else if(S[t.id]){var u=S[t.id].availability;e+="<table><tr>";e+='<td style="vertical-align: middle">';e+=U(u);e+="</td>";e+='<td style="vertical-align: middle">';e+=H(u,S[t.id].quantity);e+="</td></tr></table>"}e+="</div>\n"}if(t.quantityDiscounts&&F){e+="\t\t<div class=\"im-products-qty-discount\" onmouseover=\"x5engine.imTip.Show(this, {target: $(this).find('img'), text: '<div>"+G.l10n.get("cart_discount")+":</div><ul>";for(var p in t.quantityDiscounts){var h=p;var f=(t.quantityDiscounts[p]*100).toFixed(2);var g=f%1==0?parseInt(f):f;e+="<li>"+G.l10n.get("cart_discount_per_qty").replace("[QUANTITY]",h).replace("[DISCOUNT]",g)+"</li>"}e+="</ul>'})\">\n"+'\t\t\t<img alt="'+G.l10n.get("cart_qty_discount")+'" width="16" height="16" src="../res/info.gif" />\n'+"\t\t\t"+G.l10n.get("cart_qty_discount")+"\n"+"\t\t</div>\n"}if(A&&t.options){var m=0;var v='\t\t<div class="im-products-options">\n';for(o in t.options)if(t.options[o].suboptions!=undefined&&t.options[o].suboptions.length>0)m=m+t.options[o].suboptions.length;if(m==0){v+='\t\t\t<select id="product_'+t.id+'_opt" onchange="x5engine.cart.ui.updateProductListOptions(\''+t.id+"', this, 'product_"+t.id+"', "+(R?"true":"false")+');" style="'+(t.options[Object.keys(t.options)[0]].suboptions==undefined||t.options[Object.keys(t.options)[0]].suboptions.length==0?"width: 99%; ":"width: 47%;")+'">\n';for(o in t.options){a=o;s=t.options[o];v+='\t\t\t\t<option value="'+a+'">'+s.name+"</option>\n"}v+="\t\t\t</select>\n"}else{v+='\t\t\t<select id="product_'+t.id+'_opt" onchange="x5engine.cart.ui.updateProductListOptions(\''+t.id+"', this, 'product_"+t.id+"', "+(R?"true":"false")+');" style="'+(t.options[Object.keys(t.options)[0]].suboptions==undefined||t.options[Object.keys(t.options)[0]].suboptions.length==0?"width: 99%; ":"width: 47%;")+'">\n';for(o in t.options){a=o;s=t.options[o];v+='\t\t\t\t<option value="'+a+'">'+G.utils.htmlDecode(s.name)+"</option>\n"}v+="\t\t\t</select>\n";var _=t.options[Object.keys(t.options)[0]];if(_.suboptions!=undefined&&_.suboptions.length>0){v+='\t\t\t<select id="product_'+t.id+'_subopt" style="width: 47%;">\n';for(var y=0;y<_.suboptions.length;y++)v+='\t\t\t\t<option value="'+y+'">'+G.utils.htmlDecode(_.suboptions[y])+"</option>\n";v+="\t\t\t</select>\n"}}v+="\t\t</div>\n";e+=v}if(E){e+='\t\t<div class="im-products-price">\n';e+=L(t,P);e+="</div>"}if(q&&F)e+='\t\t<input type="number" id="product_'+t.id+'_qty" class="im-products-qty" value="1" min="1" />\n';if(q){var b=G.l10n.get("cart_add");if(D.buttonType()=="image"){var x=D.addToCartImage();if(x){var w="../"+x.image;b='<img width="'+x.width+'" height="'+x.height+'" src="'+w+'" alt="'+b+'" title="'+b+'" />'}}e+='\t\t<div class="im-products-button" onclick="x5engine.cart.ui.addToCart(\''+t.id+"', $('#product_"+t.id+"_qty').val(), $('#product_"+t.id+"_opt').val(), $('#product_"+t.id+"_subopt').val(), "+(D.goToCartAfterProductAdding()?"true":"false")+", '"+"../"+"');\">"+b+"</div>\n"}if(t.isNew)e+=B(D.cockadesNewImage(),"New!");if(V(t))e+=B(D.cockadesDiscountImage(),"Discount!");e+="\t</div>\n";var k=null;if(t.schemaOrg){var C=G.cart.search.currentUrl+"#"+P+"_"+t.id;t.schemaOrg.url=C;if(t.schemaOrg.offers){t.schemaOrg.offers.url=C;if(t.availabilityType=="dynamic"&&T&&S[t.id])t.schemaOrg.offers.availability=z(S[t.id].availability)}k=t.schemaOrg}return{html:e,schemaOrg:k}}(f)).schemaOrg&&r.push(h.schemaOrg),i+=h.html),n++):1==g.length&&u(f,g[0]),a="price_desc"==_.sortOrderBy?a-1:a+1}if(G.cart.htmlProducts.setCounterProducts(n),G.cart.search.updateFiltersVisibilityAfterSearchExecution(d),0<r.length){for(var m=[],a=0;a<r.length;a++)m.push({"@type":"ListItem",position:a+1,item:r[a]});var v={"@context":"https://schema.org","@type":"ItemList",numberOfItems:r.length,itemListElement:m},i='<script type="application/ld+json">'+JSON.stringify(v)+"<\/script>"+i}return i}}function n(t){return-1<i.regardlessOfCouponAndQuantity.indexOf(t.id)}var S,i,_=r.extend(!0,{start:"0",length:"10",sortOrderBy:"relevance",custom:"",categories:[],priceStart:-1,priceEnd:-1,onlyNew:0,onlyDiscounted:0,onlyAvailable:0},t),P="im-products",t=G.cart.settings(),T=G.utils.isOnline(),D=G.cart.productsDataSettings,N=D.showAvailability(),A=D.showOptions(),M=D.showName(),O=D.showDescription(),I=D.showCategory(),E=D.showPrice(),F=D.showQuantity(),R="included"===t.vattype,q=D.showButton(),$=D.availabilityImage(),y=function(t){return G.cart.htmlProducts.prodCache[t.id]||(G.cart.htmlProducts.prodCache[t.id]=new G.cart.product(x5CartData.products[t.id],{quiet:!0})),G.cart.htmlProducts.prodCache[t.id]},U=function(t){var e="",i="../"+x5CartData.settings.availabilityImage;if(null!=i)switch(t){case"available":e+="\t\t\t\t<span style=\"vertical-align: middle; display: inline-block; width: 22px; height: 22px; background-image: url('"+i+"'); background-position: 0 0;\"></span>\n";break;case"lacking":e+="\t\t\t\t<span style=\"vertical-align: middle; display: inline-block; width: 22px; height: 22px; background-image: url('"+i+"'); background-position: -22px 0;\"></span>\n";break;case"notavailable":e+="\t\t\t\t<span style=\"vertical-align: middle; display: inline-block; width: 22px; height: 22px; background-image: url('"+i+"'); background-position: -44px 0;\"></span>\n"}return e},z=function(t){switch(t){case"available":return"http://schema.org/InStock";case"lacking":return"http://schema.org/LimitedAvailability";default:return"http://schema.org/OutOfStock"}},j=function(t){switch(t){case"available":return G.l10n.get("cart_fixedproduct_available");case"lacking":return G.l10n.get("cart_fixedproduct_lack");case"notavailable":return G.l10n.get("cart_fixedproduct_unavailable")}return""},H=function(t,e){switch(t){case"available":return G.l10n.get("cart_dynamicproduct_available").replace("[QUANTITY]",e);case"lacking":return G.l10n.get("cart_dynamicproduct_lack").replace("[QUANTITY]",e);case"notavailable":return G.l10n.get("cart_dynamicproduct_unavailable").replace("[QUANTITY]",e)}return""},B=function(t,e){return t&&t.image_obj?'\t\t<img src="../'+t.image_obj.image+'" style="position: absolute; max-height: '+t.image_obj.height+"px; max-width: "+t.image_obj.width+"px; width: "+t.size+"%; z-index: 2; "+function(t){switch(t){case"topleft":return"top: 0; left: 0;";case"topright":return"top: 0; right: 0;";case"bottomright":return"bottom: 0; right: 0;";case"bottomleft":return"bottom: 0; left: 0;"}return""}(t.align)+'" alt="'+e+'" />\n':""},L=function(t){var e,i=G.cart.productsDataSettings.showVat()&&"none"!=x5CartData.settings.vattype?'<span style="margin: 3px; font-size: 0.85em;">'+G.l10n.get(R?"cart_showvat_included":"cart_showvat_excluded").replace("[FIELD]",t.vat).replace("[NAME]",t.vatName)+"</span>":"",r=y(t).singleFullPrice(void 0,R),r=G.cart.formatCurrency(r);return n(t)?(e=y(t).singlePrice(void 0,R),e=G.cart.formatCurrency(e),'\t\t\t<span id="product_'+t.id+'_price">'+e+"</span>"+i+'\n\t\t\t<span style="text-decoration: line-through; margin-left: 2px;" id="product_'+t.id+'_fullprice">'+r+"</span>\n"):'\t\t\t<span id="product_'+t.id+'_fullprice">'+r+"</span>"+i+"\n"},V=function(t){return n(t)||-1<i.becauseOfQuantity.indexOf(t.id)};G.cart.manager.callWithSearchPageAdditionalInfos(function(t){S=t.availabilityData,i=t.discountedProducts,G.cart.search.draw(e())})}}})}(_jq,x5engine),function(k,C){"use strict";k.extend(!0,C.cart.productDetails,{init:function(t){function e(t){var n,i,r;if(t.name&&k("#"+b+" .product-title").text(t.name).attr("title",t.name),t.category&&(m="",null!=x5CartData.categories&&null!=x5CartData.categories.dataSource&&null!=(m=(n=function(t,e){if(null!=e){for(var i=0;i<e.length;i++)if("category"==e[i].type){if(e[i].id==t)return e[i].text;if(null!=e[i].items&&0<e[i].items.length){var r=n(t,e[i].items);if(r)return r}}return null}})(t.category,x5CartData.categories.dataSource))&&k("#"+b+" .product-category").text(m)),C.utils.isNullOrEmpty(y.averageRating)||C.utils.isNullOrEmpty(y.totalComments)?k("#"+b+" .product-stars").css("display","none"):(m='<span class="topic-star-container-small" title="'+y.averageRating+'/5"><span class="topic-star-fixer-small" style="width: '+Math.round(y.averageRating/5*100)+'%;"></span></span>',m+="<span>"+y.averageRating+" ("+y.totalComments+" "+C.l10n.get("comments_and_ratings_label_reviews")+")</span>",k("#"+b+" .product-stars").append(m)),t.description&&(m=C.utils.replaceAll(t.description,"\n","<br />"),m=C.utils.replaceAll(m,"\\","\\\\"),m=C.utils.replaceAll(m,"'","&#39;"),k("#"+b+" .product-description").append(m+'<div class="im-products-description-fade"></div>')),"unset"!=t.availabilityType&&(i=function(t){var e="",i="../"+x5CartData.settings.availabilityImage;if(null!=i)switch(t){case"available":e+="\t\t\t\t<span style=\"vertical-align: middle; display: inline-block; width: 22px; height: 22px; background-image: url('"+i+"'); background-position: 0 0;\"></span>\n";break;case"lack":e+="\t\t\t\t<span style=\"vertical-align: middle; display: inline-block; width: 22px; height: 22px; background-image: url('"+i+"'); background-position: -22px 0;\"></span>\n";break;case"notavailable":e+="\t\t\t\t<span style=\"vertical-align: middle; display: inline-block; width: 22px; height: 22px; background-image: url('"+i+"'); background-position: -44px 0;\"></span>\n"}return e},m=function(t,e){return'<table><tr><td style="vertical-align: middle">'+i(t)+'</td><td style="vertical-align: middle">'+function(t,e){switch(t){case"available":return C.l10n.get("cart_dynamicproduct_available").replace("[QUANTITY]",e);case"lack":return C.l10n.get("cart_dynamicproduct_lack").replace("[QUANTITY]",e);case"notavailable":return C.l10n.get("cart_dynamicproduct_unavailable").replace("[QUANTITY]",e)}return""}(t,e)+"</td></tr></table>"},d="","fixed"==t.availabilityType?C.utils.isNullOrEmpty(x5CartData.settings.availabilityImage)||"unknown"==t.staticAvailValue||(d+=i(t.staticAvailValue)+function(t){switch(t){case"available":return C.l10n.get("cart_fixedproduct_available");case"lack":return C.l10n.get("cart_fixedproduct_lack");case"notavailable":return C.l10n.get("cart_fixedproduct_unavailable")}return""}(t.staticAvailValue)):C.utils.isOnline()?"dynamic"==t.availabilityType&&t.dynamicAvailValue&&(d+=m(t.dynamicAvailValue,t.availableItems)):d+=m(t.staticAvailValue,t.offlineAvailableItems),k("#"+b+" .product-available").html(d)),t.quantityDiscounts&&(r="\t\t<div class=\"im-products-qty-discount\" onmouseover=\"x5engine.imTip.Show(this, {target: $(this).find('img'), text: '<div>"+C.l10n.get("cart_discount")+":</div><ul>",t.quantityDiscounts.forEach(function(t){var e=t.minimum,t=t.value.toFixed(2),t=t%1==0?parseInt(t):t;r+="<li>"+C.l10n.get("cart_discount_per_qty").replace("[QUANTITY]",e).replace("[DISCOUNT]",t)+"</li>"}),r+='</ul>\'})">\n\t\t\t<img alt="'+C.l10n.get("cart_qty_discount")+'" width="16" height="16" src="../res/info.gif" />\n\t\t\t'+C.l10n.get("cart_qty_discount")+"\n\t\t</div>\n",k("#"+b+" .product-qty-discount").append(r)),t.options&&0<t.options.length){var e=0,a="";if(t.options.forEach(function(t){null!=t.suboptions&&0<t.suboptions.length&&(e+=t.suboptions.length)}),0==e)a+='\t\t\t<select id="product_'+t.id+'_opt" onchange="x5engine.cart.ui.updateProductListOptions(\''+t.id+"', this, 'product_"+t.id+"', "+(w?"true":"false")+');" class="opt">\n',t.options.forEach(function(t){a+='\t\t\t\t<option value="'+t.id+'">'+t.name+"</option>\n"}),a+="\t\t\t</select>\n";else{a+='\t\t\t<select id="product_'+t.id+'_opt" class="opt" onchange="x5engine.cart.ui.updateProductListOptions(\''+t.id+"', this, 'product_"+t.id+"', "+(w?"true":"false")+', true);">\n',t.options.forEach(function(t){a+='\t\t\t\t<option value="'+t.id+'">'+t.name+"</option>\n"}),a+="\t\t\t</select>\n";var s=t.options[0];if(null!=s.suboptions&&0<s.suboptions.length){a+='\t\t\t<select id="product_'+t.id+'_subopt" class="subopt">\n';for(var o=0;o<s.suboptions.length;o++)a+='\t\t\t\t<option value="'+o+'">'+s.suboptions[o]+"</option>\n";a+="\t\t\t</select>\n"}}k("#"+b+" .product-options").append(a)}var c,l=!1;for(c in x5CartData.payments)x5CartData.payments[c]&&x5CartData.payments[c].extra&&!0===x5CartData.payments[c].extra.ppcpPayLater&&(l=!0);l&&paypal&&paypal.Messages&&(m={amount:C.cart.productDetails.getProdClass(t).singlePrice(void 0,w),placement:"product"},paypal.Messages(m).render(".product-ppcp-pay-later")),k("#"+b+" .im-products-qty").attr("id","product_"+t.id+"_qty");var d=C.l10n.get("cart_add");if(k("#"+b+" .product-add").append('<input type="button" value="'+d+'" class="im-products-button" onclick="x5engine.cart.ui.addToCart(\''+t.id+"', $('#product_"+t.id+"_qty').val(), $('#product_"+t.id+"_opt').val(), $('#product_"+t.id+"_subopt').val(), false, '../');\"/>"),k("#"+b+" .product-price").append(C.cart.productDetails.getPriceBoxCode(t,w,!0)),C.cart.productDetails.initGallery(b,t,y,0),C.utils.isNullOrEmpty(t.productPageDetailsRichText)||(k("#"+b+" .container-details").append(C.utils.isOnline()?t.productPageDetailsRichText.html.online:t.productPageDetailsRichText.html.preview),k('<style type="text/css">'+t.productPageDetailsRichText.css+"</style>").appendTo(k("head")),k("#"+b+" .container-details").removeClass("hidden")),y.showRelatedProducts){var u,p={};if(0<C.settings.breakPoints.length)for(o=0;o<y.innerWidths.length;o++){var h="Desktop"==C.responsive.getCurrentBreakPoint().name&&1==y.innerWidths.length?1:C.settings.breakPoints[o].end;0!=h&&(u=Math.floor(y.innerWidths[o]/260),p[h]={},p[h].slidesPerView=Math.max(1,u))}var f=function(){var t=y.offsetFromRelatedProducts,e=y.offsetToRelatedProducts;C.cart.api.getRelatedProducts(_,t,e).then(function(t){0<t.length?(k("#"+b+" .container-related-products").removeClass("d-none"),t=Object.values(t),x.appendSlide(g(t)),y.offsetFromRelatedProducts+=y.offsetToRelatedProducts):y.offsetFromRelatedProducts=y.offsetMaxRelatedProducts})},g=function(t){for(var e=[],i=0;i<t.length;i++){var r=t[i],n="../"+x5CartData.settings.noPreviewImage,a=(0<r.media.length&&(n="../"+("video"===(a=r.media[0]).type||"youtube"===a.type||"vimeo"===a.type?"res/video_thumb.svg":C.utils.isNullOrEmpty(a.url)?x5CartData.settings.noPreviewImage:a.url)),[]),n=(a.push('<div class="swiper-slide" '+C.utils.linkJs(r.link,{baseUrl:"../"})+' data-product-id="'+r.id+'">'),a.push('<div class="swiper-slide-wrapper-image"><img class="swiper-slide-image" src="'+n+'"></div>'),a.push('<div class="product-title three-lines lines-ellipsis" title="'+r.name+'">'+r.name+"</div>"),a.push('<div class="product-price">'),a.push(C.cart.productDetails.getPriceBoxCode(r,w,!1)),a.push("</div>"),a.push("</div>"),a.join(""));e.push(n)}return e};(x=new Swiper("#"+b+" .container-related-products .swiper-container",{slidesPerView:1,centeredSlides:!1,spaceBetween:10,loop:!1,allowTouchMove:!1,preventClicks:!0,preventClicksPropagation:!0,freeMode:!1,pagination:{el:".container-related-products .swiper-pagination",type:"null"},navigation:{nextEl:"#"+b+" .container-related-products .swiper-button-next",prevEl:"#"+b+" .container-related-products .swiper-button-prev"},breakpoints:p})).on("slideNextTransitionEnd",function(){y.offsetFromRelatedProducts<y.offsetMaxRelatedProducts&&f()}),f()}var m=t.schemaOrg;function v(t,e){var i=k('meta[content*="['+t+'-placeholder]"]');i&&i.attr("content")&&(e?(t=i.attr("content").replace("["+t+"-placeholder]",e),i.attr("content",t)):i.remove())}m&&(m["@context"]="https://schema.org",k('<script type="application/ld+json">'+JSON.stringify(m)+"<\/script>").appendTo(k("head"))),k("title").html(k("title").html().replace("[title-placeholder]",t.name).replace("[tag-title-placeholder]",t.seo.tagTitle)),v("title",t.name),v("tag-title",t.seo.tagTitle),v("tag-description",t.seo.tagDescription),v("tag-keywords",t.seo.tagKeywords),v("slug",t.slug),v("og-image",t.thumb.url),v("og-image-type",t.thumb.type),v("og-image-width",t.thumb.width),v("og-image-height",t.thumb.height)}var _,y=k.extend({target:null,galleryHeightPx:400,galleryWidthPerc:50,galleryThumbnailHeightPx:64,showRelatedProducts:!1,innerWidths:[],averageRating:null,totalComments:null,minWidthCategoryBox:250,offsetFromRelatedProducts:0,offsetToRelatedProducts:10,offsetMaxRelatedProducts:50,minThumbSize:48,videoHiresWidth:2560,videoHiresHeight:1440},t),b=y.target,x=null,w="included"==x5CartData.settings.vattype;C.cart.ecommerce(x5CartData);C.cart.productDetails.getIdFromQueryString().then(function(t){_=t,C.utils.isNullOrEmpty(_)||C.cart.api.getProductData(_).then(function(i){var r,n,a;0<i.length&&(e(i[0]),k("#"+b).removeClass("hidden"),r=null,a=!(n=0),C.utils.onElementResize(document.getElementById(b),function(t,e){n!=t.width&&(n=t.width,r&&clearTimeout(r),r=setTimeout(function(){var t;a?a=!1:(t=k(".swiper-container.gallery-top .swiper-slide-active").attr("data-position"),document.querySelector("#"+y.target+" .swiper-container.gallery-top").swiper.destroy(!0,!0),k("#"+y.target+" .swiper-container.gallery-top .swiper-wrapper").empty(),1<i[0].media.length&&(document.querySelector("#"+y.target+" .swiper-container.gallery-thumbs").swiper.destroy(!0,!0),k("#"+y.target+" .swiper-container.gallery-thumbs .swiper-wrapper").empty()),C.cart.productDetails.initGallery(y.target,i[0],y,t))},50))}))})})},getProdClass:function(t){return new C.cart.product(x5CartData.products[t.id],{quiet:!0})},getPriceBoxCode:function(t,e,i){var r="",i=i&&"none"!=x5CartData.settings.vattype?'<span class="vat-info small-font">'+C.l10n.get(e?"cart_showvat_included":"cart_showvat_excluded").replace("[FIELD]",t.vat).replace("[NAME]",t.vatName)+"</span>":"",n=C.cart.productDetails.getProdClass(t).singleFullPrice(void 0,e),n=C.cart.formatCurrency(n);return t.isDiscountedRegardlessOfCouponAndQuantity?(e=C.cart.productDetails.getProdClass(t).singlePrice(void 0,e),e=C.cart.formatCurrency(e),r=(r+='<div class="product-price-full-price" id="product_'+t.id+'_fullprice">'+n+"</div>")+'<span class="big-font bold product-price-price" id="product_'+t.id+'_price">'+e+"</span>"+i):r+='<span class="big-font bold product-price-price" id="product_'+t.id+'_fullprice">'+n+"</span>"+i,r},initGallery:function(p,h,f,t){function e(n,a){function s(i,r,t,e,n,a,s){var o,c,l,d,u='<div class="swiper-slide" data-position="'+r+'"';"galleryTop"==e&&n?(u+="></div>","video"==s.type&&(s.url="../"+s.url),o=f.videoHiresWidth,c=f.videoHiresHeight,(l=k("#"+f.target+" .swiper-container.gallery-top").width())<o&&(c*=l/o,o=l),(d=k("#"+f.target+" .swiper-container.gallery-top").height())<c&&(o*=d/c,c=d),new C.mediaObject(k.extend(s,{showControls:!1,touchDevice:k("html").hasClass("touchevents"),contentWidth:l,contentHeight:d,width:o,height:c,load:function(t){i.append(u);var e=i.find(".swiper-slide[data-position='"+r+"']");e.append(t.DOMObject()),t.AnimateIn(e,function(){})},error:function(t,e){}}))):("galleryTop"==e?u+='><img class="swiper-slide-image" '+C.utils.linkJs(h.showboxLinks[r],{baseUrl:"../"})+' src="'+t+'">':(u+='><img src="'+t+'"',n&&(s=k("#"+p+" .swiper-container.gallery-thumbs .swiper-wrapper").height(),u+="style='width: "+s+"px;'"),u+=">"),u+="</div>",i.append(u))}0<h.media.length?h.media.forEach(function(t,e){var i,r;null!=t&&((i="video"===t.type||"youtube"===t.type||"vimeo"===t.type)||"galleryTop"!=a||t.width<n.width()&&(t.height,n.height()),r="../"+(i?"res/video_thumb.svg":C.utils.isNullOrEmpty(t.url)?x5CartData.settings.noPreviewImage:t.url),s(n,e,r,a,i,0,t))}):s(n,0,"../"+x5CartData.settings.noPreviewImage,a,!1)}var i=1<h.media.length,r=(e(k("#"+p+" .swiper-container.gallery-top .swiper-wrapper"),"galleryTop"),k("#"+p+" .swiper-container.gallery-thumbs .swiper-wrapper")),r=(1<h.media.length?e(r,"galleryThumbs"):k("#"+p+" .container-gallery").addClass("one-image"),null),n=(i&&(r=new Swiper("#"+p+" .swiper-container.gallery-thumbs",{spaceBetween:5,slidesPerView:"auto",loop:!1,freeMode:!1,centerInsufficientSlides:!1,centeredSlides:!0,slideToClickedSlide:!0,observer:!0,observeParents:!0,navigation:{nextEl:"#"+p+" .container-gallery .swiper-button-next.thumbs",prevEl:"#"+p+" .container-gallery .swiper-button-prev.thumbs"},on:{init:function(){},imagesReady:function(){var t,e;i&&(t=k("#"+p+" .swiper-container.gallery-thumbs").width(),e=0,k("#"+p+" .swiper-container.gallery-thumbs .swiper-wrapper .swiper-slide").each(function(){e+=k(this).width()+5}),e<t&&(k("#"+p+" .container-gallery .swiper-button-next.thumbs").css("display","none"),k("#"+p+" .container-gallery .swiper-button-prev.thumbs").css("display","none")))}}})),null),n=new Swiper("#"+p+" .swiper-container.gallery-top",{navigation:{nextEl:"#"+p+" .container-gallery .swiper-button-next.top",prevEl:"#"+p+" .container-gallery .swiper-button-prev.top"},spaceBetween:5,loop:!1,allowTouchMove:i,observer:!0,observeParents:!0,thumbs:{swiper:r}});0<t&&(r.slideTo(parseInt(t)),n.slideTo(parseInt(t)))},getIdFromQueryString:function(){if(!C.utils.isNullOrEmpty(window.location.search)&&1<window.location.search.length){var t,e=[];for(t in window.location.search.substring(1).split("&").forEach(function(t){e.push(t.split("="))}),e){var i=e[t];if(1==i.length)return C.cart.api.getIdBySlug(i[0]);if(2==i.length&&"id"==i[0])return Promise.resolve(i[1])}}return Promise.resolve(null)}})}(_jq,x5engine,window),function(a,n,s){"use strict";var t=new Promise(function(t){n.boot.push(function(){t(n.settings)})}),r=t.then(function(r){if(r.islocal)return{getVersion:function(){return Promise.resolve(Date.now())},getProducts:function(e){return new Promise(function(t){var i={};e.forEach(function(t){var e=r.imCart.localProductsData[t];e&&(i[t]=e)}),t(i)})},getProductsDynamicData:function(i){return new Promise(function(t){var e={};i.forEach(function(t){e[t]={}}),t(e)})},getIdBySlug:function(t){return Promise.resolve(n.settings.imCart.slugToProductIdMap[t])}};if("undefined"!=typeof x5CartData){const i=r.currentPath+"cart/x5cart.php";var t=e({url:i+"?action=crtvrs",type:"GET"});return{getVersion:function(){return t},getProducts:function(t){return e({url:i+"?action=prdinfo",type:"POST",data:{products:t}})},getProductsDynamicData:function(t){return e({url:i+"?action=prddyna",type:"POST",data:{products:t}})},getIdBySlug:function(t){return e({url:i+"?action=prdid",type:"POST",data:{slug:t}})}};function e(t){return new Promise(function(e,i){a.ajax(t).always(function(t){t.status&&"ok"===t.status?e(t.data):i(t)})})}}}),e=r.then(function(t){return t.getVersion()}),i=new Promise(function(t){try{var e,i,r;"localStorage"in s&&s.localStorage&&(e="test",(i=s.localStorage).setItem(e,"asd"),r="asd"==i.getItem(e),i.removeItem(e),r&&t(s.localStorage))}catch(t){}t({_data:{},setItem:function(t,e){return this._data[t]=String(e)},getItem:function(t){return this._data.hasOwnProperty(t)?this._data[t]:void 0},removeItem:function(t){return delete this._data[t]},clear:function(){return this._data={}}})}),i=Promise.all([i,t]).then(function(t){var e=t[0];const i=t[1].siteId+"_cart_api_cache";return{loadCache:function(){try{return JSON.parse(e.getItem(i))}catch(t){return}},saveCache:function(t){try{e.setItem(i,JSON.stringify(t))}catch(t){console.error(t)}}}}),o=Promise.all([i,e]).then(function(t){var r=t[0],n=t[1],t=r.loadCache();return t&&t.version&&n==t.version||r.saveCache({version:n,products:{},slugToIdMap:{}}),{getProductData:function(t){var e=r.loadCache();return e&&e.products?e.products[t]:void 0},getIdBySlug:function(t){var e=r.loadCache();return e&&e.slugToIdMap?e.slugToIdMap[t]:void 0},addProduct:function(t){var e=r.loadCache();if(e){if(e.products||(e.products={}),!e.slugToIdMap)for(var i in e.slugToIdMap={},e.products)e.slugToIdMap[e.products[i].slug]=i}else e={version:n,products:{},slugToIdMap:{}};e.products[t.id]=t,e.slugToIdMap[t.slug]=t.id,r.saveCache(e)}}}).catch(function(t){});function c(r,n){return o.then(function(e){var t,i={ids:null==(t=r)?[]:Array.isArray(t)?t:[t],cached:[],uncached:[]};return i.ids.forEach(function(t){e.getProductData(t)?n||i.cached.push(t):i.uncached.push(t)}),i})}function l(i){return i.ids.length?r.then(function(t){var e=0<i.cached.length?t.getProductsDynamicData(i.cached):Promise.resolve([]),t=0<i.uncached.length?t.getProducts(i.uncached):Promise.resolve([]);return Promise.all([t,e])}).then(function(t){return{ids:i.ids,uncached:t[0],cached:t[1]}}):Promise.resolve({})}function d(t,e){t=c(t,e).then(l);return Promise.all([o,t]).then(function(t){var e=t[0],i=t[1];if(i.uncached)for(var r in i.uncached)e.addProduct(i.uncached[r]);if(i.cached)for(var r in i.cached)e.addProduct(a.extend(!0,e.getProductData(r),i.cached[r]));var n=[];return i.ids&&i.ids.forEach(function(t){n.push(e.getProductData(t))}),n})}a.extend(!0,n.cart,{api:{getIdBySlug:function(e){return o.then(function(t){t=t.getIdBySlug(e);return t||r.then(function(t){return t.getIdBySlug(e)})})},getProductData:d,getRelatedProducts:function(t,e,i){return d(t,!0).then(function(t){if(0<t.length)return e=e||0,(t=t[0]).relatedProducts&&t.relatedProducts.length&&t.relatedProducts.length>e?d(t.relatedProducts.slice(e,e+i||t.relatedProducts.length),!0):[];throw"there's no product with requested id"})}}})}(_jq,x5engine,window),function(){"use strict";var e;e=function(s,o,c,t,l){function e(t,e,i){this.VERSION="2.3.0",this.input=t,this.plugin_count=i,this.current_plugin=0,this.calc_count=0,this.update_tm=0,this.old_from=0,this.old_to=0,this.old_min_interval=null,this.raf_id=null,this.dragging=!1,this.force_redraw=!1,this.no_diapason=!1,this.has_tab_index=!0,this.is_key=!1,this.is_update=!1,this.is_start=!0,this.is_finish=!1,this.is_active=!1,this.is_resize=!1,this.is_click=!1,e=e||{},this.$cache={win:s(c),body:s(o.body),input:s(t),cont:null,rs:null,min:null,max:null,from:null,to:null,single:null,bar:null,line:null,s_single:null,s_from:null,s_to:null,shad_single:null,shad_from:null,shad_to:null,edge:null,grid:null,grid_labels:[]},this.coords={x_gap:0,x_pointer:0,w_rs:0,w_rs_old:0,w_handle:0,p_gap:0,p_gap_left:0,p_gap_right:0,p_step:0,p_pointer:0,p_handle:0,p_single_fake:0,p_single_real:0,p_from_fake:0,p_from_real:0,p_to_fake:0,p_to_real:0,p_bar_x:0,p_bar_w:0,grid_gap:0,big_num:0,big:[],big_w:[],big_p:[],big_x:[]},this.labels={w_min:0,w_max:0,w_from:0,w_to:0,w_single:0,p_min:0,p_max:0,p_from_fake:0,p_from_left:0,p_to_fake:0,p_to_left:0,p_single_fake:0,p_single_left:0};var r,n,t=(i=this.$cache.input).prop("value"),a={skin:"flat",type:"single",min:10,max:100,from:null,to:null,step:1,min_interval:0,max_interval:0,drag_interval:!1,values:[],p_values:[],from_fixed:!1,from_min:null,from_max:null,from_shadow:!1,to_fixed:!1,to_min:null,to_max:null,to_shadow:!1,prettify_enabled:!0,prettify_separator:" ",prettify:null,force_edges:!1,keyboard:!0,grid:!1,grid_margin:!0,grid_num:4,grid_snap:!1,hide_min_max:!1,hide_from_to:!1,prefix:"",postfix:"",max_postfix:"",decorate_both:!0,values_separator:" â€” ",input_values_separator:";",disable:!1,block:!1,extra_classes:"",scope:null,onStart:null,onChange:null,onFinish:null,onUpdate:null};for(n in"INPUT"!==i[0].nodeName&&console&&console.warn&&console.warn("Base element should be <input>!",i[0]),(r={skin:i.data("skin"),type:i.data("type"),min:i.data("min"),max:i.data("max"),from:i.data("from"),to:i.data("to"),step:i.data("step"),min_interval:i.data("minInterval"),max_interval:i.data("maxInterval"),drag_interval:i.data("dragInterval"),values:i.data("values"),from_fixed:i.data("fromFixed"),from_min:i.data("fromMin"),from_max:i.data("fromMax"),from_shadow:i.data("fromShadow"),to_fixed:i.data("toFixed"),to_min:i.data("toMin"),to_max:i.data("toMax"),to_shadow:i.data("toShadow"),prettify_enabled:i.data("prettifyEnabled"),prettify_separator:i.data("prettifySeparator"),force_edges:i.data("forceEdges"),keyboard:i.data("keyboard"),grid:i.data("grid"),grid_margin:i.data("gridMargin"),grid_num:i.data("gridNum"),grid_snap:i.data("gridSnap"),hide_min_max:i.data("hideMinMax"),hide_from_to:i.data("hideFromTo"),prefix:i.data("prefix"),postfix:i.data("postfix"),max_postfix:i.data("maxPostfix"),decorate_both:i.data("decorateBoth"),values_separator:i.data("valuesSeparator"),input_values_separator:i.data("inputValuesSeparator"),disable:i.data("disable"),block:i.data("block"),extra_classes:i.data("extraClasses")}).values=r.values&&r.values.split(","),r)!r.hasOwnProperty(n)||r[n]!==l&&""!==r[n]||delete r[n];t!==l&&""!==t&&((t=t.split(r.input_values_separator||e.input_values_separator||";"))[0]&&t[0]==+t[0]&&(t[0]=+t[0]),t[1]&&t[1]==+t[1]&&(t[1]=+t[1]),e&&e.values&&e.values.length?(a.from=t[0]&&e.values.indexOf(t[0]),a.to=t[1]&&e.values.indexOf(t[1])):(a.from=t[0]&&+t[0],a.to=t[1]&&+t[1])),s.extend(a,e),s.extend(a,r),this.options=a,this.update_check={},this.validate(),this.result={input:this.$cache.input,slider:null,min:this.options.min,max:this.options.max,from:this.options.from,from_percent:0,from_value:null,to:this.options.to,to_percent:0,to_value:null},this.init()}var i,r=0,n=0<(t=t.userAgent).search(i=/msie\s\d+/i)&&i.exec(t).toString().split(" ")[1]<9&&(s("html").addClass("lt-ie9"),!0);Function.prototype.bind||(Function.prototype.bind=function(i){var r=this,n=[].slice;if("function"!=typeof r)throw new TypeError;var a=n.call(arguments,1),s=function(){var t,e;return this instanceof s?((t=function(){}).prototype=r.prototype,t=new t,e=r.apply(t,a.concat(n.call(arguments))),Object(e)===e?e:t):r.apply(i,a.concat(n.call(arguments)))};return s}),Array.prototype.indexOf||(Array.prototype.indexOf=function(t,e){var i;if(null==this)throw new TypeError('"this" is null or not defined');var r=Object(this),n=r.length>>>0;if(0==n)return-1;e=+e||0;if(n<=(e=Math.abs(e)===1/0?0:e))return-1;for(i=Math.max(0<=e?e:n-Math.abs(e),0);i<n;){if(i in r&&r[i]===t)return i;i++}return-1});e.prototype={init:function(t){this.no_diapason=!1,this.coords.p_step=this.convertToPercent(this.options.step,!0),this.target="base",this.toggleInput(),this.append(),this.setMinMax(),t?(this.force_redraw=!0,this.calc(!0),this.callOnUpdate()):(this.force_redraw=!0,this.calc(!0),this.callOnStart()),this.updateScene()},append:function(){var t='<span class="irs irs--'+this.options.skin+" js-irs-"+this.plugin_count+" "+this.options.extra_classes+'"></span>';this.$cache.input.before(t),this.$cache.input.prop("readonly",!0),this.$cache.cont=this.$cache.input.prev(),this.result.slider=this.$cache.cont,this.$cache.cont.html('<span class="irs"><span class="irs-line" tabindex="0"></span><span class="irs-min">0</span><span class="irs-max">1</span><span class="irs-from">0</span><span class="irs-to">0</span><span class="irs-single">0</span></span><span class="irs-grid"></span>'),this.$cache.rs=this.$cache.cont.find(".irs"),this.$cache.min=this.$cache.cont.find(".irs-min"),this.$cache.max=this.$cache.cont.find(".irs-max"),this.$cache.from=this.$cache.cont.find(".irs-from"),this.$cache.to=this.$cache.cont.find(".irs-to"),this.$cache.single=this.$cache.cont.find(".irs-single"),this.$cache.line=this.$cache.cont.find(".irs-line"),this.$cache.grid=this.$cache.cont.find(".irs-grid"),"single"===this.options.type?(this.$cache.cont.append('<span class="irs-bar irs-bar--single"></span><span class="irs-shadow shadow-single"></span><span class="irs-handle single"><i></i><i></i><i></i></span>'),this.$cache.bar=this.$cache.cont.find(".irs-bar"),this.$cache.edge=this.$cache.cont.find(".irs-bar-edge"),this.$cache.s_single=this.$cache.cont.find(".single"),this.$cache.from[0].style.visibility="hidden",this.$cache.to[0].style.visibility="hidden",this.$cache.shad_single=this.$cache.cont.find(".shadow-single")):(this.$cache.cont.append('<span class="irs-bar"></span><span class="irs-shadow shadow-from"></span><span class="irs-shadow shadow-to"></span><span class="irs-handle from"><i></i><i></i><i></i></span><span class="irs-handle to"><i></i><i></i><i></i></span>'),this.$cache.bar=this.$cache.cont.find(".irs-bar"),this.$cache.s_from=this.$cache.cont.find(".from"),this.$cache.s_to=this.$cache.cont.find(".to"),this.$cache.shad_from=this.$cache.cont.find(".shadow-from"),this.$cache.shad_to=this.$cache.cont.find(".shadow-to"),this.setTopHandler()),this.options.hide_from_to&&(this.$cache.from[0].style.display="none",this.$cache.to[0].style.display="none",this.$cache.single[0].style.display="none"),this.appendGrid(),this.options.disable?(this.appendDisableMask(),this.$cache.input[0].disabled=!0):(this.$cache.input[0].disabled=!1,this.removeDisableMask(),this.bindEvents()),this.options.disable||(this.options.block?this.appendDisableMask():this.removeDisableMask()),this.options.drag_interval&&(this.$cache.bar[0].style.cursor="ew-resize")},setTopHandler:function(){var t=this.options.min,e=this.options.max,i=this.options.from,r=this.options.to;t<i&&r===e?this.$cache.s_from.addClass("type_last"):r<e&&this.$cache.s_to.addClass("type_last")},changeLevel:function(t){switch(t){case"single":this.coords.p_gap=this.toFixed(this.coords.p_pointer-this.coords.p_single_fake),this.$cache.s_single.addClass("state_hover");break;case"from":this.coords.p_gap=this.toFixed(this.coords.p_pointer-this.coords.p_from_fake),this.$cache.s_from.addClass("state_hover"),this.$cache.s_from.addClass("type_last"),this.$cache.s_to.removeClass("type_last");break;case"to":this.coords.p_gap=this.toFixed(this.coords.p_pointer-this.coords.p_to_fake),this.$cache.s_to.addClass("state_hover"),this.$cache.s_to.addClass("type_last"),this.$cache.s_from.removeClass("type_last");break;case"both":this.coords.p_gap_left=this.toFixed(this.coords.p_pointer-this.coords.p_from_fake),this.coords.p_gap_right=this.toFixed(this.coords.p_to_fake-this.coords.p_pointer),this.$cache.s_to.removeClass("type_last"),this.$cache.s_from.removeClass("type_last")}},appendDisableMask:function(){this.$cache.cont.append('<span class="irs-disable-mask"></span>'),this.$cache.cont.addClass("irs-disabled")},removeDisableMask:function(){this.$cache.cont.remove(".irs-disable-mask"),this.$cache.cont.removeClass("irs-disabled")},remove:function(){this.$cache.cont.remove(),this.$cache.cont=null,this.$cache.line.off("keydown.irs_"+this.plugin_count),this.$cache.body.off("touchmove.irs_"+this.plugin_count),this.$cache.body.off("mousemove.irs_"+this.plugin_count),this.$cache.win.off("touchend.irs_"+this.plugin_count),this.$cache.win.off("mouseup.irs_"+this.plugin_count),n&&(this.$cache.body.off("mouseup.irs_"+this.plugin_count),this.$cache.body.off("mouseleave.irs_"+this.plugin_count)),this.$cache.grid_labels=[],this.coords.big=[],this.coords.big_w=[],this.coords.big_p=[],this.coords.big_x=[],cancelAnimationFrame(this.raf_id)},bindEvents:function(){this.no_diapason||(this.$cache.body.on("touchmove.irs_"+this.plugin_count,this.pointerMove.bind(this)),this.$cache.body.on("mousemove.irs_"+this.plugin_count,this.pointerMove.bind(this)),this.$cache.win.on("touchend.irs_"+this.plugin_count,this.pointerUp.bind(this)),this.$cache.win.on("mouseup.irs_"+this.plugin_count,this.pointerUp.bind(this)),this.$cache.line.on("touchstart.irs_"+this.plugin_count,this.pointerClick.bind(this,"click")),this.$cache.line.on("mousedown.irs_"+this.plugin_count,this.pointerClick.bind(this,"click")),this.$cache.line.on("focus.irs_"+this.plugin_count,this.pointerFocus.bind(this)),this.options.drag_interval&&"double"===this.options.type?(this.$cache.bar.on("touchstart.irs_"+this.plugin_count,this.pointerDown.bind(this,"both")),this.$cache.bar.on("mousedown.irs_"+this.plugin_count,this.pointerDown.bind(this,"both"))):(this.$cache.bar.on("touchstart.irs_"+this.plugin_count,this.pointerClick.bind(this,"click")),this.$cache.bar.on("mousedown.irs_"+this.plugin_count,this.pointerClick.bind(this,"click"))),"single"===this.options.type?(this.$cache.single.on("touchstart.irs_"+this.plugin_count,this.pointerDown.bind(this,"single")),this.$cache.s_single.on("touchstart.irs_"+this.plugin_count,this.pointerDown.bind(this,"single")),this.$cache.shad_single.on("touchstart.irs_"+this.plugin_count,this.pointerClick.bind(this,"click")),this.$cache.single.on("mousedown.irs_"+this.plugin_count,this.pointerDown.bind(this,"single")),this.$cache.s_single.on("mousedown.irs_"+this.plugin_count,this.pointerDown.bind(this,"single")),this.$cache.edge.on("mousedown.irs_"+this.plugin_count,this.pointerClick.bind(this,"click")),this.$cache.shad_single.on("mousedown.irs_"+this.plugin_count,this.pointerClick.bind(this,"click"))):(this.$cache.single.on("touchstart.irs_"+this.plugin_count,this.pointerDown.bind(this,null)),this.$cache.single.on("mousedown.irs_"+this.plugin_count,this.pointerDown.bind(this,null)),this.$cache.from.on("touchstart.irs_"+this.plugin_count,this.pointerDown.bind(this,"from")),this.$cache.s_from.on("touchstart.irs_"+this.plugin_count,this.pointerDown.bind(this,"from")),this.$cache.to.on("touchstart.irs_"+this.plugin_count,this.pointerDown.bind(this,"to")),this.$cache.s_to.on("touchstart.irs_"+this.plugin_count,this.pointerDown.bind(this,"to")),this.$cache.shad_from.on("touchstart.irs_"+this.plugin_count,this.pointerClick.bind(this,"click")),this.$cache.shad_to.on("touchstart.irs_"+this.plugin_count,this.pointerClick.bind(this,"click")),this.$cache.from.on("mousedown.irs_"+this.plugin_count,this.pointerDown.bind(this,"from")),this.$cache.s_from.on("mousedown.irs_"+this.plugin_count,this.pointerDown.bind(this,"from")),this.$cache.to.on("mousedown.irs_"+this.plugin_count,this.pointerDown.bind(this,"to")),this.$cache.s_to.on("mousedown.irs_"+this.plugin_count,this.pointerDown.bind(this,"to")),this.$cache.shad_from.on("mousedown.irs_"+this.plugin_count,this.pointerClick.bind(this,"click")),this.$cache.shad_to.on("mousedown.irs_"+this.plugin_count,this.pointerClick.bind(this,"click"))),this.options.keyboard&&this.$cache.line.on("keydown.irs_"+this.plugin_count,this.key.bind(this,"keyboard")),n&&(this.$cache.body.on("mouseup.irs_"+this.plugin_count,this.pointerUp.bind(this)),this.$cache.body.on("mouseleave.irs_"+this.plugin_count,this.pointerUp.bind(this))))},pointerFocus:function(t){var e,i;this.target||(e=(i="single"===this.options.type?this.$cache.single:this.$cache.from).offset().left,e+=i.width()/2-1,this.pointerClick("single",{preventDefault:function(){},pageX:e}))},pointerMove:function(t){this.dragging&&(t=t.pageX||t.originalEvent.touches&&t.originalEvent.touches[0].pageX,this.coords.x_pointer=t-this.coords.x_gap,this.calc())},pointerUp:function(t){this.current_plugin===this.plugin_count&&this.is_active&&(this.is_active=!1,this.$cache.cont.find(".state_hover").removeClass("state_hover"),this.force_redraw=!0,n&&s("*").prop("unselectable",!1),this.updateScene(),this.restoreOriginalMinInterval(),(s.contains(this.$cache.cont[0],t.target)||this.dragging)&&this.callOnFinish(),this.dragging=!1)},pointerDown:function(t,e){e.preventDefault();var i=e.pageX||e.originalEvent.touches&&e.originalEvent.touches[0].pageX;2!==e.button&&("both"===t&&this.setTempMinInterval(),t=t||this.target||"from",this.current_plugin=this.plugin_count,this.target=t,this.is_active=!0,this.dragging=!0,this.coords.x_gap=this.$cache.rs.offset().left,this.coords.x_pointer=i-this.coords.x_gap,this.calcPointerPercent(),this.changeLevel(t),n&&s("*").prop("unselectable",!0),this.$cache.line.trigger("focus"),this.updateScene())},pointerClick:function(t,e){e.preventDefault();var i=e.pageX||e.originalEvent.touches&&e.originalEvent.touches[0].pageX;2!==e.button&&(this.current_plugin=this.plugin_count,this.target=t,this.is_click=!0,this.coords.x_gap=this.$cache.rs.offset().left,this.coords.x_pointer=+(i-this.coords.x_gap).toFixed(),this.force_redraw=!0,this.calc(),this.$cache.line.trigger("focus"))},key:function(t,e){if(!(this.current_plugin!==this.plugin_count||e.altKey||e.ctrlKey||e.shiftKey||e.metaKey)){switch(e.which){case 83:case 65:case 40:case 37:e.preventDefault(),this.moveByKey(!1);break;case 87:case 68:case 38:case 39:e.preventDefault(),this.moveByKey(!0)}return!0}},moveByKey:function(t){var e=this.coords.p_pointer,i=(this.options.max-this.options.min)/100,i=this.options.step/i;t?e+=i:e-=i,this.coords.x_pointer=this.toFixed(this.coords.w_rs/100*e),this.is_key=!0,this.calc()},setMinMax:function(){if(this.options){if(this.options.hide_min_max)return this.$cache.min[0].style.display="none",void(this.$cache.max[0].style.display="none");var t,e;this.options.values.length?(this.$cache.min.html(this.decorate(this.options.p_values[this.options.min])),this.$cache.max.html(this.decorate(this.options.p_values[this.options.max]))):(t=this._prettify(this.options.min),e=this._prettify(this.options.max),this.result.min_pretty=t,this.result.max_pretty=e,this.$cache.min.html(this.decorate(t,this.options.min)),this.$cache.max.html(this.decorate(e,this.options.max))),this.labels.w_min=this.$cache.min.outerWidth(!1),this.labels.w_max=this.$cache.max.outerWidth(!1)}},setTempMinInterval:function(){var t=this.result.to-this.result.from;null===this.old_min_interval&&(this.old_min_interval=this.options.min_interval),this.options.min_interval=t},restoreOriginalMinInterval:function(){null!==this.old_min_interval&&(this.options.min_interval=this.old_min_interval,this.old_min_interval=null)},calc:function(t){if(this.options&&(this.calc_count++,10!==this.calc_count&&!t||(this.calc_count=0,this.coords.w_rs=this.$cache.rs.outerWidth(!1),this.calcHandlePercent()),this.coords.w_rs)){this.calcPointerPercent();var e=this.getHandleX();switch("both"===this.target&&(this.coords.p_gap=0,e=this.getHandleX()),"click"===this.target&&(this.coords.p_gap=this.coords.p_handle/2,e=this.getHandleX(),this.options.drag_interval?this.target="both_one":this.target=this.chooseHandle(e)),this.target){case"base":var i=(this.options.max-this.options.min)/100,r=(this.result.from-this.options.min)/i,i=(this.result.to-this.options.min)/i;this.coords.p_single_real=this.toFixed(r),this.coords.p_from_real=this.toFixed(r),this.coords.p_to_real=this.toFixed(i),this.coords.p_single_real=this.checkDiapason(this.coords.p_single_real,this.options.from_min,this.options.from_max),this.coords.p_from_real=this.checkDiapason(this.coords.p_from_real,this.options.from_min,this.options.from_max),this.coords.p_to_real=this.checkDiapason(this.coords.p_to_real,this.options.to_min,this.options.to_max),this.coords.p_single_fake=this.convertToFakePercent(this.coords.p_single_real),this.coords.p_from_fake=this.convertToFakePercent(this.coords.p_from_real),this.coords.p_to_fake=this.convertToFakePercent(this.coords.p_to_real),this.target=null;break;case"single":if(this.options.from_fixed)break;this.coords.p_single_real=this.convertToRealPercent(e),this.coords.p_single_real=this.calcWithStep(this.coords.p_single_real),this.coords.p_single_real=this.checkDiapason(this.coords.p_single_real,this.options.from_min,this.options.from_max),this.coords.p_single_fake=this.convertToFakePercent(this.coords.p_single_real);break;case"from":if(this.options.from_fixed)break;this.coords.p_from_real=this.convertToRealPercent(e),this.coords.p_from_real=this.calcWithStep(this.coords.p_from_real),this.coords.p_from_real>this.coords.p_to_real&&(this.coords.p_from_real=this.coords.p_to_real),this.coords.p_from_real=this.checkDiapason(this.coords.p_from_real,this.options.from_min,this.options.from_max),this.coords.p_from_real=this.checkMinInterval(this.coords.p_from_real,this.coords.p_to_real,"from"),this.coords.p_from_real=this.checkMaxInterval(this.coords.p_from_real,this.coords.p_to_real,"from"),this.coords.p_from_fake=this.convertToFakePercent(this.coords.p_from_real);break;case"to":if(this.options.to_fixed)break;this.coords.p_to_real=this.convertToRealPercent(e),this.coords.p_to_real=this.calcWithStep(this.coords.p_to_real),this.coords.p_to_real<this.coords.p_from_real&&(this.coords.p_to_real=this.coords.p_from_real),this.coords.p_to_real=this.checkDiapason(this.coords.p_to_real,this.options.to_min,this.options.to_max),this.coords.p_to_real=this.checkMinInterval(this.coords.p_to_real,this.coords.p_from_real,"to"),this.coords.p_to_real=this.checkMaxInterval(this.coords.p_to_real,this.coords.p_from_real,"to"),this.coords.p_to_fake=this.convertToFakePercent(this.coords.p_to_real);break;case"both":if(this.options.from_fixed||this.options.to_fixed)break;e=this.toFixed(e+.001*this.coords.p_handle),this.coords.p_from_real=this.convertToRealPercent(e)-this.coords.p_gap_left,this.coords.p_from_real=this.calcWithStep(this.coords.p_from_real),this.coords.p_from_real=this.checkDiapason(this.coords.p_from_real,this.options.from_min,this.options.from_max),this.coords.p_from_real=this.checkMinInterval(this.coords.p_from_real,this.coords.p_to_real,"from"),this.coords.p_from_fake=this.convertToFakePercent(this.coords.p_from_real),this.coords.p_to_real=this.convertToRealPercent(e)+this.coords.p_gap_right,this.coords.p_to_real=this.calcWithStep(this.coords.p_to_real),this.coords.p_to_real=this.checkDiapason(this.coords.p_to_real,this.options.to_min,this.options.to_max),this.coords.p_to_real=this.checkMinInterval(this.coords.p_to_real,this.coords.p_from_real,"to"),this.coords.p_to_fake=this.convertToFakePercent(this.coords.p_to_real);break;case"both_one":if(this.options.from_fixed||this.options.to_fixed)break;var r=this.convertToRealPercent(e),i=this.result.from_percent,i=this.result.to_percent-i,n=i/2,a=r-n,r=r+n;100<(r=a<0?(a=0)+i:r)&&(a=(r=100)-i),this.coords.p_from_real=this.calcWithStep(a),this.coords.p_from_real=this.checkDiapason(this.coords.p_from_real,this.options.from_min,this.options.from_max),this.coords.p_from_fake=this.convertToFakePercent(this.coords.p_from_real),this.coords.p_to_real=this.calcWithStep(r),this.coords.p_to_real=this.checkDiapason(this.coords.p_to_real,this.options.to_min,this.options.to_max),this.coords.p_to_fake=this.convertToFakePercent(this.coords.p_to_real)}"single"===this.options.type?(this.coords.p_bar_x=this.coords.p_handle/2,this.coords.p_bar_w=this.coords.p_single_fake,this.result.from_percent=this.coords.p_single_real,this.result.from=this.convertToValue(this.coords.p_single_real),this.result.from_pretty=this._prettify(this.result.from),this.options.values.length&&(this.result.from_value=this.options.values[this.result.from])):(this.coords.p_bar_x=this.toFixed(this.coords.p_from_fake+this.coords.p_handle/2),this.coords.p_bar_w=this.toFixed(this.coords.p_to_fake-this.coords.p_from_fake),this.result.from_percent=this.coords.p_from_real,this.result.from=this.convertToValue(this.coords.p_from_real),this.result.from_pretty=this._prettify(this.result.from),this.result.to_percent=this.coords.p_to_real,this.result.to=this.convertToValue(this.coords.p_to_real),this.result.to_pretty=this._prettify(this.result.to),this.options.values.length&&(this.result.from_value=this.options.values[this.result.from],this.result.to_value=this.options.values[this.result.to])),this.calcMinMax(),this.calcLabels()}},calcPointerPercent:function(){this.coords.w_rs?(this.coords.x_pointer<0||isNaN(this.coords.x_pointer)?this.coords.x_pointer=0:this.coords.x_pointer>this.coords.w_rs&&(this.coords.x_pointer=this.coords.w_rs),this.coords.p_pointer=this.toFixed(this.coords.x_pointer/this.coords.w_rs*100)):this.coords.p_pointer=0},convertToRealPercent:function(t){return t/(100-this.coords.p_handle)*100},convertToFakePercent:function(t){return t/100*(100-this.coords.p_handle)},getHandleX:function(){var t=100-this.coords.p_handle,e=this.toFixed(this.coords.p_pointer-this.coords.p_gap);return e<0?e=0:t<e&&(e=t),e},calcHandlePercent:function(){"single"===this.options.type?this.coords.w_handle=this.$cache.s_single.outerWidth(!1):this.coords.w_handle=this.$cache.s_from.outerWidth(!1),this.coords.p_handle=this.toFixed(this.coords.w_handle/this.coords.w_rs*100)},chooseHandle:function(t){return"single"===this.options.type?"single":this.coords.p_from_real+(this.coords.p_to_real-this.coords.p_from_real)/2<=t?this.options.to_fixed?"from":"to":this.options.from_fixed?"to":"from"},calcMinMax:function(){this.coords.w_rs&&(this.labels.p_min=this.labels.w_min/this.coords.w_rs*100,this.labels.p_max=this.labels.w_max/this.coords.w_rs*100)},calcLabels:function(){this.coords.w_rs&&!this.options.hide_from_to&&("single"===this.options.type?(this.labels.w_single=this.$cache.single.outerWidth(!1),this.labels.p_single_fake=this.labels.w_single/this.coords.w_rs*100,this.labels.p_single_left=this.coords.p_single_fake+this.coords.p_handle/2-this.labels.p_single_fake/2):(this.labels.w_from=this.$cache.from.outerWidth(!1),this.labels.p_from_fake=this.labels.w_from/this.coords.w_rs*100,this.labels.p_from_left=this.coords.p_from_fake+this.coords.p_handle/2-this.labels.p_from_fake/2,this.labels.p_from_left=this.toFixed(this.labels.p_from_left),this.labels.p_from_left=this.checkEdges(this.labels.p_from_left,this.labels.p_from_fake),this.labels.w_to=this.$cache.to.outerWidth(!1),this.labels.p_to_fake=this.labels.w_to/this.coords.w_rs*100,this.labels.p_to_left=this.coords.p_to_fake+this.coords.p_handle/2-this.labels.p_to_fake/2,this.labels.p_to_left=this.toFixed(this.labels.p_to_left),this.labels.p_to_left=this.checkEdges(this.labels.p_to_left,this.labels.p_to_fake),this.labels.w_single=this.$cache.single.outerWidth(!1),this.labels.p_single_fake=this.labels.w_single/this.coords.w_rs*100,this.labels.p_single_left=(this.labels.p_from_left+this.labels.p_to_left+this.labels.p_to_fake)/2-this.labels.p_single_fake/2,this.labels.p_single_left=this.toFixed(this.labels.p_single_left)),this.labels.p_single_left=this.checkEdges(this.labels.p_single_left,this.labels.p_single_fake))},updateScene:function(){this.raf_id&&(cancelAnimationFrame(this.raf_id),this.raf_id=null),clearTimeout(this.update_tm),this.update_tm=null,this.options&&(this.drawHandles(),this.is_active?this.raf_id=requestAnimationFrame(this.updateScene.bind(this)):this.update_tm=setTimeout(this.updateScene.bind(this),300))},drawHandles:function(){this.coords.w_rs=this.$cache.rs.outerWidth(!1),this.coords.w_rs&&(this.coords.w_rs!==this.coords.w_rs_old&&(this.target="base",this.is_resize=!0),this.coords.w_rs===this.coords.w_rs_old&&!this.force_redraw||(this.setMinMax(),this.calc(!0),this.drawLabels(),this.options.grid&&(this.calcGridMargin(),this.calcGridLabels()),this.force_redraw=!0,this.coords.w_rs_old=this.coords.w_rs,this.drawShadow()),this.coords.w_rs&&(this.dragging||this.force_redraw||this.is_key)&&((this.old_from!==this.result.from||this.old_to!==this.result.to||this.force_redraw||this.is_key)&&(this.drawLabels(),this.$cache.bar[0].style.left=this.coords.p_bar_x+"%",this.$cache.bar[0].style.width=this.coords.p_bar_w+"%","single"===this.options.type?(this.$cache.bar[0].style.left=0,this.$cache.bar[0].style.width=this.coords.p_bar_w+this.coords.p_bar_x+"%",this.$cache.s_single[0].style.left=this.coords.p_single_fake+"%"):(this.$cache.s_from[0].style.left=this.coords.p_from_fake+"%",this.$cache.s_to[0].style.left=this.coords.p_to_fake+"%",this.old_from===this.result.from&&!this.force_redraw||(this.$cache.from[0].style.left=this.labels.p_from_left+"%"),this.old_to===this.result.to&&!this.force_redraw||(this.$cache.to[0].style.left=this.labels.p_to_left+"%")),this.$cache.single[0].style.left=this.labels.p_single_left+"%",this.writeToInput(),this.old_from===this.result.from&&this.old_to===this.result.to||this.is_start||(this.$cache.input.trigger("change"),this.$cache.input.trigger("input")),this.old_from=this.result.from,this.old_to=this.result.to,this.is_resize||this.is_update||this.is_start||this.is_finish||this.callOnChange(),(this.is_key||this.is_click)&&(this.is_key=!1,this.is_click=!1,this.callOnFinish()),this.is_update=!1,this.is_resize=!1,this.is_finish=!1),this.is_start=!1,this.is_key=!1,this.is_click=!1,this.force_redraw=!1))},drawLabels:function(){var t,e,i,r,n;this.options&&(i=this.options.values.length,t=this.options.p_values,this.options.hide_from_to||("single"===this.options.type?(r=i?this.decorate(t[this.result.from]):(e=this._prettify(this.result.from),this.decorate(e,this.result.from)),this.$cache.single.html(r),this.calcLabels(),this.labels.p_single_left<this.labels.p_min+1?this.$cache.min[0].style.visibility="hidden":this.$cache.min[0].style.visibility="visible",this.labels.p_single_left+this.labels.p_single_fake>100-this.labels.p_max-1?this.$cache.max[0].style.visibility="hidden":this.$cache.max[0].style.visibility="visible"):(t=i?(this.options.decorate_both?(r=this.decorate(t[this.result.from]),r=(r+=this.options.values_separator)+this.decorate(t[this.result.to])):r=this.decorate(t[this.result.from]+this.options.values_separator+t[this.result.to]),n=this.decorate(t[this.result.from]),this.decorate(t[this.result.to])):(e=this._prettify(this.result.from),i=this._prettify(this.result.to),this.options.decorate_both?(r=this.decorate(e,this.result.from),r=(r+=this.options.values_separator)+this.decorate(i,this.result.to)):r=this.decorate(e+this.options.values_separator+i,this.result.to),n=this.decorate(e,this.result.from),this.decorate(i,this.result.to)),this.$cache.single.html(r),this.$cache.from.html(n),this.$cache.to.html(t),this.calcLabels(),e=Math.min(this.labels.p_single_left,this.labels.p_from_left),i=this.labels.p_single_left+this.labels.p_single_fake,r=this.labels.p_to_left+this.labels.p_to_fake,n=Math.max(i,r),this.labels.p_from_left+this.labels.p_from_fake>=this.labels.p_to_left?(this.$cache.from[0].style.visibility="hidden",this.$cache.to[0].style.visibility="hidden",this.$cache.single[0].style.visibility="visible",n=this.result.from===this.result.to?("from"===this.target?this.$cache.from[0].style.visibility="visible":"to"===this.target?this.$cache.to[0].style.visibility="visible":this.target||(this.$cache.from[0].style.visibility="visible"),this.$cache.single[0].style.visibility="hidden",r):(this.$cache.from[0].style.visibility="hidden",this.$cache.to[0].style.visibility="hidden",this.$cache.single[0].style.visibility="visible",Math.max(i,r))):(this.$cache.from[0].style.visibility="visible",this.$cache.to[0].style.visibility="visible",this.$cache.single[0].style.visibility="hidden"),e<this.labels.p_min+1?this.$cache.min[0].style.visibility="hidden":this.$cache.min[0].style.visibility="visible",n>100-this.labels.p_max-1?this.$cache.max[0].style.visibility="hidden":this.$cache.max[0].style.visibility="visible")))},drawShadow:function(){var t,e,i=this.options,r=this.$cache,n="number"==typeof i.from_min&&!isNaN(i.from_min),a="number"==typeof i.from_max&&!isNaN(i.from_max),s="number"==typeof i.to_min&&!isNaN(i.to_min),o="number"==typeof i.to_max&&!isNaN(i.to_max);"single"===i.type?i.from_shadow&&(n||a)?(t=this.convertToPercent(n?i.from_min:i.min),e=this.convertToPercent(a?i.from_max:i.max)-t,t=this.toFixed(t-this.coords.p_handle/100*t),e=this.toFixed(e-this.coords.p_handle/100*e),t+=this.coords.p_handle/2,r.shad_single[0].style.display="block",r.shad_single[0].style.left=t+"%",r.shad_single[0].style.width=e+"%"):r.shad_single[0].style.display="none":(i.from_shadow&&(n||a)?(t=this.convertToPercent(n?i.from_min:i.min),e=this.convertToPercent(a?i.from_max:i.max)-t,t=this.toFixed(t-this.coords.p_handle/100*t),e=this.toFixed(e-this.coords.p_handle/100*e),t+=this.coords.p_handle/2,r.shad_from[0].style.display="block",r.shad_from[0].style.left=t+"%",r.shad_from[0].style.width=e+"%"):r.shad_from[0].style.display="none",i.to_shadow&&(s||o)?(n=this.convertToPercent(s?i.to_min:i.min),a=this.convertToPercent(o?i.to_max:i.max)-n,n=this.toFixed(n-this.coords.p_handle/100*n),a=this.toFixed(a-this.coords.p_handle/100*a),n+=this.coords.p_handle/2,r.shad_to[0].style.display="block",r.shad_to[0].style.left=n+"%",r.shad_to[0].style.width=a+"%"):r.shad_to[0].style.display="none")},writeToInput:function(){"single"===this.options.type?(this.options.values.length?this.$cache.input.prop("value",this.result.from_value):this.$cache.input.prop("value",this.result.from),this.$cache.input.data("from",this.result.from)):(this.options.values.length?this.$cache.input.prop("value",this.result.from_value+this.options.input_values_separator+this.result.to_value):this.$cache.input.prop("value",this.result.from+this.options.input_values_separator+this.result.to),this.$cache.input.data("from",this.result.from),this.$cache.input.data("to",this.result.to))},callOnStart:function(){this.writeToInput(),this.options.onStart&&"function"==typeof this.options.onStart&&(this.options.scope?this.options.onStart.call(this.options.scope,this.result):this.options.onStart(this.result))},callOnChange:function(){this.writeToInput(),this.options.onChange&&"function"==typeof this.options.onChange&&(this.options.scope?this.options.onChange.call(this.options.scope,this.result):this.options.onChange(this.result))},callOnFinish:function(){this.writeToInput(),this.options.onFinish&&"function"==typeof this.options.onFinish&&(this.options.scope?this.options.onFinish.call(this.options.scope,this.result):this.options.onFinish(this.result))},callOnUpdate:function(){this.writeToInput(),this.options.onUpdate&&"function"==typeof this.options.onUpdate&&(this.options.scope?this.options.onUpdate.call(this.options.scope,this.result):this.options.onUpdate(this.result))},toggleInput:function(){this.$cache.input.toggleClass("irs-hidden-input"),this.has_tab_index?this.$cache.input.prop("tabindex",-1):this.$cache.input.removeProp("tabindex"),this.has_tab_index=!this.has_tab_index},convertToPercent:function(t,e){var i=this.options.max-this.options.min;return i?(e=(e?t:t-this.options.min)/(i/100),this.toFixed(e)):(this.no_diapason=!0,0)},convertToValue:function(t){var e,i=this.options.min,r=this.options.max,n=i.toString().split(".")[1],a=r.toString().split(".")[1],s=0,o=0;if(0===t)return this.options.min;if(100===t)return this.options.max;n&&(s=c=n.length),a&&(s=e=a.length),c&&e&&(s=e<=c?c:e),i<0&&(i=+(i+(o=Math.abs(i))).toFixed(s),r=+(r+o).toFixed(s));var c,n=(r-i)/100*t+i,a=this.options.step.toString().split(".")[1],n=a?+n.toFixed(a.length):+(n=(n/=this.options.step)*this.options.step).toFixed(0);return o&&(n-=o),(c=a?+n.toFixed(a.length):this.toFixed(n))<this.options.min?c=this.options.min:c>this.options.max&&(c=this.options.max),c},calcWithStep:function(t){var e=Math.round(t/this.coords.p_step)*this.coords.p_step;return 100<e&&(e=100),this.toFixed(e=100===t?100:e)},checkMinInterval:function(t,e,i){var r,n=this.options;return n.min_interval?(r=this.convertToValue(t),e=this.convertToValue(e),"from"===i?e-r<n.min_interval&&(r=e-n.min_interval):r-e<n.min_interval&&(r=e+n.min_interval),this.convertToPercent(r)):t},checkMaxInterval:function(t,e,i){var r,n=this.options;return n.max_interval?(r=this.convertToValue(t),e=this.convertToValue(e),"from"===i?e-r>n.max_interval&&(r=e-n.max_interval):r-e>n.max_interval&&(r=e+n.max_interval),this.convertToPercent(r)):t},checkDiapason:function(t,e,i){var t=this.convertToValue(t),r=this.options;return"number"!=typeof e&&(e=r.min),(i="number"!=typeof i?r.max:i)<(t=t<e?e:t)&&(t=i),this.convertToPercent(t)},toFixed:function(t){return+t.toFixed(20)},_prettify:function(t){return this.options.prettify_enabled?(this.options.prettify&&"function"==typeof this.options.prettify?this.options:this).prettify(t):t},prettify:function(t){return t.toString().replace(/(\d{1,3}(?=(?:\d\d\d)+(?!\d)))/g,"$1"+this.options.prettify_separator)},checkEdges:function(t,e){return this.options.force_edges&&(t<0?t=0:100-e<t&&(t=100-e)),this.toFixed(t)},validate:function(){var t,e,i=this.options,r=this.result,n=i.values,a=n.length;if("string"==typeof i.min&&(i.min=+i.min),"string"==typeof i.max&&(i.max=+i.max),"string"==typeof i.from&&(i.from=+i.from),"string"==typeof i.to&&(i.to=+i.to),"string"==typeof i.step&&(i.step=+i.step),"string"==typeof i.from_min&&(i.from_min=+i.from_min),"string"==typeof i.from_max&&(i.from_max=+i.from_max),"string"==typeof i.to_min&&(i.to_min=+i.to_min),"string"==typeof i.to_max&&(i.to_max=+i.to_max),"string"==typeof i.grid_num&&(i.grid_num=+i.grid_num),i.max<i.min&&(i.max=i.min),a)for(i.p_values=[],i.min=0,i.max=a-1,i.step=1,i.grid_num=i.max,i.grid_snap=!0,e=0;e<a;e++)t=+n[e],t=isNaN(t)?n[e]:(n[e]=t,this._prettify(t)),i.p_values.push(t);"number"==typeof i.from&&!isNaN(i.from)||(i.from=i.min),"number"==typeof i.to&&!isNaN(i.to)||(i.to=i.max),"single"===i.type?(i.from<i.min&&(i.from=i.min),i.from>i.max&&(i.from=i.max)):(i.from<i.min&&(i.from=i.min),i.from>i.max&&(i.from=i.max),i.to<i.min&&(i.to=i.min),i.to>i.max&&(i.to=i.max),this.update_check.from&&(this.update_check.from!==i.from&&i.from>i.to&&(i.from=i.to),this.update_check.to!==i.to&&i.to<i.from&&(i.to=i.from)),i.from>i.to&&(i.from=i.to),i.to<i.from&&(i.to=i.from)),("number"!=typeof i.step||isNaN(i.step)||!i.step||i.step<0)&&(i.step=1),"number"==typeof i.from_min&&i.from<i.from_min&&(i.from=i.from_min),"number"==typeof i.from_max&&i.from>i.from_max&&(i.from=i.from_max),"number"==typeof i.to_min&&i.to<i.to_min&&(i.to=i.to_min),"number"==typeof i.to_max&&i.from>i.to_max&&(i.to=i.to_max),r&&(r.min!==i.min&&(r.min=i.min),r.max!==i.max&&(r.max=i.max),(r.from<r.min||r.from>r.max)&&(r.from=i.from),(r.to<r.min||r.to>r.max)&&(r.to=i.to)),("number"!=typeof i.min_interval||isNaN(i.min_interval)||!i.min_interval||i.min_interval<0)&&(i.min_interval=0),("number"!=typeof i.max_interval||isNaN(i.max_interval)||!i.max_interval||i.max_interval<0)&&(i.max_interval=0),i.min_interval&&i.min_interval>i.max-i.min&&(i.min_interval=i.max-i.min),i.max_interval&&i.max_interval>i.max-i.min&&(i.max_interval=i.max-i.min)},decorate:function(t,e){var i="",r=this.options;return r.prefix&&(i+=r.prefix),i+=t,r.max_postfix&&(r.values.length&&t===r.p_values[r.max]||e===r.max)&&(i+=r.max_postfix,r.postfix&&(i+=" ")),r.postfix&&(i+=r.postfix),i},updateFrom:function(){this.result.from=this.options.from,this.result.from_percent=this.convertToPercent(this.result.from),this.result.from_pretty=this._prettify(this.result.from),this.options.values&&(this.result.from_value=this.options.values[this.result.from])},updateTo:function(){this.result.to=this.options.to,this.result.to_percent=this.convertToPercent(this.result.to),this.result.to_pretty=this._prettify(this.result.to),this.options.values&&(this.result.to_value=this.options.values[this.result.to])},updateResult:function(){this.result.min=this.options.min,this.result.max=this.options.max,this.updateFrom(),this.updateTo()},appendGrid:function(){if(this.options.grid){var t,e,i,r,n,a,s=this.options,o=s.max-s.min,c=s.grid_num,l=0,d=4,u="";for(this.calcGridMargin(),s.grid_snap&&(c=o/s.step),i=this.toFixed(100/(c=50<c?50:c)),4<c&&(d=3),7<c&&(d=2),14<c&&(d=1),28<c&&(d=0),t=0;t<c+1;t++){for(r=d,100<(l=this.toFixed(i*t))&&(l=100),n=((this.coords.big[t]=l)-i*(t-1))/(r+1),e=1;e<=r&&0!==l;e++)u+='<span class="irs-grid-pol small" style="left: '+this.toFixed(l-n*e)+'%"></span>';u+='<span class="irs-grid-pol" style="left: '+l+'%"></span>',a=this.convertToValue(l),u+='<span class="irs-grid-text js-grid-text-'+t+'" style="left: '+l+'%">'+(a=s.values.length?s.p_values[a]:this._prettify(a))+"</span>"}this.coords.big_num=Math.ceil(c+1),this.$cache.cont.addClass("irs-with-grid"),this.$cache.grid.html(u),this.cacheGridLabels()}},cacheGridLabels:function(){for(var t,e=this.coords.big_num,i=0;i<e;i++)t=this.$cache.grid.find(".js-grid-text-"+i),this.$cache.grid_labels.push(t);this.calcGridLabels()},calcGridLabels:function(){for(var t,e=[],i=[],r=this.coords.big_num,n=0;n<r;n++)this.coords.big_w[n]=this.$cache.grid_labels[n].outerWidth(!1),this.coords.big_p[n]=this.toFixed(this.coords.big_w[n]/this.coords.w_rs*100),this.coords.big_x[n]=this.toFixed(this.coords.big_p[n]/2),e[n]=this.toFixed(this.coords.big[n]-this.coords.big_x[n]),i[n]=this.toFixed(e[n]+this.coords.big_p[n]);for(this.options.force_edges&&(e[0]<-this.coords.grid_gap&&(e[0]=-this.coords.grid_gap,i[0]=this.toFixed(e[0]+this.coords.big_p[0]),this.coords.big_x[0]=this.coords.grid_gap),i[r-1]>100+this.coords.grid_gap&&(i[r-1]=100+this.coords.grid_gap,e[r-1]=this.toFixed(i[r-1]-this.coords.big_p[r-1]),this.coords.big_x[r-1]=this.toFixed(this.coords.big_p[r-1]-this.coords.grid_gap))),this.calcGridCollision(2,e,i),this.calcGridCollision(4,e,i),n=0;n<r;n++)t=this.$cache.grid_labels[n][0],this.coords.big_x[n]!==Number.POSITIVE_INFINITY&&(t.style.marginLeft=-this.coords.big_x[n]+"%")},calcGridCollision:function(t,e,i){for(var r,n,a=this.coords.big_num,s=0;s<a&&!(a<=(r=s+t/2));s+=t)n=this.$cache.grid_labels[r][0],i[s]<=e[r]?n.style.visibility="visible":n.style.visibility="hidden"},calcGridMargin:function(){this.options.grid_margin&&(this.coords.w_rs=this.$cache.rs.outerWidth(!1),this.coords.w_rs&&("single"===this.options.type?this.coords.w_handle=this.$cache.s_single.outerWidth(!1):this.coords.w_handle=this.$cache.s_from.outerWidth(!1),this.coords.p_handle=this.toFixed(this.coords.w_handle/this.coords.w_rs*100),this.coords.grid_gap=this.toFixed(this.coords.p_handle/2-.1),this.$cache.grid[0].style.width=this.toFixed(100-this.coords.p_handle)+"%",this.$cache.grid[0].style.left=this.coords.grid_gap+"%"))},update:function(t){this.input&&(this.is_update=!0,this.options.from=this.result.from,this.options.to=this.result.to,this.update_check.from=this.result.from,this.update_check.to=this.result.to,this.options=s.extend(this.options,t),this.validate(),this.updateResult(t),this.toggleInput(),this.remove(),this.init(!0))},reset:function(){this.input&&(this.updateResult(),this.update())},destroy:function(){this.input&&(this.toggleInput(),this.$cache.input.prop("readonly",!1),s.data(this.input,"ionRangeSlider",null),this.remove(),this.input=null,this.options=null)}},s.fn.ionRangeSlider=function(t){return this.each(function(){s.data(this,"ionRangeSlider")||s.data(this,"ionRangeSlider",new e(this,t,r++))})};for(var a=0,d=["ms","moz","webkit","o"],u=0;u<d.length&&!c.requestAnimationFrame;++u)c.requestAnimationFrame=c[d[u]+"RequestAnimationFrame"],c.cancelAnimationFrame=c[d[u]+"CancelAnimationFrame"]||c[d[u]+"CancelRequestAnimationFrame"];c.requestAnimationFrame||(c.requestAnimationFrame=function(t,e){var i=(new Date).getTime(),r=Math.max(0,16-(i-a)),n=c.setTimeout(function(){t(i+r)},r);return a=i+r,n}),c.cancelAnimationFrame||(c.cancelAnimationFrame=function(t){clearTimeout(t)})},!jQuery&&"function"==typeof define&&define.amd?define(["jquery"],function(t){return e(t,document,window,navigator)}):jQuery||"object"!=typeof exports?e(jQuery,document,window,navigator):e(require("jquery"),document,window,navigator)}(),function(){"use strict";("function"==typeof define&&define.amd?define:function(t,e,i){(i||e)()})("kendo.core.min",["jquery"],function(){var m=jQuery,v=window,q=void 0;function D(){}function N(t,e){if(e)return"'"+t.split("'").join("\\'").split('\\"').join('\\\\\\"').replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/\t/g,"\\t")+"'";var i=t.charAt(0),r=t.substring(1);return"="===i?"+("+r+")+":":"===i?"+$kendoHtmlEncode("+r+")+":";"+t+";$kendoOutput+="}function c(t,e,i){return t+="",e=e||2,i=e-t.length,i?vt[e].substring(0,i)+t:t}function A(t){var e=t.css(F.support.transitions.css+"box-shadow")||t.css("box-shadow"),i=e?e.match(Qt)||[0,0,0,0,0]:[0,0,0,0,0],r=h.max(+i[3],+(i[4]||0));return{left:-i[1]+r,right:+i[1]+r,bottom:+i[2]+r}}function M(t,e){var i,r,n,a,s,o,c,l,d=f.browser,u=F._outerWidth,p=F._outerHeight;return t.parent().hasClass("k-animation-container")?(c=t.parent(".k-animation-container"),l=c[0].style,c.is(":hidden")&&c.css({display:"",position:""}),i=Gt.test(l.width)||Gt.test(l.height),i||c.css({width:e?u(t)+1:u(t),height:p(t),boxSizing:"content-box",mozBoxSizing:"content-box",webkitBoxSizing:"content-box"})):(r=t[0].style.width,n=t[0].style.height,a=Gt.test(r),s=Gt.test(n),o=t.hasClass("k-tooltip")||t.is(".k-menu-horizontal.k-context-menu"),i=a||s,!a&&(!e||e&&r||o)&&(r=e?u(t)+1:u(t)),!s&&(!e||e&&n)&&(n=p(t)),t.wrap(m("<div/>").addClass("k-animation-container").css({width:r,height:n})),i&&t.css({width:"100%",height:"100%",boxSizing:"border-box",mozBoxSizing:"border-box",webkitBoxSizing:"border-box"})),d.msie&&h.floor(d.version)<=7&&(t.css({zoom:1}),t.children(".k-menu").width(t.width())),t.parent()}function O(t){var e=1,i=arguments.length;for(e=1;e<i;e++)I(t,arguments[e]);return t}function I(t,e){var i,r,n,a,s,o=F.data.ObservableArray,c=F.data.LazyObservableArray,l=F.data.DataSource,d=F.data.HierarchicalDataSource;for(i in e)r=e[i],n=typeof r,a=n===b&&null!==r?r.constructor:null,a&&a!==Array&&a!==o&&a!==c&&a!==l&&a!==d&&a!==RegExp?r instanceof Date?t[i]=new Date(r.getTime()):u(r.clone)?t[i]=r.clone():(s=t[i],t[i]=typeof s===b?s||{}:{},I(t[i],r)):n!==Kt&&(t[i]=r);return t}function E(t,e,i){for(var r in e)if(e.hasOwnProperty(r)&&e[r].test(t))return r;return i!==q?i:t}function B(t){return t.replace(/([a-z][A-Z])/g,function(t){return t.charAt(0)+"-"+t.charAt(1).toLowerCase()})}function L(t){return t.replace(/\-(\w)/g,function(t,e){return e.toUpperCase()})}function V(t,e){var i,r={};return document.defaultView&&document.defaultView.getComputedStyle?(i=document.defaultView.getComputedStyle(t,""),e&&m.each(e,function(t,e){r[e]=i.getPropertyValue(e)})):(i=t.currentStyle,e&&m.each(e,function(t,e){r[e]=i[L(e)]})),F.size(r)||(r=i),r}function G(t){if(t&&t.className&&"string"==typeof t.className&&t.className.indexOf("k-auto-scrollable")>-1)return!0;var e=V(t,["overflow"]).overflow;return"auto"==e||"scroll"==e}function W(t,e){var i,r=f.browser.webkit,n=f.browser.mozilla,a=t instanceof m?t[0]:t;if(t)return i=f.isRtl(t),e===q?i&&r?a.scrollWidth-a.clientWidth-a.scrollLeft:Math.abs(a.scrollLeft):(a.scrollLeft=i&&r?a.scrollWidth-a.clientWidth-e:i&&n?-e:e,q)}function Q(t){var e,i=0;for(e in t)t.hasOwnProperty(e)&&"toJSON"!=e&&i++;return i}function J(t,e,i){var r,n,a;return e||(e="offset"),r=t[e](),n={top:r.top,right:r.right,bottom:r.bottom,left:r.left},f.browser.msie&&(f.pointers||f.msPointers)&&!i&&(a=f.isRtl(t)?1:-1,n.top-=v.pageYOffset-document.documentElement.scrollTop,n.left-=v.pageXOffset+a*document.documentElement.scrollLeft),n}function Y(t){var e={};return jt("string"==typeof t?t.split(" "):t,function(t){e[t]=this}),e}function Z(t){return new F.effects.Element(t)}function K(t,e,i,r){return typeof t===_&&(u(e)&&(r=e,e=400,i=!1),u(i)&&(r=i,i=!1),typeof e===Zt&&(i=e,e=400),t={effects:t,duration:e,reverse:i,complete:r}),p({effects:{},duration:400,reverse:!1,init:Lt,teardown:Lt,hide:!1},t,{completeCallback:t.complete,complete:Lt})}function X(t,e,i,r,n){for(var a,s=0,o=t.length;s<o;s++)a=m(t[s]),a.queue(function(){l.promise(a,K(e,i,r,n))});return t}function tt(i,t,e,r){return t&&(t=t.split(" "),jt(t,function(t,e){i.toggleClass(e,r)})),i}function et(t){return(""+t).replace(yt,"&amp;").replace(bt,"&lt;").replace(kt,"&gt;").replace(xt,"&quot;").replace(wt,"&#39;")}function it(t,e){var i;return 0===e.indexOf("data")&&(e=e.substring(4),e=e.charAt(0).toLowerCase()+e.substring(1)),e=e.replace(Mt,"-$1"),i=t.getAttribute("data-"+F.ns+e),null===i?i=q:"null"===i?i=null:"true"===i?i=!0:"false"===i?i=!1:Jt.test(i)&&"mask"!=e?i=parseFloat(i):Nt.test(i)&&!At.test(i)&&(i=Function("return ("+i+")")()),i}function rt(t,e,i){var r,n,a={};for(r in e)n=it(t,r),n!==q&&(Dt.test(r)&&("string"==typeof n?m("#"+n).length?n=F.template(m("#"+n).html()):i&&(n=F.template(i[n])):n=t.getAttribute(r)),a[r]=n);return a}function nt(t,e){return m.contains(t,e)?-1:1}function at(){var t=m(this);return m.inArray(t.attr("data-"+F.ns+"role"),["slider","rangeslider"])>-1||t.is(":visible")}function st(t,e){var i=t.nodeName.toLowerCase();return(/input|select|textarea|button|object/.test(i)?!t.disabled:"a"===i?t.href||e:e)&&ot(t)}function ot(t){return m.expr.filters.visible(t)&&!m(t).parents().addBack().filter(function(){return"hidden"===m.css(this,"visibility")}).length}function i(t,e){return new i.fn.init(t,e)}var t,u,ct,lt,dt,ut,pt,ht,ft,gt,mt,vt,_t,l,yt,bt,xt,wt,kt,Ct,St,Pt,r,Tt,Dt,Nt,At,Mt,Ot,It,Et,Ft,d,e,Rt,qt,$t,Ut,zt,n,F=v.kendo=v.kendo||{cultures:{}},p=m.extend,jt=m.each,Ht=m.isArray,Bt=m.proxy,Lt=m.noop,h=Math,Vt=v.JSON||{},f={},Gt=/%/,Wt=/\{(\d+)(:[^\}]+)?\}/g,Qt=/(\d+(?:\.?)\d*)px\s*(\d+(?:\.?)\d*)px\s*(\d+(?:\.?)\d*)px\s*(\d+)?/i,Jt=/^(\+|-?)\d+(\.?)\d*$/,g="function",_="string",y="number",b="object",Yt="null",Zt="boolean",Kt="undefined",Xt={},te={},ee=[].slice,a,s,o,ie,x,w,k,re,ne,ae;function se(t){return le.lastIndex=0,le.test(t)?'"'+t.replace(le,function(t){var e=de[t];return typeof e===_?e:"\\u"+("0000"+t.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+t+'"'}function oe(t,e){var i,r,n,a,s,o,c=C,l=e[t];if(l&&typeof l===b&&typeof l.toJSON===g&&(l=l.toJSON(t)),typeof S===g&&(l=S.call(e,t,l)),o=typeof l,o===_)return se(l);if(o===y)return isFinite(l)?l+"":Yt;if(o===Zt||o===Yt)return l+"";if(o===b){if(!l)return Yt;if(C+=ce,s=[],"[object Array]"===ue.apply(l)){for(a=l.length,i=0;i<a;i++)s[i]=oe(i,l)||Yt;return n=0===s.length?"[]":C?"[\n"+C+s.join(",\n"+C)+"\n"+c+"]":"["+s.join(",")+"]",C=c,n}if(S&&typeof S===b)for(a=S.length,i=0;i<a;i++)typeof S[i]===_&&(r=S[i],n=oe(r,l),n&&s.push(se(r)+(C?": ":":")+n));else for(r in l)Object.hasOwnProperty.call(l,r)&&(n=oe(r,l),n&&s.push(se(r)+(C?": ":":")+n));return n=0===s.length?"{}":C?"{\n"+C+s.join(",\n"+C)+"\n"+c+"}":"{"+s.join(",")+"}",C=c,n}}F.version="2019.1.220".replace(/^\s+|\s+$/g,""),D.extend=function(t){var e,i,r=function(){},n=this,a=t&&t.init?t.init:function(){n.apply(this,arguments)};r.prototype=n.prototype,i=a.fn=a.prototype=new r;for(e in t)i[e]=null!=t[e]&&t[e].constructor===Object?p(!0,{},r.prototype[e],t[e]):t[e];return i.constructor=a,a.extend=n.extend,a},D.prototype._initOptions=function(t){this.options=O({},this.options,t)},u=F.isFunction=function(t){return"function"==typeof t},ct=function(){this._defaultPrevented=!0},lt=function(){return this._defaultPrevented===!0},dt=D.extend({init:function(){this._events={}},bind:function(t,e,i){var r,n,a,s,o,c=this,l=typeof t===_?[t]:t,d=typeof e===g;if(e===q){for(r in t)c.bind(r,t[r]);return c}for(r=0,n=l.length;r<n;r++)t=l[r],s=d?e:e[t],s&&(i&&(a=s,s=function(){c.unbind(t,s),a.apply(c,arguments)},s.original=a),o=c._events[t]=c._events[t]||[],o.push(s));return c},one:function(t,e){return this.bind(t,e,!0)},first:function(t,e){var i,r,n,a,s=this,o=typeof t===_?[t]:t,c=typeof e===g;for(i=0,r=o.length;i<r;i++)t=o[i],n=c?e:e[t],n&&(a=s._events[t]=s._events[t]||[],a.unshift(n));return s},trigger:function(t,e){var i,r,n=this,a=n._events[t];if(a){for(e=e||{},e.sender=n,e._defaultPrevented=!1,e.preventDefault=ct,e.isDefaultPrevented=lt,a=a.slice(),i=0,r=a.length;i<r;i++)a[i].call(n,e);return e._defaultPrevented===!0}return!1},unbind:function(t,e){var i,r=this,n=r._events[t];if(t===q)r._events={};else if(n)if(e)for(i=n.length-1;i>=0;i--)n[i]!==e&&n[i].original!==e||n.splice(i,1);else r._events[t]=[];return r}}),ut=/^\w+/,pt=/\$\{([^}]*)\}/g,ht=/\\\}/g,ft=/__CURLY__/g,gt=/\\#/g,mt=/__SHARP__/g,vt=["","0","00","000","0000"],t={paramName:"data",useWithBlock:!0,render:function(t,e){var i,r,n="";for(i=0,r=e.length;i<r;i++)n+=t(e[i]);return n},compile:function(e,t){var i,r,n,a=p({},this,t),s=a.paramName,o=s.match(ut)[0],c=a.useWithBlock,l="var $kendoOutput, $kendoHtmlEncode = kendo.htmlEncode;";if(u(e))return e;for(l+=c?"with("+s+"){":"",l+="$kendoOutput=",r=e.replace(ht,"__CURLY__").replace(pt,"#=$kendoHtmlEncode($1)#").replace(ft,"}").replace(gt,"__SHARP__").split("#"),n=0;n<r.length;n++)l+=N(r[n],n%2===0);l+=c?";}":";",l+="return $kendoOutput;",l=l.replace(mt,"#");try{return i=Function(o,l),i._slotCount=Math.floor(r.length/2),i}catch(t){throw Error(F.format("Invalid template:'{0}' Generated code:'{1}'",e,l))}}};var C,ce,S,le=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,de={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},ue={}.toString;function pe(t){if(t){if(t.numberFormat)return t;if(typeof t===_){var e=F.cultures;return e[t]||e[t.split("-")[0]]||null}return null}return null}function he(t){return t&&(t=pe(t)),t||F.cultures.current}function fe(n,t,e){e=he(e);var a=e.calendars.standard,s=a.days,o=a.months;return t=a.patterns[t]||t,t.replace(_e,function(t){var e,i,r;return"d"===t?i=n.getDate():"dd"===t?i=c(n.getDate()):"ddd"===t?i=s.namesAbbr[n.getDay()]:"dddd"===t?i=s.names[n.getDay()]:"M"===t?i=n.getMonth()+1:"MM"===t?i=c(n.getMonth()+1):"MMM"===t?i=o.namesAbbr[n.getMonth()]:"MMMM"===t?i=o.names[n.getMonth()]:"yy"===t?i=c(n.getFullYear()%100):"yyyy"===t?i=c(n.getFullYear(),4):"h"===t?i=n.getHours()%12||12:"hh"===t?i=c(n.getHours()%12||12):"H"===t?i=n.getHours():"HH"===t?i=c(n.getHours()):"m"===t?i=n.getMinutes():"mm"===t?i=c(n.getMinutes()):"s"===t?i=n.getSeconds():"ss"===t?i=c(n.getSeconds()):"f"===t?i=h.floor(n.getMilliseconds()/100):"ff"===t?(i=n.getMilliseconds(),i>99&&(i=h.floor(i/10)),i=c(i)):"fff"===t?i=c(n.getMilliseconds(),3):"tt"===t?i=n.getHours()<12?a.AM[0]:a.PM[0]:"zzz"===t?(e=n.getTimezoneOffset(),r=e<0,i=(""+h.abs(e/60)).split(".")[0],e=h.abs(e)-60*i,i=(r?"+":"-")+c(i),i+=":"+c(e)):"zz"!==t&&"z"!==t||(i=n.getTimezoneOffset()/60,r=i<0,i=(""+h.abs(i)).split(".")[0],i=(r?"+":"-")+("zz"===t?c(i):i)),i!==q?i:t.slice(1,t.length-1)})}function ge(t,e,i){var r,n,a,s,o,c,l,d,u,p,h,f,g,m,v,_,y,b,x,w,k,C,S,P,T,D,N,A,M,R,O,I,E,F;if(i=he(i),r=i.numberFormat,n=r[z],a=r.decimals,s=r.pattern[0],o=[],h=t<0,_=U,y=U,O=-1,t===q)return U;if(!isFinite(t))return t;if(!e)return i.name.length?t.toLocaleString():""+t;if(p=ye.exec(e)){if(e=p[1].toLowerCase(),l="c"===e,d="p"===e,(l||d)&&(r=l?r.currency:r.percent,n=r[z],a=r.decimals,c=r.symbol,s=r.pattern[h?0:1]),u=p[2],u&&(a=+u),"e"===e)return E=u?t.toExponential(a):t.toExponential(),E.replace(z,r[z]);if(d&&(t*=100),t=$(t,a),h=t<0,t=t.split(z),f=t[0],g=t[1],h&&(f=f.substring(1)),y=me(f,0,f.length,r),g&&(y+=n+g),"n"===e&&!h)return y;for(t=U,b=0,x=s.length;b<x;b++)w=s.charAt(b),t+="n"===w?y:"$"===w||"%"===w?c:w;return t}if((e.indexOf("'")>-1||e.indexOf('"')>-1||e.indexOf("\\")>-1)&&(e=e.replace(be,function(t){var e=t.charAt(0).replace("\\",""),i=t.slice(1).replace(e,"");return o.push(i),ke})),e=e.split(";"),h&&e[1])e=e[1],C=!0;else if(0===t&&e[2]){if(e=e[2],e.indexOf(j)==-1&&e.indexOf(H)==-1)return e}else e=e[0];if(A=e.indexOf("%"),M=e.indexOf("$"),d=A!=-1,l=M!=-1,d&&(t*=100),l&&"\\"===e[M-1]&&(e=e.split("\\").join(""),l=!1),(l||d)&&(r=l?r.currency:r.percent,n=r[z],a=r.decimals,c=r.symbol),k=e.indexOf(we)>-1,k&&(e=e.replace(xe,U)),S=e.indexOf(z),x=e.length,S!=-1)if(g=(""+t).split("e"),g=g[1]?$(t,Math.abs(g[1])):g[0],g=g.split(z)[1]||U,T=e.lastIndexOf(H)-S,P=e.lastIndexOf(j)-S,D=T>-1,N=P>-1,b=g.length,D||N||(e=e.substring(0,S)+e.substring(S+1),x=e.length,S=-1,b=0),D&&T>P)b=T;else if(P>T)if(N&&b>P){for(F=$(t,P,h);F.charAt(F.length-1)===H&&P>0&&P>T;)P--,F=$(t,P,h);b=P}else D&&b<T&&(b=T);if(t=$(t,b,h),P=e.indexOf(j),R=T=e.indexOf(H),O=P==-1&&T!=-1?T:P!=-1&&T==-1?P:P>T?T:P,P=e.lastIndexOf(j),T=e.lastIndexOf(H),I=P==-1&&T!=-1?T:P!=-1&&T==-1?P:P>T?P:T,O==x&&(I=O),O!=-1){for(y=(""+t).split(z),f=y[0],g=y[1]||U,m=f.length,v=g.length,h&&t*-1>=0&&(h=!1),t=e.substring(0,O),h&&!C&&(t+="-"),b=O;b<x;b++){if(w=e.charAt(b),S==-1){if(I-b<m){t+=f;break}}else if(T!=-1&&T<b&&(_=U),S-b<=m&&S-b>-1&&(t+=f,b=S),S===b){t+=(g?n:U)+g,b+=I-S+1;continue}w===H?(t+=w,_=w):w===j&&(t+=_)}if(k&&(t=me(t,O+(h&&!C?1:0),Math.max(I,m+O),r)),I>=O&&(t+=e.substring(I+1)),l||d){for(y=U,b=0,x=t.length;b<x;b++)w=t.charAt(b),y+="$"===w||"%"===w?c:w;t=y}if(x=o.length)for(b=0;b<x;b++)t=t.replace(ke,o[b])}return t}typeof Date.prototype.toJSON!==g&&(Date.prototype.toJSON=function(){var t=this;return isFinite(t.valueOf())?c(t.getUTCFullYear(),4)+"-"+c(t.getUTCMonth()+1)+"-"+c(t.getUTCDate())+"T"+c(t.getUTCHours())+":"+c(t.getUTCMinutes())+":"+c(t.getUTCSeconds())+"Z":null},String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(){return this.valueOf()}),typeof Vt.stringify!==g&&(Vt.stringify=function(t,e,i){var r;if(C="",ce="",typeof i===y)for(r=0;r<i;r+=1)ce+=" ";else typeof i===_&&(ce=i);if(S=e,e&&typeof e!==g&&(typeof e!==b||typeof e.length!==y))throw Error("JSON.stringify");return oe("",{"":t})});var me,$,ve,_e=/dddd|ddd|dd|d|MMMM|MMM|MM|M|yyyy|yy|HH|H|hh|h|mm|m|fff|ff|f|tt|ss|s|zzz|zz|z|"[^"]*"|'[^']*'/g,ye=/^(n|c|p|e)(\d*)$/i,be=/(\\.)|(['][^']*[']?)|(["][^"]*["]?)/g,xe=/\,/g,U="",z=".",we=",",j="#",H="0",ke="??",Ce="en-US",Se={}.toString;function R(t,e,i){return!(t>=e&&t<=i)}function Pe(t){return t.charAt(0)}function Te(t){return m.map(t,Pe)}function De(t,e){e||23!==t.getHours()||t.setHours(t.getHours()+2)}function Ne(t){for(var e=0,i=t.length,r=[];e<i;e++)r[e]=(t[e]+"").toLowerCase();return r}function Ae(t){var e,i={};for(e in t)i[e]=Ne(t[e]);return i}function Me(l,i,t,e){if(!l)return null;var r,n,a,s,o,c,d,u,p,h,f,g,m,v=function(t){for(var e=0;i[N]===t;)e++,N++;return e>0&&(N-=1),e},_=function(t){var e=Be[t]||RegExp("^\\d{1,"+t+"}"),i=l.substr(A,t).match(e);return i?(i=i[0],A+=i.length,parseInt(i,10)):null},y=function(t,e){for(var i,r,n,a=0,s=t.length,o=0,c=0;a<s;a++)i=t[a],r=i.length,n=l.substr(A,r),e&&(n=n.toLowerCase()),n==i&&r>o&&(o=r,c=a);return o?(A+=o,c+1):null},b=function(){var t=!1;return l.charAt(A)===i[N]&&(A++,t=!0),t},x=t.calendars.standard,w=null,k=null,C=null,S=null,P=null,T=null,D=null,N=0,A=0,M=!1,O=new Date,I=x.twoDigitYearMax||2029,E=O.getFullYear();for(i||(i="d"),s=x.patterns[i],s&&(i=s),i=i.split(""),a=i.length;N<a;N++)if(r=i[N],M)"'"===r?M=!1:b();else if("d"===r){if(n=v("d"),x._lowerDays||(x._lowerDays=Ae(x.days)),null!==C&&n>2)continue;if(C=n<3?_(2):y(x._lowerDays[3==n?"namesAbbr":"names"],!0),null===C||R(C,1,31))return null}else if("M"===r){if(n=v("M"),x._lowerMonths||(x._lowerMonths=Ae(x.months)),k=n<3?_(2):y(x._lowerMonths[3==n?"namesAbbr":"names"],!0),null===k||R(k,1,12))return null;k-=1}else if("y"===r){if(n=v("y"),w=_(n),null===w)return null;2==n&&("string"==typeof I&&(I=E+parseInt(I,10)),w=E-E%100+w,w>I&&(w-=100))}else if("h"===r){if(v("h"),S=_(2),12==S&&(S=0),null===S||R(S,0,11))return null}else if("H"===r){if(v("H"),S=_(2),null===S||R(S,0,23))return null}else if("m"===r){if(v("m"),P=_(2),null===P||R(P,0,59))return null}else if("s"===r){if(v("s"),T=_(2),null===T||R(T,0,59))return null}else if("f"===r){if(n=v("f"),m=l.substr(A,n).match(Be[3]),D=_(n),null!==D&&(D=parseFloat("0."+m[0],10),D=F._round(D,3),D*=1e3),null===D||R(D,0,999))return null}else if("t"===r){if(n=v("t"),u=x.AM,p=x.PM,1===n&&(u=Te(u),p=Te(p)),o=y(p),!o&&!y(u))return null}else if("z"===r){if(c=!0,n=v("z"),"Z"===l.substr(A,1)){b();continue}if(d=l.substr(A,6).match(n>2?$e:qe),!d)return null;if(d=d[0].split(":"),h=d[0],f=d[1],!f&&h.length>3&&(A=h.length-2,f=h.substring(A),h=h.substring(0,A)),h=parseInt(h,10),R(h,-12,13))return null;if(n>2&&(f=d[0][0]+f,f=parseInt(f,10),isNaN(f)||R(f,-59,59)))return null}else if("'"===r)M=!0,b();else if(!b())return null;return e&&!/^\s*$/.test(l.substr(A))?null:(g=null!==S||null!==P||T||null,null===w&&null===k&&null===C&&g?(w=E,k=O.getMonth(),C=O.getDate()):(null===w&&(w=E),null===C&&(C=1)),o&&S<12&&(S+=12),c?(h&&(S+=-h),f&&(P+=-f),l=new Date(Date.UTC(w,k,C,S,P,T,D))):(l=new Date(w,k,C,S,P,T,D),De(l,S)),w<100&&l.setFullYear(w),l.getDate()!==C&&c===q?null:l)}function Oe(t){var e="-"===t.substr(0,1)?-1:1;return t=t.substring(1),t=60*parseInt(t.substr(0,2),10)+parseInt(t.substring(2),10),e*t}function Ie(t){var e,i,r,n=h.max(je.length,He.length),a=t.calendar||t.calendars.standard,s=a.patterns,o=[];for(r=0;r<n;r++){for(e=je[r],i=0;i<e.length;i++)o.push(s[e[i]]);o=o.concat(He[r])}return o}function Ee(t,e,i,r){var n,a,s,o;if("[object Date]"===Le.call(t))return t;if(n=0,a=null,t&&0===t.indexOf("/D")&&(a=Ue.exec(t)))return a=a[1],o=ze.exec(a.substring(1)),a=new Date(parseInt(a,10)),o&&(o=Oe(o[0]),a=F.timezone.apply(a,0),a=F.timezone.convert(a,0,-1*o)),a;for(i=F.getCulture(i),e||(e=Ie(i)),e=Ht(e)?e:[e],s=e.length;n<s;n++)if(a=Me(t,e[n],i,r))return a;return a}F.cultures["en-US"]={name:Ce,numberFormat:{pattern:["-n"],decimals:2,",":",",".":".",groupSize:[3],percent:{pattern:["-n %","n %"],decimals:2,",":",",".":".",groupSize:[3],symbol:"%"},currency:{name:"US Dollar",abbr:"USD",pattern:["($n)","$n"],decimals:2,",":",",".":".",groupSize:[3],symbol:"$"}},calendars:{standard:{days:{names:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],namesAbbr:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],namesShort:["Su","Mo","Tu","We","Th","Fr","Sa"]},months:{names:["January","February","March","April","May","June","July","August","September","October","November","December"],namesAbbr:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]},AM:["AM","am","AM"],PM:["PM","pm","PM"],patterns:{d:"M/d/yyyy",D:"dddd, MMMM dd, yyyy",F:"dddd, MMMM dd, yyyy h:mm:ss tt",g:"M/d/yyyy h:mm tt",G:"M/d/yyyy h:mm:ss tt",m:"MMMM dd",M:"MMMM dd",s:"yyyy'-'MM'-'ddTHH':'mm':'ss",t:"h:mm tt",T:"h:mm:ss tt",u:"yyyy'-'MM'-'dd HH':'mm':'ss'Z'",y:"MMMM, yyyy",Y:"MMMM, yyyy"},"/":"/",":":":",firstDay:0,twoDigitYearMax:2029}}},F.culture=function(t){var e,i=F.cultures;return t===q?i.current:(e=pe(t)||i[Ce],e.calendar=e.calendars.standard,i.current=e,q)},F.findCulture=pe,F.getCulture=he,F.culture(Ce),me=function(t,e,i,r){var n,a,s,o,c,l,d=t.indexOf(r[z]),u=r.groupSize.slice(),p=u.shift();if(i=d!==-1?d:i+1,n=t.substring(e,i),a=n.length,a>=p){for(s=a,o=[];s>-1;)if(c=n.substring(s-p,s),c&&o.push(c),s-=p,l=u.shift(),p=l!==q?l:p,0===p){s>0&&o.push(n.substring(0,s));break}n=o.reverse().join(r[we]),t=t.substring(0,e)+n+t.substring(i)}return t},$=function(t,e,i){return e=e||0,t=(""+t).split("e"),t=Math.round(+(t[0]+"e"+(t[1]?+t[1]+e:e))),i&&(t=-t),t=(""+t).split("e"),t=+(t[0]+"e"+(t[1]?+t[1]-e:-e)),t.toFixed(Math.min(e,20))},ve=function(t,e,i){if(e){if("[object Date]"===Se.call(t))return fe(t,e,i);if(typeof t===y)return ge(t,e,i)}return t!==q?t:""},F.format=function(t){var n=arguments;return t.replace(Wt,function(t,e,i){var r=n[parseInt(e,10)+1];return ve(r,i?i.substring(1):"")})},F._extractFormat=function(t){return"{0:"===t.slice(0,3)&&(t=t.slice(3,t.length-1)),t},F._activeElement=function(){try{return document.activeElement}catch(t){return document.documentElement.activeElement}},F._round=$,F._outerWidth=function(t,e){return m(t).outerWidth(e||!1)||0},F._outerHeight=function(t,e){return m(t).outerHeight(e||!1)||0},F.toString=ve;var Fe=/\u00A0/g,Re=/[eE][\-+]?[0-9]+/,qe=/[+|\-]\d{1,2}/,$e=/[+|\-]\d{1,2}:?\d{2}/,Ue=/^\/Date\((.*?)\)\/$/,ze=/[+-]\d*/,je=[[],["G","g","F"],["D","d","y","m","T","t"]],He=[["yyyy-MM-ddTHH:mm:ss.fffffffzzz","yyyy-MM-ddTHH:mm:ss.fffffff","yyyy-MM-ddTHH:mm:ss.fffzzz","yyyy-MM-ddTHH:mm:ss.fff","ddd MMM dd yyyy HH:mm:ss","yyyy-MM-ddTHH:mm:sszzz","yyyy-MM-ddTHH:mmzzz","yyyy-MM-ddTHH:mmzz","yyyy-MM-ddTHH:mm:ss","yyyy-MM-dd HH:mm:ss","yyyy/MM/dd HH:mm:ss"],["yyyy-MM-ddTHH:mm","yyyy-MM-dd HH:mm","yyyy/MM/dd HH:mm"],["yyyy/MM/dd","yyyy-MM-dd","HH:mm:ss","HH:mm"]],Be={2:/^\d{1,2}/,3:/^\d{1,3}/,4:/^\d{4}/},Le={}.toString;F.parseDate=function(t,e,i){return Ee(t,e,i,!1)},F.parseExactDate=function(t,e,i){return Ee(t,e,i,!0)},F.parseInt=function(t,e){var i=F.parseFloat(t,e);return i&&(i=0|i),i},F.parseFloat=function(t,e,i){if(!t&&0!==t)return null;if(typeof t===y)return t;t=""+t,e=F.getCulture(e);var r,n,a=e.numberFormat,s=a.percent,o=a.currency,c=o.symbol,l=s.symbol,d=t.indexOf("-");return Re.test(t)?(t=parseFloat(t.replace(a["."],".")),isNaN(t)&&(t=null),t):d>0?null:(d=d>-1,t.indexOf(c)>-1||i&&i.toLowerCase().indexOf("c")>-1?(a=o,r=a.pattern[0].replace("$",c).split("n"),t.indexOf(r[0])>-1&&t.indexOf(r[1])>-1&&(t=t.replace(r[0],"").replace(r[1],""),d=!0)):t.indexOf(l)>-1&&(n=!0,a=s,c=l),t=t.replace("-","").replace(c,"").replace(Fe," ").split(a[","].replace(Fe," ")).join("").replace(a["."],"."),t=parseFloat(t),isNaN(t)?t=null:d&&(t*=-1),t&&n&&(t/=100),t)},f._scrollbar=q,f.scrollbar=function(t){if(isNaN(f._scrollbar)||t){var e,i=document.createElement("div");return i.style.cssText="overflow:scroll;overflow-x:hidden;zoom:1;clear:both;display:block",i.innerHTML="&nbsp;",document.body.appendChild(i),f._scrollbar=e=i.offsetWidth-i.scrollWidth,document.body.removeChild(i),e}return f._scrollbar},f.isRtl=function(t){return m(t).closest(".k-rtl").length>0},a=document.createElement("table");try{a.innerHTML="<tr><td></td></tr>",f.tbodyInnerHtml=!0}catch(t){f.tbodyInnerHtml=!1}f.touch="ontouchstart"in v,s=document.documentElement.style,o=f.transitions=!1,ie=f.transforms=!1,x="HTMLElement"in v?HTMLElement.prototype:[],f.hasHW3D="WebKitCSSMatrix"in v&&"m11"in new v.WebKitCSSMatrix||"MozPerspective"in s||"msPerspective"in s,f.cssFlexbox="flexWrap"in s||"WebkitFlexWrap"in s||"msFlexWrap"in s,jt(["Moz","webkit","O","ms"],function(){var t,e=""+this,i=typeof a.style[e+"Transition"]===_;if(i||typeof a.style[e+"Transform"]===_)return t=e.toLowerCase(),ie={css:"ms"!=t?"-"+t+"-":"",prefix:e,event:"o"===t||"webkit"===t?t:""},i&&(o=ie,o.event=o.event?o.event+"TransitionEnd":"transitionend"),!1}),a=null,f.transforms=ie,f.transitions=o,f.devicePixelRatio=v.devicePixelRatio===q?1:v.devicePixelRatio;try{f.screenWidth=v.outerWidth||v.screen?v.screen.availWidth:v.innerWidth,f.screenHeight=v.outerHeight||v.screen?v.screen.availHeight:v.innerHeight}catch(t){f.screenWidth=v.screen.availWidth,f.screenHeight=v.screen.availHeight}f.detectOS=function(t){var e,i,r=!1,n=[],a=!/mobile safari/i.test(t),s={wp:/(Windows Phone(?: OS)?)\s(\d+)\.(\d+(\.\d+)?)/,fire:/(Silk)\/(\d+)\.(\d+(\.\d+)?)/,android:/(Android|Android.*(?:Opera|Firefox).*?\/)\s*(\d+)\.?(\d+(\.\d+)?)?/,iphone:/(iPhone|iPod).*OS\s+(\d+)[\._]([\d\._]+)/,ipad:/(iPad).*OS\s+(\d+)[\._]([\d_]+)/,meego:/(MeeGo).+NokiaBrowser\/(\d+)\.([\d\._]+)/,webos:/(webOS)\/(\d+)\.(\d+(\.\d+)?)/,blackberry:/(BlackBerry|BB10).*?Version\/(\d+)\.(\d+(\.\d+)?)/,playbook:/(PlayBook).*?Tablet\s*OS\s*(\d+)\.(\d+(\.\d+)?)/,windows:/(MSIE)\s+(\d+)\.(\d+(\.\d+)?)/,tizen:/(tizen).*?Version\/(\d+)\.(\d+(\.\d+)?)/i,sailfish:/(sailfish).*rv:(\d+)\.(\d+(\.\d+)?).*firefox/i,ffos:/(Mobile).*rv:(\d+)\.(\d+(\.\d+)?).*Firefox/},o={ios:/^i(phone|pad|pod)$/i,android:/^android|fire$/i,blackberry:/^blackberry|playbook/i,windows:/windows/,wp:/wp/,flat:/sailfish|ffos|tizen/i,meego:/meego/},c={tablet:/playbook|ipad|fire/i},l={omini:/Opera\sMini/i,omobile:/Opera\sMobi/i,firefox:/Firefox|Fennec/i,mobilesafari:/version\/.*safari/i,ie:/MSIE|Windows\sPhone/i,chrome:/chrome|crios/i,webkit:/webkit/i};for(i in s)if(s.hasOwnProperty(i)&&(n=t.match(s[i]))){if("windows"==i&&"plugins"in navigator)return!1;r={},r.device=i,r.tablet=E(i,c,!1),r.browser=E(t,l,"default"),r.name=E(i,o),r[r.name]=!0,r.majorVersion=n[2],r.minorVersion=(n[3]||"0").replace("_","."),e=r.minorVersion.replace(".","").substr(0,2),r.flatVersion=r.majorVersion+e+Array(3-(e.length<3?e.length:2)).join("0"),r.cordova=typeof v.PhoneGap!==Kt||typeof v.cordova!==Kt,r.appMode=v.navigator.standalone||/file|local|wmapp/.test(v.location.protocol)||r.cordova,r.android&&(f.devicePixelRatio<1.5&&r.flatVersion<400||a)&&(f.screenWidth>800||f.screenHeight>800)&&(r.tablet=i);break}return r},w=f.mobileOS=f.detectOS(navigator.userAgent),f.wpDevicePixelRatio=w.wp?screen.width/320:0,f.hasNativeScrolling=!1,(w.ios||w.android&&w.majorVersion>2||w.wp)&&(f.hasNativeScrolling=w),f.delayedClick=function(){if(f.touch){if(w.ios)return!0;if(w.android)return!f.browser.chrome||!(f.browser.version<32)&&!(m("meta[name=viewport]").attr("content")||"").match(/user-scalable=no/i)}return!1},f.mouseAndTouchPresent=f.touch&&!(f.mobileOS.ios||f.mobileOS.android),f.detectBrowser=function(t){var e,i=!1,r=[],n={edge:/(edge)[ \/]([\w.]+)/i,webkit:/(chrome|crios)[ \/]([\w.]+)/i,safari:/(webkit)[ \/]([\w.]+)/i,opera:/(opera)(?:.*version|)[ \/]([\w.]+)/i,msie:/(msie\s|trident.*? rv:)([\w.]+)/i,mozilla:/(mozilla)(?:.*? rv:([\w.]+)|)/i};for(e in n)if(n.hasOwnProperty(e)&&(r=t.match(n[e]))){i={},i[e]=!0,i[r[1].toLowerCase().split(" ")[0].split("/")[0]]=!0,i.version=parseInt(document.documentMode||r[2],10);break}return i},f.browser=f.detectBrowser(navigator.userAgent),f.detectClipboardAccess=function(){var t={copy:!!document.queryCommandSupported&&document.queryCommandSupported("copy"),cut:!!document.queryCommandSupported&&document.queryCommandSupported("cut"),paste:!!document.queryCommandSupported&&document.queryCommandSupported("paste")};return f.browser.chrome&&(t.paste=!1,f.browser.version>=43&&(t.copy=!0,t.cut=!0)),t},f.clipboard=f.detectClipboardAccess(),f.zoomLevel=function(){var t,e,i;try{return t=f.browser,e=0,i=document.documentElement,t.msie&&11==t.version&&i.scrollHeight>i.clientHeight&&!f.touch&&(e=f.scrollbar()),f.touch?i.clientWidth/v.innerWidth:t.msie&&t.version>=10?((top||v).document.documentElement.offsetWidth+e)/(top||v).innerWidth:1}catch(t){return 1}},f.cssBorderSpacing=q!==s.borderSpacing&&!(f.browser.msie&&f.browser.version<8);var P=f.browser,T="",Ve=m(document.documentElement),Ge=parseInt(P.version,10);function We(t,e,i,r){var n,a,s=m("<form>").attr({action:i,method:"POST",target:r}),o=F.antiForgeryTokens();o.fileName=e,n=t.split(";base64,"),o.contentType=n[0].replace("data:",""),o.base64=n[1];for(a in o)o.hasOwnProperty(a)&&m("<input>").attr({value:o[a],name:a,type:"hidden"}).appendTo(s);s.appendTo("body").submit().remove()}function Qe(t,e){var i,r,n,a,s,o=t;if("string"==typeof t){for(i=t.split(";base64,"),r=i[0],n=atob(i[1]),a=new Uint8Array(n.length),s=0;s<n.length;s++)a[s]=n.charCodeAt(s);o=new Blob([a.buffer],{type:r})}navigator.msSaveBlob(o,e)}function Je(t,e){v.Blob&&t instanceof Blob&&(t=URL.createObjectURL(t)),Ye.download=e,Ye.href=t;var i=document.createEvent("MouseEvents");i.initMouseEvent("click",!0,!1,v,0,0,0,0,0,!1,!1,!1,!1,0,null),Ye.dispatchEvent(i),setTimeout(function(){URL.revokeObjectURL(t)})}P.msie?T="ie":P.mozilla?T="ff":P.safari?T="safari":P.webkit?T="webkit":P.opera?T="opera":P.edge&&(T="edge"),T&&(T="k-"+T+" k-"+T+Ge),f.mobileOS&&(T+=" k-mobile"),f.cssFlexbox||(T+=" k-no-flexbox"),Ve.addClass(T),f.eventCapture=document.documentElement.addEventListener,k=document.createElement("input"),f.placeholder="placeholder"in k,f.propertyChangeEvent="onpropertychange"in k,f.input=function(){for(var t,e=["number","date","time","month","week","datetime","datetime-local"],i=e.length,r="test",n={},a=0;a<i;a++)t=e[a],k.setAttribute("type",t),k.value=r,n[t.replace("-","")]="text"!==k.type&&k.value!==r;return n}(),k.style.cssText="float:left;",f.cssFloat=!!k.style.cssFloat,k=null,f.stableSort=function(){var t,e=513,i=[{index:0,field:"b"}];for(t=1;t<e;t++)i.push({index:t,field:"a"});return i.sort(function(t,e){return t.field>e.field?1:t.field<e.field?-1:0}),1===i[0].index}(),f.matchesSelector=x.webkitMatchesSelector||x.mozMatchesSelector||x.msMatchesSelector||x.oMatchesSelector||x.matchesSelector||x.matches||function(t){for(var e=document.querySelectorAll?(this.parentNode||document).querySelectorAll(t)||[]:m(t),i=e.length;i--;)if(e[i]==this)return!0;return!1},f.matchMedia="matchMedia"in v,f.pushState=v.history&&v.history.pushState,re=document.documentMode,f.hashChange="onhashchange"in v&&!(f.browser.msie&&(!re||re<=8)),f.customElements="registerElement"in v.document,ne=f.browser.chrome,ae=f.browser.mozilla,f.msPointers=!ne&&v.MSPointerEvent,f.pointers=!ne&&!ae&&v.PointerEvent,f.kineticScrollNeeded=w&&(f.touch||f.msPointers||f.pointers),_t={left:{reverse:"right"},right:{reverse:"left"},down:{reverse:"up"},up:{reverse:"down"},top:{reverse:"bottom"},bottom:{reverse:"top"},in:{reverse:"out"},out:{reverse:"in"}},l={},m.extend(l,{enabled:!0,Element:function(t){this.element=m(t)},promise:function(t,e){t.is(":visible")||t.css({display:t.data("olddisplay")||"block"}).css("display"),e.hide&&t.data("olddisplay",t.css("display")).hide(),e.init&&e.init(),e.completeCallback&&e.completeCallback(t),t.dequeue()},disable:function(){this.enabled=!1,this.promise=this.promiseShim},enable:function(){this.enabled=!0,this.promise=this.animatedPromise}}),l.promiseShim=l.promise,"kendoAnimate"in m.fn||p(m.fn,{kendoStop:function(t,e){return this.stop(t,e)},kendoAnimate:function(t,e,i,r){return X(this,t,e,i,r)},kendoAddClass:function(t,e){return F.toggleClass(this,t,e,!0)},kendoRemoveClass:function(t,e){return F.toggleClass(this,t,e,!1)},kendoToggleClass:function(t,e,i){return F.toggleClass(this,t,e,i)}}),yt=/&/g,bt=/</g,xt=/"/g,wt=/'/g,kt=/>/g,Ct=function(t){return t.target},f.touch&&(Ct=function(t){var e="originalEvent"in t?t.originalEvent.changedTouches:"changedTouches"in t?t.changedTouches:null;return e?document.elementFromPoint(e[0].clientX,e[0].clientY):t.target},jt(["swipe","swipeLeft","swipeRight","swipeUp","swipeDown","doubleTap","tap"],function(t,e){m.fn[e]=function(t){return this.bind(e,t)}})),f.touch?f.mobileOS?(f.mousedown="touchstart",f.mouseup="touchend",f.mousemove="touchmove",f.mousecancel="touchcancel",f.click="touchend",f.resize="orientationchange"):(f.mousedown="mousedown touchstart",f.mouseup="mouseup touchend",f.mousemove="mousemove touchmove",f.mousecancel="mouseleave touchcancel",f.click="click",f.resize="resize"):f.pointers?(f.mousemove="pointermove",f.mousedown="pointerdown",f.mouseup="pointerup",f.mousecancel="pointercancel",f.click="pointerup",f.resize="orientationchange resize"):f.msPointers?(f.mousemove="MSPointerMove",f.mousedown="MSPointerDown",f.mouseup="MSPointerUp",f.mousecancel="MSPointerCancel",f.click="MSPointerUp",f.resize="orientationchange resize"):(f.mousemove="mousemove",f.mousedown="mousedown",f.mouseup="mouseup",f.mousecancel="mouseleave",f.click="click",f.resize="resize"),St=function(t,e){var i,r,n,a,s=e||"d",o=1;for(r=0,n=t.length;r<n;r++)a=t[r],""!==a&&(i=a.indexOf("["),0!==i&&(i==-1?a="."+a:(o++,a="."+a.substring(0,i)+" || {})"+a.substring(i))),o++,s+=a+(r<n-1?" || {})":")"));return Array(o).join("(")+s},Pt=/^([a-z]+:)?\/\//i,p(F,{widgets:[],_widgetRegisteredCallbacks:[],ui:F.ui||{},fx:F.fx||Z,effects:F.effects||l,mobile:F.mobile||{},data:F.data||{},dataviz:F.dataviz||{},drawing:F.drawing||{},spreadsheet:{messages:{}},keys:{INSERT:45,DELETE:46,BACKSPACE:8,TAB:9,ENTER:13,ESC:27,LEFT:37,UP:38,RIGHT:39,DOWN:40,END:35,HOME:36,SPACEBAR:32,PAGEUP:33,PAGEDOWN:34,F2:113,F10:121,F12:123,NUMPAD_PLUS:107,NUMPAD_MINUS:109,NUMPAD_DOT:110},support:F.support||f,animate:F.animate||X,ns:"",attr:function(t){return"data-"+F.ns+t},getShadows:A,wrap:M,deepExtend:O,getComputedStyles:V,isScrollable:G,scrollLeft:W,size:Q,toCamelCase:L,toHyphens:B,getOffset:F.getOffset||J,parseEffects:F.parseEffects||Y,toggleClass:F.toggleClass||tt,directions:F.directions||_t,Observable:dt,Class:D,Template:t,template:Bt(t.compile,t),render:Bt(t.render,t),stringify:Bt(Vt.stringify,Vt),eventTarget:Ct,htmlEncode:et,isLocalUrl:function(t){return t&&!Pt.test(t)},expr:function(t,e,i){return t=t||"",typeof e==_&&(i=e,e=!1),i=i||"d",t&&"["!==t.charAt(0)&&(t="."+t),e?(t=t.replace(/"([^.]*)\.([^"]*)"/g,'"$1_$DOT$_$2"'),t=t.replace(/'([^.]*)\.([^']*)'/g,"'$1_$DOT$_$2'"),t=St(t.split("."),i),t=t.replace(/_\$DOT\$_/g,".")):t=i+t,t},getter:function(t,e){var i=t+e;return Xt[i]=Xt[i]||Function("d","return "+F.expr(t,e))},setter:function(t){return te[t]=te[t]||Function("d,value",F.expr(t)+"=value")},accessor:function(t){return{get:F.getter(t),set:F.setter(t)}},guid:function(){var t,e,i="";for(t=0;t<32;t++)e=16*h.random()|0,8!=t&&12!=t&&16!=t&&20!=t||(i+="-"),i+=(12==t?4:16==t?3&e|8:e).toString(16);return i},roleSelector:function(t){return t.replace(/(\S+)/g,"["+F.attr("role")+"=$1],").slice(0,-1)},directiveSelector:function(t){var e,i=t.split(" ");if(i)for(e=0;e<i.length;e++)"view"!=i[e]&&(i[e]=i[e].replace(/(\w*)(view|bar|strip|over)$/,"$1-$2"));return i.join(" ").replace(/(\S+)/g,"kendo-mobile-$1,").slice(0,-1)},triggeredByInput:function(t){return/^(label|input|textarea|select)$/i.test(t.target.tagName)},onWidgetRegistered:function(t){for(var e=0,i=F.widgets.length;e<i;e++)t(F.widgets[e]);F._widgetRegisteredCallbacks.push(t)},logToConsole:function(t,e){var i=v.console;!F.suppressLog&&q!==i&&i.log&&i[e||"log"](t)}}),r=dt.extend({init:function(t,e){var i,r=this;r.element=F.jQuery(t).handler(r),r.angular("init",e),dt.fn.init.call(r),i=e?e.dataSource:null,i&&(e=p({},e,{dataSource:{}})),e=r.options=p(!0,{},r.options,e),i&&(e.dataSource=i),r.element.attr(F.attr("role"))||r.element.attr(F.attr("role"),(e.name||"").toLowerCase()),r.element.data("kendo"+e.prefix+e.name,r),r.bind(r.events,e)},events:[],options:{prefix:""},_hasBindingTarget:function(){return!!this.element[0].kendoBindingTarget},_tabindex:function(t){t=t||this.wrapper;var e=this.element,i="tabindex",r=t.attr(i)||e.attr(i);e.removeAttr(i),t.attr(i,isNaN(r)?0:r)},setOptions:function(t){this._setEvents(t),m.extend(this.options,t)},_setEvents:function(t){for(var e,i=this,r=0,n=i.events.length;r<n;r++)e=i.events[r],i.options[e]&&t[e]&&i.unbind(e,i.options[e]);i.bind(i.events,t)},resize:function(t){var e=this.getSize(),i=this._size;(t||(e.width>0||e.height>0)&&(!i||e.width!==i.width||e.height!==i.height))&&(this._size=e,this._resize(e,t),this.trigger("resize",e))},getSize:function(){return F.dimensions(this.element)},size:function(t){return t?(this.setSize(t),q):this.getSize()},setSize:m.noop,_resize:m.noop,destroy:function(){var t=this;t.element.removeData("kendo"+t.options.prefix+t.options.name),t.element.removeData("handler"),t.unbind()},_destroy:function(){this.destroy()},angular:function(){},_muteAngularRebind:function(t){this._muteRebind=!0,t.call(this),this._muteRebind=!1}}),Tt=r.extend({dataItems:function(){return this.dataSource.flatView()},_angularItems:function(t){var e=this;e.angular(t,function(){return{elements:e.items(),data:m.map(e.dataItems(),function(t){return{dataItem:t}})}})}}),F.dimensions=function(t,e){var i=t[0];return e&&t.css(e),{width:i.offsetWidth,height:i.offsetHeight}},F.notify=Lt,Dt=/template$/i,Nt=/^\s*(?:\{(?:.|\r\n|\n)*\}|\[(?:.|\r\n|\n)*\])\s*$/,At=/^\{(\d+)(:[^\}]+)?\}|^\[[A-Za-z_]+\]$/,Mt=/([A-Z])/g,F.initWidget=function(t,e,i){var r,n,a,s,o,c,l,d,u,p,h,f,g;if(i?i.roles&&(i=i.roles):i=F.ui.roles,t=t.nodeType?t:t[0],c=t.getAttribute("data-"+F.ns+"role")){u=c.indexOf(".")===-1,a=u?i[c]:F.getter(c)(v),h=m(t).data(),f=a?"kendo"+a.fn.options.prefix+a.fn.options.name:"",p=u?RegExp("^kendo.*"+c+"$","i"):RegExp("^"+f+"$","i");for(g in h)if(g.match(p)){if(g!==f)return h[g];r=h[g]}if(a){for(d=it(t,"dataSource"),e=m.extend({},rt(t,a.fn.options),e),d&&(e.dataSource=typeof d===_?F.getter(d)(v):d),s=0,o=a.fn.events.length;s<o;s++)n=a.fn.events[s],l=it(t,n),l!==q&&(e[n]=F.getter(l)(v));return r?m.isEmptyObject(e)||r.setOptions(e):r=new a(t,e),r}}},F.rolesFromNamespaces=function(t){var e,i,r=[];for(t[0]||(t=[F.ui,F.dataviz.ui]),e=0,i=t.length;e<i;e++)r[e]=t[e].roles;return p.apply(null,[{}].concat(r.reverse()))},F.init=function(t){var e=F.rolesFromNamespaces(ee.call(arguments,1));m(t).find("[data-"+F.ns+"role]").addBack().each(function(){F.initWidget(this,{},e)})},F.destroy=function(t){m(t).find("[data-"+F.ns+"role]").addBack().each(function(){var t,e=m(this).data();for(t in e)0===t.indexOf("kendo")&&typeof e[t].destroy===g&&e[t].destroy()})},F.resize=function(t,e){var i,r=m(t).find("[data-"+F.ns+"role]").addBack().filter(at);r.length&&(i=m.makeArray(r),i.sort(nt),m.each(i,function(){var t=F.widgetInstance(m(this));t&&t.resize(e)}))},F.parseOptions=rt,p(F.ui,{Widget:r,DataBoundWidget:Tt,roles:{},progress:function(t,e,i){var r,n,a,s,o,c=t.find(".k-loading-mask"),l=F.support,d=l.browser;i=m.extend({},{width:"100%",height:"100%",top:t.scrollTop(),opacity:!1},i),o=i.opacity?"k-loading-mask k-opaque":"k-loading-mask",e?c.length||(r=l.isRtl(t),n=r?"right":"left",s=t.scrollLeft(),a=d.webkit&&r?t[0].scrollWidth-t.width()-2*s:0,c=m(F.format("<div class='{0}'><span class='k-loading-text'>{1}</span><div class='k-loading-image'/><div class='k-loading-color'/></div>",o,F.ui.progress.messages.loading)).width(i.width).height(i.height).css("top",i.top).css(n,Math.abs(s)+a).prependTo(t)):c&&c.remove()},plugin:function(t,e,i){var r,n,a,s,o=t.fn.options.name;for(e=e||F.ui,i=i||"",e[o]=t,e.roles[o.toLowerCase()]=t,r="getKendo"+i+o,o="kendo"+i+o,n={name:o,widget:t,prefix:i||""},F.widgets.push(n),a=0,s=F._widgetRegisteredCallbacks.length;a<s;a++)F._widgetRegisteredCallbacks[a](n);m.fn[o]=function(r){var n,a=this;return typeof r===_?(n=ee.call(arguments,1),this.each(function(){var t,e,i=m.data(this,o);if(!i)throw Error(F.format("Cannot call method '{0}' of {1} before it is initialized",r,o));if(t=i[r],typeof t!==g)throw Error(F.format("Cannot find method '{0}' of {1}",r,o));if(e=t.apply(i,n),e!==q)return a=e,!1})):this.each(function(){return new t(this,r)}),a},m.fn[o].widget=t,m.fn[r]=function(){return this.data(o)}}}),F.ui.progress.messages={loading:"Loading..."},Ot={bind:function(){return this},nullObject:!0,options:{}},It=r.extend({init:function(t,e){r.fn.init.call(this,t,e),this.element.autoApplyNS(),this.wrapper=this.element,this.element.addClass("km-widget")},destroy:function(){r.fn.destroy.call(this),this.element.kendoDestroy()},options:{prefix:"Mobile"},events:[],view:function(){var t=this.element.closest(F.roleSelector("view splitview modalview drawer"));return F.widgetInstance(t,F.mobile.ui)||Ot},viewHasNativeScrolling:function(){var t=this.view();return t&&t.options.useNativeScrolling},container:function(){var t=this.element.closest(F.roleSelector("view layout modalview drawer splitview"));return F.widgetInstance(t.eq(0),F.mobile.ui)||Ot}}),p(F.mobile,{init:function(t){F.init(t,F.mobile.ui,F.ui,F.dataviz.ui)},appLevelNativeScrolling:function(){return F.mobile.application&&F.mobile.application.options&&F.mobile.application.options.useNativeScrolling},roles:{},ui:{Widget:It,DataBoundWidget:Tt.extend(It.prototype),roles:{},plugin:function(t){F.ui.plugin(t,F.mobile.ui,"Mobile")}}}),O(F.dataviz,{init:function(t){F.init(t,F.dataviz.ui)},ui:{roles:{},themes:{},views:[],plugin:function(t){F.ui.plugin(t,F.dataviz.ui)}},roles:{}}),F.touchScroller=function(t,i){return i||(i={}),i.useNative=!0,m(t).map(function(t,e){return e=m(e),!(!f.kineticScrollNeeded||!F.mobile.ui.Scroller||e.data("kendoMobileScroller"))&&(e.kendoMobileScroller(i),e.data("kendoMobileScroller"))})[0]},F.preventDefault=function(t){t.preventDefault()},F.widgetInstance=function(t,e){var i,r,n,a,s,o=t.data(F.ns+"role"),c=[];if(o){if("content"===o&&(o="scroller"),"editortoolbar"===o&&(n=t.data("kendoEditorToolbar")))return n;if(e)if(e[0])for(i=0,r=e.length;i<r;i++)c.push(e[i].roles[o]);else c.push(e.roles[o]);else c=[F.ui.roles[o],F.dataviz.ui.roles[o],F.mobile.ui.roles[o]];for(o.indexOf(".")>=0&&(c=[F.getter(o)(v)]),i=0,r=c.length;i<r;i++)if(a=c[i],a&&(s=t.data("kendo"+a.fn.options.prefix+a.fn.options.name)))return s}},F.onResize=function(t){var e=t;return f.mobileOS.android&&(e=function(){setTimeout(t,600)}),m(v).on(f.resize,e),e},F.unbindResize=function(t){m(v).off(f.resize,t)},F.attrValue=function(t,e){return t.data(F.ns+e)},F.days={Sunday:0,Monday:1,Tuesday:2,Wednesday:3,Thursday:4,Friday:5,Saturday:6},m.extend(m.expr[":"],{kendoFocusable:function(t){var e=m.attr(t,"tabindex");return st(t,!isNaN(e)&&e>-1)}}),Et=["mousedown","mousemove","mouseenter","mouseleave","mouseover","mouseout","mouseup","click"],Ft="label, input, [data-rel=external]",d={setupMouseMute:function(){var t,e=0,i=Et.length,r=document.documentElement;if(!d.mouseTrap&&f.eventCapture)for(d.mouseTrap=!0,d.bustClick=!1,d.captureMouse=!1,t=function(t){d.captureMouse&&("click"===t.type?d.bustClick&&!m(t.target).is(Ft)&&(t.preventDefault(),t.stopPropagation()):t.stopPropagation())};e<i;e++)r.addEventListener(Et[e],t,!0)},muteMouse:function(t){d.captureMouse=!0,t.data.bustClick&&(d.bustClick=!0),clearTimeout(d.mouseTrapTimeoutID)},unMuteMouse:function(){clearTimeout(d.mouseTrapTimeoutID),d.mouseTrapTimeoutID=setTimeout(function(){d.captureMouse=!1,d.bustClick=!1},400)}},e={down:"touchstart mousedown",move:"mousemove touchmove",up:"mouseup touchend touchcancel",cancel:"mouseleave touchcancel"},f.touch&&(f.mobileOS.ios||f.mobileOS.android)?e={down:"touchstart",move:"touchmove",up:"touchend touchcancel",cancel:"touchcancel"}:f.pointers?e={down:"pointerdown",move:"pointermove",up:"pointerup",cancel:"pointercancel pointerleave"}:f.msPointers&&(e={down:"MSPointerDown",move:"MSPointerMove",up:"MSPointerUp",cancel:"MSPointerCancel MSPointerLeave"}),!f.msPointers||"onmspointerenter"in v||m.each({MSPointerEnter:"MSPointerOver",MSPointerLeave:"MSPointerOut"},function(t,a){m.event.special[t]={delegateType:a,bindType:a,handle:function(t){var e,i=this,r=t.relatedTarget,n=t.handleObj;return r&&(r===i||m.contains(i,r))||(t.type=n.origType,e=n.handler.apply(this,arguments),t.type=a),e}}}),Rt=function(t){return e[t]||t},qt=/([^ ]+)/g,F.applyEventMap=function(t,e){return t=t.replace(qt,Rt),e&&(t=t.replace(qt,"$1."+e)),t},$t=m.fn.on,p(!0,i,m),((i.fn=i.prototype=new m).constructor=i).fn.init=function(t,e){return e&&e instanceof m&&!(e instanceof i)&&(e=i(e)),m.fn.init.call(this,t,e,Ut)},i.fn.init.prototype=i.fn,Ut=i(document),p(i.fn,{handler:function(t){return this.data("handler",t),this},autoApplyNS:function(t){return this.data("kendoNS",t||F.guid()),this},on:function(){var e,t,i,r,n,a,s=this,o=s.data("kendoNS");return 1===arguments.length?$t.call(s,arguments[0]):(e=s,t=ee.call(arguments),typeof t[t.length-1]===Kt&&t.pop(),i=t[t.length-1],r=F.applyEventMap(t[0],o),f.mouseAndTouchPresent&&r.search(/mouse|click/)>-1&&this[0]!==document.documentElement&&(d.setupMouseMute(),n=2===t.length?null:t[1],a=r.indexOf("click")>-1&&r.indexOf("touchend")>-1,$t.call(this,{touchstart:d.muteMouse,touchend:d.unMuteMouse},n,{bustClick:a})),typeof i===_&&(e=s.data("handler"),i=e[i],t[t.length-1]=function(t){i.call(e,t)}),t[0]=r,$t.apply(s,t),s)},kendoDestroy:function(t){return t=t||this.data("kendoNS"),t&&this.off("."+t),this}}),F.jQuery=i,F.eventMap=e,F.timezone=function(){function o(t,e){var i,r,n,a=e[3],s=e[4],o=e[5],c=e[8];return c||(e[8]=c={}),c[t]?c[t]:(isNaN(s)?0===s.indexOf("last")?(i=new Date(Date.UTC(t,d[a]+1,1,o[0]-24,o[1],o[2],0)),r=u[s.substr(4,3)],n=i.getUTCDay(),i.setUTCDate(i.getUTCDate()+r-n-(r>n?7:0))):s.indexOf(">=")>=0&&(i=new Date(Date.UTC(t,d[a],s.substr(5),o[0],o[1],o[2],0)),r=u[s.substr(0,3)],n=i.getUTCDay(),i.setUTCDate(i.getUTCDate()+r-n+(r<n?7:0))):i=new Date(Date.UTC(t,d[a],s,o[0],o[1],o[2],0)),c[t]=i)}function a(t,e,i){var r,n,a,s;return(e=e[i])?(a=new Date(t).getUTCFullYear(),e=jQuery.grep(e,function(t){var e=t[0],i=t[1];return e<=a&&(i>=a||e==a&&"only"==i||"max"==i)}),e.push(t),e.sort(function(t,e){return"number"!=typeof t&&(t=+o(a,t)),"number"!=typeof e&&(e=+o(a,e)),t-e}),s=e[jQuery.inArray(t,e)-1]||e[e.length-1],isNaN(s)?s:null):(r=i.split(":"),n=0,r.length>1&&(n=60*r[0]+ +r[1]),[-1e6,"max","-","Jan",1,[0,0,0],n,"-"])}function s(t,e,i){var r,n,a,s=e[i];if("string"==typeof s&&(s=e[s]),!s)throw Error('Timezone "'+i+'" is either incorrect, or kendo.timezones.min.js is not included.');for(r=s.length-1;r>=0&&(n=s[r][3],!(n&&t>n));r--);if(a=s[r+1],!a)throw Error('Timezone "'+i+'" not found on '+t+".");return a}function c(t,e,i,r){typeof t!=y&&(t=Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()));var n=s(t,e,r);return{zone:n,rule:a(t,i,n[1])}}function t(t,e){var i,r,n;return"Etc/UTC"==e||"Etc/GMT"==e?0:(i=c(t,this.zones,this.rules,e),r=i.zone,n=i.rule,F.parseFloat(n?r[0]-n[6]:r[0]))}function e(t,e){var i=c(t,this.zones,this.rules,e),r=i.zone,n=i.rule,a=r[2];return a.indexOf("/")>=0?a.split("/")[n&&+n[6]?1:0]:a.indexOf("%s")>=0?a.replace("%s",n&&"-"!=n[7]?n[7]:""):a}function i(t,e,i){var r,n,a,s=i;return typeof e==_&&(e=this.offset(t,e)),typeof i==_&&(i=this.offset(t,i)),n=t.getTimezoneOffset(),t=new Date(t.getTime()+6e4*(e-i)),a=t.getTimezoneOffset(),typeof s==_&&(s=this.offset(t,s)),r=a-n+(i-s),new Date(t.getTime()+6e4*r)}function r(t,e){return this.convert(t,t.getTimezoneOffset(),e)}function n(t,e){return this.convert(t,e,t.getTimezoneOffset())}function l(t){return this.apply(new Date(t),"Etc/UTC")}var d={Jan:0,Feb:1,Mar:2,Apr:3,May:4,Jun:5,Jul:6,Aug:7,Sep:8,Oct:9,Nov:10,Dec:11},u={Sun:0,Mon:1,Tue:2,Wed:3,Thu:4,Fri:5,Sat:6};return{zones:{},rules:{},offset:t,convert:i,apply:r,remove:n,abbr:e,toLocalDate:l}}(),F.date=function(){function n(t,e){return 0===e&&23===t.getHours()&&(t.setHours(t.getHours()+2),!0)}function r(t,e,i){var r=t.getHours();i=i||1,e=(e-t.getDay()+7*i)%7,t.setDate(t.getDate()+e),n(t,r)}function i(t,e,i){return t=new Date(t),r(t,e,i),t}function a(t){return new Date(t.getFullYear(),t.getMonth(),1)}function t(t){var e=new Date(t.getFullYear(),t.getMonth()+1,0),i=a(t),r=Math.abs(e.getTimezoneOffset()-i.getTimezoneOffset());return r&&e.setHours(i.getHours()+r/60),e}function s(t,e){return 1!==e?h(i(t,e,-1),4):h(t,4-(t.getDay()||7))}function o(t,e){var i=new Date(t.getFullYear(),0,1,-6),r=s(t,e),n=r.getTime()-i.getTime(),a=Math.floor(n/b);return 1+Math.floor(a/7)}function e(t,e){var i,r,n;return e===q&&(e=F.culture().calendar.firstDay),i=h(t,-7),r=h(t,7),n=o(t,e),0===n?o(i,e)+1:53===n&&o(r,e)>1?1:n}function c(t){return t=new Date(t.getFullYear(),t.getMonth(),t.getDate(),0,0,0),n(t,0),t}function l(t){return Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds())}function d(t){return _(t).getTime()-c(_(t))}function u(t,e,i){var r,n=d(e),a=d(i);return!t||n==a||(e>=i&&(i+=b),r=d(t),n>r&&(r+=b),a<n&&(a+=b),r>=n&&r<=a)}function p(t,e,i){var r,n=e.getTime(),a=i.getTime();return n>=a&&(a+=b),r=t.getTime(),r>=n&&r<=a}function h(t,e){var i=t.getHours();return t=new Date(t),f(t,e*b),n(t,i),t}function f(t,e,i){var r,n=t.getTimezoneOffset();t.setTime(t.getTime()+e),i||(r=t.getTimezoneOffset()-n,t.setTime(t.getTime()+r*y))}function g(t,e){return t=new Date(F.date.getDate(t).getTime()+F.date.getMilliseconds(e)),n(t,e.getHours()),t}function m(){return c(new Date)}function v(t){return c(t).getTime()==m().getTime()}function _(t){var e=new Date(1980,1,1,0,0,0);return t&&e.setHours(t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()),e}var y=6e4,b=864e5;return{adjustDST:n,dayOfWeek:i,setDayOfWeek:r,getDate:c,isInDateRange:p,isInTimeRange:u,isToday:v,nextDay:function(t){return h(t,1)},previousDay:function(t){return h(t,-1)},toUtcTime:l,MS_PER_DAY:b,MS_PER_HOUR:60*y,MS_PER_MINUTE:y,setTime:f,setHours:g,addDays:h,today:m,toInvariantTime:_,firstDayOfMonth:a,lastDayOfMonth:t,weekInYear:e,getMilliseconds:d}}(),F.stripWhitespace=function(e){var t,i,r;if(document.createNodeIterator)for(t=document.createNodeIterator(e,NodeFilter.SHOW_TEXT,function(t){return t.parentNode==e?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_REJECT},!1);t.nextNode();)t.referenceNode&&!t.referenceNode.textContent.trim()&&t.referenceNode.parentNode.removeChild(t.referenceNode);else for(i=0;i<e.childNodes.length;i++)r=e.childNodes[i],3!=r.nodeType||/\S/.test(r.nodeValue)||(e.removeChild(r),i--),1==r.nodeType&&F.stripWhitespace(r)},zt=v.requestAnimationFrame||v.webkitRequestAnimationFrame||v.mozRequestAnimationFrame||v.oRequestAnimationFrame||v.msRequestAnimationFrame||function(t){setTimeout(t,1e3/60)},F.animationFrame=function(t){zt.call(v,t)},n=[],F.queueAnimation=function(t){n[n.length]=t,1===n.length&&F.runNextAnimation()},F.runNextAnimation=function(){F.animationFrame(function(){n[0]&&(n.shift()(),n[0]&&F.runNextAnimation())})},F.parseQueryStringParams=function(t){for(var e=t.split("?")[1]||"",i={},r=e.split(/&|=/),n=r.length,a=0;a<n;a+=2)""!==r[a]&&(i[decodeURIComponent(r[a])]=decodeURIComponent(r[a+1]));return i},F.elementUnderCursor=function(t){if(q!==t.x.client)return document.elementFromPoint(t.x.client,t.y.client)},F.wheelDeltaY=function(t){var e,i=t.originalEvent,r=i.wheelDeltaY;return i.wheelDelta?(r===q||r)&&(e=i.wheelDelta):i.detail&&i.axis===i.VERTICAL_AXIS&&(e=10*-i.detail),e},F.throttle=function(n,a){var s,t,o=0;return!a||a<=0?n:(t=function(){function t(){n.apply(e,r),o=+new Date}var e=this,i=+new Date-o,r=arguments;return o?(s&&clearTimeout(s),i>a?t():s=setTimeout(t,a-i),q):t()},t.cancel=function(){clearTimeout(s)},t)},F.caret=function(t,e,i){var r,n,a,s,o,c=e!==q;if(i===q&&(i=e),t[0]&&(t=t[0]),!c||!t.disabled){try{t.selectionStart!==q?c?(t.focus(),n=f.mobileOS,n.wp||n.android?setTimeout(function(){t.setSelectionRange(e,i)},0):t.setSelectionRange(e,i)):e=[t.selectionStart,t.selectionEnd]:document.selection&&(m(t).is(":visible")&&t.focus(),r=t.createTextRange(),c?(r.collapse(!0),r.moveStart("character",e),r.moveEnd("character",i-e),r.select()):(a=r.duplicate(),r.moveToBookmark(document.selection.createRange().getBookmark()),a.setEndPoint("EndToStart",r),s=a.text.length,o=s+r.text.length,e=[s,o]))}catch(t){e=[]}return e}},F.compileMobileDirective=function(e,i){var t=v.angular;return e.attr("data-"+F.ns+"role",e[0].tagName.toLowerCase().replace("kendo-mobile-","").replace("-","")),t.element(e).injector().invoke(["$compile",function(t){t(e)(i),/^\$(digest|apply)$/.test(i.$$phase)||i.$digest()}]),F.widgetInstance(e,F.mobile.ui)},F.antiForgeryTokens=function(){var t={},e=m("meta[name=csrf-token],meta[name=_csrf]").attr("content"),i=m("meta[name=csrf-param],meta[name=_csrf_header]").attr("content");return m("input[name^='__RequestVerificationToken']").each(function(){t[this.name]=this.value}),i!==q&&e!==q&&(t[i]=e),t},F.cycleForm=function(t){function e(t){var e=F.widgetInstance(t);e&&e.focus?e.focus():t.focus()}var i=t.find("input, .k-widget").first(),r=t.find("button, .k-button").last();r.on("keydown",function(t){t.keyCode!=F.keys.TAB||t.shiftKey||(t.preventDefault(),e(i))}),i.on("keydown",function(t){t.keyCode==F.keys.TAB&&t.shiftKey&&(t.preventDefault(),e(r))})},F.focusElement=function(e){var i=[],t=e.parentsUntil("body").filter(function(t,e){var i=F.getComputedStyles(e,["overflow"]);return"visible"!==i.overflow}).add(v);t.each(function(t,e){i[t]=m(e).scrollTop()});try{e[0].setActive()}catch(t){e[0].focus()}t.each(function(t,e){m(e).scrollTop(i[t])})},F.matchesMedia=function(t){var e=F._bootstrapToMedia(t)||t;return f.matchMedia&&v.matchMedia(e).matches},F._bootstrapToMedia=function(t){return{xs:"(max-width: 576px)",sm:"(min-width: 576px)",md:"(min-width: 768px)",lg:"(min-width: 992px)",xl:"(min-width: 1200px)"}[t]};var Ye=document.createElement("a"),Ze="download"in Ye&&!F.support.browser.edge;return F.saveAs=function(t){var e=We;t.forceProxy||(Ze?e=Je:navigator.msSaveBlob&&(e=Qe)),e(t.dataURI,t.fileName,t.proxyURL,t.proxyTarget)},F.proxyModelSetters=function(i){var t={};return Object.keys(i||{}).forEach(function(e){Object.defineProperty(t,e,{get:function(){return i[e]},set:function(t){i[e]=t,i.dirty=!0}})}),t},window.kendo}),("function"==typeof define&&define.amd?define:function(t,e,i){(i||e)()})("kendo.data.min",["kendo.core.min","kendo.data.odata.min","kendo.data.xml.min"],function(){var v=window.kendo.jQuery,y=void 0;function U(r,n,a,s){return function(t){var e,i={};for(e in t)i[e]=t[e];i.field=s?a+"."+t.field:a,n==A&&r._notifyChange&&r._notifyChange(i),r.trigger(n,i)}}function z(t,e){if(t===e)return!0;var i,r=v.type(t),n=v.type(e);if(r!==n)return!1;if("date"===r)return t.getTime()===e.getTime();if("object"!==r&&"array"!==r)return!1;for(i in t)if(!z(t[i],e[i]))return!1;return!0}function j(t,e){var i,r;for(r in t){if(i=t[r],k(i)&&i.field&&i.field===e)return i;if(i===e)return i}return null}function g(t){this.data=t||[]}function b(t,e){if(t){var i=typeof t===N?{field:t,dir:e}:t,r=C(i)?i:i!==y?[i]:[];return Et(r,function(t){return!!t.dir})}}function H(t){var e,i,r,n,a=t.filters;if(a)for(e=0,i=a.length;e<i;e++)r=a[e],n=r.operator,n&&typeof n===N&&(r.operator=St[n.toLowerCase()]||n),H(r)}function u(t){if(t&&!f(t))return!C(t)&&t.filters||(t={logic:"and",filters:C(t)?t:[t]}),H(t),t}function B(t,e){return!t.logic&&!e.logic&&(t.field===e.field&&t.value===e.value&&t.operator===e.operator)}function L(t){return t=t||{},f(t)?{logic:"and",filters:[]}:u(t)}function V(t,e){return e.logic||t.field>e.field?1:t.field<e.field?-1:0}function G(t,e){var i,r,n,a,s;if(t=L(t),e=L(e),t.logic!==e.logic)return!1;if(n=(t.filters||[]).slice(),a=(e.filters||[]).slice(),n.length!==a.length)return!1;for(n=n.sort(V),a=a.sort(V),s=0;s<n.length;s++)if(i=n[s],r=a[s],i.logic&&r.logic){if(!G(i,r))return!1}else if(!B(i,r))return!1;return!0}function i(t){return C(t)?t:[t]}function m(t,e,i,r){var n=typeof t===N?{field:t,dir:e,compare:i,skipItemSorting:r}:t,a=C(n)?n:n!==y?[n]:[];return yt(a,function(t){return{field:t.field,dir:t.dir||"asc",aggregates:t.aggregates,compare:t.compare,skipItemSorting:t.skipItemSorting}})}function W(t,e,i){var r,n=m(t,e,i);for(r=0;r<n.length;r++)delete n[r].compare;return n}function Q(t){var e,i=C(t)?t:[t];for(e=0;e<i.length;e++)if(i[e]&&T(i[e].compare))return!0;return!1}function J(t,e){return t&&t.getTime&&e&&e.getTime?t.getTime()===e.getTime():t===e}function Y(t,e,i,r,n,a){var s,o,c,l,d;for(e=e||[],l=e.length,s=0;s<l;s++)o=e[s],c=o.aggregate,d=o.field,t[d]=t[d]||{},a[d]=a[d]||{},a[d][c]=a[d][c]||{},t[d][c]=Pt[c.toLowerCase()](t[d][c],i,P.accessor(d),r,n,a[d][c])}function o(t){return"number"==typeof t&&!isNaN(t)}function n(t){return t&&t.getTime}function c(t){var e,i=t.length,r=Array(i);for(e=0;e<i;e++)r[e]=t[e].toJSON();return r}function Z(t,e,i,r,n){var a,s,o,c,l,d={};for(c=0,l=t.length;c<l;c++){a=t[c];for(s in e)o=n[s],o&&o!==s&&(d[o]||(d[o]=P.setter(o)),d[o](a,e[s](a)),delete a[s])}}function K(t,e,i,r,n){var a,s,o,c,l;for(c=0,l=t.length;c<l;c++){a=t[c];for(s in e)a[s]=i._parse(s,e[s](a)),o=n[s],o&&o!==s&&delete a[o]}}function X(t,e,i,r,n){var a,s,o,c;for(s=0,c=t.length;s<c;s++)a=t[s],o=r[a.field],o&&o!=a.field&&(a.field=o),a.value=i._parse(a.field,a.value),a.hasSubgroups?X(a.items,e,i,r,n):K(a.items,e,i,r,n)}function tt(e,i,r,n,a,s){return function(t){return t=e(t),et(i,r,n,a,s)(t)}}function et(e,i,r,n,a){return function(t){return t&&!f(r)&&("[object Array]"===te.call(t)||t instanceof $||(t=[t]),i(t,r,new e,n,a)),t||[]}}function it(t,e){var i,r,n;if(e.items&&e.items.length)for(n=0;n<e.items.length;n++)i=t.items[n],r=e.items[n],i&&r?i.hasSubgroups?it(i,r):i.field&&i.value==r.value?i.items.push.apply(i.items,r.items):t.items.push.apply(t.items,[r]):r&&t.items.push.apply(t.items,[r])}function rt(t,e,i,r){for(var n,a,s,o=0;e.length&&r&&(n=e[o],a=n.items,s=a.length,t&&t.field===n.field&&t.value===n.value?(t.hasSubgroups&&t.items.length?rt(t.items[t.items.length-1],n.items,i,r):(a=a.slice(i,i+r),t.items=t.items.concat(a)),e.splice(o--,1)):n.hasSubgroups&&a.length?(rt(n,a,i,r),n.items.length||e.splice(o--,1)):(a=a.slice(i,i+r),n.items=a,n.items.length||e.splice(o--,1)),0===a.length?i-=s:(i=0,r-=a.length),!(++o>=e.length)););o<e.length&&e.splice(o,e.length-o)}function nt(t,e){var i,r,n,a,s=[],o=(t||[]).length,c=T(e)?e:function(t,e){return t[e]};for(n=0;n<o;n++)if(i=c(t,n),i.hasSubgroups)s=s.concat(nt(i.items));else for(r=i.items,a=0;a<r.length;a++)s.push(c(r,a));return s}function at(t){var e,i,r,n,a,s=[];for(e=0,i=t.length;e<i;e++)if(a=t.at(e),a.hasSubgroups)s=s.concat(at(a.items));else for(r=a.items,n=0;n<r.length;n++)s.push(r.at(n));return s}function st(t,e){var i,r,n;if(e)for(i=0,r=t.length;i<r;i++)n=t.at(i),n.hasSubgroups?st(n.items,e):n.items=new a(n.items,e,n.items._events)}function r(t,e){for(var i=0;i<t.length;i++)if(t[i].hasSubgroups){if(r(t[i].items,e))return!0}else if(e(t[i].items,t[i]))return!0}function ot(t,e,i,r){for(var n=0;n<t.length&&t[n].data!==e&&!ct(t[n].data,i,r);n++);}function ct(t,e,i){for(var r=0,n=t.length;r<n;r++){if(t[r]&&t[r].hasSubgroups)return ct(t[r].items,e,i);if(t[r]===e||t[r]===i)return t[r]=i,!0}}function lt(t,e,i,r,n){var a,s,o,c;for(a=0,s=t.length;a<s;a++)if(o=t[a],o&&!(o instanceof r))if(o.hasSubgroups===y||n){for(c=0;c<e.length;c++)if(e[c]===o){t[a]=e.at(c),ot(i,e,o,t[a]);break}}else lt(o.items,e,i,r,n)}function dt(t,e){var i,r,n=t.length;for(r=0;r<n;r++)if(i=t[r],i.uid&&i.uid==e.uid)return t.splice(r,1),i}function ut(t,e){return e?ht(t,function(t){return t.uid&&t.uid==e.uid||t[e.idField]===e.id&&e.id!==e._defaultId}):-1}function pt(t,e){return e?ht(t,function(t){return t.uid==e.uid}):-1}function ht(t,e){var i,r;for(i=0,r=t.length;i<r;i++)if(e(t[i]))return i;return-1}function ft(t,e){var i,r;return t&&!f(t)?(i=t[e],r=k(i)?i.from||i.field||e:t[e]||e,T(r)?e:r):e}function gt(t,e){var i,r,n,a={};for(n in t)"filters"!==n&&(a[n]=t[n]);if(t.filters)for(a.filters=[],i=0,r=t.filters.length;i<r;i++)a.filters[i]=gt(t.filters[i],e);else a.field=ft(e.fields,a.field);return a}function l(t,e){var i,r,n,a,s,o=[];for(i=0,r=t.length;i<r;i++){n={},a=t[i];for(s in a)n[s]=a[s];n.field=ft(e.fields,n.field),n.aggregates&&C(n.aggregates)&&(n.aggregates=l(n.aggregates,e)),o.push(n)}return o}function mt(t,e){var i,r,n,a,s,o,c,l,d,u;for(t=v(t)[0],i=t.options,r=e[0],n=e[1],a=[],s=0,o=i.length;s<o;s++)d={},l=i[s],c=l.parentNode,c===t&&(c=null),l.disabled||c&&c.disabled||(c&&(d.optgroup=c.label),d[r.field]=l.text,u=l.attributes.value,u=u&&u.specified?l.value:l.text,d[n.field]=u,a.push(d));return a}function vt(t,e){var i,r,n,a,s,o,c,l=v(t)[0].tBodies[0],d=l?l.rows:[],u=e.length,p=[];for(i=0,r=d.length;i<r;i++){for(s={},c=!0,a=d[i].cells,n=0;n<u;n++)o=a[n],"th"!==o.nodeName.toLowerCase()&&(c=!1,s[e[n].field]=o.innerHTML);c||p.push(s)}return p}function t(i){return function(){var t=this._data,e=p.fn[i].apply(this,q.call(arguments));return this._data!=t&&this._attachBubbleHandlers(),e}}function _t(t,e){function i(t,e){return t.filter(e).add(t.find(e))}var r,n,a,s,o,c,l,d,u=v(t).children(),p=[],h=e[0].field,f=e[1]&&e[1].field,g=e[2]&&e[2].field,m=e[3]&&e[3].field;for(r=0,n=u.length;r<n;r++)a={_loaded:!0},s=u.eq(r),c=s[0].firstChild,d=s.children(),t=d.filter("ul"),d=d.filter(":not(ul)"),o=s.attr("data-id"),o&&(a.id=o),c&&(a[h]=3==c.nodeType?c.nodeValue:d.text()),f&&(a[f]=i(d,"a").attr("href")),m&&(a[m]=i(d,"img").attr("src")),g&&(l=i(d,".k-sprite").prop("className"),a[g]=l&&v.trim(l.replace("k-sprite",""))),t.length&&(a.items=_t(t.eq(0),e)),"true"==s.attr("data-hasChildren")&&(a.hasChildren=!0),p.push(a);return p}var yt,a,d,bt,xt,_,wt,kt,Ct,St,Pt,Tt,Dt,s,Nt,p,At,Mt,h,Ot,It,x=v.extend,w=v.proxy,k=v.isPlainObject,f=v.isEmptyObject,C=v.isArray,Et=v.grep,Ft=v.ajax,Rt=v.each,S=v.noop,P=window.kendo,T=P.isFunction,D=P.Observable,qt=P.Class,N="string",$t="function",Ut="asc",zt="create",jt="read",Ht="update",Bt="destroy",A="change",Lt="sync",Vt="get",M="error",O="requestStart",I="progress",E="requestEnd",Gt=[zt,jt,Ht,Bt],e=function(t){return t},F=P.getter,Wt=P.stringify,R=Math,Qt=[].push,Jt=[].join,Yt=[].pop,Zt=[].splice,Kt=[].shift,q=[].slice,Xt=[].unshift,te={}.toString,ee=P.support.stableSort,ie=/^\/Date\((.*?)\)\/$/,$=D.extend({init:function(t,e){var i=this;i.type=e||d,D.fn.init.call(i),i.length=t.length,i.wrapAll(t,i)},at:function(t){return this[t]},toJSON:function(){var t,e,i=this.length,r=Array(i);for(t=0;t<i;t++)e=this[t],e instanceof d&&(e=e.toJSON()),r[t]=e;return r},parent:S,wrapAll:function(t,e){var i,r,n=this,a=function(){return n};for(e=e||[],i=0,r=t.length;i<r;i++)e[i]=n.wrap(t[i],a);return e},wrap:function(t,e){var i,r=this;return null!==t&&"[object Object]"===te.call(t)&&(i=t instanceof r.type||t instanceof _,i||(t=t instanceof d?t.toJSON():t,t=new r.type(t)),t.parent=e,t.bind(A,function(t){r.trigger(A,{field:t.field,node:t.node,index:t.index,items:t.items||[this],action:t.node?t.action||"itemloaded":"itemchange"})})),t},push:function(){var t,e=this.length,i=this.wrapAll(arguments);return t=Qt.apply(this,i),this.trigger(A,{action:"add",index:e,items:i}),t},slice:q,sort:[].sort,join:Jt,pop:function(){var t=this.length,e=Yt.apply(this);return t&&this.trigger(A,{action:"remove",index:t-1,items:[e]}),e},splice:function(t,e,i){var r,n,a,s=this.wrapAll(q.call(arguments,2));if(r=Zt.apply(this,[t,e].concat(s)),r.length)for(this.trigger(A,{action:"remove",index:t,items:r}),n=0,a=r.length;n<a;n++)r[n]&&r[n].children&&r[n].unbind(A);return i&&this.trigger(A,{action:"add",index:t,items:s}),r},shift:function(){var t=this.length,e=Kt.apply(this);return t&&this.trigger(A,{action:"remove",index:0,items:[e]}),e},unshift:function(){var t,e=this.wrapAll(arguments);return t=Xt.apply(this,e),this.trigger(A,{action:"add",index:0,items:e}),t},indexOf:function(t){var e,i,r=this;for(e=0,i=r.length;e<i;e++)if(r[e]===t)return e;return-1},forEach:function(t,e){for(var i=0,r=this.length,n=e||window;i<r;i++)t.call(n,this[i],i,this)},map:function(t,e){for(var i=0,r=[],n=this.length,a=e||window;i<n;i++)r[i]=t.call(a,this[i],i,this);return r},reduce:function(t){var e,i=0,r=this.length;for(2==arguments.length?e=arguments[1]:i<r&&(e=this[i++]);i<r;i++)e=t(e,this[i],i,this);return e},reduceRight:function(t){var e,i=this.length-1;for(2==arguments.length?e=arguments[1]:i>0&&(e=this[i--]);i>=0;i--)e=t(e,this[i],i,this);return e},filter:function(t,e){for(var i,r=0,n=[],a=this.length,s=e||window;r<a;r++)i=this[r],t.call(s,i,r,this)&&(n[n.length]=i);return n},find:function(t,e){for(var i,r=0,n=this.length,a=e||window;r<n;r++)if(i=this[r],t.call(a,i,r,this))return i},every:function(t,e){for(var i,r=0,n=this.length,a=e||window;r<n;r++)if(i=this[r],!t.call(a,i,r,this))return!1;return!0},some:function(t,e){for(var i,r=0,n=this.length,a=e||window;r<n;r++)if(i=this[r],t.call(a,i,r,this))return!0;return!1},remove:function(t){var e=this.indexOf(t);e!==-1&&this.splice(e,1)},empty:function(){this.splice(0,this.length)}});return"undefined"!=typeof Symbol&&Symbol.iterator&&!$.prototype[Symbol.iterator]&&($.prototype[Symbol.iterator]=[][Symbol.iterator]),a=$.extend({init:function(t,e,i){D.fn.init.call(this),this.type=e||d,i&&(this._events=i);for(var r=0;r<t.length;r++)this[r]=t[r];this.length=r,this._parent=w(function(){return this},this)},at:function(t){var e=this[t];return e instanceof this.type?e.parent=this._parent:e=this[t]=this.wrap(e,this._parent),e}}),d=D.extend({init:function(t){var e,i,r=this,n=function(){return r};D.fn.init.call(this),this._handlers={};for(i in t)e=t[i],"object"==typeof e&&e&&!e.getTime&&"_"!=i.charAt(0)&&(e=r.wrap(e,i,n)),r[i]=e;r.uid=P.guid()},shouldSerialize:function(t){return this.hasOwnProperty(t)&&"_handlers"!==t&&"_events"!==t&&typeof this[t]!==$t&&"uid"!==t},forEach:function(t){for(var e in this)this.shouldSerialize(e)&&t(this[e],e)},toJSON:function(){var t,e,i={};for(e in this)this.shouldSerialize(e)&&(t=this[e],(t instanceof d||t instanceof $)&&(t=t.toJSON()),i[e]=t);return i},get:function(t){var e,i=this;return i.trigger(Vt,{field:t}),e="this"===t?i:P.getter(t,!0)(i)},_set:function(t,e){var i,r,n,a=this,s=t.indexOf(".")>=0;if(s)for(i=t.split("."),r="";i.length>1;){if(r+=i.shift(),n=P.getter(r,!0)(a),n instanceof d)return n.set(i.join("."),e),s;r+="."}return P.setter(t)(a,e),s},set:function(t,e){var i=this,r=!1,n=t.indexOf(".")>=0,a=P.getter(t,!0)(i);return a!==e&&(a instanceof D&&this._handlers[t]&&(this._handlers[t].get&&a.unbind(Vt,this._handlers[t].get),a.unbind(A,this._handlers[t].change)),r=i.trigger("set",{field:t,value:e}),r||(n||(e=i.wrap(e,t,function(){return i})),(!i._set(t,e)||t.indexOf("(")>=0||t.indexOf("[")>=0)&&i.trigger(A,{field:t}))),r},parent:S,wrap:function(t,e,i){var r,n,a,s,o=this,c=te.call(t);return null==t||"[object Object]"!==c&&"[object Array]"!==c||(a=t instanceof $,s=t instanceof p,"[object Object]"!==c||s||a?("[object Array]"===c||a||s)&&(a||s||(t=new $(t)),n=U(o,A,e,!1),t.bind(A,n),o._handlers[e]={change:n}):(t instanceof d||(t=new d(t)),r=U(o,Vt,e,!0),t.bind(Vt,r),n=U(o,A,e,!0),t.bind(A,n),o._handlers[e]={get:r,change:n}),t.parent=i),t}}),bt={number:function(t){return typeof t===N&&"null"===t.toLowerCase()?null:P.parseFloat(t)},date:function(t){return typeof t===N&&"null"===t.toLowerCase()?null:P.parseDate(t)},boolean:function(t){return typeof t===N?"null"===t.toLowerCase()?null:"true"===t.toLowerCase():null!=t?!!t:t},string:function(t){return typeof t===N&&"null"===t.toLowerCase()?null:null!=t?t+"":t},default:function(t){return t}},xt={string:"",number:0,date:new Date,boolean:!1,default:""},(_=d.extend({init:function(t){var e,i,r=this;if((!t||v.isEmptyObject(t))&&(t=v.extend({},r.defaults,t),r._initializers))for(e=0;e<r._initializers.length;e++)i=r._initializers[e],t[i]=r.defaults[i]();d.fn.init.call(r,t),r.dirty=!1,r.dirtyFields={},r.idField&&(r.id=r.get(r.idField),r.id===y&&(r.id=r._defaultId))},shouldSerialize:function(t){return d.fn.shouldSerialize.call(this,t)&&"uid"!==t&&!("id"!==this.idField&&"id"===t)&&"dirty"!==t&&"dirtyFields"!==t&&"_accessors"!==t},_parse:function(t,e){var i,r=this,n=t,a=r.fields||{};return t=a[t],t||(t=j(a,n)),t&&(i=t.parse,!i&&t.type&&(i=bt[t.type.toLowerCase()])),i?i(e):e},_notifyChange:function(t){var e=t.action;"add"!=e&&"remove"!=e||(this.dirty=!0,this.dirtyFields[t.field]=!0)},editable:function(t){return t=(this.fields||{})[t],!t||t.editable!==!1},set:function(t,e,i){var r=this,n=r.dirty;r.editable(t)&&(e=r._parse(t,e),z(e,r.get(t))?r.trigger("equalSet",{field:t,value:e}):(r.dirty=!0,r.dirtyFields[t]=!0,d.fn.set.call(r,t,e,i)&&!n&&(r.dirty=n,r.dirty||(r.dirtyFields[t]=!1))))},accept:function(t){var e,i,r=this,n=function(){return r};for(e in t)i=t[e],"_"!=e.charAt(0)&&(i=r.wrap(t[e],e,n)),r._set(e,i);r.idField&&(r.id=r.get(r.idField)),r.dirty=!1,r.dirtyFields={}},isNew:function(){return this.id===this._defaultId}})).define=function(t,e){e===y&&(e=t,t=_);var i,r,n,a,s,o,c,l,d=x({defaults:{}},e),u={},p=d.id,h=[];if(p&&(d.idField=p),d.id&&delete d.id,p&&(d.defaults[p]=d._defaultId=""),"[object Array]"===te.call(d.fields)){for(o=0,c=d.fields.length;o<c;o++)n=d.fields[o],typeof n===N?u[n]={}:n.field&&(u[n.field]=n);d.fields=u}for(r in d.fields)n=d.fields[r],a=n.type||"default",s=null,l=r,r=typeof n.field===N?n.field:r,n.nullable||(s=d.defaults[l!==r?l:r]=n.defaultValue!==y?n.defaultValue:xt[a.toLowerCase()],"function"==typeof s&&h.push(r)),e.id===r&&(d._defaultId=s),d.defaults[l!==r?l:r]=s,n.parse=n.parse||bt[a];return h.length>0&&(d._initializers=h),i=t.extend(d),i.define=function(t){return _.define(i,t)},d.fields&&(i.fields=d.fields,i.idField=d.idField),i},kt=x({},wt={selector:function(t){return T(t)?t:F(t)},compare:function(t){var i=this.selector(t);return function(t,e){return t=i(t),e=i(e),null==t&&null==e?0:null==t?-1:null==e?1:t.localeCompare?t.localeCompare(e):t>e?1:t<e?-1:0}},create:function(t){var i=t.compare||this.compare(t.field);return"desc"==t.dir?function(t,e){return i(e,t,!0)}:i},combine:function(a){return function(t,e){var i,r,n=a[0](t,e);for(i=1,r=a.length;i<r;i++)n=n||a[i](t,e);return n}}},{asc:function(t){var n=this.selector(t);return function(t,e){var i=n(t),r=n(e);return i&&i.getTime&&r&&r.getTime&&(i=i.getTime(),r=r.getTime()),i===r?t.__position-e.__position:null==i?-1:null==r?1:i.localeCompare?i.localeCompare(r):i>r?1:-1}},desc:function(t){var n=this.selector(t);return function(t,e){var i=n(t),r=n(e);return i&&i.getTime&&r&&r.getTime&&(i=i.getTime(),r=r.getTime()),i===r?t.__position-e.__position:null==i?1:null==r?-1:r.localeCompare?r.localeCompare(i):i<r?1:-1}},create:function(t){return this[t.dir](t.field)}}),yt=function(t,e){var i,r=t.length,n=Array(r);for(i=0;i<r;i++)n[i]=e(t[i],i,t);return n},Ct=function(){function a(t){return"string"==typeof t&&(t=t.replace(/[\r\n]+/g,"")),JSON.stringify(t)}function t(r){return function(t,e,i){return e+="",i&&(t="("+t+" || '').toString().toLowerCase()",e=e.toLowerCase()),r(t,a(e),i)}}function r(t,e,i,r){if(null!=i){if(typeof i===N){var n=ie.exec(i);n?i=new Date(+n[1]):r?(i=a(i.toLowerCase()),e="(("+e+" || '')+'').toLowerCase()"):i=a(i)}i.getTime&&(e="("+e+"&&"+e+".getTime?"+e+".getTime():"+e+")",i=i.getTime())}return e+" "+t+" "+i}function i(t){var e,i,r,n;for(e="/^",i=!1,r=0;r<t.length;++r){if(n=t.charAt(r),i)e+="\\"+n;else{if("~"==n){i=!0;continue}e+="*"==n?".*":"?"==n?".":".+^$()[]{}|\\/\n\r\u2028\u2029Â ".indexOf(n)>=0?"\\"+n:n}i=!1}return e+"$/"}return{quote:function(t){return t&&t.getTime?"new Date("+t.getTime()+")":a(t)},eq:function(t,e,i){return r("==",t,e,i)},neq:function(t,e,i){return r("!=",t,e,i)},gt:function(t,e,i){return r(">",t,e,i)},gte:function(t,e,i){return r(">=",t,e,i)},lt:function(t,e,i){return r("<",t,e,i)},lte:function(t,e,i){return r("<=",t,e,i)},startswith:t(function(t,e){return t+".lastIndexOf("+e+", 0) == 0"}),doesnotstartwith:t(function(t,e){return t+".lastIndexOf("+e+", 0) == -1"}),endswith:t(function(t,e){var i=e?e.length-2:0;return t+".indexOf("+e+", "+t+".length - "+i+") >= 0"}),doesnotendwith:t(function(t,e){var i=e?e.length-2:0;return t+".indexOf("+e+", "+t+".length - "+i+") < 0"}),contains:t(function(t,e){return t+".indexOf("+e+") >= 0"}),doesnotcontain:t(function(t,e){return t+".indexOf("+e+") == -1"}),matches:t(function(t,e){return e=e.substring(1,e.length-1),i(e)+".test("+t+")"}),doesnotmatch:t(function(t,e){return e=e.substring(1,e.length-1),"!"+i(e)+".test("+t+")"}),isempty:function(t){return t+" === ''"},isnotempty:function(t){return t+" !== ''"},isnull:function(t){return"("+t+" == null)"},isnotnull:function(t){return"("+t+" != null)"},isnullorempty:function(t){return"("+t+" === null) || ("+t+" === '')"},isnotnullorempty:function(t){return"("+t+" !== null) && ("+t+" !== '')"}}}(),g.filterExpr=function(t){var e,i,r,n,a,s,o=[],c={and:" && ",or:" || "},l=[],d=[],u=t.filters;for(e=0,i=u.length;e<i;e++)r=u[e],a=r.field,s=r.operator,r.filters?(n=g.filterExpr(r),r=n.expression.replace(/__o\[(\d+)\]/g,function(t,e){return e=+e,"__o["+(d.length+e)+"]"}).replace(/__f\[(\d+)\]/g,function(t,e){return e=+e,"__f["+(l.length+e)+"]"}),d.push.apply(d,n.operators),l.push.apply(l,n.fields)):(typeof a===$t?(n="__f["+l.length+"](d)",l.push(a)):n=P.expr(a),typeof s===$t?(r="__o["+d.length+"]("+n+", "+Ct.quote(r.value)+")",d.push(s)):r=Ct[(s||"eq").toLowerCase()](n,r.value,r.ignoreCase===y||r.ignoreCase)),o.push(r);return{expression:"("+o.join(c[t.logic])+")",fields:l,operators:d}},St={"==":"eq",equals:"eq",isequalto:"eq",equalto:"eq",equal:"eq","!=":"neq",ne:"neq",notequals:"neq",isnotequalto:"neq",notequalto:"neq",notequal:"neq","<":"lt",islessthan:"lt",lessthan:"lt",less:"lt","<=":"lte",le:"lte",islessthanorequalto:"lte",lessthanequal:"lte",">":"gt",isgreaterthan:"gt",greaterthan:"gt",greater:"gt",">=":"gte",isgreaterthanorequalto:"gte",greaterthanequal:"gte",ge:"gte",notsubstringof:"doesnotcontain",isnull:"isnull",isempty:"isempty",isnotempty:"isnotempty"},g.normalizeFilter=u,g.compareFilters=G,g.prototype={toArray:function(){return this.data},range:function(t,e){return new g(this.data.slice(t,t+e))},skip:function(t){return new g(this.data.slice(t))},take:function(t){return new g(this.data.slice(0,t))},select:function(t){return new g(yt(this.data,t))},order:function(t,e,i){var r={dir:e};return t&&(t.compare?r.compare=t.compare:r.field=t),new g(i?this.data.sort(wt.create(r)):this.data.slice(0).sort(wt.create(r)))},orderBy:function(t,e){return this.order(t,"asc",e)},orderByDescending:function(t,e){return this.order(t,"desc",e)},sort:function(t,e,i,r){var n,a,s=b(t,e),o=[];if(i=i||wt,s.length){for(n=0,a=s.length;n<a;n++)o.push(i.create(s[n]));return this.orderBy({compare:i.combine(o)},r)}return this},filter:function(t){var e,i,r,n,a,s,o,c,l=this.data,d=[];if(t=u(t),!t||0===t.filters.length)return this;for(n=g.filterExpr(t),s=n.fields,o=n.operators,a=c=Function("d, __f, __o","return "+n.expression),(s.length||o.length)&&(c=function(t){return a(t,s,o)}),e=0,r=l.length;e<r;e++)i=l[e],c(i)&&d.push(i);return new g(d)},group:function(i,r){i=m(i||[]),r=r||this.data;var n,t=this,e=new g(t.data);return i.length>0&&(n=i[0],e=e.groupBy(n).select(function(t){var e=new g(r).filter([{field:t.field,operator:"eq",value:t.value,ignoreCase:!1}]);return{field:t.field,value:t.value,items:i.length>1?new g(t.items).group(i.slice(1),e.toArray()).toArray():t.items,hasSubgroups:i.length>1,aggregates:e.aggregate(n.aggregates)}})),e},groupBy:function(t){var e,i,r,n,a,s,o,c,l,d,u=this;if(f(t)||!this.data.length)return new g([]);for(e=t.field,i=t.skipItemSorting?this.data:this._sortForGrouping(e,t.dir||"asc"),r=P.accessor(e),a=r.get(i[0],e),s={field:e,value:a,items:[]},d=[s],c=0,l=i.length;c<l;c++)n=i[c],o=r.get(n,e),J(a,o)||(a=o,s={field:e,value:a,items:[]},d.push(s)),s.items.push(n);return d=u._sortGroups(d,t),new g(d)},_sortForGrouping:function(t,e){var i,r,n=this.data;if(!ee){for(i=0,r=n.length;i<r;i++)n[i].__position=i;for(n=new g(n).sort(t,e,kt).toArray(),i=0,r=n.length;i<r;i++)delete n[i].__position;return n}return this.sort(t,e).toArray()},_sortGroups:function(t,e){var i=t;return e&&T(e.compare)&&(i=new g(i).order({compare:e.compare},e.dir||Ut).toArray()),i},aggregate:function(t){var e,i,r={},n={};if(t&&t.length)for(e=0,i=this.data.length;e<i;e++)Y(r,t,this.data[e],e,i,n);return r}},Pt={sum:function(t,e,i){var r=i.get(e);return o(t)?o(r)&&(t+=r):t=r,t},count:function(t){return(t||0)+1},average:function(t,e,i,r,n,a){var s=i.get(e);return a.count===y&&(a.count=0),o(t)?o(s)&&(t+=s):t=s,o(s)&&a.count++,r==n-1&&o(t)&&(t/=a.count),t},max:function(t,e,i){var r=i.get(e);return o(t)||n(t)||(t=r),t<r&&(o(r)||n(r))&&(t=r),t},min:function(t,e,i){var r=i.get(e);return o(t)||n(t)||(t=r),t>r&&(o(r)||n(r))&&(t=r),t}},g.normalizeGroup=m,g.normalizeSort=b,g.process=function(t,e,i){var r,n,a,s,o,c,l,d,u,p,h,f;return e=e||{},r=e.group,n=Q(m(r||[])),a=new g(t),s=W(r||[]),o=b(e.sort||[]),c=n?o:s.concat(o),u=e.filterCallback,p=e.filter,h=e.skip,f=e.take,c&&i&&(a=a.sort(c,y,y,i)),p&&(a=a.filter(p),u&&(a=u(a)),d=a.toArray().length),c&&!i&&(a=a.sort(c),r&&(t=a.toArray())),n?(a=a.group(r,t),h!==y&&f!==y&&(a=new g(nt(a.toArray())).range(h,f),l=yt(s,function(t){return x({},t,{skipItemSorting:!0})}),a=a.group(l,t))):(h!==y&&f!==y&&(a=a.range(h,f)),r&&(a=a.group(r,t))),{total:d,data:a.toArray()}},Tt=qt.extend({init:function(t){this.data=t.data},read:function(t){t.success(this.data)},update:function(t){t.success(t.data)},create:function(t){t.success(t.data)},destroy:function(t){t.success(t.data)}}),Dt=qt.extend({init:function(i){var r,t=this;i=t.options=x({},t.options,i),Rt(Gt,function(t,e){typeof i[e]===N&&(i[e]={url:i[e]})}),t.cache=i.cache?s.create(i.cache):{find:S,add:S},r=i.parameterMap,i.submit&&(t.submit=i.submit),T(i.push)&&(t.push=i.push),t.push||(t.push=e),t.parameterMap=T(r)?r:function(t){var i={};return Rt(t,function(t,e){t in r&&(t=r[t],k(t)&&(e=t.value(e),t=t.key)),i[t]=e}),i}},options:{parameterMap:e},create:function(t){return Ft(this.setup(t,zt))},read:function(e){var i,t,r,n=this,a=n.cache;e=n.setup(e,jt),i=e.success||S,t=e.error||S,r=a.find(e.data),r!==y?i(r):(e.success=function(t){a.add(e.data,t),i(t)},v.ajax(e))},update:function(t){return Ft(this.setup(t,Ht))},destroy:function(t){return Ft(this.setup(t,Bt))},setup:function(t,e){t=t||{};var i,r=this,n=r.options[e],a=T(n.data)?n.data(t.data):n.data;return t=x(!0,{},n,t),i=x(!0,{},a,t.data),t.data=r.parameterMap(i,e),T(t.url)&&(t.url=t.url(i)),t}}),(s=qt.extend({init:function(){this._store={}},add:function(t,e){t!==y&&(this._store[Wt(t)]=e)},find:function(t){return this._store[Wt(t)]},clear:function(){this._store={}},remove:function(t){delete this._store[Wt(t)]}})).create=function(t){var e={inmemory:function(){return new s}};return k(t)&&T(t.find)?t:t===!0?new s:e[t]()},Nt=qt.extend({init:function(t){var e,i,r,n,a,s,o,c,l,d,u,p,h,f,g=this;t=t||{};for(e in t)i=t[e],g[e]=typeof i===N?F(i):i;n=t.modelBase||_,k(g.model)&&(g.model=r=n.define(g.model)),a=w(g.data,g),g._dataAccessFunction=a,g.model&&(s=w(g.groups,g),o=w(g.serialize,g),c={},l={},d={},u={},p=!1,r=g.model,r.fields&&(Rt(r.fields,function(t,e){var i;h=t,k(e)&&e.field?h=e.field:typeof e===N&&(h=e),k(e)&&e.from&&(i=e.from),p=p||i&&i!==t||h!==t,f=i||h,l[t]=f.indexOf(".")!==-1?F(f,!0):F(f),d[t]=F(t),c[i||h]=t,u[t]=i||h}),!t.serialize&&p&&(g.serialize=tt(o,r,Z,d,c,u))),g._dataAccessFunction=a,g._wrapDataAccessBase=et(r,K,l,c,u),g.data=tt(a,r,K,l,c,u),g.groups=tt(s,r,X,l,c,u))},errors:function(t){return t?t.errors:null},parse:e,data:e,total:function(t){return t.length},groups:e,aggregates:function(){return{}},serialize:function(t){return t}}),p=D.extend({init:function(t){var e,i,r,n=this;t&&(i=t.data),t=n.options=x({},n.options,t),n._map={},n._prefetch={},n._data=[],n._pristineData=[],n._ranges=[],n._view=[],n._pristineTotal=0,n._destroyed=[],n._pageSize=t.pageSize,n._page=t.page||(t.pageSize?1:y),n._sort=b(t.sort),n._filter=u(t.filter),n._group=m(t.group),n._aggregate=t.aggregate,n._total=t.total,n._shouldDetachObservableParents=!0,D.fn.init.call(n),n.transport=At.create(t,i,n),T(n.transport.push)&&n.transport.push({pushCreate:w(n._pushCreate,n),pushUpdate:w(n._pushUpdate,n),pushDestroy:w(n._pushDestroy,n)}),null!=t.offlineStorage&&("string"==typeof t.offlineStorage?(r=t.offlineStorage,n._storage={getItem:function(){return JSON.parse(localStorage.getItem(r))},setItem:function(t){localStorage.setItem(r,Wt(n.reader.serialize(t)))}}):n._storage=t.offlineStorage),n.reader=new P.data.readers[t.schema.type||"json"](t.schema),e=n.reader.model||{},n._detachObservableParents(),n._data=n._observe(n._data),n._online=!0,n.bind(["push",M,A,O,Lt,E,I],t)},options:{data:null,schema:{modelBase:_},offlineStorage:null,serverSorting:!1,serverPaging:!1,serverFiltering:!1,serverGrouping:!1,serverAggregates:!1,batch:!1,inPlaceSort:!1},clone:function(){return this},online:function(t){return t!==y?this._online!=t&&(this._online=t,t)?this.sync():v.Deferred().resolve().promise():this._online},offlineData:function(t){return null==this.options.offlineStorage?null:t!==y?this._storage.setItem(t):this._storage.getItem()||[]},_isServerGrouped:function(){var t=this.group()||[];return this.options.serverGrouping&&t.length},_pushCreate:function(t){this._push(t,"pushCreate")},_pushUpdate:function(t){this._push(t,"pushUpdate")},_pushDestroy:function(t){this._push(t,"pushDestroy")},_push:function(t,e){var i=this._readData(t);i||(i=t),this[e](i)},_flatData:function(t,e){if(t){if(this._isServerGrouped())return at(t);if(!e)for(var i=0;i<t.length;i++)t.at(i)}return t},parent:S,get:function(t){var e,i,r=this._flatData(this._data,this.options.useRanges);for(e=0,i=r.length;e<i;e++)if(r[e].id==t)return r[e]},getByUid:function(t){return this._getByUid(t,this._data)},_getByUid:function(t,e){var i,r,n=this._flatData(e,this.options.useRanges);if(n)for(i=0,r=n.length;i<r;i++)if(n[i].uid==t)return n[i]},indexOf:function(t){return pt(this._data,t)},at:function(t){return this._data.at(t)},data:function(t){var e,i=this;if(t===y){if(i._data)for(e=0;e<i._data.length;e++)i._data.at(e);return i._data}i._detachObservableParents(),i._data=this._observe(t),i._pristineData=t.slice(0),i._storeData(),i._ranges=[],i.trigger("reset"),i._addRange(i._data),i._total=i._data.length,i._pristineTotal=i._total,i._process(i._data)},view:function(t){return t===y?this._view:(this._view=this._observeView(t),y)},_observeView:function(t){var e,i=this;return lt(t,i._data,i._ranges,i.reader.model||d,i._isServerGrouped()),e=new a(t,i.reader.model),e.parent=function(){return i.parent()},e},flatView:function(){var t=this.group()||[];return t.length?at(this._view):this._view},add:function(t){return this.insert(this._data.length,t)},_createNewModel:function(t){return this.reader.model?new this.reader.model(t):t instanceof d?t:new d(t)},insert:function(t,e){return e||(e=t,t=0),e instanceof _||(e=this._createNewModel(e)),this._isServerGrouped()?this._data.splice(t,0,this._wrapInEmptyGroup(e)):this._data.splice(t,0,e),this._insertModelInRange(t,e),e},pushInsert:function(t,e){var i,r,n,a,s,o,c=this,l=c._getCurrentRangeSpan();e||(e=t,t=0),C(e)||(e=[e]),i=[],r=this.options.autoSync,this.options.autoSync=!1;try{for(n=0;n<e.length;n++)a=e[n],s=this.insert(t,a),i.push(s),o=s.toJSON(),this._isServerGrouped()&&(o=this._wrapInEmptyGroup(o)),this._pristineData.push(o),l&&l.length&&v(l).last()[0].pristineData.push(o),t++}finally{this.options.autoSync=r}i.length&&this.trigger("push",{type:"create",items:i})},pushCreate:function(t){this.pushInsert(this._data.length,t)},pushUpdate:function(t){var e,i,r,n,a;for(C(t)||(t=[t]),e=[],i=0;i<t.length;i++)r=t[i],n=this._createNewModel(r),a=this.get(n.id),a?(e.push(a),a.accept(r),a.trigger(A),this._updatePristineForModel(a,r)):this.pushCreate(r);e.length&&this.trigger("push",{type:"update",items:e})},pushDestroy:function(t){var e=this._removeItems(t);e.length&&this.trigger("push",{type:"destroy",items:e})},_removeItems:function(t,e){var i,r,n,a,s,o,c;C(t)||(t=[t]),i=y===e||e,r=[],n=this.options.autoSync,this.options.autoSync=!1;try{for(a=0;a<t.length;a++)s=t[a],o=this._createNewModel(s),c=!1,this._eachItem(this._data,function(t){var e,i;for(e=0;e<t.length;e++)if(i=t.at(e),i.id===o.id){r.push(i),t.splice(e,1),c=!0;break}}),c&&i&&(this._removePristineForModel(o),this._destroyed.pop())}finally{this.options.autoSync=n}return r},remove:function(e){var i,r=this,n=r._isServerGrouped();return this._eachItem(r._data,function(t){if(i=dt(t,e),i&&n)return i.isNew&&i.isNew()||r._destroyed.push(i),!0}),this._removeModelFromRanges(e),e},destroyed:function(){return this._destroyed},created:function(){var t,e,i=[],r=this._flatData(this._data,this.options.useRanges);for(t=0,e=r.length;t<e;t++)r[t].isNew&&r[t].isNew()&&i.push(r[t]);return i},updated:function(){var t,e,i=[],r=this._flatData(this._data,this.options.useRanges);for(t=0,e=r.length;t<e;t++)r[t].isNew&&!r[t].isNew()&&r[t].dirty&&i.push(r[t]);return i},sync:function(){var t,i=this,e=[],r=[],n=i._destroyed,a=v.Deferred().resolve().promise();if(i.online()){if(!i.reader.model)return a;e=i.created(),r=i.updated(),t=[],i.options.batch&&i.transport.submit?t=i._sendSubmit(e,r,n):(t.push.apply(t,i._send("create",e)),t.push.apply(t,i._send("update",r)),t.push.apply(t,i._send("destroy",n))),a=v.when.apply(null,t).then(function(){var t,e;for(t=0,e=arguments.length;t<e;t++)arguments[t]&&i._accept(arguments[t]);i._storeData(!0),i._syncEnd(),i._change({action:"sync"}),i.trigger(Lt)})}else i._storeData(!0),i._syncEnd(),i._change({action:"sync"});return a},_syncEnd:S,cancelChanges:function(t){var e=this;t instanceof P.data.Model?e._cancelModel(t):(e._destroyed=[],e._detachObservableParents(),e._data=e._observe(e._pristineData),e.options.serverPaging&&(e._total=e._pristineTotal),e._ranges=[],e._addRange(e._data,0),e._changesCanceled(),e._change(),e._markOfflineUpdatesAsDirty())},_changesCanceled:S,_markOfflineUpdatesAsDirty:function(){var t=this;null!=t.options.offlineStorage&&t._eachItem(t._data,function(t){var e,i;for(e=0;e<t.length;e++)i=t.at(e),"update"!=i.__state__&&"create"!=i.__state__||(i.dirty=!0)})},hasChanges:function(){var t,e,i=this._flatData(this._data,this.options.useRanges);if(this._destroyed.length)return!0;for(t=0,e=i.length;t<e;t++)if(i[t].isNew&&i[t].isNew()||i[t].dirty)return!0;return!1},_accept:function(t){var e,i=this,r=t.models,n=t.response,a=0,s=i._isServerGrouped(),o=i._pristineData,c=t.type;if(i.trigger(E,{response:n,type:c}),n&&!f(n)){if(n=i.reader.parse(n),i._handleCustomErrors(n))return;n=i.reader.data(n),C(n)||(n=[n])}else n=v.map(r,function(t){return t.toJSON()});for("destroy"===c&&(i._destroyed=[]),a=0,e=r.length;a<e;a++)"destroy"!==c?(r[a].accept(n[a]),"create"===c?o.push(s?i._wrapInEmptyGroup(r[a].toJSON()):n[a]):"update"===c&&i._updatePristineForModel(r[a],n[a])):i._removePristineForModel(r[a])},_updatePristineForModel:function(t,i){this._executeOnPristineForModel(t,function(t,e){P.deepExtend(e[t],i)})},_executeOnPristineForModel:function(i,r){this._eachPristineItem(function(t){var e=ut(t,i);if(e>-1)return r(e,t),!0})},_removePristineForModel:function(t){this._executeOnPristineForModel(t,function(t,e){e.splice(t,1)})},_readData:function(t){var e=this._isServerGrouped()?this.reader.groups:this.reader.data;return e.call(this.reader,t)},_eachPristineItem:function(i){var r=this,t=r.options,e=r._getCurrentRangeSpan();r._eachItem(r._pristineData,i),t.serverPaging&&t.useRanges&&Rt(e,function(t,e){r._eachItem(e.pristineData,i)})},_eachItem:function(t,e){t&&t.length&&(this._isServerGrouped()?r(t,e):e(t))},_pristineForModel:function(e){var i,r,t=function(t){if(r=ut(t,e),r>-1)return i=t[r],!0};return this._eachPristineItem(t),i},_cancelModel:function(i){var r=this,n=this._pristineForModel(i);this._eachItem(this._data,function(t){var e=pt(t,i);e>=0&&(!n||i.isNew()&&!n.__state__?(r._modelCanceled(i),t.splice(e,1),r._removeModelFromRanges(i)):(t[e].accept(n),"update"==n.__state__&&(t[e].dirty=!0)))})},_modelCanceled:S,_submit:function(n,t){var a=this;a.trigger(O,{type:"submit"}),a.trigger(I),a.transport.submit(x({success:function(t,e){var i=v.grep(n,function(t){return t.type==e})[0];i&&i.resolve({response:t,models:i.models,type:e})},error:function(t,e,i){for(var r=0;r<n.length;r++)n[r].reject(t);a.error(t,e,i)}},t))},_sendSubmit:function(e,i,r){var t=this,n=[];return t.options.batch&&(e.length&&n.push(v.Deferred(function(t){t.type="create",t.models=e})),i.length&&n.push(v.Deferred(function(t){t.type="update",t.models=i})),r.length&&n.push(v.Deferred(function(t){t.type="destroy",t.models=r})),t._submit(n,{data:{created:t.reader.serialize(c(e)),updated:t.reader.serialize(c(i)),destroyed:t.reader.serialize(c(r))}})),n},_promise:function(t,e,i){var n=this;return v.Deferred(function(r){n.trigger(O,{type:i}),n.trigger(I),n.transport[i].call(n.transport,x({success:function(t){r.resolve({response:t,models:e,type:i})},error:function(t,e,i){r.reject(t),n.error(t,e,i)}},t))}).promise()},_send:function(t,e){var i,r,n=this,a=[],s=n.reader.serialize(c(e));if(n.options.batch)e.length&&a.push(n._promise({data:{models:s}},e,t));else for(i=0,r=e.length;i<r;i++)a.push(n._promise({data:s[i]},[e[i]],t));return a},read:function(t){var e=this,i=e._params(t),r=v.Deferred();return e._queueRequest(i,function(){var t=e.trigger(O,{type:"read"});t?(e._dequeueRequest(),r.resolve(t)):(e.trigger(I),e._ranges=[],e.trigger("reset"),e.online()?e.transport.read({data:i,success:function(t){e._ranges=[],e.success(t,i),r.resolve()},error:function(){var t=q.call(arguments);e.error.apply(e,t),r.reject.apply(r,t)}}):null!=e.options.offlineStorage&&(e.success(e.offlineData(),i),r.resolve()))}),r.promise()},_readAggregates:function(t){return this.reader.aggregates(t)},success:function(t){var e,i,r,n,a,s,o,c,l,d,u,p=this,h=p.options;if(p.trigger(E,{response:t,type:"read"}),p.online()){if(t=p.reader.parse(t),p._handleCustomErrors(t))return p._dequeueRequest(),y;p._total=p.reader.total(t),p._pageSize>p._total&&(p._pageSize=p._total,p.options.pageSize&&p.options.pageSize>p._pageSize&&(p._pageSize=p.options.pageSize)),p._aggregate&&h.serverAggregates&&(p._aggregateResult=p._readAggregates(t)),t=p._readData(t),p._destroyed=[]}else{for(t=p._readData(t),e=[],r={},n=p.reader.model,a=n?n.idField:"id",s=0;s<this._destroyed.length;s++)o=this._destroyed[s][a],r[o]=o;for(s=0;s<t.length;s++)c=t[s],l=c.__state__,"destroy"==l?r[c[a]]||this._destroyed.push(this._createNewModel(c)):e.push(c);t=e,p._total=t.length}if(p._pristineTotal=p._total,i=p._skip&&p._data.length&&p._skip<p._data.length,p.options.endless)for(i&&p._pristineData.splice(p._skip,p._pristineData.length),e=t.slice(0),d=0;d<e.length;d++)p._pristineData.push(e[d]);else p._pristineData=t.slice(0);if(p._detachObservableParents(),p.options.endless){for(p._data.unbind(A,p._changeHandler),p._isServerGrouped()&&p._data[p._data.length-1].value===t[0].value&&(it(p._data[p._data.length-1],t[0]),t.shift()),t=p._observe(t),i&&p._data.splice(p._skip,p._data.length),u=0;u<t.length;u++)p._data.push(t[u]);p._data.bind(A,p._changeHandler)}else p._data=p._observe(t);p._markOfflineUpdatesAsDirty(),p._storeData(),p._addRange(p._data),p._process(p._data),p._dequeueRequest()},_detachObservableParents:function(){if(this._data&&this._shouldDetachObservableParents)for(var t=0;t<this._data.length;t++)this._data[t].parent&&(this._data[t].parent=S)},_storeData:function(t){function a(t){var e,i,r,n=[];for(e=0;e<t.length;e++)i=t.at(e),r=i.toJSON(),s&&i.items?r.items=a(i.items):(r.uid=i.uid,o&&(i.isNew()?r.__state__="create":i.dirty&&(r.__state__="update"))),n.push(r);return n}var e,i,r,n,s=this._isServerGrouped(),o=this.reader.model;if(null!=this.options.offlineStorage){for(e=a(this._data),i=[],r=0;r<this._destroyed.length;r++)n=this._destroyed[r].toJSON(),n.__state__="destroy",i.push(n);this.offlineData(e.concat(i)),t&&(this._pristineData=this.reader.reader?this.reader.reader._wrapDataAccessBase(e):this.reader._wrapDataAccessBase(e))}},_addRange:function(t,e){var i=this,r=y!==e?e:i._skip||0,n=r+i._flatData(t,!0).length;i._ranges.push({start:r,end:n,data:t,pristineData:t.toJSON(),timestamp:i._timeStamp()}),i._sortRanges()},_sortRanges:function(){this._ranges.sort(function(t,e){return t.start-e.start})},error:function(t,e,i){this._dequeueRequest(),this.trigger(E,{}),this.trigger(M,{xhr:t,status:e,errorThrown:i})},_params:function(t){var e=this,i=x({take:e.take(),skip:e.skip(),page:e.page(),pageSize:e.pageSize(),sort:e._sort,filter:e._filter,group:e._group,aggregate:e._aggregate},t);return e.options.serverPaging||(delete i.take,delete i.skip,delete i.page,delete i.pageSize),e.options.serverGrouping?e.reader.model&&i.group&&(i.group=l(i.group,e.reader.model)):delete i.group,e.options.serverFiltering?e.reader.model&&i.filter&&(i.filter=gt(i.filter,e.reader.model)):delete i.filter,e.options.serverSorting?e.reader.model&&i.sort&&(i.sort=l(i.sort,e.reader.model)):delete i.sort,e.options.serverAggregates?e.reader.model&&i.aggregate&&(i.aggregate=l(i.aggregate,e.reader.model)):delete i.aggregate,i},_queueRequest:function(t,e){var i=this;i._requestInProgress?i._pending={callback:w(e,i),options:t}:(i._requestInProgress=!0,i._pending=y,e())},_dequeueRequest:function(){var t=this;t._requestInProgress=!1,t._pending&&t._queueRequest(t._pending.options,t._pending.callback)},_handleCustomErrors:function(t){if(this.reader.errors){var e=this.reader.errors(t);if(e)return this.trigger(M,{xhr:null,status:"customerror",errorThrown:"custom error",errors:e}),!0}return!1},_shouldWrap:function(t){var e=this.reader.model;return!(!e||!t.length)&&!(t[0]instanceof e)},_observe:function(t){var e,i=this,r=i.reader.model;return i._shouldDetachObservableParents=!0,t instanceof $?(i._shouldDetachObservableParents=!1,i._shouldWrap(t)&&(t.type=i.reader.model,t.wrapAll(t,t))):(e=i.pageSize()&&!i.options.serverPaging?a:$,t=new e(t,i.reader.model),t.parent=function(){return i.parent()}),i._isServerGrouped()&&st(t,r),!(i._changeHandler&&i._data&&i._data instanceof $)||i.options.useRanges&&i.options.serverPaging?i._changeHandler=w(i._change,i):i._data.unbind(A,i._changeHandler),t.bind(A,i._changeHandler)},_updateTotalForAction:function(t,e){var i=this,r=parseInt(i._total,10);o(i._total)||(r=parseInt(i._pristineTotal,10)),"add"===t?r+=e.length:"remove"===t?r-=e.length:"itemchange"===t||"sync"===t||i.options.serverPaging?"sync"===t&&(r=i._pristineTotal=parseInt(i._total,10)):r=i._pristineTotal,i._total=r},_change:function(e){var t,i,r,n=this,a=e?e.action:"";if("remove"===a)for(t=0,i=e.items.length;t<i;t++)e.items[t].isNew&&e.items[t].isNew()||n._destroyed.push(e.items[t]);!n.options.autoSync||"add"!==a&&"remove"!==a&&"itemchange"!==a?(n._updateTotalForAction(a,e?e.items:[]),n._process(n._data,e)):(r=function(t){"sync"===t.action&&(n.unbind("change",r),n._updateTotalForAction(a,e.items))},n.first("change",r),n.sync())},_calculateAggregates:function(t,e){e=e||{};var i=new g(t),r=e.aggregate,n=e.filter;return n&&(i=i.filter(n)),i.aggregate(r)},_process:function(t,e){var i,r=this,n={};r.options.serverPaging!==!0&&(n.skip=r._skip,n.take=r._take||r._pageSize,n.skip===y&&r._page!==y&&r._pageSize!==y&&(n.skip=(r._page-1)*r._pageSize),r.options.useRanges&&(n.skip=r.currentRangeStart())),r.options.serverSorting!==!0&&(n.sort=r._sort),r.options.serverFiltering!==!0&&(n.filter=r._filter),r.options.serverGrouping!==!0&&(n.group=r._group),r.options.serverAggregates!==!0&&(n.aggregate=r._aggregate),r.options.serverGrouping&&r._clearEmptyGroups(t),i=r._queryProcess(t,n),r.options.serverAggregates!==!0&&(r._aggregateResult=r._calculateAggregates(i.dataToAggregate||t,n)),r.view(i.data),r._setFilterTotal(i.total,!1),e=e||{},e.items=e.items||r._view,r.trigger(A,e)},_clearEmptyGroups:function(t){var e,i;for(e=t.length-1;e>=0;e--)i=t[e],i.hasSubgroups?this._clearEmptyGroups(i.items):i.items&&!i.items.length&&Zt.apply(i.parent(),[e,1])},_queryProcess:function(t,e){return this.options.inPlaceSort?g.process(t,e,this.options.inPlaceSort):g.process(t,e)},_mergeState:function(t){var e=this;return t!==y&&(e._pageSize=t.pageSize,e._page=t.page,e._sort=t.sort,e._filter=t.filter,e._group=t.group,e._aggregate=t.aggregate,e._skip=e._currentRangeStart=t.skip,e._take=t.take,e._skip===y&&(e._skip=e._currentRangeStart=e.skip(),t.skip=e.skip()),e._take===y&&e._pageSize!==y&&(e._take=e._pageSize,t.take=e._take),t.sort&&(e._sort=t.sort=b(t.sort)),t.filter&&(e._filter=t.filter=u(t.filter)),t.group&&(e._group=t.group=m(t.group)),t.aggregate&&(e._aggregate=t.aggregate=i(t.aggregate))),t},query:function(t){var e,i,r,n=this.options.serverSorting||this.options.serverPaging||this.options.serverFiltering||this.options.serverGrouping||this.options.serverAggregates;return n||(this._data===y||0===this._data.length)&&!this._destroyed.length?(this.options.endless&&(i=t.pageSize-this.pageSize(),i>0?(i=this.pageSize(),t.page=t.pageSize/i,t.pageSize=i):(t.page=1,this.options.endless=!1)),this.read(this._mergeState(t))):(r=this.trigger(O,{type:"read"}),r||(this.trigger(I),e=this._queryProcess(this._data,this._mergeState(t)),this._setFilterTotal(e.total,!0),this._aggregateResult=this._calculateAggregates(e.dataToAggregate||this._data,t),this.view(e.data),this.trigger(E,{type:"read"}),this.trigger(A,{items:e.data})),v.Deferred().resolve(r).promise())},_setFilterTotal:function(t,e){var i=this;i.options.serverFiltering||(t!==y?i._total=t:e&&(i._total=i._data.length))},fetch:function(e){var i=this,t=function(t){t!==!0&&T(e)&&e.call(i)};return this._query().done(t)},_query:function(t){var e=this;return e.query(x({},{page:e.page(),pageSize:e.pageSize(),sort:e.sort(),filter:e.filter(),group:e.group(),aggregate:e.aggregate()},t))},next:function(t){var e=this,i=e.page(),r=e.total();if(t=t||{},i&&!(r&&i+1>e.totalPages()))return e._skip=e._currentRangeStart=i*e.take(),i+=1,t.page=i,e._query(t),i},prev:function(t){var e=this,i=e.page();if(t=t||{},i&&1!==i)return e._skip=e._currentRangeStart=e._skip-e.take(),i-=1,t.page=i,e._query(t),i},page:function(t){var e,i=this;return t!==y?(t=R.max(R.min(R.max(t,1),i.totalPages()),1),i._query(i._pageableQueryOptions({page:t})),y):(e=i.skip(),e!==y?R.round((e||0)/(i.take()||1))+1:y)},pageSize:function(t){var e=this;return t!==y?(e._query(e._pageableQueryOptions({pageSize:t,page:1})),y):e.take()},sort:function(t){var e=this;return t!==y?(e._query({sort:t}),y):e._sort},filter:function(t){var e=this;return t===y?e._filter:(e.trigger("reset"),e._query({filter:t,page:1}),y)},group:function(t){var e=this;return t!==y?(e._query({group:t}),y):e._group},total:function(){return parseInt(this._total||0,10)},aggregate:function(t){var e=this;return t!==y?(e._query({aggregate:t}),y):e._aggregate},aggregates:function(){var t=this._aggregateResult;return f(t)&&(t=this._emptyAggregates(this.aggregate())),t},_emptyAggregates:function(t){var e,i,r={};if(!f(t))for(e={},C(t)||(t=[t]),i=0;i<t.length;i++)e[t[i].aggregate]=0,r[t[i].field]=e;return r},_pageableQueryOptions:function(t){return t},_wrapInEmptyGroup:function(t){var e,i,r,n,a=this.group();for(r=a.length-1,n=0;r>=n;r--)i=a[r],e={value:t.get?t.get(i.field):t[i.field],field:i.field,items:e?[e]:[t],hasSubgroups:!!e,aggregates:this._emptyAggregates(i.aggregates)};return e},totalPages:function(){var t=this,e=t.pageSize()||t.total();return R.ceil((t.total()||0)/e)},inRange:function(t,e){var i=this,r=R.min(t+e,i.total());return!i.options.serverPaging&&i._data.length>0||i._findRange(t,r).length>0},lastRange:function(){var t=this._ranges;return t[t.length-1]||{start:0,end:0,data:[]}},firstItemUid:function(){var t=this._ranges;return t.length&&t[0].data.length&&t[0].data[0].uid},enableRequestsInProgress:function(){this._skipRequestsInProgress=!1},_timeStamp:function(){return(new Date).getTime()},range:function(t,e,i){this._currentRequestTimeStamp=this._timeStamp(),this._skipRequestsInProgress=!0,t=R.min(t||0,this.total()),i=T(i)?i:S;var r,n=this,a=R.max(R.floor(t/e),0)*e,s=R.min(a+e,n.total());return r=n._findRange(t,R.min(t+e,n.total())),r.length||0===n.total()?(n._processRangeData(r,t,e,a,s),i(),y):(e!==y&&(n._rangeExists(a,s)?a<t&&n.prefetch(s,e,function(){n.range(t,e,i)}):n.prefetch(a,e,function(){t>a&&s<n.total()&&!n._rangeExists(s,R.min(s+e,n.total()))?n.prefetch(s,e,function(){n.range(t,e,i)}):n.range(t,e,i)})),y)},_findRange:function(t,e){var i,r,n,a,s,o,c,l,d,u,p,h,f=this,g=f._ranges,m=[],v=f.options,_=v.serverSorting||v.serverPaging||v.serverFiltering||v.serverGrouping||v.serverAggregates;for(r=0,p=g.length;r<p;r++)if(i=g[r],t>=i.start&&t<=i.end){for(u=0,n=r;n<p;n++)if(i=g[n],d=f._flatData(i.data,!0),d.length&&t+u>=i.start&&(o=i.data,c=i.end,_||(v.inPlaceSort?l=f._queryProcess(i.data,{filter:f.filter()}):(h=W(f.group()||[]).concat(b(f.sort()||[])),l=f._queryProcess(i.data,{sort:h,filter:f.filter()})),d=o=l.data,l.total!==y&&(c=l.total)),a=0,t+u>i.start&&(a=t+u-i.start),s=d.length,c>e&&(s-=c-e),u+=s-a,m=f._mergeGroups(m,o,a,s),e<=i.end&&u==e-t))return m;break}return[]},_mergeGroups:function(t,e,i,r){if(this._isServerGrouped()){var n,a=e.toJSON();return t.length&&(n=t[t.length-1]),rt(n,a,i,r),t.concat(a)}return t.concat(e.slice(i,r))},_processRangeData:function(t,e,i,r,n){var a,s,o,c,l=this;l._pending=y,l._skip=e>l.skip()?R.min(n,(l.totalPages()-1)*l.take()):r,l._currentRangeStart=e,l._take=i,a=l.options.serverPaging,s=l.options.serverSorting,o=l.options.serverFiltering,c=l.options.serverAggregates;try{l.options.serverPaging=!0,l._isServerGrouped()||l.group()&&l.group().length||(l.options.serverSorting=!0),l.options.serverFiltering=!0,l.options.serverPaging=!0,l.options.serverAggregates=!0,a&&(l._detachObservableParents(),l._data=t=l._observe(t)),l._process(t)}finally{l.options.serverPaging=a,l.options.serverSorting=s,l.options.serverFiltering=o,l.options.serverAggregates=c}},skip:function(){var t=this;return t._skip===y?t._page!==y?(t._page-1)*(t.take()||1):y:t._skip},currentRangeStart:function(){return this._currentRangeStart||0},take:function(){return this._take||this._pageSize},_prefetchSuccessHandler:function(s,o,c,l){var d=this,u=d._timeStamp();return function(t){var e,i,r,n=!1,a={start:s,end:o,data:[],timestamp:d._timeStamp()};if(d._dequeueRequest(),d.trigger(E,{response:t,type:"read"}),t=d.reader.parse(t),r=d._readData(t),r.length){for(e=0,i=d._ranges.length;e<i;e++)if(d._ranges[e].start===s){n=!0,a=d._ranges[e],a.pristineData=r,a.data=d._observe(r),a.end=a.start+d._flatData(a.data,!0).length,d._sortRanges();break}n||d._addRange(d._observe(r),s)}d._total=d.reader.total(t),(l||u>=d._currentRequestTimeStamp||!d._skipRequestsInProgress)&&(c&&r.length?c():d.trigger(A,{}))}},prefetch:function(t,e,i){var r=this,n=R.min(t+e,r.total()),a={take:e,skip:t,page:t/e+1,pageSize:e,sort:r._sort,filter:r._filter,group:r._group,aggregate:r._aggregate};r._rangeExists(t,n)?i&&i():(clearTimeout(r._timeout),r._timeout=setTimeout(function(){r._queueRequest(a,function(){r.trigger(O,{type:"read"})?r._dequeueRequest():r.transport.read({data:r._params(a),success:r._prefetchSuccessHandler(t,n,i),error:function(){var t=q.call(arguments);r.error.apply(r,t)}})})},100))},_multiplePrefetch:function(t,e,i){var r=this,n=R.min(t+e,r.total()),a={take:e,skip:t,page:t/e+1,pageSize:e,sort:r._sort,filter:r._filter,group:r._group,aggregate:r._aggregate};r._rangeExists(t,n)?i&&i():r.trigger(O,{type:"read"})||r.transport.read({data:r._params(a),success:r._prefetchSuccessHandler(t,n,i,!0)})},_rangeExists:function(t,e){var i,r,n=this,a=n._ranges;for(i=0,r=a.length;i<r;i++)if(a[i].start<=t&&a[i].end>=e)return!0;return!1},_getCurrentRangeSpan:function(){var t,e,i=this,r=i._ranges,n=i.currentRangeStart(),a=n+(i.take()||0),s=[],o=r.length;for(e=0;e<o;e++)t=r[e],(t.start<=n&&t.end>=n||t.start>=n&&t.start<=a)&&s.push(t);return s},_removeModelFromRanges:function(t){var e,i,r,n=this;for(i=0,r=this._ranges.length;i<r;i++)e=this._ranges[i],n._removeModelFromRange(e,t);n._updateRangesLength()},_removeModelFromRange:function(t,r){this._eachItem(t.data,function(t){var e,i;for(e=0;e<t.length;e++)if(i=t[e],i.uid&&i.uid==r.uid){[].splice.call(t,e,1);break}})},_insertModelInRange:function(t,e){var i,r,n=this,a=n._ranges||[],s=a.length;for(r=0;r<s;r++)if(i=a[r],i.start<=t&&i.end>=t){n._getByUid(e.uid,i.data)||(n._isServerGrouped()?i.data.splice(t,0,n._wrapInEmptyGroup(e)):i.data.splice(t,0,e));break}n._updateRangesLength()},_updateRangesLength:function(){var t,e,i=this,r=i._ranges||[],n=r.length,a=!1,s=0,o=0;for(e=0;e<n;e++)t=r[e],o=i._flatData(t.data,!0).length-R.abs(t.end-t.start),a||0===o?a&&(t.start+=s,t.end+=s):(a=!0,s=o,t.end+=s)}}),At={create:function(t,e,i){var r,n=t.transport?v.extend({},t.transport):null;return n?(n.read=typeof n.read===N?{url:n.read}:n.read,"jsdo"===t.type&&(n.dataSource=i),t.type&&(P.data.transports=P.data.transports||{},P.data.schemas=P.data.schemas||{},P.data.transports[t.type]?k(P.data.transports[t.type])?n=x(!0,{},P.data.transports[t.type],n):r=new P.data.transports[t.type](x(n,{data:e})):P.logToConsole("Unknown DataSource transport type '"+t.type+"'.\nVerify that registration scripts for this type are included after Kendo UI on the page.","warn"),t.schema=x(!0,{},P.data.schemas[t.type],t.schema)),r||(r=T(n.read)?n:new Dt(n))):r=new Tt({data:t.data||[]}),r}},p.create=function(t){(C(t)||t instanceof $)&&(t={data:t});var e,i,r,n=t||{},a=n.data,s=n.fields,o=n.table,c=n.select,l={};if(a||!s||n.transport||(o?a=vt(o,s):c&&(a=mt(c,s),n.group===y&&a[0]&&a[0].optgroup!==y&&(n.group="optgroup"))),P.data.Model&&s&&(!n.schema||!n.schema.model)){for(e=0,i=s.length;e<i;e++)r=s[e],r.type&&(l[r.field]=r);f(l)||(n.schema=x(!0,n.schema,{model:{fields:l}}))}return n.data=a,c=null,n.select=null,o=null,n.table=null,n instanceof p?n:new p(n)},Mt=_.define({idField:"id",init:function(t){var e,i=this,r=i.hasChildren||t&&t.hasChildren,n="items",a={};P.data.Model.fn.init.call(i,t),typeof i.children===N&&(n=i.children),a={schema:{data:n,model:{hasChildren:r,id:i.idField,fields:i.fields}}},typeof i.children!==N&&x(a,i.children),a.data=t,r||(r=a.schema.data),typeof r===N&&(r=P.getter(r)),T(r)&&(e=r.call(i,i),i.hasChildren=(!e||0!==e.length)&&!!e),i._childrenOptions=a,i.hasChildren&&i._initChildren(),i._loaded=!(!t||!t._loaded)},_initChildren:function(){var t,e,i,r=this;r.children instanceof h||(t=r.children=new h(r._childrenOptions),e=t.transport,i=e.parameterMap,e.parameterMap=function(t,e){return t[r.idField||"id"]=r.id,i&&(t=i(t,e)),t},t.parent=function(){return r},t.bind(A,function(t){t.node=t.node||r,r.trigger(A,t)}),t.bind(M,function(t){var e=r.parent();e&&(t.node=t.node||r,e.trigger(M,t))}),r._updateChildrenField())},append:function(t){this._initChildren(),this.loaded(!0),this.children.add(t)},hasChildren:!1,level:function(){for(var t=this.parentNode(),e=0;t&&t.parentNode;)e++,t=t.parentNode?t.parentNode():null;return e},_updateChildrenField:function(){var t=this._childrenOptions.schema.data;this[t||"items"]=this.children.data()},_childrenLoaded:function(){this._loaded=!0,this._updateChildrenField()},load:function(){var t,e,i={},r="_query";return this.hasChildren?(this._initChildren(),t=this.children,i[this.idField||"id"]=this.id,this._loaded||(t._data=y,r="read"),t.one(A,w(this._childrenLoaded,this)),this._matchFilter&&(i.filter={field:"_matchFilter",operator:"eq",value:!0}),e=t[r](i)):this.loaded(!0),e||v.Deferred().resolve().promise()},parentNode:function(){var t=this.parent();return t.parent()},loaded:function(t){return t===y?this._loaded:(this._loaded=t,y)},shouldSerialize:function(t){return _.fn.shouldSerialize.call(this,t)&&"children"!==t&&"_loaded"!==t&&"hasChildren"!==t&&"_childrenOptions"!==t}}),(h=p.extend({init:function(t){var e=Mt.define({children:t});t.filter&&!t.serverFiltering&&(this._hierarchicalFilter=t.filter,t.filter=null),p.fn.init.call(this,x(!0,{},{schema:{modelBase:e,model:e}},t)),this._attachBubbleHandlers()},_attachBubbleHandlers:function(){var e=this;e._data.bind(M,function(t){e.trigger(M,t)})},read:function(t){var e=p.fn.read.call(this,t);return this._hierarchicalFilter&&(this._data&&this._data.length>0?this.filter(this._hierarchicalFilter):(this.options.filter=this._hierarchicalFilter,this._filter=u(this.options.filter),this._hierarchicalFilter=null)),e},remove:function(t){var e,i=t.parentNode(),r=this;return i&&i._initChildren&&(r=i.children),e=p.fn.remove.call(r,t),i&&!r.data().length&&(i.hasChildren=!1),e},success:t("success"),data:t("data"),insert:function(t,e){var i=this.parent();return i&&i._initChildren&&(i.hasChildren=!0,i._initChildren()),p.fn.insert.call(this,t,e)},filter:function(t){return t===y?this._filter:(!this.options.serverFiltering&&this._markHierarchicalQuery(t)&&(t={logic:"or",filters:[t,{field:"_matchFilter",operator:"equals",value:!0}]}),this.trigger("reset"),this._query({filter:t,page:1}),y)},_markHierarchicalQuery:function(t){var e,i,r,n,a;return t=u(t),t&&0!==t.filters.length?(e=g.filterExpr(t),r=e.fields,n=e.operators,i=a=Function("d, __f, __o","return "+e.expression),(r.length||n.length)&&(a=function(t){return i(t,r,n)}),this._updateHierarchicalFilter(a),!0):(this._updateHierarchicalFilter(function(){return!0}),!1)},_updateHierarchicalFilter:function(t){var e,i,r=this._data,n=!1;for(i=0;i<r.length;i++)e=r[i],e.hasChildren?(e._matchFilter=e.children._updateHierarchicalFilter(t),e._matchFilter||(e._matchFilter=t(e))):e._matchFilter=t(e),e._matchFilter&&(n=!0);return n},_find:function(t,e){var i,r,n,a,s=this._data;if(s){if(n=p.fn[t].call(this,e))return n;for(s=this._flatData(this._data),i=0,r=s.length;i<r;i++)if(a=s[i].children,a instanceof h&&(n=a[t](e)))return n}},get:function(t){return this._find("get",t)},getByUid:function(t){return this._find("getByUid",t)}})).create=function(t){t=t&&t.push?{data:t}:t;var e=t||{},i=e.data,r=e.fields,n=e.list;return i&&i._dataSource?i._dataSource:(i||!r||e.transport||n&&(i=_t(n,r)),e.data=i,e instanceof h?e:new h(e))},Ot=P.Observable.extend({init:function(t,e,i){P.Observable.fn.init.call(this),this._prefetching=!1,this.dataSource=t,this.prefetch=!i;var r=this;t.bind("change",function(){r._change()}),t.bind("reset",function(){r._reset()}),this._syncWithDataSource(),this.setViewSize(e)},setViewSize:function(t){this.viewSize=t,this._recalculate()},at:function(t){var e=this.pageSize,i=!0;return t>=this.total()?(this.trigger("endreached",{index:t}),null):this.useRanges?this.useRanges?((t<this.dataOffset||t>=this.skip+e)&&(i=this.range(Math.floor(t/e)*e)),t===this.prefetchThreshold&&this._prefetch(),t===this.midPageThreshold?this.range(this.nextMidRange,!0):t===this.nextPageThreshold?this.range(this.nextFullRange):t===this.pullBackThreshold&&this.range(this.offset===this.skip?this.previousMidRange:this.previousFullRange),i?this.dataSource.at(t-this.dataOffset):(this.trigger("endreached",{index:t}),null)):y:this.dataSource.view()[t]},indexOf:function(t){return this.dataSource.data().indexOf(t)+this.dataOffset},total:function(){return parseInt(this.dataSource.total(),10)},next:function(){var t=this,e=t.pageSize,i=t.skip-t.viewSize+e,r=R.max(R.floor(i/e),0)*e;this.offset=i,this.dataSource.prefetch(r,e,function(){t._goToRange(i,!0)})},range:function(t,e){if(this.offset===t)return!0;var i=this,r=this.pageSize,n=R.max(R.floor(t/r),0)*r,a=this.dataSource;return e&&(n+=r),a.inRange(t,r)?(this.offset=t,this._recalculate(),this._goToRange(t),!0):!this.prefetch||(a.prefetch(n,r,function(){i.offset=t,i._recalculate(),i._goToRange(t,!0)}),!1)},syncDataSource:function(){var t=this.offset;this.offset=null,this.range(t)},destroy:function(){this.unbind()},_prefetch:function(){var t=this,e=this.pageSize,i=this.skip+e,r=this.dataSource;r.inRange(i,e)||this._prefetching||!this.prefetch||(this._prefetching=!0,this.trigger("prefetching",{skip:i,take:e}),r.prefetch(i,e,function(){t._prefetching=!1,t.trigger("prefetched",{skip:i,take:e})}))},_goToRange:function(t,e){this.offset===t&&(this.dataOffset=t,this._expanding=e,this.dataSource.range(t,this.pageSize),this.dataSource.enableRequestsInProgress())},_reset:function(){this._syncPending=!0},_change:function(){var t=this.dataSource;this.length=this.useRanges?t.lastRange().end:t.view().length,this._syncPending&&(this._syncWithDataSource(),this._recalculate(),this._syncPending=!1,this.trigger("reset",{offset:this.offset})),this.trigger("resize"),this._expanding&&this.trigger("expand"),delete this._expanding},_syncWithDataSource:function(){var t=this.dataSource;this._firstItemUid=t.firstItemUid(),this.dataOffset=this.offset=t.skip()||0,this.pageSize=t.pageSize(),this.useRanges=t.options.serverPaging},_recalculate:function(){var t=this.pageSize,e=this.offset,i=this.viewSize,r=Math.ceil(e/t)*t;this.skip=r,this.midPageThreshold=r+t-1,this.nextPageThreshold=r+i-1,this.prefetchThreshold=r+Math.floor(t/3*2),this.pullBackThreshold=this.offset-1,this.nextMidRange=r+t-i,this.nextFullRange=r,this.previousMidRange=e-i,this.previousFullRange=r-t}}),It=P.Observable.extend({init:function(t,e){var i=this;P.Observable.fn.init.call(i),this.dataSource=t,this.batchSize=e,this._total=0,this.buffer=new Ot(t,3*e),this.buffer.bind({endreached:function(t){i.trigger("endreached",{index:t.index})},prefetching:function(t){i.trigger("prefetching",{skip:t.skip,take:t.take})},prefetched:function(t){i.trigger("prefetched",{skip:t.skip,take:t.take})},reset:function(){i._total=0,i.trigger("reset")},resize:function(){i._total=Math.ceil(this.length/i.batchSize),i.trigger("resize",{total:i.total(),offset:this.offset})}})},syncDataSource:function(){this.buffer.syncDataSource()},at:function(t){var e,i,r=this.buffer,n=t*this.batchSize,a=this.batchSize,s=[];for(r.offset>n&&r.at(r.offset-1),i=0;i<a&&(e=r.at(n+i),null!==e);i++)s.push(e);return s},total:function(){return this._total},destroy:function(){this.buffer.destroy(),this.unbind()}}),x(!0,P.data,{readers:{json:Nt},Query:g,DataSource:p,HierarchicalDataSource:h,Node:Mt,ObservableObject:d,ObservableArray:$,LazyObservableArray:a,LocalTransport:Tt,RemoteTransport:Dt,Cache:s,DataReader:Nt,Model:_,Buffer:Ot,BatchBuffer:It}),window.kendo}),("function"==typeof define&&define.amd?define:function(t,e,i){(i||e)()})("kendo.treeview.min",["kendo.data.min","kendo.treeview.draganddrop.min"],function(){var v=window.kendo.jQuery,d=void 0;function t(i){return function(t){var e=t.children(".k-animation-container");return e.length||(e=t),e.children(i)}}function r(t){return b.template(t,{useWithBlock:!1})}function p(t){return t.find(".k-checkbox-wrapper:first input[type=checkbox]")}function e(a){return function(t,n){n=n.closest(A);var e,i=n.parent();return i.parent().is("li")&&(e=i.parent()),this._dataSourceMove(t,i,e,function(t,e){var i=this.dataItem(n),r=i?i.parent().indexOf(i):n.index();return this._insert(t.data(),e,r+a)})}}function R(t,e){for(var i;t&&"ul"!=t.nodeName.toLowerCase();)i=t,t=t.nextSibling,3==i.nodeType&&(i.nodeValue=v.trim(i.nodeValue)),a.test(i.className)?e.insertBefore(i,e.firstChild):e.appendChild(i)}function _(t){var e=t.children("div"),i=t.children("ul"),r=e.children(".k-icon"),n=t.children("input[type=checkbox]"),a=e.children(".k-in");t.hasClass("k-treeview")||(e.length||(e=v("<div />").prependTo(t)),!r.length&&i.length?r=v("<span class='k-icon' />").prependTo(e):i.length&&i.children().length||(r.remove(),i.remove()),n.length&&v("<span class='k-checkbox-wrapper' />").appendTo(e).append(n),a.length||(a=t.children("a").eq(0).addClass("k-in k-link"),a.length||(a=v("<span class='k-in' />")),a.appendTo(e),e.length&&R(e[0].nextSibling,a[0])))}var i,y,h,n,a,b=window.kendo,f=b.ui,q=b.data,o=v.extend,s=b.template,c=v.isArray,l=f.Widget,u=q.HierarchicalDataSource,g=v.proxy,m=b.keys,x=".kendoTreeView",$=".kendoTreeViewTemp",w="select",U="check",k="navigate",z="expand",C="change",j="error",S="checked",P="indeterminate",H="collapse",B="dragstart",L="drag",V="drop",G="dragend",W="dataBound",T="click",D="undefined",Q="k-state-hover",N="k-treeview",J=":visible",A=".k-item",M="string",O="aria-checked",I="aria-selected",Y="aria-disabled",E="k-state-disabled",F={text:"dataTextField",url:"dataUrlField",spriteCssClass:"dataSpriteCssClassField",imageUrl:"dataImageUrlField"},Z=function(t){return t instanceof b.jQuery||window.jQuery&&t instanceof window.jQuery},K=function(t){return"object"==typeof HTMLElement?t instanceof HTMLElement:t&&"object"==typeof t&&1===t.nodeType&&typeof t.nodeName===M};return y=t(".k-group"),h=t(".k-group,.k-content"),n=function(t){return t.children("div").children(".k-icon")},a=/k-sprite/,i=b.ui.DataBoundWidget.extend({init:function(t,e){var i,r=this,n=!1,a=e&&!!e.dataSource;c(e)&&(e={dataSource:e}),e&&typeof e.loadOnDemand==D&&c(e.dataSource)&&(e.loadOnDemand=!1),l.prototype.init.call(r,t,e),t=r.element,e=r.options,r._dataSourceUids={},i=t.is("ul")&&t||t.hasClass(N)&&t.children("ul"),n=!a&&i.length,n&&(e.dataSource.list=i),r._animation(),r._accessors(),r._templates(),t.hasClass(N)?(r.wrapper=t,r.root=t.children("ul").eq(0)):(r._wrapper(),i&&(r.root=t,r._group(r.wrapper))),r._tabindex(),r.wrapper.attr("role","tree"),r._dataSource(n),r._attachEvents(),r._dragging(),n?r._syncHtmlAndDataSource():e.autoBind&&(r._progress(!0),r.dataSource.fetch()),e.checkboxes&&e.checkboxes.checkChildren&&r.updateIndeterminate(),r.element[0].id&&(r._ariaId=b.format("{0}_tv_active",r.element[0].id)),b.notify(r)},_attachEvents:function(){var e=this,t=".k-in:not(.k-state-selected,.k-state-disabled)",i="mouseenter";e.wrapper.on(i+x,".k-in.k-state-selected",function(t){t.preventDefault()}).on(i+x,t,function(){v(this).addClass(Q)}).on("mouseleave"+x,t,function(){v(this).removeClass(Q)}).on(T+x,t,g(e._click,e)).on("dblclick"+x,".k-in:not(.k-state-disabled)",g(e._toggleButtonClick,e)).on(T+x,".k-i-expand,.k-i-collapse",g(e._toggleButtonClick,e)).on("keydown"+x,g(e._keydown,e)).on("keypress"+x,g(e._keypress,e)).on("focus"+x,g(e._focus,e)).on("blur"+x,g(e._blur,e)).on("mousedown"+x,".k-in,.k-checkbox-wrapper :checkbox,.k-i-expand,.k-i-collapse",g(e._mousedown,e)).on("change"+x,".k-checkbox-wrapper :checkbox",g(e._checkboxChange,e)).on("click"+x,".checkbox-span",g(e._checkboxLabelClick,e)).on("click"+x,".k-request-retry",g(e._retryRequest,e)).on("click"+x,".k-link.k-state-disabled",function(t){t.preventDefault()}).on("click"+x,function(t){v(t.target).is(":kendoFocusable")||e.focus()})},_checkboxLabelClick:function(t){var e=v(t.target.previousSibling);e.is("[disabled]")||(e.prop("checked",!e.prop("checked")),e.trigger("change"))},_syncHtmlAndDataSource:function(t,e){t=t||this.root,e=e||this.dataSource;var i,r,n,a,s,o=e.view(),c=b.attr("uid"),l=b.attr("expanded"),d=this.options.checkboxes,u=t.children("li");for(i=0;i<u.length;i++)n=o[i],a=n.uid,r=u.eq(i),r.attr("role","treeitem").attr(c,a).attr(I,r.hasClass("k-state-selected")),n.expanded="true"===r.attr(l),d&&(s=p(r),n.checked=s.prop(S),s.attr("id","_"+a),s.next(".k-checkbox-label").attr("for","_"+a)),this._syncHtmlAndDataSource(r.children("ul"),n.children)},_animation:function(){var t=this.options,e=t.animation,i=e.collapse&&"effects"in e.collapse,r=o({},e.expand,e.collapse);i||(r=o(r,{reverse:!0})),e===!1&&(e={expand:{effects:{}},collapse:{hide:!0,effects:{}}}),e.collapse=o(r,{hide:!0}),t.animation=e},_dragging:function(){var a,t=this.options.dragAndDrop,e=this.dragging;t&&!e?(a=this,this.dragging=new f.HierarchicalDragAndDrop(this.element,{reorderable:!0,$angular:this.options.$angular,autoScroll:this.options.autoScroll,filter:"div:not(.k-state-disabled) .k-in",allowedContainers:".k-treeview",itemSelector:".k-treeview .k-item",hintText:g(this._hintText,this),contains:function(t,e){return v.contains(t,e)},dropHintContainer:function(t){return t},itemFromTarget:function(t){var e=t.closest(".k-top,.k-mid,.k-bot");return{item:e,content:t.closest(".k-in"),first:e.hasClass("k-top"),last:e.hasClass("k-bot")}},dropPositionFrom:function(t){return t.prevAll(".k-in").length>0?"after":"before"},dragstart:function(t){return a.trigger(B,{sourceNode:t[0]})},drag:function(t){a.trigger(L,{originalEvent:t.originalEvent,sourceNode:t.source[0],dropTarget:t.target[0],pageY:t.pageY,pageX:t.pageX,statusClass:t.status,setStatusClass:t.setStatus})},drop:function(e){var t=v(e.dropTarget),i=t.closest("a");return i&&i.attr("href")&&a._tempPreventNavigation(i),a.trigger(V,{originalEvent:e.originalEvent,sourceNode:e.source,destinationNode:e.destination,valid:e.valid,setValid:function(t){this.valid=t,e.setValid(t)},dropTarget:e.dropTarget,dropPosition:e.position})},dragend:function(e){function t(t){a.options.checkboxes&&a.options.checkboxes.checkChildren&&a.updateIndeterminate(),a.trigger(G,{originalEvent:e.originalEvent,sourceNode:t&&t[0],destinationNode:r[0],dropPosition:n})}var i=e.source,r=e.destination,n=e.position;"over"==n?a.append(i,r,t):("before"==n?i=a.insertBefore(i,r):"after"==n&&(i=a.insertAfter(i,r)),t(i))}})):!t&&e&&(e.destroy(),this.dragging=null)},_tempPreventNavigation:function(e){e.on(T+x+$,function(t){t.preventDefault(),e.off(T+x+$)})},_hintText:function(t){return this.templates.dragClue({item:this.dataItem(t),treeview:this.options})},_templates:function(){var t=this,e=t.options,i=g(t._fieldAccessor,t);e.template&&typeof e.template==M?e.template=s(e.template):e.template||(e.template=r("# var text = "+i("text")+"(data.item); ## if (typeof data.item.encoded != 'undefined' && data.item.encoded === false) {##= text ## } else { ##: text ## } #")),t._checkboxes(),t.templates={wrapperCssClass:function(t,e){var i="k-item",r=e.index;return t.firstLevel&&0===r&&(i+=" k-first"),r==t.length-1&&(i+=" k-last"),i},cssClass:function(t,e){var i="",r=e.index,n=t.length-1;return t.firstLevel&&0===r&&(i+="k-top "),i+=0===r&&r!=n?"k-top":r==n?"k-bot":"k-mid"},textClass:function(t,e){var i="k-in";return e&&(i+=" k-link"),t.enabled===!1&&(i+=" k-state-disabled"),t.selected===!0&&(i+=" k-state-selected"),i},toggleButtonClass:function(t){var e="k-icon";return e+=t.expanded!==!0?" k-i-expand":" k-i-collapse"},groupAttributes:function(t){var e="";return t.firstLevel||(e="role='group'"),e+(t.expanded!==!0?" style='display:none'":"")},groupCssClass:function(t){var e="k-group";return t.firstLevel&&(e+=" k-treeview-lines"),e},dragClue:r("#= data.treeview.template(data) #"),group:r("<ul class='#= data.r.groupCssClass(data.group) #'#= data.r.groupAttributes(data.group) #>#= data.renderItems(data) #</ul>"),itemContent:r("# var imageUrl = "+i("imageUrl")+"(data.item); ## var spriteCssClass = "+i("spriteCssClass")+"(data.item); ## if (imageUrl) { #<img class='k-image' alt='' src='#= imageUrl #'># } ## if (spriteCssClass) { #<span class='k-sprite #= spriteCssClass #'></span># } ##= data.treeview.template(data) #"),itemElement:r("# var item = data.item, r = data.r; ## var url = "+i("url")+"(item); #<div class='#= r.cssClass(data.group, item) #'># if (item.hasChildren) { #<span class='#= r.toggleButtonClass(item) #'></span># } ## if (data.treeview.checkboxes) { #<span class='k-checkbox-wrapper' role='presentation'>#= data.treeview.checkboxes.template(data) #</span># } ## var tag = url ? 'a' : 'span'; ## var textAttr = url ? ' href=\\'' + url + '\\'' : ''; #<#=tag# class='#= r.textClass(item, !!url) #'#= textAttr #>#= r.itemContent(data) #</#=tag#></div>"),item:r("# var item = data.item, r = data.r; #<li role='treeitem' class='#= r.wrapperCssClass(data.group, item) #'"+b.attr("uid")+'=\'#= item.uid #\' # if (data.treeview.checkboxes) { #aria-checked=\'#= item.checked ? "true" : "false" #\' # } #aria-selected=\'#= item.selected ? "true" : "false" #\' #=item.enabled === false ? "aria-disabled=\'true\'" : \'\'#aria-expanded=\'#= item.expanded ? "true" : "false" #\' data-expanded=\'#= item.expanded ? "true" : "false" #\' >#= r.itemElement(data) #</li>'),loading:r("<div class='k-icon k-i-loading'></div> #: data.messages.loading #"),retry:r("#: data.messages.requestFailed # <button class='k-button k-request-retry'>#: data.messages.retry #</button>")}},items:function(){return this.element.find(".k-item > div:first-child")},setDataSource:function(t){var e=this.options;e.dataSource=t,this._dataSourceUids={},this._dataSource(),e.checkboxes&&e.checkboxes.checkChildren&&this.dataSource.one("change",v.proxy(this.updateIndeterminate,this,null)),this.options.autoBind&&this.dataSource.fetch()},_bindDataSource:function(){this._refreshHandler=g(this.refresh,this),this._errorHandler=g(this._error,this),this.dataSource.bind(C,this._refreshHandler),this.dataSource.bind(j,this._errorHandler)},_unbindDataSource:function(){var t=this.dataSource;t&&(t.unbind(C,this._refreshHandler),t.unbind(j,this._errorHandler))},_dataSource:function(t){function i(t){for(var e=0;e<t.length;e++)t[e]._initChildren(),t[e].children.fetch(),i(t[e].children.view())}var e=this,r=e.options,n=r.dataSource;n=c(n)?{data:n}:n,e._unbindDataSource(),n.fields||(n.fields=[{field:"text"},{field:"url"},{field:"spriteCssClass"},{field:"imageUrl"}]),e.dataSource=n=u.create(n),t&&(n.fetch(),i(n.view())),e._bindDataSource()},events:[B,L,V,G,W,z,H,w,C,k,U],options:{name:"TreeView",dataSource:{},animation:{expand:{effects:"expand:vertical",duration:200},collapse:{duration:100}},messages:{loading:"Loading...",requestFailed:"Request failed.",retry:"Retry"},dragAndDrop:!1,checkboxes:!1,autoBind:!0,autoScroll:!1,loadOnDemand:!0,template:"",dataTextField:null},_accessors:function(){var t,e,i,r=this,n=r.options,a=r.element;for(t in F)e=n[F[t]],i=a.attr(b.attr(t+"-field")),!e&&i&&(e=i),e||(e=t),c(e)||(e=[e]),n[F[t]]=e},_fieldAccessor:function(t){var e=this.options[F[t]],i=e.length,r="(function(item) {";return 0===i?r+="return item['"+t+"'];":(r+="var levels = ["+v.map(e,function(t){return"function(d){ return "+b.expr(t)+"}"}).join(",")+"];",r+="return levels[Math.min(item.level(), "+i+"-1)](item)"),r+="})"},setOptions:function(t){l.fn.setOptions.call(this,t),this._animation(),this._dragging(),this._templates()},_trigger:function(t,e){return this.trigger(t,{node:e.closest(A)[0]})},_setChecked:function(t,e){if(t&&v.isFunction(t.view))for(var i=0,r=t.view();i<r.length;i++)r[i].enabled!==!1&&this._setCheckedValue(r[i],e),r[i].children&&this._setChecked(r[i].children,e)},_setCheckedValue:function(t,e){t[S]=e},_setIndeterminate:function(t){var e,i,r,n=y(t),a=!0;if(n.length&&(e=p(n.children()),i=e.length)){if(i>1){for(r=1;r<i;r++)if(e[r].checked!=e[r-1].checked||e[r].indeterminate||e[r-1].indeterminate){a=!1;break}}else a=!e[0].indeterminate;return t.attr(O,a?e[0].checked:"mixed"),p(t).data(P,!a).prop(P,!a).prop(S,a&&e[0].checked)}},updateIndeterminate:function(t){var e,i,r,n;if(t=t||this.wrapper,e=y(t).children(),e.length){for(i=0;i<e.length;i++)this.updateIndeterminate(e.eq(i));if(t.is(".k-treeview"))return;r=this._setIndeterminate(t),n=this.dataItem(t),r&&r.prop(S)?n.checked=!0:n&&delete n.checked}},_bubbleIndeterminate:function(t,e){if(t.length){e||this.updateIndeterminate(t);var i,r=this.parent(t);r.length&&(this._setIndeterminate(r),i=r.children("div").find(".k-checkbox-wrapper input[type=checkbox]"),this._skip=!0,i.prop(P)===!1?this.dataItem(r).set(S,i.prop(S)):this.dataItem(r).set(S,!1),this._skip=!1,this._bubbleIndeterminate(r,!0))}},_checkboxChange:function(t){var e=v(t.target),i=e.prop(S),r=e.closest(A),n=this.dataItem(r);this._preventChange||n.checked!=i&&(n.set(S,i),r.attr(O,i),this._trigger(U,r))},_toggleButtonClick:function(t){var e=v(t.currentTarget).closest(A);e.is("[aria-disabled='true']")||this.toggle(e)},_mousedown:function(t){var e=this,i=v(t.currentTarget),r=v(t.currentTarget).closest(A),n=b.support.browser;r.is("[aria-disabled='true']")||((n.msie||n.edge)&&i.is(":checkbox")&&(i.prop(P)?(e._preventChange=!1,i.prop(S,!i.prop(S)),i.trigger(C),i.on(T+x,function(t){t.preventDefault()}),e._preventChange=!0):(i.off(T+x),e._preventChange=!1)),e._clickTarget=r,e.current(r))},_focusable:function(t){return t&&t.length&&t.is(":visible")&&!t.find(".k-in:first").hasClass(E)},_focus:function(){var t=this.select(),e=this._clickTarget;b.support.touch||(e&&e.length&&(t=e),this._focusable(t)||(t=this.current()),this._focusable(t)||(t=this._nextVisible(v())),this.current(t))},focus:function(){var t,e=this.wrapper,i=e[0],r=[],n=[],a=document.documentElement;do{i=i.parentNode,i.scrollHeight>i.clientHeight&&(r.push(i),n.push(i.scrollTop))}while(i!=a);for(b.focusElement(e),t=0;t<r.length;t++)r[t].scrollTop=n[t]},_blur:function(){this.current().find(".k-in:first").removeClass("k-state-focused")},_enabled:function(t){return!t.children("div").children(".k-in").hasClass(E)},parent:function(t){var e,i,r=/\bk-treeview\b/,n=/\bk-item\b/;typeof t==M&&(t=this.element.find(t)),K(t)||(t=t[0]),i=n.test(t.className);do{t=t.parentNode,n.test(t.className)&&(i?e=t:i=!0)}while(!r.test(t.className)&&!e);return v(e)},_nextVisible:function(t){function e(t){for(;t.length&&!t.next().length;)t=r.parent(t);return t.next().length?t.next():t}var i,r=this,n=r._expanded(t);return t.length&&t.is(":visible")?n?(i=y(t).children().first(),i.length||(i=e(t))):i=e(t):i=r.root.children().eq(0),i},_previousVisible:function(t){var e,i,r=this;if(!t.length||t.prev().length)for(i=t.length?t.prev():r.root.children().last();r._expanded(i)&&(e=y(i).children().last(),e.length);)i=e;else i=r.parent(t)||t;return i},_keydown:function(t){var e,i=this,r=t.keyCode,n=i.current(),a=i._expanded(n),s=n.find(".k-checkbox-wrapper:first :checkbox"),o=b.support.isRtl(i.element);t.target==t.currentTarget&&(!o&&r==m.RIGHT||o&&r==m.LEFT?a?e=i._nextVisible(n):n.find(".k-in:first").hasClass(E)||i.expand(n):!o&&r==m.LEFT||o&&r==m.RIGHT?a&&!n.find(".k-in:first").hasClass(E)?i.collapse(n):(e=i.parent(n),i._enabled(e)||(e=d)):r==m.DOWN?e=i._nextVisible(n):r==m.UP?e=i._previousVisible(n):r==m.HOME?e=i._nextVisible(v()):r==m.END?e=i._previousVisible(v()):r!=m.ENTER||n.find(".k-in:first").hasClass(E)?r==m.SPACEBAR&&s.length&&(n.find(".k-in:first").hasClass(E)||(s.prop(S,!s.prop(S)).data(P,!1).prop(P,!1),i._checkboxChange({target:s})),e=n):n.find(".k-in:first").hasClass("k-state-selected")||i._trigger(w,n)||i.select(n),e&&(t.preventDefault(),n[0]!=e[0]&&(i._trigger(k,e),i.current(e))))},_keypress:function(t){var e,i=this,r=300,n=i.current().get(0),a=t.key,s=1===a.length;s&&(i._match||(i._match=""),i._match+=a,clearTimeout(i._matchTimer),i._matchTimer=setTimeout(function(){i._match=""},r),e=n&&i._matchNextByText(Array.prototype.indexOf.call(i.element.find(".k-item"),n),i._match),e.length||(e=i._matchNextByText(-1,i._match)),e.get(0)&&e.get(0)!==n&&(i._trigger(k,e),i.current(e)))},_matchNextByText:function(i,r){var t=this.element,e=t.find(".k-in").filter(function(t,e){return t>i&&v(e).is(":visible")&&0===v(e).text().toLowerCase().indexOf(r)});return e.eq(0).closest(A)},_click:function(t){var e,i=this,r=v(t.currentTarget),n=h(r.closest(A)),a=r.attr("href");e=a?"#"==a||a.indexOf("#"+this.element.id+"-")>=0:n.length&&!n.children().length,e&&t.preventDefault(),r.hasClass(".k-state-selected")||i._trigger(w,r)||i.select(r)},_wrapper:function(){var t,e,i=this,r=i.element,n="k-widget k-treeview";r.is("ul")?(t=r.wrap("<div />").parent(),e=r):(t=r,e=t.children("ul").eq(0)),i.wrapper=t.addClass(n),i.root=e},_getSelectedNode:function(){return this.element.find(".k-state-selected").closest(A)},_group:function(t){var e=this,i=t.hasClass(N),r={firstLevel:i,expanded:i||e._expanded(t)},n=t.children("ul");n.addClass(e.templates.groupCssClass(r)).css("display",r.expanded?"":"none"),e._nodes(n,r)},_nodes:function(t,i){var r,n=this,e=t.children("li");i=o({length:e.length},i),e.each(function(t,e){e=v(e),r={index:t,expanded:n._expanded(e)},_(e),n._updateNodeClasses(e,i,r),n._group(e)})},_checkboxes:function(){var t,e=this.options,i=e.checkboxes;i&&(t="<input type='checkbox' tabindex='-1' #= (item.enabled === false) ? 'disabled' : '' # #= item.checked ? 'checked' : '' #",i.name&&(t+=" name='"+i.name+"'"),t+=" id='_#= item.uid #' class='k-checkbox' /><span class='k-checkbox-label checkbox-span'></span>",i=o({template:t},e.checkboxes),typeof i.template==M&&(i.template=s(i.template)),e.checkboxes=i)},_updateNodeClasses:function(t,e,i){var r,n,a=t.children("div"),s=t.children("ul"),o=this.templates;t.hasClass("k-treeview")||(i=i||{},i.expanded=typeof i.expanded!=D?i.expanded:this._expanded(t),i.index=typeof i.index!=D?i.index:t.index(),i.enabled=typeof i.enabled!=D?i.enabled:!a.children(".k-in").hasClass("k-state-disabled"),e=e||{},e.firstLevel=typeof e.firstLevel!=D?e.firstLevel:t.parent().parent().hasClass(N),e.length=typeof e.length!=D?e.length:t.parent().children().length,t.removeClass("k-first k-last").addClass(o.wrapperCssClass(e,i)),a.removeClass("k-top k-mid k-bot").addClass(o.cssClass(e,i)),r=a.children(".k-in"),n=r[0]&&"a"==r[0].nodeName.toLowerCase(),r.removeClass("k-in k-link k-state-default k-state-disabled").addClass(o.textClass(i,n)),(s.length||"true"==t.attr("data-hasChildren"))&&(a.children(".k-icon").removeClass("k-i-expand k-i-collapse").addClass(o.toggleButtonClass(i)),s.addClass("k-group")))},_processNodes:function(t,e){var i,r=this,n=r.element.find(t);for(i=0;i<n.length;i++)e.call(r,i,v(n[i]).closest(A))},dataItem:function(t){var e=v(t).closest(A).attr(b.attr("uid")),i=this.dataSource;return i&&i.getByUid(e)},_dataItem:function(t){var e=v(t).closest(A).attr(b.attr("uid")),i=this.dataSource;return i&&this._dataSourceUids[e]},_insertNode:function(t,e,i,r,n){var a,s,o,c,l,d,u=this,p=y(i),h=p.children().length+1,f={firstLevel:i.hasClass(N),expanded:!n,length:h},g="",m=function(t,e){t.appendTo(e)};for(o=0;o<t.length;o++)c=t[o],c.index=e+o,g+=u._renderItem({group:f,item:c});if(s=v(g),s.length){for(u.angular("compile",function(){return{elements:s.get(),data:t.map(function(t){return{dataItem:t}})}}),p.length||(p=v(u._renderGroup({group:f})).appendTo(i)),r(s,p),i.hasClass("k-item")&&(_(i),u._updateNodeClasses(i,f,{expanded:!n})),l=s.prev().first(),d=s.next().last(),u._updateNodeClasses(l,{},{expanded:"true"==l.attr(b.attr("expanded"))}),u._updateNodeClasses(d,{},{expanded:"true"==d.attr(b.attr("expanded"))}),o=0;o<t.length;o++)c=t[o],c.hasChildren&&(a=c.children.data(),a.length&&u._insertNode(a,c.index,s.eq(o),m,!c.expanded));return s}},_updateNodes:function(t,e){function i(t,e){t.is(".k-group")&&t.find(".k-item:not([aria-disabled])").attr(O,e),t.find(".k-checkbox-wrapper input[type=checkbox]:not([disabled])").prop(S,e).data(P,!1).prop(P,!1)}var r,n,a,s,o,c,l,d=this,u={treeview:d.options,item:s},p="expanded"!=e&&"checked"!=e;if("selected"==e)s=t[0],n=d.findByUid(s.uid).find(".k-in:first").removeClass("k-state-hover").toggleClass("k-state-selected",s[e]).end(),s[e]&&d.current(n),n.attr(I,!!s[e]);else{for(l=v.map(t,function(t){return d.findByUid(t.uid).children("div")}),p&&d.angular("cleanup",function(){return{elements:l}}),r=0;r<t.length;r++)u.item=s=t[r],a=l[r],n=a.parent(),p&&a.children(".k-in").html(d.templates.itemContent(u)),e==S?(o=s[e],i(a,o),n.attr(O,o),d.options.checkboxes.checkChildren&&(i(n.children(".k-group"),o),d._setChecked(s.children,o),d._bubbleIndeterminate(n))):"expanded"==e?d._toggle(n,s,s[e]):"enabled"==e&&(n.find(".k-checkbox-wrapper input[type=checkbox]").prop("disabled",!s[e]),c=!h(n).is(J),n.removeAttr(Y),s[e]||(s.selected&&s.set("selected",!1),s.expanded&&s.set("expanded",!1),c=!0,n.attr(I,!1).attr(Y,!0)),d._updateNodeClasses(n,{},{enabled:s[e],expanded:!c})),a.length&&this.trigger("itemChange",{item:a,data:s,ns:f});p&&d.angular("compile",function(){return{elements:l,data:v.map(t,function(t){return[{dataItem:t}]})}})}},_appendItems:function(i,t,e){var r,n,a,s=y(e),o=s.children(),c=!this._expanded(e);this.element===e?(r=this.dataSource.data(),n=this.dataSource.view(),a=n.length<r.length?n:r,i=a.indexOf(t[0])):t.length&&(i=t[0].parent().indexOf(t[0])),typeof i==D&&(i=o.length),this._insertNode(t,i,e,function(t,e){i>=o.length?t.appendTo(e):t.insertBefore(o.eq(i))},c),c||(this._updateNodeClasses(e,{},{expanded:!c}),y(e).css("display","block"))},_refreshChildren:function(t,e,i){var r,n,a,s=this.options,o=s.loadOnDemand,c=s.checkboxes&&s.checkboxes.checkChildren;if(y(t).empty(),e.length)for(this._appendItems(i,e,t),n=y(t).children(),o&&c&&this._bubbleIndeterminate(n.last()),r=0;r<n.length;r++)a=n.eq(r),this.trigger("itemChange",{item:a.children("div"),data:e[r],ns:f});else _(t)},_refreshRoot:function(t){var e,i,r,n=this._renderGroup({items:t,group:{firstLevel:!0,expanded:!0}});for(this.root.length?(this._angularItems("cleanup"),e=v(n),this.root.attr("class",e.attr("class")).html(e.html())):this.root=this.wrapper.html(n).children("ul"),i=this.root.children(".k-item"),r=0;r<t.length;r++)this.trigger("itemChange",{item:i.eq(r),data:t[r],ns:f});this._angularItems("compile")},refresh:function(t){var e,i,r=t.node,n=t.action,a=t.items,s=this.wrapper,o=this.options,c=o.loadOnDemand,l=o.checkboxes&&o.checkboxes.checkChildren;if(!this._skip){for(e=0;e<a.length;e++)this._dataSourceUids[a[e].uid]=a[e];if(t.field){if(!a[0]||!a[0].level)return;return this._updateNodes(a,t.field)}if(r&&(s=this.findByUid(r.uid),this._progress(s,!1)),l&&"remove"!=n){for(i=!1,e=0;e<a.length;e++)if("checked"in a[e]){i=!0;break}if(!i&&r&&r.checked)for(e=0;e<a.length;e++)a[e].checked=!0}if("add"==n?this._appendItems(t.index,a,s):"remove"==n?this._remove(this.findByUid(a[0].uid),!1):"itemchange"==n?this._updateNodes(a):"itemloaded"==n?this._refreshChildren(s,a,t.index):this._refreshRoot(a),"remove"!=n)for(e=0;e<a.length;e++)(!c||a[e].expanded||a[e]._loaded)&&a[e].load();this.trigger(W,{node:r?s:d}),this.dataSource.filter()&&this.options.checkboxes.checkChildren&&this.updateIndeterminate(s)}},_error:function(t){var e=t.node&&this.findByUid(t.node.uid),i=this.templates.retry({messages:this.options.messages});e?(this._progress(e,!1),this._expanded(e,!1),n(e).addClass("k-i-reload"),t.node.loaded(!1)):(this._progress(!1),this.element.html(i))},_retryRequest:function(t){t.preventDefault(),this.dataSource.fetch()},expand:function(t){this._processNodes(t,function(t,e){this.toggle(e,!0)})},collapse:function(t){this._processNodes(t,function(t,e){this.toggle(e,!1)})},enable:function(t,i){"boolean"==typeof t?(i=t,t=this.items()):i=2!=arguments.length||!!i,this._processNodes(t,function(t,e){this.dataItem(e).set("enabled",i)})},current:function(t){var e=this,i=e._current,r=e.element,n=e._ariaId;return arguments.length>0&&t&&t.length?(i&&(i[0].id===n&&i.removeAttr("id"),i.find(".k-in:first").removeClass("k-state-focused")),i=e._current=v(t,r).closest(A),i.find(".k-in:first").addClass("k-state-focused"),n=i[0].id||n,n&&(e.wrapper.removeAttr("aria-activedescendant"),i.attr("id",n),e.wrapper.attr("aria-activedescendant",n)),d):(i||(i=e._nextVisible(v())),i)},select:function(t){var e=this,i=e.element;return arguments.length?(t=v(t,i).closest(A),i.find(".k-state-selected").each(function(){var t=e.dataItem(this);t?(t.set("selected",!1),delete t.selected):v(this).removeClass("k-state-selected")}),t.length&&(e.dataItem(t).set("selected",!0),e._clickTarget=t),e.trigger(C),d):i.find(".k-state-selected").closest(A)},_toggle:function(t,e,i){var r,n=this.options,a=h(t),s=i?"expand":"collapse";a.data("animating")||(r=e&&e.loaded(),i&&!r?(n.loadOnDemand&&this._progress(t,!0),a.remove(),e.load()):(this._updateNodeClasses(t,{},{expanded:i}),i||a.css("height",a.height()).css("height"),a.kendoStop(!0,!0).kendoAnimate(o({reset:!0},n.animation[s],{complete:function(){i&&a.css("height","")}}))))},toggle:function(t,e){t=v(t),n(t).is(".k-i-expand, .k-i-collapse")&&(1==arguments.length&&(e=!this._expanded(t)),this._expanded(t,e))},destroy:function(){var t=this;l.fn.destroy.call(t),t.wrapper.off(x),t.wrapper.find(".k-checkbox-wrapper :checkbox").off(x),t._unbindDataSource(),t.dragging&&t.dragging.destroy(),t._dataSourceUids={},b.destroy(t.element),t.root=t.wrapper=t.element=null},_expanded:function(t,e,i){var r,n=b.attr("expanded"),a=e,s=a?"expand":"collapse";return 1==arguments.length?(r=this._dataItem(t),"true"===t.attr(n)||r&&r.expanded):(r=this.dataItem(t),h(t).data("animating")||!i&&this._trigger(s,t)||(a?(t.attr(n,"true"),t.attr("aria-expanded","true")):(t.removeAttr(n),t.attr("aria-expanded","false")),r&&(r.set("expanded",a),a=r.expanded)),d)},_progress:function(t,e){var i=this.element,r=this.templates.loading({messages:this.options.messages});1==arguments.length?(e=t,e?i.html(r):i.empty()):n(t).toggleClass("k-i-loading",e).removeClass("k-i-reload")},text:function(t,e){var i=this.dataItem(t),r=this.options[F.text],n=i.level(),a=r.length,s=r[Math.min(n,a-1)];return e?(i.set(s,e),d):i[s]},_objectOrSelf:function(t){return v(t).closest("[data-role=treeview]").data("kendoTreeView")||this},_dataSourceMove:function(t,e,i,r){var n,a=this._objectOrSelf(i||e),s=a.dataSource,o=v.Deferred().resolve().promise();return i&&i[0]!=a.element[0]&&(n=a.dataItem(i),n.loaded()||(a._progress(i,!0),o=n.load()),i!=this.root&&(s=n.children,s&&s instanceof u||(n._initChildren(),n.loaded(!0),s=n.children))),t=this._toObservableData(t),r.call(a,s,t,o)},_toObservableData:function(t){var e,i,r=t;return(Z(t)||K(t))&&(e=this._objectOrSelf(t).dataSource,i=v(t).attr(b.attr("uid")),r=e.getByUid(i),r&&(r=e.remove(r))),r},_insert:function(t,e,i){e instanceof b.data.ObservableArray?e=e.toJSON():c(e)||(e=[e]);var r=t.parent();return r&&r._initChildren&&(r.hasChildren=!0,r._initChildren()),t.splice.apply(t,[i,0].concat(e)),this.findByUid(t[i].uid)},insertAfter:e(1),insertBefore:e(0),append:function(t,s,o){var e=this.root;if(!(s&&t instanceof jQuery&&s[0]===t[0]))return s=s&&s.length?s:null,s&&(e=y(s)),this._dataSourceMove(t,e,s,function(i,r,t){function e(){s&&a._expanded(s,!0,!0);var t=i.data(),e=Math.max(t.length,0);return a._insert(t,r,e)}var n,a=this;return t.done(function(){n=e(),(o=o||v.noop)(n)}),n||null})},_remove:function(t,e){var i,r,n,a=this;return t=v(t,a.element),this.angular("cleanup",function(){return{elements:t.get()}}),i=t.parent().parent(),r=t.prev(),n=t.next(),t[e?"detach":"remove"](),i.hasClass("k-item")&&(_(i),a._updateNodeClasses(i)),a._updateNodeClasses(r),a._updateNodeClasses(n),t},remove:function(t){var e=this.dataItem(t);e&&this.dataSource.remove(e)},detach:function(t){return this._remove(t,!0)},findByText:function(i){return v(this.element).find(".k-in").filter(function(t,e){return v(e).text()==i}).closest(A)},findByUid:function(t){var e,i,r=this.element.find(".k-item"),n=b.attr("uid");for(i=0;i<r.length;i++)if(r[i].getAttribute(n)==t){e=r[i];break}return v(e)},expandPath:function(t,e){function i(){a.shift(),a.length?r(a[0]).then(i):s.call(n)}function r(t){var e=v.Deferred(),i=n.dataSource.get(t);return i?i.loaded()?(i.set("expanded",!0),e.resolve()):(n._progress(n.findByUid(i.uid),!0),i.load().then(function(){i.set("expanded",!0),e.resolve()})):e.resolve(),e.promise()}var n=this,a=t.slice(0),s=e||v.noop;r(a[0]).then(i)},_parentIds:function(t){for(var e=t&&t.parentNode(),i=[];e&&e.parentNode;)i.unshift(e.id),e=e.parentNode();return i},expandTo:function(t){t instanceof b.data.Node||(t=this.dataSource.get(t));var e=this._parentIds(t);this.expandPath(e)},_renderItem:function(t){return t.group||(t.group={}),t.treeview=this.options,t.r=this.templates,this.templates.item(t)},_renderGroup:function(t){var s=this;return t.renderItems=function(t){var e="",i=0,r=t.items,n=r?r.length:0,a=t.group;for(a.length=n;i<n;i++)t.group=a,t.item=r[i],t.item.index=i,e+=s._renderItem(t);return e},t.r=s.templates,s.templates.group(t)}}),f.plugin(i),window.kendo})}();