!function(w,k,C){"use strict";w.extend(!0,k.cart,{ecommerce:function(y){y=w.extend(!0,{settings:{indexpage:"cart/index.html",loginpage:"imlogin.php",vat:0,coupon:!1,vattype:"none",currency:"â‚¬",currency_id:"EUR",currency_format:"#.###,@@[C]",currency_format_zeroas:"0",post_url:"cart/x5cart.php",order_no_format:"[yy][mm][dd]-[A-Z][0-9][A-Z][0-9]",form_autocomplete:!0,form_validation:"tip",showShipmentFields:!1,continue_shopping_page:"index.html",minimumAmount:0,currencies:["USD","EUR"],cartCookie:"x5CartProducts",formCookie:"x5CartForm",lastOrderCookie:"x5CartLastOrder",registerUsers:0},products:{},shippings:{},payments:{},form:{fields:{},agreement:"",acceptAgreement:!1}},y);var t,e,p={},b=null,c=null,l={},i=0,r={},n=0,o=null,d=null,u=null,h=0,s={},f={},x="",a=[-2,-4,-1,-3,-2,-5,-1],g={"x5cart.priceChanged":w.Callbacks(),"x5cart.quantityChanged":w.Callbacks()};for(t in y.shippings)y.shippings[t]&&(n++,r[t]=new k.cart.shipping(y.shippings[t]),null===b&&(b=t));for(e in y.payments)y.payments[e]&&(i++,l[e]=new k.cart.payment(y.payments[e]),null===c&&(c=e));this.formatCurrency=function(t,e,i,n){i=i||y.settings.currency;(e=e||y.settings.currency_format).match(/(\[C\]\s?)?[#]+(,|\.|\s)?[#]*(,|\.)?([@]*)(\s?\[C\])?/gi);var r,a,s=k.utils,o=RegExp.$2,c=RegExp.$3,l=RegExp.$4,d=RegExp.$1,u=RegExp.$5,h="",e=s.round(t,l.length),p=0|e,f=s.round(e-p,l.length);if(0===t&&"-"==y.settings.currency_format_zeroas&&!n)return"-";for(o.length&&!c.length&&l.length&&(c=o,o=""),a=(r=(p+="").length)-1;0<=a;a--)(r-a-1)%3==0&&0<r-a-1&&(h=o+h),h=p.charAt(a)+h;if(l.length){for(f=(f+"").replace(/0\./,"").substring(0,l.length);f.length<l.length;)f+="0";h+=c+f}return(d?d.replace("[C]",i):"")+h+(u?u.replace("[C]",i):"")};this.settings=function(t){return t&&w.extend(y.settings,t),y.settings};this.form=function(){return y.form};this.updateUserData=function(){var r=w.Deferred(),a=this;return!k.utils.isOnline()||0===y.settings.registerUsers||2===y.settings.registerUsers&&-1!==C.location.hash.indexOf("guest_order")?r.resolve():w.ajax({url:"../"+y.settings.post_url+"?action=userdata&"+Math.round(1e4*Math.random()),type:"GET",dataType:"json",success:function(t){if(t.success){var e,i,n=function(t){for(var e=0;e<y.form.fields.length;e++)if(y.form.fields[e].id==t)return y.form.fields[e].name};if(a.isSetUserData()){for(e=a.userInvoiceData(),i=0;i<t.invoiceData.length;i++)"Email"==t.invoiceData[i].field_id&&(e.Email.value=t.invoiceData[i].value);a.userInvoiceData(e,!0)}else{if(t.invoiceData){for(e={},i=0;i<t.invoiceData.length;i++)e[t.invoiceData[i].field_id]={value:t.invoiceData[i].value,label:n(t.invoiceData[i].field_id)};a.userInvoiceData(e,!0)}if(t.shippingData){for(e={},i=0;i<t.shippingData.length;i++)e[t.shippingData[i].field_id]={value:t.shippingData[i].value,label:n(t.shippingData[i].field_id)};a.userShippingData(e,!0)}}r.resolve()}else r.reject()},error:function(){r.reject()}}),r};this.callWithProductsDynamicAvailability=function(t){this.callAndDo("prddnvl",t)};this.callWithDiscountedProductsArray=function(t){this.callAndDo("dscprd",t,{discountedProducts:x5CartData.offlineDiscountedProducts})};this.callWithSearchPageAdditionalInfos=function(t){this.callAndDo("srcpg",t,{discountedProducts:x5CartData.offlineDiscountedProducts})};this.callAndDo=function(t,e,i){var n;k.utils.isOnline()?(n=y.settings.post_url,n+=-1==n.indexOf("?")?"?":"&",w.ajax({url:k.settings.currentPath+n+"action="+t,success:function(t){t&&t.status&&"ok"==t.status&&e(t.data)}})):i&&e(i)};this.add=function(t,n,e,i,r){var a=w.Deferred(),s=this;return new k.cart.product(y.products[t],{quantity:n,option:e,suboption:i,postUrl:y.settings.post_url,onProductCreated:function(t,i){t.done(function(){function t(){p[e]=i;s.save();g["x5cart.priceChanged"].fire();g["x5cart.quantityChanged"].fire();a.resolve(e)}var e=i.hash();e in p&&!r?i.setQuantity(p[e].quantity()+n).done(t).fail(function(t){a.reject(t)}):t()}).fail(function(t){a.reject(t)})}}),a.promise()};this.remove=function(t){if(!(t in p&&p[t]))return!1;var e,i={};for(e in p)e!=t&&(i[e]=p[e]);return p=i,this.save(),g["x5cart.priceChanged"].fire(),g["x5cart.quantityChanged"].fire(),!0};this.update=function(n,t,e,i){var r=w.Deferred(),a,s;return n in p||(r.reject({message:k.l10n.get("cart_product_unknown","Unknown product")}),r.promise()),a=p[n],s=this,a.quiet(!1),e&&a.option()!=e||!isNaN(i)&&a.subOption()!=i?this.add(a.id(),t,e||a.option(),isNaN(i)?a.subOption():i).done(function(t){var e,i={};for(e in p)e!=t&&e!=n&&(i[e]=p[e]),e==n&&(i[t]=p[t]);p=i;g["x5cart.priceChanged"].fire();s.save();r.resolve(t)}).fail(function(t){r.reject(t)}):p[n].quantity()!=t?p[n].setQuantity(t).done(function(){g["x5cart.priceChanged"].fire();g["x5cart.quantityChanged"].fire();s.save();r.resolve(n)}).fail(function(t){r.reject(t)}):r.resolve(n),r.promise()};this.cart=function(){return p};this.count=function(t){t=null==t||t;var e,i=0;for(e in p)i+=t?+p[e].quantity():1;return i};this.category=function(t){var e,i,n={};for(i in y.products)(e=y.products[i]).category==t&&(n[i]=new k.cart.product(y.products[e.id],{quiet:!0}));return n};this.store=function(t){var e,i,n;if(t)return t in y.products?(n=y.products[t],new k.cart.product(n,{quiet:!0})):null;i={};for(n in y.products)e=y.products[n],i[n]=new k.cart.product(e,{quiet:!0});return i};this.shippings=function(){return r};this.shippingsCount=function(){return n};this.allowedShippings=function(){var t,e=this.cart();for(t in e)if(e[t].base().physical_delivery)return this.shippings();return{}};this.allowedShippingsCount=function(){var t,e=this.cart();for(t in e)if(e[t].base().physical_delivery)return this.shippingsCount();return 0};this.payments=function(){return l};this.paymentsCount=function(){return i};this.payment=function(t,e){return e=null==e||e,t&&l[t]&&(c=t,e&&this.save()),g["x5cart.priceChanged"].fire(),null!==c&&l[c]?l[c]:null};this.shipping=function(t,e){e=null==e||e;var i,n=this.allowedShippings();return t&&r[t]&&(i=n[b]!==n[t],b=t,e&&this.save(),i&&g["x5cart.priceChanged"].fire()),n[b]};this.userInvoiceData=function(t,e){return e=null==e||e,null!=t&&(s=t,e&&this.save()),s||[]};this.userShippingData=function(t,e){return e=null==e||e,t&&(f=t,e&&this.save()),f};this.vat=function(){var t=this.shipping(),t=this.goodsVat()+(t?t.vat(this.goodsWeight(),this.goodsPrice("included"==y.settings.vattype),this.getCountryCode()):0)+(c&&l[c]&&this.count()?this.paymentVat(c):0);return Math.max(0,t)};this.cartDiscount=function(){if("absolute"==d)return h;if("relative"!=d)return 0;if(!u)return this.goodsPrice(!0)*h;var t=this.goodsPrice(!0),e=this.shipping();return(t+(e?e.price(!0,this.goodsWeight(),t,this.getCountryCode()):0)+(c&&l[c]&&this.count()?this.paymentPrice(c,!0,!1):0))*h};this.fullPrice=function(t){var e=this.shipping();return this.goodsFullPrice(t)+(e?e.price(t,this.goodsWeight(),this.goodsPrice("included"==y.settings.vattype),this.getCountryCode()):0)+(c&&l[c]&&this.count()?this.paymentPrice(c,t,!0):0)};this.price=function(t,e){void 0===e&&(e=!1);var i=this.shipping(),t=this.goodsPrice(t)+(i?i.price(t,this.goodsWeight(),this.goodsPrice("included"==y.settings.vattype),this.getCountryCode()):0)+(c&&l[c]&&this.count()?this.paymentPrice(c,t,!1):0);return e?Math.max(0,t-this.cartDiscount()):Math.max(0,t)};this.paymentPrice=function(t,e,i){t=t||c;void 0===i&&(i=!1);var n,r,a,s,o="included"==y.settings.vattype;return t&&l[t]?l[t].price((n=o,r=this,a=i?r.goodsFullPrice(n):r.goodsPrice(n),s=r.shipping(),a+(s?s.price(n,r.goodsWeight(),r.goodsPrice("included"==y.settings.vattype),r.getCountryCode()):0)),e):0};this.paymentVat=function(t,e){t=t||c;void 0===e&&(e=!1);var i,n,r,a,s="included"==y.settings.vattype;return t&&l[t]?l[t].vat((i=s,n=this,r=e?n.goodsFullPrice(i):n.goodsPrice(i),a=n.shipping(),r+(a?a.price(i,n.goodsWeight(),n.goodsPrice("included"==y.settings.vattype),n.getCountryCode()):0))):0};this.goodsFullPrice=function(t){var e,i=0;for(e in p)p[e]&&(i+=p[e].fullPrice(t));return i};this.goodsPrice=function(t){var e,i=0;for(e in p)p[e]&&(i+=p[e].price(t));return i};this.goodsWeight=function(){var t,e=0;for(t in p)p[t]&&(e+=p[t].weight());return e};this.goodsVat=function(){return this.goodsPrice(!0)-this.goodsPrice(!1)};this.getCountryCode=function(){var t,e=this.userShippingData(),i=this.userInvoiceData();return!w.isEmptyObject(e)&&e.CountryCode?t=e.CountryCode.value:!w.isEmptyObject(i)&&i.CountryCode&&(t=i.CountryCode.value),t};this.coupon=function(i,n,r){var t,a=this;if(n=null==n||n,i){for(t in h=0,o=u=d=null,p)p[t].disableCoupon();if(k.utils.isOnline())w.ajax({url:k.settings.currentPath+y.settings.post_url+"?action=chkcpn&"+Math.round(1e4*Math.random()),type:"POST",async:!1,data:{coupon:i},dataType:"json",success:function(t){if(!1!==t)if("cart"==t.type)o=i,d=t.discount_type,void 0!==t.apply_on_shipping_and_payment&&(u=t.apply_on_shipping_and_payment),h=t.amount;else for(var e in p)-1!=w.inArray(p[e].id(),t.ids)&&(p[e].enableCoupon(i),o=i);n&&a.save();w.isFunction(r)&&r(o||"")}});else{if(!1!==y.settings.coupon&&i in y.settings.coupon){var e=new Date,s=!0,e=new Date(e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate(),e.getUTCHours(),e.getUTCMinutes(),e.getUTCSeconds());(s="start_date"in y.settings.coupon[i]&&y.settings.coupon[i].start_date>=e||"end_date"in y.settings.coupon[i]&&y.settings.coupon[i].end_date<=e?!1:s)&&(o=i,d=y.settings.coupon[o].type,h=y.settings.coupon[o].amount,void 0!==y.settings.coupon[o].apply_on_shipping_and_payment&&(u=y.settings.coupon[o].apply_on_shipping_and_payment))}else for(t in p)p[t].enableCoupon(i)&&(o=i);n&&this.save();w.isFunction(r)&&r(o||"")}g["x5cart.priceChanged"].fire()}return o||""};this.canApplyCoupon=function(){if(!1!==y.settings.coupon)return!0;for(var t in p)if(p[t].base().discount.coupon)return!0;return!1};this.canSetOrder=function(){var t={success:!1,message:""};return 0===this.count()?t.message=k.l10n.get("cart_err_emptycart"):0<this.allowedShippingsCount()&&null===this.shipping()?t.message=k.l10n.get("cart_err_shipping"):0<i&&null===this.payment()?t.message=k.l10n.get("cart_err_payment"):y.settings.minimumAmount>this.goodsPrice("included"==y.settings.vattype)?t.message=k.l10n.get("cart_err_minimum_price").replace(/\[PRICE\]/g,this.formatCurrency(y.settings.minimumAmount)):t.success=!0,t};this.minimumAmountReached=function(){var t={success:!0,message:""};return y.settings.minimumAmount>this.goodsPrice("included"==y.settings.vattype)&&(t.message=k.l10n.get("cart_err_minimum_price").replace(/\[PRICE\]/g,this.formatCurrency(y.settings.minimumAmount)),t.success=!1),t};this.isSetUserData=function(){function t(t,e){for(var i=y.form.fields,n=0;n<i.length;n++)if(i[n].mandatory&&(!e||i[n].shipping)&&(!(i[n].id in t)||!t[i[n].id].value.length))return;return 1}return w.isEmptyObject(this.userInvoiceData())?!1:!!t(this.userInvoiceData(),!1)&&!(!w.isEmptyObject(this.userShippingData())&&!t(this.userShippingData(),!0))};this.paymentHTML=function(){var t,e,i,n=this.payment()?this.payment().html():"",r=k.utils.htmlspecialchars,a=y.form.fields,s=this.userInvoiceData(),o=this.userShippingData(),c=!w.isEmptyObject(o),l=["Company","Name","LastName","Address1","Address2","ZipPostalCode","City","StateRegion","Country","CountryCode","Email","Phone","Mobile","Fax","VAT","CustomerID","Adverts","Note"],d,g,m,v,_,u;if(!n)return"";for(n=n.replace(/\[ORDER_NO\]/g,x).replace(/\[HESCAPE_ORDER_NO\]/g,r(x)).replace(/\[UESCAPE_ORDER_NO\]/g,C.encodeURIComponent(x)),d=0===this.allowedShippingsCount(),n=n.replace("[NO_SHIPPING]",d?"true":"false"),t=this.formatCurrency(this.price(!0,!0),"#.@@@"),n=(n=(n=n.replace(/\[PRICE\]/g,t).replace(/\[HESCAPE_PRICE\]/g,r(t)).replace(/\[UESCAPE_PRICE\]/g,C.encodeURIComponent(t))).replace(/\[SHIPPING_ID\]/g,b)).replace(/\[ORDER_ENC_DATA\]/g,this.getStringifiedEncodedData());i=n.match(/\[PRICE,\s*([0-9]+),\s*([\w#@\.,\[\]]+)\]/);)t=this.price(!0,!0)*parseInt(i[1],10),t=this.formatCurrency(t.toString(),i[2]),e=i[0].replace(/\[/g,"\\[").replace(/\]/g,"\\]").replace(/\(/g,"\\(").replace(/\)/g,"\\)").replace(/\./g,"\\."),n=n.replace(new RegExp(e,"g"),t);for(;i=n.match(/\[(H|U)ESCAPE_PRICE,\s*([0-9]+),\s*([\w#@\.,\[\]]+)\]/);)t=this.price(!0,!0)*parseInt(i[2],10),t=this.formatCurrency(t.toString(),i[3]),e=i[0].replace(/\[/g,"\\[").replace(/\]/g,"\\]").replace(/\(/g,"\\(").replace(/\)/g,"\\)").replace(/\./g,"\\."),n=n.replace(new RegExp(e,"g"),"U"==RegExp.$1?C.encodeURIComponent(t):r(t));for(u=0;u<l.length;u++)var h=l[u],p=h.toUpperCase(),f=s[h]?s[h].value:"",h=o[h]?o[h].value:"",n=n.replace(new RegExp("\\["+p+"\\]","g"),f).replace(new RegExp("\\[HESCAPE_"+p+"\\]","g"),r(f)).replace(new RegExp("\\[UESCAPE_"+p+"\\]","g"),C.encodeURIComponent(f)).replace(new RegExp("\\[UAESCAPE_"+p+"\\]","g"),C.encodeURIComponent(f).replace("'","%27")).replace(new RegExp("\\[SHIPPING_"+p+"\\]","g"),c?h:f).replace(new RegExp("\\[HESCAPE_SHIPPING_"+p+"\\]","g"),r(c?h:f)).replace(new RegExp("\\[UESCAPE_SHIPPING_"+p+"\\]","g"),c?C.encodeURIComponent(h):C.encodeURIComponent(f)).replace(new RegExp("\\[UAESCAPE_SHIPPING_"+p+"\\]","g"),c?C.encodeURIComponent(h):C.encodeURIComponent(f).replace("'","%27"));for(u=0;u<a.length;u++)a[u].custom&&(_=a[u].id,v=a[u].name,g=_.toUpperCase(),m=k.utils.escapeRegExp(v.toUpperCase()),v=s[_]?s[_].value:"",_=o[_]?o[_].value:"",n=n.replace(new RegExp("\\["+m+"\\]","g"),v).replace(new RegExp("\\[HESCAPE_"+m+"\\]","g"),r(v)).replace(new RegExp("\\[UESCAPE_"+m+"\\]","g"),C.encodeURIComponent(v)).replace(new RegExp("\\[UAESCAPE_"+m+"\\]","g"),C.encodeURIComponent(v).replace("'","%27")).replace(new RegExp("\\[SHIPPING_"+m+"\\]","g"),c?_:v).replace(new RegExp("\\[HESCAPE_SHIPPING_"+m+"\\]","g"),r(c?_:v)).replace(new RegExp("\\[UESCAPE_SHIPPING_"+m+"\\]","g"),c?C.encodeURIComponent(_):C.encodeURIComponent(v)).replace(new RegExp("\\[UAESCAPE_SHIPPING_"+m+"\\]","g"),c?C.encodeURIComponent(_):C.encodeURIComponent(v).replace("'","%27")).replace(new RegExp("\\["+g+"\\]","g"),v).replace(new RegExp("\\[HESCAPE_"+g+"\\]","g"),r(v)).replace(new RegExp("\\[UESCAPE_"+g+"\\]","g"),C.encodeURIComponent(v)).replace(new RegExp("\\[UAESCAPE_"+g+"\\]","g"),C.encodeURIComponent(v).replace("'","%27")).replace(new RegExp("\\[SHIPPING_"+g+"\\]","g"),c?_:v).replace(new RegExp("\\[HESCAPE_SHIPPING_"+g+"\\]","g"),r(c?_:v)).replace(new RegExp("\\[UESCAPE_SHIPPING_"+g+"\\]","g"),c?C.encodeURIComponent(_):C.encodeURIComponent(v)).replace(new RegExp("\\[UAESCAPE_SHIPPING_"+g+"\\]","g"),c?C.encodeURIComponent(_):C.encodeURIComponent(v).replace("'","%27")));return n.replace(/\[USE_SHIPPING_DATA\]/g,c)};this.setOrder=function(n){var t,e,i,r,a=this.canSetOrder(),s={},o={},c,l,d,u,h;if(!0===a.success)if(u={success:!0,orderNo:x=function(){var t=y.settings.order_no_format,e=new Date,i=e.getDate(),n=e.getMonth()+1,r=e.getFullYear().toString().substring(2);for(parseInt(i,10)<10&&(i="0"+i),parseInt(n,10)<10&&(n="0"+n),t=t.replace(/\[dd\]/g,i).replace(/\[mm\]/g,n).replace(/\[yy\]/g,r).replace(/\[yyyy\]/g,e.getFullYear());-1!=t.indexOf("[A-Z]");)t=t.replace("[A-Z]",String.fromCharCode(Math.round(25*Math.random()+65)));for(;-1!=t.indexOf("[a-z]");)t=t.replace("[a-z]",String.fromCharCode(Math.round(25*Math.random()+97)));for(;-1!=t.indexOf("[0-9]");)t=t.replace("[0-9]",Math.round(9*Math.random()));return t}(),shipping:this.shipping(),payment:this.payment(),cart:this.cart(),userInvoiceData:this.userInvoiceData(),userShippingData:this.userShippingData()},this.save(),k.utils.isOnline()){for(i in p)e=(t="options"in(r=p[i]).base()&&r.option()&&r.base().options[r.option()]?r.base().options[r.option()].name:null)&&"suboptions"in r.base().options[r.option()]?r.base().options[r.option()].suboptions[r.subOption()]:null,s[i]={id:r.base().id,name:r.base().name,description:r.base().description,option:t,suboption:e,rawSinglePrice:r.singlePrice(!1),rawSinglePricePlusVat:r.singlePrice(!0),rawSingleFullPrice:r.singleFullPrice(!1),rawSingleFullPricePlusVat:r.singleFullPrice(!0),rawPrice:r.price(!1),rawPricePlusVat:r.price(!0),rawFullPrice:r.fullPrice(!1),rawFullPricePlusVat:r.fullPrice(!0),rawSingleVat:r.singleVat(),rawVat:r.vat(),singlePrice:this.formatCurrency(r.singlePrice(!1)),singlePricePlusVat:this.formatCurrency(r.singlePrice(!0)),singleFullPrice:this.formatCurrency(r.singleFullPrice(!1)),singleFullPricePlusVat:this.formatCurrency(r.singleFullPrice(!0)),price:this.formatCurrency(r.price(!1)),pricePlusVat:this.formatCurrency(r.price(!0)),fullPrice:this.formatCurrency(r.fullPrice(!1)),fullPricePlusVat:this.formatCurrency(r.fullPrice(!0)),vat:this.formatCurrency(r.vat()),singleVat:this.formatCurrency(r.singleVat()),quantity:r.quantity()};o={orderNo:x,userInvoiceData:this.userInvoiceData(),userShippingData:this.userShippingData(),products:s,rawTotalPrice:this.price(!1),rawTotalPricePlusVat:this.price(!0),rawTotalVat:this.vat(),totalPrice:this.formatCurrency(this.price(!1)),totalPricePlusVat:this.formatCurrency(this.price(!0)),totalVat:this.formatCurrency(this.vat()),totalToPay:this.formatCurrency(this.price(!0,!0)),coupon:this.coupon(),rawCouponDiscount:this.cartDiscount(),couponDiscount:this.formatCurrency(this.cartDiscount()),currency:y.settings.currency_id};this.shipping()&&(c=this.goodsWeight(),h=this.getCountryCode(),l=this.goodsPrice(!1),d=this.goodsPrice(!0),o=w.extend(o,{shipping:{name:this.shipping().name(),description:this.shipping().description(),icon:this.shipping().base().image,email_text:this.shipping().email(),price:this.formatCurrency(this.shipping().price(!1,c,l,h)),pricePlusVat:this.formatCurrency(this.shipping().price(!0,c,d,h)),rawPrice:this.shipping().price(!1,c,"included"==y.vattype?d:l,h),rawPricePlusVat:this.shipping().price(!0,c,"included"==y.vattype?d:l,h),vat:this.formatCurrency(this.shipping().vat(c,"included"==y.vattype?d:l,h)),rawVat:this.shipping().vat(c,"included"==y.vattype?d:l,h)}}));this.payment()&&(o=w.extend(o,{payment:{id:this.payment().id(),name:this.payment().name(),description:this.payment().description(),icon:this.payment().base().image,price:this.formatCurrency(this.paymentPrice(null,!1)),pricePlusVat:this.formatCurrency(this.paymentPrice(null,!0)),rawPrice:this.paymentPrice(null,!1),rawPricePlusVat:this.paymentPrice(null,!0),email_text:this.payment().email(),vat:this.formatCurrency(this.paymentVat()),rawVat:this.paymentVat(),enc:this.payment().isDirectPayment()?this.getStringifiedEncodedData():""}}));h=y.settings.post_url;h+=-1==h.indexOf("?")?"?":"&";w.ajax({url:k.settings.currentPath+h+"action=sndrdr&"+Math.round(1e4*Math.random()),type:"POST",dataType:"json",data:{orderData:o},success:function(t){if(t&&"status"in t)if("ok"==t.status)x=t.orderNumber,u.orderNo=t.orderNumber;else{var e;for(var i in u.success=!1,t.productsData){e=t.productsData[i];break}u.message="invalid_product_quantity"==t.errorType?0<+e.availableQuantity?k.l10n.get("cart_product_quantitynotavailable","The selected quantity for [PRODUCTNAME] is not available.\nThe maximum quantity you can add to the cart is [MAXQUANTITY]").replace("[PRODUCTNAME]",e.name).replace("[MAXQUANTITY]",e.availableQuantity):k.l10n.get("cart_product_notavailable","The product [PRODUCTNAME] is not available now").replace("[PRODUCTNAME]",e.name):"Generic Error"}else u=w.extend(u,{success:!1,message:"Generic Error"});u.success&&C.imStorage.setItem(y.settings.lastOrderCookie,u.orderNo);w.isFunction(n)&&n(u)},error:function(){w.isFunction(n)&&n({success:!1,message:"Generic Error"})}})}else C.imStorage.setItem(y.settings.lastOrderCookie,x),w.isFunction(n)&&n(u);else w.isFunction(n)&&n({success:!1,message:a})};this.orderNumber=function(){return x};this.empty=function(t){t=null==t||t;o=x=null;p={};g["x5cart.priceChanged"].fire();g["x5cart.quantityChanged"].fire();t&&this.save()};this.getStringifiedEncodedData=function(){var t='{ "pData": '+this.getStringifiedOrderData()+', "fData": '+this.getStringifiedFormData()+" }";return"btoa"in C?encodeURIComponent(C.btoa(unescape(encodeURIComponent(t)),a)):encodeURIComponent(k.utils.encrypt2(t,a))};this.getStringifiedFormData=function(){return JSON.stringify({ivc:this.userInvoiceData(),shp:this.userShippingData()})};this.getStringifiedOrderData=function(){var t,e={crt:[],shp:null,pay:null,cpn:null,orderNo:null},i,n;for(t in b&&(e.shp=b),c&&(e.pay=c),o&&(e.cpn=o),x&&(e.orderNo=x),p)i=p[t],n={id:i.id(),qnt:i.quantity(),opt:null,sopt:null},i.option()&&(n.opt=i.option(),i.subOption()&&(n.sopt=i.subOption())),e.crt.push(n);return JSON.stringify(e)};this.save=function(){C.imStorage.setItem(y.settings.cartCookie,this.getStringifiedOrderData());C.imStorage.setItem(y.settings.formCookie,this.getStringifiedFormData())};this.load=function(t){var e,i,n,r,a;t=w.extend({pData:null,fData:null,quiet:!1},t);try{if(e=t.pData||JSON.parse(C.imStorage.getItem(y.settings.cartCookie,null)),i=t.fData||JSON.parse(C.imStorage.getItem(y.settings.formCookie,null)),e){if("crt"in e)for(p={},n=0;n<e.crt.length;n++)a=e.crt[n],y.products[a.id]&&(r=new k.cart.product(y.products[a.id],{quantity:+a.qnt,option:a.opt,suboption:a.sopt,quiet:t.quiet}),p[r.hash()]=r);"shp"in e&&y.shippings[e.shp]&&(b=e.shp);"pay"in e&&y.payments[e.pay]&&(c=e.pay);"cpn"in e?this.coupon(e.cpn,!1):o=null;x="orderNo"in e?e.orderNo:null;g["x5cart.priceChanged"].fire()}return i&&(s="ivc"in i?i.ivc:{},f="shp"in i?i.shp:{}),!0}catch(t){}return!1};this.bind=function(t,e){return t in g&&(g[t].has(e)||g[t].add(e)),this};this.unbind=function(t,e){return t in g&&(e?g[t].remove(e):g[t].empty()),this};this.restore=function(e){function t(t){if(!t)throw"Empty json string";if("object"!=typeof(i=JSON.parse(t)))throw"Wrong json type";return n.empty(!1),n.load(w.extend(i,{quiet:!0}))}var i,n=this;try{if("atob"in C)return t(i=decodeURIComponent(escape(C.atob(decodeURIComponent(e)))))}catch(t){"console"in C&&console.log("Safe encrypt "+t,"data:",e,i)}try{return t(i=k.utils.decrypt2(e,a))}catch(t){"console"in C&&console.log("Method 2 "+t,"data:",e,i)}try{return t(i=k.utils.decrypt(e,"fj293ur2/we02"))}catch(t){"console"in C&&console.log("Method 1 "+t,"data:",e,i)}return!1};this.getLastOrderNumber=function(){return C.imStorage.getItem(y.settings.lastOrderCookie)};this.clearLastOrderNumber=function(){C.imStorage.removeItem(y.settings.lastOrderCookie)};this.load({quiet:!0})}})}(_jq,x5engine,window),function(r,a){"use strict";r.extend(!0,a.cart,{product:function(t,e){var o=r.extend(!0,{id:null,id_user:null,category:null,description:"",price:0,images:[],link:null,vat:0,vattype:"none",physical_delivery:!0,digital_delivery:!1,weight:0,availabilityType:"fixed",staticAvailValue:"unknown",offlineAvailableItems:0,precision:5,options:{},discount:{type:"relative",amount:0,start_date:null,end_date:null,coupon:!1},quantityDiscounts:{},minQuantity:0},t),c=r.extend(!0,{quantity:0<o.minQuantity?o.minQuantity:1,quiet:!1,option:null,suboption:null,postUrl:"cart/x5cart.php",onProductCreated:null},e),l=!1,i,n;this.hash=function(){return a.utils.imHash(this.id()+(c.option||"")+(isNaN(c.suboption)?"":c.suboption))};this.base=function(){return r.extend(!0,o,{optionsLength:function(){var t,e=0;for(t in o.options)o.options.hasOwnProperty(t)&&e++;return e}})};this.quiet=function(t){return"boolean"==typeof t&&(c.quiet=t),c.quiet};this.id=function(){return o.id};this.setQuantity=function(e){var i=r.Deferred();return isNaN(e)||!/[0-9]+/.test(e)||parseInt(e,10)<1?(i.reject({name:"Product Quantity",message:a.l10n.get("cart_err_qty")}),i.promise()):o.minQuantity>e&&!c.quiet?(i.reject({name:"Product Quantity",message:a.l10n.get("cart_err_quantity").replace(/\[QUANTITY\]/g,o.min_quantity)}),i.promise()):"fixed"!=o.availabilityType||"notavailable"!=o.staticAvailValue||c.quiet?"dynamic"!=o.availabilityType||c.quiet?(c.quantity=e,i.resolve(e),i.promise()):(a.settings.islocal?o.offlineAvailableItems?e>o.offlineAvailableItems?i.reject({name:"Product Quantity",message:a.l10n.get("cart_product_quantitynotavailable","The selected quantity for [PRODUCTNAME] is not available.\nThe maximum quantity you can add to the cart is [MAXQUANTITY]").replace("[PRODUCTNAME]",o.id_user).replace("[MAXQUANTITY]",o.offlineAvailableItems)}):(c.quantity=e,i.resolve(e)):i.reject({name:"Product Quantity",message:a.l10n.get("cart_product_notavailable","The product [PRODUCTNAME] is not available now").replace("[PRODUCTNAME]",o.id_user)}):r.ajax({url:a.settings.currentPath+c.postUrl+"?action=productstatus&rand="+Math.round(1e5*Math.random()),type:"POST",data:{product_id:o.id},dataType:"text"}).done(function(t){t*=1;isNaN(t)||(t?t<e?i.reject({name:"Product Quantity",message:a.l10n.get("cart_product_quantitynotavailable","The selected quantity for [PRODUCTNAME] is not available.\nThe maximum quantity you can add to the cart is [MAXQUANTITY]").replace("[PRODUCTNAME]",o.id_user).replace("[MAXQUANTITY]",t)}):(c.quantity=e,i.resolve(e)):i.reject({name:"Product Quantity",message:a.l10n.get("cart_product_notavailable","The product [PRODUCTNAME] is not available now").replace("[PRODUCTNAME]",o.id_user)}))}).fail(function(){i.reject({name:"Generic Error",message:"Generic error"})}),i):(i.reject({name:"Product Quantity",message:a.l10n.get("cart_product_notavailable","The product [PRODUCTNAME] is not available now").replace("[PRODUCTNAME]",o.id_user)}),i)};this.quantity=function(){return c.quantity};this.option=function(t){return t&&t in o.options&&(c.option=t,"suboptions"in o.options[t]&&null===c.suboption&&(c.suboption=0)),c.option};this.subOption=function(t){return t&&c.option in o.options&&t in o.options[c.option].suboptions&&(c.suboption=t),c.suboption};this.discount=function(t){var e,i,n=0,r=o.discount,a=0,s=new Date,s=new Date(s.getUTCFullYear(),s.getUTCMonth(),s.getUTCDate(),s.getUTCHours(),s.getUTCMinutes(),s.getUTCSeconds());if(r.start_date&&r.start_date>s||r.end_date&&r.end_date<s)return 0;if(!r.coupon||r.coupon&&l)switch(r.type){case"absolute":n+=r.amount;break;case"relative":n+=this.singleFullPrice(t)*r.amount}for(i in o.quantityDiscounts)c.quantity>=parseFloat(i,10)&&a<o.quantityDiscounts[i]&&(e=i,a=o.quantityDiscounts[e]);return a&&(n+=(this.singleFullPrice(t)-n)*a),n};this.singleFullPrice=function(t){var e=o.price,i=o.options[this.option()];return i&&"pricevar"in i&&(e+=i.pricevar),+(e*(t?1+o.vat:1)).toFixed(o.precision)};this.singlePrice=function(t){var e=0;switch(o.vattype){case"excluded":e=(this.singleFullPrice(!1)-this.discount(!1))*(t?1+o.vat:1);break;case"included":e=(this.singleFullPrice(!0)-this.discount(!0))/(t?1:1+o.vat);break;default:e=this.singleFullPrice(!1)-this.discount(!1)}return Math.max(0,e)};this.fullPrice=function(t){return this.singleFullPrice(t)*c.quantity};this.price=function(t){return this.singlePrice(t)*c.quantity};this.singleVat=function(){return this.singlePrice(!1)*o.vat};this.fullVat=function(){return this.fullPrice(!1)*o.vat};this.vat=function(){return this.price(!1)*o.vat};this.weight=function(){var t=o.weight,e=o.options[this.option()];return e&&"weightvar"in e&&(t+=e.weightvar),t*c.quantity};this.enableCoupon=function(t){var e=new Date,i=a.utils.isOnline(),e=new Date(e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate(),e.getUTCHours(),e.getUTCMinutes(),e.getUTCSeconds());return(!i||!1!==o.discount.coupon)&&!(!i&&o.discount.coupon!=t)&&!(o.discount.start_date&&o.discount.start_date>e)&&!(o.discount.end_date&&o.discount.end_date<e)&&(l=!0)};this.disableCoupon=function(){return!(l=!1)};i=this;n=r.Deferred();this.setQuantity(c.quantity).done(function(){if(null===c.option)for(var t in o.options){i.option(t);break}else i.option(c.option);n.resolve()}).fail(function(t){n.reject(t)});r.isFunction(c.onProductCreated)&&c.onProductCreated(n,i)}})}(_jq,x5engine),function(t,e){"use strict";t.extend(!0,e.cart,{shipping:function(l){l=t.extend(!0,{id:null,name:"",description:"",precision:5,vat:0,type:"FIXED",price:0,countryPrice:0,email:"",image:""},l);this.base=function(){return l};this.id=function(){return l.id};this.name=function(){return l.name};this.description=function(){return l.description};this.image=function(){return l.image};this.price=function(t,e,i,n){var r,a,s=0,o=0,c=0;switch(l.type){case"WEIGHT":for(r in l.price)(a=parseFloat(r,10))<=e&&(!s||a>parseFloat(s,10))&&(s=r,isNaN(l.price[s])||(o=l.price[s]));c=o;break;case"AMOUNT":for(r in l.price)(a=parseFloat(r,10))<=i&&(!s||a>parseFloat(s,10))&&(s=r,isNaN(l.price[s])||(o=l.price[s]));c=o;console.log(s,o);break;default:c=l.price}return c=n?this.countryPrice(n)+c:c,c*=t?1+l.vat:1,+Math.max(0,c).toFixed(l.precision)};this.vat=function(t,e,i){return l.vat*this.price(!1,t,e,i)};this.email=function(){var t=l.email;return null==t||""===t?"":t};this.countryPrice=function(t){if(!t)return 0;var e=x5CartData.shippings[this.id()].additionalCountryPrices;return e&&e[t]?e[t]:0}}})}(_jq,x5engine),function(t,e){"use strict";t.extend(!0,e.cart,{payment:function(n){n=t.extend(!0,{id:null,name:"",description:"",image:"",email:"",precision:5,vat:0,vattype:"none",pricetype:"fixed",price:0,html:"",emailHtml:"",enableAfterPaymentEmail:!1},n);this.base=function(){return n};this.id=function(){return n.id};this.price=function(t,e){if("fixed"==n.pricetype)return+(n.price+(e?this.vat(t):0)).toFixed(n.precision);var i;if("percentual"==n.pricetype)switch(n.vattype){case"included":return e?+(n.price*t).toFixed(n.precision):+(n.price*t/(1+n.vat)).toFixed(n.precision);case"excluded":return i=n.price*t,e&&(i*=1+n.vat),+i.toFixed(n.precision);default:return+(n.price*t).toFixed(n.precision)}return 0};this.vat=function(t){return n.vat*this.price(t,!1)};this.name=function(){return n.name};this.description=function(){return n.description};this.html=function(){var t=n.html;return t||""};this.isDirectPayment=function(){return!!n.html};this.emailHtml=function(){var t=n.emailHtml;return t||""};this.email=function(){var t=n.email;return null==t||""===t?"":t};this.enableAfterPaymentEmail=function(){return n.enableAfterPaymentEmail};this.image=function(){return n.image}}})}(_jq,x5engine),function(z,U,H){"use strict";z.extend(!0,U.cart.ui,{getWindow:function(){try{return H.top.location.href,H.top}catch(t){return H}},clickButtonAddToCart:function(t,e){t&&0<t?(z.imCookie("x5CartContinue",U.cart.ui.getWindow().location.href,{path:"/"}),U.utils.location(e)):z("div#add-to-cart.splashbox").find(".close").trigger("click")},show:function(){function s(){1<U.settings.breakPoints.length&&"function"==typeof checkStyle&&checkStyle()}function b(){var t=z("#imContent");z("#imCartContainer img").one("load",function(){t.trigger("change")});t.trigger("change")}function o(){f=g=e=y=null}function c(t,e){var i,n=P.shipping(),r="",a;if(e?(i={})[n.id()]=n:i=P.allowedShippings(),P.allowedShippingsCount()){for(a in r='<div><table cellpadding="0" cellspacing="0" border="0" class="cart-table shipping-table"><thead><tr><td class="first-column">'+I("cart_shipping")+'<\/td><td class="second-column mobile-hide">'+I("cart_price")+"<\/td><\/tr><\/thead><tbody>",i){var s=""!=i[a].name()?i[a].name():"&nbsp;",o=""!=i[a].description()?i[a].description():"&nbsp;",c=i[a].price(v,P.goodsWeight(),P.goodsPrice(v),P.getCountryCode());r+="<tr>";r+='<td class="first-column">';r+='<div class="ship-pay-all-cont">';r+='<div class="ship-pay-cont">';t||(r+='<div class="ship-pay-chk-cont"><input type="radio" id="chk-shipping-'+a+'" name="shipping-method" data-id="'+a+'"'+(n&&n.id()==a?" checked":"")+"><\/div>");r+=i[a].image()?'<div class="ship-pay-image-cont"><img class="ship-pay-image" src="../'+i[a].image()+'" alt="'+s+'" /><\/div>':'<div class="ship-pay-image-cont" style="width: 1px; min-width: 1px;"><\/div>';r+='<div class="ship-pay-name-desc-cont">';r+='<label for="chk-shipping-'+a+'"><b>'+s+"<\/b><p>"+o+"<\/p><\/label>";r+='<div class="price-mobile mobile-show field-space-reverse text-right">';r+='<div style="font-size: 1.2em;">'+P.formatCurrency(c)+"<\/div>";"none"!=m&&0<c&&(r+='<div style="font-size: 0.8em;">',r+="included"==m?I("cart_vat_included","VAT (included)")+": ":I("cart_vat_excluded","VAT (excluded)")+": ",r+=P.formatCurrency(i[a].vat(P.goodsWeight(),P.goodsPrice(v),P.getCountryCode()))+"<\/div>");r+="<\/div>";r+="<\/div>";r+="<\/div>";r+="<\/div><\/td>";r+='<td class="text-right mobile-hide second-column">';r+='<div class="col-price-ship-pay">';r+='<div style="font-size: 1.2em;">'+P.formatCurrency(c)+"<\/div>";"none"!=m&&0<c&&(r+='<div style="font-size: 0.8em;">',r+="included"==m?I("cart_vat_included","VAT (included)")+": ":I("cart_vat_excluded","VAT (excluded)")+": ",r+=P.formatCurrency(i[a].vat(P.goodsWeight(),P.goodsPrice(v),P.getCountryCode()))+"<\/div>");r+="<\/div>";r+="<\/td>";r+="<\/tr>"}(r=z(r+="<\/tbody><\/table><\/div>")).find("tbody > tr:odd > td").not(".invisible").addClass("odd");r.find("tr").each(function(){var t=z(this).find("td").not(".invisible");t.first().addClass("first-x");t.last().addClass("last-x")});r.find("tr").last().find("td").not(".invisible").addClass("last-y");r.find("input[type=radio]").on("click",function(){var t=z(this).attr("data-id");t&&(P.shipping(t),N(),A(I("cart_gonext"),P))});null===f?S.append(r):f.replaceWith(r);f=r}else f&&f.remove()}function x(t){return q[t.toLowerCase()]||q[document.documentElement.lang.toLowerCase()]}function a(d){var u,h,p,f,g,m,v=z('<div class="user-form"/>'),_=z('<div class="user-form"/>'),y=P.form().fields;P.canSetOrder().success?(o(),P.updateUserData().fail(function(){P.userInvoiceData([]);P.userShippingData([]);H.top.location="../"+P.settings().loginpage+"?landing_page="+encodeURIComponent(P.settings().indexpage+"?#step1")+"&redirect_after_registration=true&cart=true"}).done(function(){function t(r,a,s){r.on("change","select",function(){var t,e,i,n;for(g=0;g<y.length;g++)if(!s||y[g].shipping)if(y[g].isVisible(a)){if(!r.find("[data-uuid="+a+y[g].uuid+"]").length){for(t=0,e=0;e<y.length&&e<g;e++)y[e].isVisible(a)&&(!s||y[g].shipping)&&t++;i=r.find("select, input").eq(t).closest(".field-item").hasClass("first-column");n=r.find("select, input").eq(t).attr("id")==a+y[g].id;i&&!n||0==r.find("select, input").eq(t).length?(t--,r.find("select, input").eq(t).closest(".field-item").after(l(y[g],a,s,!i))):n?r.find("select, input").eq(t).closest(".field-item").before(l(y[g],a,s,i)):r.find("select, input").eq(t).closest(".field-item").before(l(y[g],a,s,!i))}}else r.find("[data-uuid="+a+y[g].uuid+"]").closest(".field-item").remove()}).find("select:first").trigger("change")}var o,c,e,l,i,n;for(p=P.userInvoiceData(),f=P.userShippingData(),z(".imTip").remove(),U.utils.scrollTo(0),k.attr("data-step","1"),C.empty(),S.empty(),U.cart.ui.steps.active&&(z("#im-cart-steps-banner").remove(),w.prepend(U.cart.ui.getStepStyleDom(0))),C.append('<h2 id="imPgTitle" class="imTitleMargin">'+I("cart_step1")+"<\/h2>").append("<p>"+I("cart_step1_descr").replace("[FIELD]",I("cart_step1_gonext"))+"<\/p>"),v.append('<div class="field-row"><div class="field-item caption">'+I("cart_vat_address")+"<\/div><\/div>"),l=function(t,e,i,n){var r="",a=i?D.formAutocomplete&&f[t.id]?f[t.id].value:t.value||"":D.formAutocomplete&&p[t.id]?p[t.id].value:t.value||"",s;switch(t.type){case"TextArea":r='<textarea id="'+e+t.id+'" class="'+t.filter+'" data-uuid="'+e+t.uuid+'">'+a+"<\/textarea>";break;case"DropDownList":for("Country"!==t.id||a&&!Array.isArray(a)||(a=x(navigator.language||navigator.userLanguage)),r='<select id="'+e+t.id+'" class="'+t.filter+'" data-uuid="'+e+t.uuid+'">',c=0;c<t.value.length;c++)o=t.value[c].text==a||t.value[c].value==a?" selected":"",r+='<option value="'+t.value[c].value+'"'+o+">"+t.value[c].text+"<\/option>";r+="<\/select>";break;case"Attachment":r='<input type="File" id="'+e+t.id+'" value="'+a+'" class="'+t.filter+'" data-uuid="'+e+t.uuid+'">';break;case"Telephone":r='<input type="tel" id="'+e+t.id+'" value="'+a+'" class="'+t.filter+'" data-uuid="'+e+t.uuid+'">';break;default:s=!1;"Email"==t.id&&1===D.registerUsers&&(U.utils.isValidEmail(a)?s=!0:a="");r="<input "+(s?"readonly":"")+' type="'+t.type+'" id="'+e+t.id+'" value="'+a+'" class="'+t.filter+'" data-uuid="'+e+t.uuid+'">'}return i="field-item",i='<div class="'+(i+=n?" first-column":" second-column")+'">',i+('<div><label for="'+e+t.id+'">'+t.name+(t.mandatory?"*":"")+" <\/label><\/div><div>"+r+"<\/div><\/div>")},i="",g=0;g<y.length;g++)m=y[g],e=0<g?y[g-1].id:"","TextArea"==m.type&&0<g&&""!=i&&(i+="<\/div>"),g%2!=1&&e!=m.id||"TextArea"==m.type?(i+='<div class="field-row">',i+=l(m,"",!1,!0)):i+=l(m,"",!1,!1),(g%2==1&&e!=m.id||g==y.length-1||"TextArea"==m.type)&&(v.append(i+="<\/div>"),i="");if(S.append(v.css("margin","0 auto")),t(v,"",!1),n=v.find("input").first(),n.length&&0===n.val().length&&n.focus(),D.showShipmentFields){var r=!1,a=0,s=!1,i="";for(_.append('<div class="field-row"><div class="field-item caption">'+I("cart_shipping_address")+"<\/div><\/div>"),g=0;g<y.length;g++)m=y[g],e=0<g?y[g-1].id:"",m.shipping&&(r=r||!!f[m.id],a%2==0&&e!=m.id?(i+='<div class="field-row">',i+=l(m,"shipping-",s=!0,!0)):i+=l(m,"shipping-",!0,!1),a%2==1&&e!=m.id&&(s=!1,_.append(i+"<\/div>"),i=""),a++);s&&_.append(i+"<\/div>");S.append(z('<div id="shippingForm" />').append(z('<input type="checkbox" id="chk-shipping"'+(r?" checked":"")+" />").on("change",function(){z(this).prop("checked")?z("#shippingFormWrapper").slideDown(250,function(){z("#imContent").triggerHandler("change")}):z("#shippingFormWrapper").slideUp(250,function(){z("#imContent").triggerHandler("change")})})).append(z('<label for="chk-shipping">'+I("cart_shipping_option")+"<\/label>"))).append(_);t(_,"shipping-",!0);_.css("margin","20px auto").wrap('<div id="shippingFormWrapper">');r||z("#shippingFormWrapper").slideUp(0)}u=z('<div class="btn-action btn-next"><input type="button" class="btn-go-next" value="'+I("cart_step1_gonext",I("cart_gonext"))+'" /><\/div>').on("click",function(){var t,e,i,n,r=U.imForm.validate,a={type:D.formValidation,showAll:!0,position:"right"};for(p={},g=0;g<y.length;g++)"Country"==y[g].id?(p[y[g].id+"Code"]={label:y[g].name+" (ISO 3166/A2)",value:z("#"+y[g].id).val().toUpperCase()},p[y[g].id]={label:y[g].name,value:z("#"+y[g].id+" :selected").text()}):"Attachment"==y[g].id?(t=y[g].id,e=y[g].name,(i=z("#Attachment")[0].files[0])?((n=new FormData).append("attachment",i),O=function(e,i){var t=D.post_url;return t+=-1==t.indexOf("?")?"?":"&",p[e]={label:i,value:z("#"+y[g].id).val().replace(/^.*[\\\/]/,"")},U.utils.isOnline()?z.ajax({url:U.settings.currentPath+t+"action=uploadattachment&"+Math.round(1e4*Math.random()),type:"POST",dataType:"json",data:n,contentType:!1,cache:!1,processData:!1}).done(function(t){"ok"==t.status&&(p[e]={label:i,value:t.fileName})}):z.Deferred().resolve().promise()}(t,e)):p[y[g].id]={label:y[g].name,value:""}):p[y[g].id]={label:y[g].name,value:U.utils.htmlspecialchars(z("#"+y[g].id).val())};if(P.userInvoiceData(p),f={},D.showShipmentFields&&z("#chk-shipping").prop("checked"))for(g=0;g<y.length;g++)y[g].shipping&&("Country"==y[g].id?(f[y[g].id+"Code"]={label:y[g].name+" (ISO 3166/A2)",value:z("#shipping-"+y[g].id).val().toUpperCase()},f[y[g].id]={label:y[g].name,value:z("#shipping-"+y[g].id+" :selected").text()}):f[y[g].id]={label:y[g].name,value:U.utils.htmlspecialchars(z("#shipping-"+y[g].id).val())});P.userShippingData(f);r(v,a)&&(!D.showShipmentFields||!z("#chk-shipping").prop("checked")||z("#chk-shipping").prop("checked")&&r(_,a))&&(H.top.location.hash="#step2")});h=z('<div class="btn-action"><input type="button" class="btn-go-back" value="'+I("cart_goback","Back")+'" /><\/div>').on("click",function(){H.top.location.hash=""});S.append(z("<div />").addClass("buttons-container").append(h).append(u));b();d&&U.utils.scrollTo("#"+d)})):T.location.hash=""}function l(){var t,a=null,e=(P.cart(),P.payment()),i=P.shipping();P.canSetOrder().success?P.isSetUserData()?(o(),z(".imTip").remove(),U.utils.scrollTo(0),k.attr("data-step","3"),C.empty(),S.empty(),U.cart.ui.steps.active&&(z("#im-cart-steps-banner").remove(),w.prepend(U.cart.ui.getStepStyleDom(2))),C.append('<h2 id="imPgTitle" class="imTitleMargin">'+I("cart_step3")+"<\/h2>").append("<p>"+I("cart_step3_descr").replace("[FIELD]",I("cart_step3_gonext"))+"<\/p>"),t='<div class="invoice-shipping-container">',t+=R(),t+=E(),S.append(t+="<\/div>"),i&&c(!0,!0),e&&N(!0,!0),M(!0,!0),r(S),e=z('<div class="btn-action btn-next"><input type="button" class="btn-go-next" value="'+I("cart_step3_gonext",I("cart_gonext"))+'" /><\/div>').on("click",function(t,e){var i=P.canSetOrder(),n=z(this),r=n.attr("value"),e=null!=e?e:z("#agreement-text");if(P.form().acceptAgreement&&!U.imForm.validate(e))return!1;!0!==i.success?H.alert(i.message):(n.attr("value",I("cart_order_process")).off("click"),a.off("click").hide(),O.done(function(t){void 0===t||"ok"==t.status?P.setOrder(function(t){t.success?T.location.hash="#step4":(n.attr("value",r),H.alert(t.message))}):H.alert(I("cart_err_attachment_generic"))}).fail(function(){H.alert(I("cart_err_attachment_generic"))}))}),a=z('<div class="btn-action"><input type="button" class="btn-go-back" value="'+I("cart_step3_goback",I("cart_goback"))+'" /><\/div>').on("click",function(){0==P.allowedShippingsCount()&&0==P.paymentsCount()?H.top.location.hash="#step1":T.location.hash="#step2"}),S.append(z('<div style="margin-top: 2em;" />').addClass("buttons-container").append(a).append(e)),A(I("cart_step3_gonext"),P),b(),s()):T.location.hash="#step1":T.location.hash=""}function d(t){t=void 0===t||t;var e=P.payment(),i=P.paymentHTML();if(o(),t){if(!P.canSetOrder().success)return T.location.hash="",0;if(!P.isSetUserData())return T.location.hash="#step1",0;if(!P.orderNumber())return T.location.hash="#step3",0}z(".imTip").remove();U.utils.scrollTo(0);k.attr("data-step","4");S.empty();C.empty();U.cart.ui.steps.active&&(z("#im-cart-steps-banner").remove(),w.prepend(U.cart.ui.getStepStyleDom(3)));C.append('<h2 id="imPgTitle" class="imTitleMargin">'+I("cart_step4")+"<\/h2>").append("<p>"+I("cart_step4_descr")+"<\/p>");S.append('<div class="summary">  <div class="ord-number">    <div class="ord-number-col col">'+I("cart_order_no")+':<\/div>    <div class="ord-number-val">'+P.orderNumber()+'<\/div>  <\/div>  <div class="ord-date">    <div class="ord-date-col col">'+I("cart_order_date")+':<\/div>    <div class="ord-date-val">'+U.utils.getCurrentDate()+'<\/div>  <\/div>  <div class="ord-total">    <div class="ord-total-col col">'+I("cart_total")+':<\/div>    <div class="ord-total-val">'+P.formatCurrency(P.price(!0,!0)).replace(/\s/g,"&nbsp;")+"<\/div>  <\/div><\/div>");S.append('<hr class="summary-line">');e&&(t='<div class="payment-container">',e.image()&&""!=e.image()&&(t+='<div class="payment-image-cont"><img class="payment-image" src="../'+e.image()+'" alt="'+e.name()+'" /><\/div>'),t+='<div class="payment-data-cont"><p><b>'+e.name()+"<\/b><br />"+e.email()+"<\/p><\/div>",t+="<\/div>",""!==i&&(t+='<div id="payment-html">'+i+"<\/div>"),S.append(t));U.utils.isOnline()||U.utils.showOfflineMessage(I("cart_err_offline_email").replace(/\[MAIL\]/g,P.userInvoiceData().Email.value));P.empty(!0);b()}var u=z("#cart-loading"),w=z("#imCartContainer"),k=z("#cart-container"),C=z("#cart-header"),S=z("#cart-content"),h=z("#cart-sidebar"),P=U.cart.manager,T=U.cart.ui.getWindow(),D=P.settings(),m=D.vattype,v="included"==m,_=U.cart.ui.showProductIcons,O=z.Deferred().resolve().promise(),I=U.l10n.get,p='<div id="cart-empty"><h2 style="text-align: center; line-height: 1.5; font-size: 28px; font-weight: 400; text-rendering: optimizeLegibility;">'+I("cart_err_emptycart","The cart is empty")+'<\/h2><p style="text-align: center; margin-top: 10px; line-height: 1.2;">'+I("cart_err_emptycart_desc",'To add items to your cart, browse the site and, when you find an item that interests you, click on "Add to cart".')+'<\/p><div style="text-align: center; margin-top: 20px;"><input type="button" value="'+I("cart_continue_shopping","Continue shopping")+'" /><\/div><\/div>',y=null,e=null,f=null,g=null,i=function(t){var e=t.count(!0),i=e<2?I("cart_article","product"):I("cart_articles","products"),n="",r="included"===m;return n+='<div class="cart-total big-font"><span class="price-desc">'+e+" "+i+"<\/span><span>"+t.formatCurrency(t.goodsPrice(r)).replace(/\s/g,"&nbsp;")+"<\/span><\/div>","none"!==m&&(n+='<div class="cart-vat"><span class="price-desc">'+(r?I("cart_vat_included","VAT (Included)"):I("cart_vat_excluded","VAT (Excluded)"))+"<\/span><span>"+t.formatCurrency(t.goodsVat()).replace(/\s/g,"&nbsp;")+"<\/span><\/div>"),n},A=function(t,e){e='<table class="cart-table sidebar" cellpadding="0" cellspacing="0" border="0" style="margin-bottom: 0;"><thead><tr><td class="first-x last-x">'+I("cart_order_summary","Order Summary")+'<\/td><\/tr><\/thead><tbody><tr><td class="first-x last-x last-y">'+n(t,e)+"<\/td><\/tr><\/tbody><\/table>";e=z(e);h.html("").append(e);z("#cart-sidebar input.btn-proceed-to-order").on("click",function(){3==parseInt(z("#cart-container").attr("data-step"))?z("#cart-container .btn-action.btn-next").find("[type=button]").trigger("click",[z("#agreement-text-sidebar")]):z("#cart-container .btn-action.btn-next").find("[type=button]").trigger("click")});r(z("#cart-sidebar .agreement-cont"),!0)},n=function(t,e){var i="",n=e.count(!0),r=n<2?I("cart_article","product"):I("cart_articles","products");i+='<div class="provisional-amount"><p style="line-height: 1.5;"'+(""!==I("cart_provisional_amount_info")?" onmouseover=\"x5engine.imTip.Show(this, {target: $(this).find('img'), text: '"+I("cart_provisional_amount_info").replace("'","&amp;apos;").replace('"',"&amp;quot;")+"'})\"":"")+">"+I("cart_provisional_amount","Provisional amount")+(""!==I("cart_provisional_amount_info")?' <img alt="" width="16" height="16" src="../res/info.gif" style="vertical-align: text-bottom;" />':"")+"<\/p><\/div>";var a="included"===m,s=e.goodsPrice(a),o=null!=e.payment()?e.paymentPrice(e.payment().id(),a,!1):void 0,a=null!=e.shipping()?e.shipping().price(a,e.goodsWeight(),e.goodsPrice(v),e.getCountryCode()):void 0,c=e.vat(),l=e.price(!0,!0);switch(i+='<div class="cart-total s-flex"><span class="s-cell-desc ">'+n+" "+r+'<\/span><span class="s-cell right">'+e.formatCurrency(s).replace(/\s/g,"&nbsp;")+"<\/span><\/div>",null!=a&&(i+='<div class="cart-total s-flex"><span class="s-cell-desc ">'+I("cart_shipping")+'<\/span><span class="s-cell right">'+e.formatCurrency(a).replace(/\s/g,"&nbsp;")+"<\/span><\/div>"),null!=o&&(i+='<div class="cart-total s-flex"><span class="s-cell-desc ">'+I("cart_payment")+'<\/span><span class="s-cell right">'+e.formatCurrency(o).replace(/\s/g,"&nbsp;")+"<\/span><\/div>"),""!==e.coupon()&&(i+=0<e.cartDiscount()?'<div class="cart_coupon_code s-flex"><span class="s-cell-desc">'+I("cart_coupon_code","Coupon Code")+" ("+e.coupon()+')<\/span><span class="s-cell right">-'+e.formatCurrency(e.cartDiscount()).replace(/\s/g,"&nbsp;")+"<\/span><\/div>":'<div class="cart_coupon_code s-flex"><span class="s-cell-desc">'+I("cart_coupon_code","Coupon Code")+'<\/span><span class="s-cell right">'+e.coupon().replace(/\s/g,"&nbsp;")+"<\/span><\/div>"),m){case"excluded":i+='<div class="cart-vat s-flex"><span class="s-cell">'+I("cart_vat")+'<\/span><span class="s-cell right">'+e.formatCurrency(c).replace(/\s/g,"&nbsp;")+"<\/span><\/div>";i+='<div class="cart-total s-flex big-font"><span class="s-cell">'+I("cart_total")+'<\/span><span class="s-cell right">'+e.formatCurrency(l).replace(/\s/g,"&nbsp;")+"<\/span><\/div>";break;case"included":i+='<div class="cart-total s-flex big-font"><span class="s-cell-desc">'+I("cart_total")+'<\/span><span class="s-cell right">'+e.formatCurrency(l).replace(/\s/g,"&nbsp;")+"<\/span><\/div>";i+='<div class="cart-vat-included s-flex"><span class="s-cell-desc">&nbsp;<\/span><span class="s-cell right vat">'+I("cart_vat_included","VAT (Included)")+": "+e.formatCurrency(c).replace(/\s/g,"&nbsp;")+"<\/span><\/div>";break;case"none":i+='<div class="cart-total s-flex big-font"><span class="s-cell">'+I("cart_total")+'<\/span><span class="s-cell right">'+e.formatCurrency(l).replace(/\s/g,"&nbsp;")+"<\/span><\/div>"}return i+='<div class="agreement-cont"><\/div>',i+('<div class="s-flex proceed-to-order"><input type="button" class="btn-proceed-to-order" value="'+(t=null!=t?t:I("cart_proceedtoorder"))+'" /><\/div>')},M=function(t,e){var i,n=P.cart(),r=!1,a=!1,s="",o="",c=I("cart_article").charAt(0).toUpperCase()+I("cart_article").slice(1),l=!1,p,f,g;for(s in n)if(null!==n[s].option()){r=!0;break}for(s in o+='<div><table class="cart-table products-table" cellpadding="0" cellspacing="0" border="0" style="margin-bottom: 0;"><thead><tr><td class="first-column">'+c+(r?" / "+I("cart_opt"):"")+'<\/td><td class="second-column mobile-hide">'+I("cart_price")+"<\/td><\/tr><\/thead><tbody>",n)if(i=n[s]){var d,u=i.base().options,a=!1,h=i.singlePrice(v);if(o+="<tr>",o+='<td style="position: relative;" class="first-column">',o+='<div class="product-col-image-details">',o+=_&&i.base().media.length?'<div class="product-image-cont'+(e?" image-small":"")+'"><img class="product-image" src="../'+("video"===(d=i.base().media[0]).type||"youtube"===d.type||"vimeo"===d.type?"res/video_thumb.svg":U.utils.isNullOrEmpty(d.url)?x5CartData.settings.noPreviewImage:d.url)+'" alt="'+i.base().name+'" /><\/div>':'<div class="product-image-cont" style="width: 1px; min-width: 1px;"><\/div>',o+='<div class="product-info">',o+='<div class="product-name product-data-info">'+i.base().name+"<\/div>",""!=i.base().description&&(o+='<div class="product-description product-data-info field-space">'+i.base().description,o+='<div class="product-description-fade"><\/div>',o+="<\/div>"),r&&0<i.base().optionsLength()){if(l=!0,t)o+='<div class="product-options product-data-info field-space">',o+='<span class="lbl-variant">'+u[i.option()].name+"<\/span>",a="object"==typeof u[i.option()].suboptions;else{for(p in o+='<div class="product-options product-data-info">',o+='<select data-type="option" data-hash="'+s+'" class="field-space" style="margin-right: 5px;">',u)o+='<option value="'+p+'"'+(i.option()==p?" selected":"")+">"+u[p].name+"<\/option>",i.option()==p&&(a="object"==typeof i.base().options[p].suboptions);o+="<\/select>"}if(a)if(f=i.base().options[i.option()].suboptions,t)o+=' | <span class="lbl-sub-variant">'+u[i.option()].suboptions[i.subOption()]+"<\/span>";else{for(o+='<select data-type="suboption" data-hash="'+s+'" class="field-space">',g=0;g<f.length;g++)o+='<option value="'+g+'"'+(g==i.subOption()?" selected":"")+">"+f[g]+"<\/option>";o+="<\/select>"}o+="<\/div>"}else o+='<div class="product-options product-data-info field-space"><select data-type="suboption" style="visibility: hidden;"><option value="-1"><\/option><\/select><\/div>';o+='<div class="price-mobile mobile-show field-space">';0<i.discount()&&(o+='<span style="text-decoration: line-through; margin-right: 0.5em">'+P.formatCurrency(i.singleFullPrice(v)).replace(/\s/g,"&nbsp;")+"<\/span>");o+='<span style="font-size: 1.2em;">'+P.formatCurrency(h).replace(/\s/g,"&nbsp;")+"<\/span>";"none"!=m&&0<h&&("included"==m?o+='<div style="font-size: 0.8em;">'+I("cart_vat_included","VAT (included)")+": "+P.formatCurrency(i.vat()/i.quantity()).replace(/\s/g,"&nbsp;")+"<\/div>":"excluded"==m&&(o+='<div style="font-size: 0.8em;">'+I("cart_vat_excluded","VAT (excluded)")+": "+P.formatCurrency(i.vat()/i.quantity()).replace(/\s/g,"&nbsp;")+"<\/div>"));o+="<\/div>";o+='<div class="product-quantity product-data-info">';o+='<span class="product-quantity-desc">'+I("cart_qty")+":  <\/span>";t?o+="<span>"+i.quantity()+" <\/span>":(o+='<input data-hash="'+s+'" type="number" min="1" value="'+i.quantity()+'"">',o+='<span>|<\/span><span class="product-remove" data-hash="'+s+'" data-action="delete"> '+I("cart_remove")+"<\/span>");o+="<\/div>";o+="<\/div>";o+="<\/div>";o+="<\/td>";o+='<td class="text-right mobile-hide second-column">';o+='<div class="col-price">';0<i.discount()&&(o+='<div style="text-decoration: line-through; ">'+P.formatCurrency(i.singleFullPrice(v)).replace(/\s/g,"&nbsp;")+"<\/div>");o+='<div style="font-size: 1.2em;">'+P.formatCurrency(h).replace(/\s/g,"&nbsp;")+"<\/div>";"none"!=m&&0<h&&(o+='<div style="font-size: 0.8em;">',"included"==m?o+=I("cart_vat_included","VAT (included)")+": ":"excluded"==m&&(o+=I("cart_vat_excluded","VAT (excluded)")+": "),o+=P.formatCurrency(i.vat()/i.quantity()).replace(/\s/g,"&nbsp;")+"<\/div>");o+="<\/div>";o+="<\/td>";o+="<\/tr>"}(o=z(o+="<\/tbody><\/table><\/div>")).find("tbody > tr:odd > td").not(".invisible").addClass("odd");o.find("tbody > tr:odd > td .product-description-fade").not(".invisible").addClass("odd");o.find("table").each(function(i){var t=z(this).find("tr");t.each(function(t){var e=z(this).find("td").not(".invisible");e.first().addClass("first-x");e.last().addClass("last-x");1==i&&0===t&&e.css({"border-top-left-radius":0,"border-top-right-radius":0,"border-top-color":"transparent"})});t.last().find("td").not(".invisible").addClass("last-y")});o.find("select").on("change",function(){var t,e=z(this),i=e.attr("data-hash"),n=null;return i&&(n=P.cart()[i])&&(e="option"==e.attr("data-type")?(t=e.val(),n.base().options[t].suboptions?0:null):(t=n.option(),e.val()),P.update(i,+n.quantity(),t,e).always(function(){var t;P.canApplyCoupon()&&(t=P.coupon())&&t.length&&P.coupon(t,!0);M();F();A(I("cart_proceedtoorder"),P)}).fail(function(t){H.alert(t.message)})),!1});o.find(".product-remove[data-action=delete]").on("click",function(){var t=z(this).attr("data-hash");if(H.confirm(I("cart_remove_q"))&&t&&P.remove(t)){if(0===P.count())return void $();M();F();A(I("cart_proceedtoorder"),P)}return!1});o.find("input").on("change",function(){var t=z(this),e=z(this).attr("data-hash"),t=t.val();return n[e]&&P.update(e,t,n[e].option(),n[e].subOption()).always(function(){M();F();A(I("cart_proceedtoorder"),P)}).fail(function(t){H.alert(t.message)}),!1});null===y?S.append(o):y.replaceWith(o);y=o;l||z(o).find(".product-options").css("display","none");U.responsive.isMobileDevice()||(c=U.utils.getCurrentBrowser(),z(".product-description").css({overflow:"hidden"}),z(".product-description-fade").show(),z(".product-description").hover(function(){z(this).css("overflow","auto");z(this).children(".product-description-fade").css("visibility","hidden")},function(){z(this).css("overflow","hidden");z(this).children(".product-description-fade").css("visibility","visible")}),"Microsoft Edge"!=c&&"Microsoft Internet Explorer"!=c||(z(".product-description").hover(function(){z(this).css("overflow-y","auto")},function(){z(this).css("overflow-y","hidden")}),z(".product-description .product-description-fade").remove()))},F=function(){var t='<div class="price-container">'+i(P)+"<\/div>",t=z(t);null===e?z(".container-copoun-and-totalprice").append(t):e.replaceWith(t);e=t},N=function(t,e){var i,n=P.payment(),r="",a;if(e?(i={})[n.id()]=n:i=P.payments(),0!==P.paymentsCount()){r='<div><table cellpadding="0" cellspacing="0" border="0" class="cart-table pay-table"><thead><tr><td class="first-column">'+I("cart_payment")+'<\/td><td class="second-column mobile-hide">'+I("cart_price")+"<\/td><\/tr><\/thead><tbody>";for(a in i){var s=""!=i[a].name()?i[a].name():"&nbsp;",o=""!=i[a].description()?i[a].description():"&nbsp;",c=P.paymentPrice(a,v,!1);r+='<td class="first-column">';r+='<div class="ship-pay-all-cont">';r+='<div class="ship-pay-cont">';t||(r+='<div class="ship-pay-chk-cont"><input type="radio" id="chk-payment-'+a+'" name="payment-method" data-id="'+a+'"'+(n&&n.id()==a?" checked":"")+"><\/div>");r+=i[a].image()?'<div class="ship-pay-image-cont"><img class="ship-pay-image" src="../'+i[a].image()+'" alt="'+s+'" /><\/div>':'<div class="ship-pay-image-cont" style="width: 1px; min-width: 1px;"><\/div>';r+='<div class="ship-pay-name-desc-cont">';r+='<label for="chk-payment-'+a+'"><b>'+s+"<\/b><p>"+o+"<\/p><\/label>";r+='<div class="price-mobile mobile-show field-space-reverse text-right">';r+='<div style="font-size: 1.2em;">'+P.formatCurrency(c)+"<\/div>";"none"!=m&&0<c&&(r+='<div style="font-size: 0.8em;">',r+="included"==m?I("cart_vat_included","VAT (included)")+": ":I("cart_vat_excluded","VAT (excluded)")+": ",r+=P.formatCurrency(P.paymentVat(a,!1))+"<\/div>");r+="<\/div>";r+="<\/div>";r+="<\/div>";r+="<\/div><\/td>";r+='<td class="text-right mobile-hide second-column">';r+='<div class="col-price-ship-pay">';r+='<div style="font-size: 1.2em;">'+P.formatCurrency(c)+"<\/div>";"none"!=m&&0<c&&(r+='<div style="font-size: 0.8em;">',r+="included"==m?I("cart_vat_included","VAT (included)")+": ":I("cart_vat_excluded","VAT (excluded)")+": ",r+=P.formatCurrency(P.paymentVat(a,!1))+"<\/div>");r+="<\/div>";r+="<\/td>";r+="<\/tr>"}(r=z(r+="<\/tbody><\/table><\/div>")).find("tbody > tr:odd > td").not(".invisible").addClass("odd");r.find("tr").each(function(){var t=z(this).find("td").not(".invisible");t.first().addClass("first-x");t.last().addClass("last-x")});r.find("tr").last().find("td").not(".invisible").addClass("last-y");r.find("input").on("click",function(){var t=z(this).attr("data-id");t&&(P.payment(t),A(I("cart_gonext"),P))});null===g?S.append(r):g.replaceWith(r);g=r}},r=function(t,e){var i;(P.form().acceptAgreement||P.form().agreement)&&(i='<div class="small-font">'+P.form().agreement+"<\/div>",i=z("<div id="+(e?"agreement-text-sidebar":"agreement-text")+' class="agreement-text-c m-b" />').append(i),t.append(i),P.form().acceptAgreement&&(t='<input type="checkbox" id="'+(e?"chk-agreement-sidebar":"chk-agreement")+'" class="chk-agreement mandatory">',t+='<label for="'+(e?"chk-agreement-sidebar":"chk-agreement")+'" class="label-chk-agreement" id="'+(e?"lbl-agreement-sidebar":"lbl-agreement")+'">'+I("cart_agree","I Agree")+"<\/label>",t=z('<div style="margin-bottom: 10px;" />').append(t),i.prepend(t),z("#cart-container label.label-chk-agreement").click(function(t){var e=!z("#cart-container input.chk-agreement").prop("checked");z("#cart-container input.chk-agreement").prop("checked",e);t.stopImmediatePropagation();t.preventDefault()}),z("#cart-container input#chk-agreement").click(function(){var e=z(this).is(":checked");z("#cart-container input#chk-agreement-sidebar").prop("checked",e)}),z("#cart-container input#chk-agreement-sidebar").click(function(){var e=z(this).is(":checked");z("#cart-container input#chk-agreement").prop("checked",e)})))},E=function(){var t=P.userShippingData(),e="";return D.showShipmentFields&&"{}"!=JSON.stringify(t)&&("Company"in t&&t.Company.value&&(e+='<div class="shipping-resume-field field-line">'+t.Company.value+"<\/div>"),("Name"in t&&t.Name.value||"LastName"in t&&t.LastName.value||"Email"in t&&t.Email.value)&&(e+='<div class="shipping-resume-field field-line">',e+="Name"in t?t.Name.value+" ":"",e+="LastName"in t?t.LastName.value+" ":"",e+="<\/div>"),"Email"in t&&t.Email.value&&(e+='<div class="shipping-resume-field field-line">'+t.Email.value+"<\/div>"),"Address1"in t&&t.Address1.value&&(e+='<div class="shipping-resume-field field-line">'+t.Address1.value+"<\/div>"),"Address2"in t&&t.Address2.value&&(e+='<div class="shipping-resume-field field-line">'+t.Address2.value+"<\/div>"),("ZipPostalCode"in t&&t.ZipPostalCode.value||"City"in t&&t.City.value||"StateRegion"in t&&t.StateRegion.value)&&(e+='<div class="shipping-resume-field field-line">',e+="ZipPostalCode"in t&&""!=t.ZipPostalCode.value?t.ZipPostalCode.value+", ":"",e+="City"in t?t.City.value+" ":"",e+="StateRegion"in t&&""!=t.StateRegion.value?" ("+t.StateRegion.value+")":"",e+="<\/div>"),"Country"in t&&t.Country.value&&(e+='<div class="shipping-resume-field field-line">'+t.Country.value+"<\/div>"),"Phone"in t&&t.Phone.value&&(e+='<div class="shipping-resume-field field-line">'+t.Phone.value+"<\/div>"),"Note"in t&&t.Note.value&&(e+='<div class="shipping-resume-field"><u>'+t.Note.label+":<\/u> "+t.Note.value+"<\/div>"),""!=e&&(e='<div class="shipping-resume m-b"><table class="cart-table" cellpadding="0" cellspacing="0" border="0"><thead><tr><td class="first-x last-x">'+I("cart_shipping_address","Shipping address")+'<\/td><\/tr><\/thead><tbody><tr><td class="first-x last-x last-y">'+e+"<\/td><\/tr><\/tbody><\/table><\/div>")),e},R=function(){var t=P.userInvoiceData(),e="";return t&&("Company"in t&&t.Company.value&&(e+='<div class="invoice-resume-field field-line">'+t.Company.value+"<\/div>"),("Name"in t&&t.Name.value||"LastName"in t&&t.LastName.value||"Email"in t&&t.Email.value)&&(e+='<div class="invoice-resume-field field-line">',e+="Name"in t?t.Name.value+" ":"",e+="LastName"in t?t.LastName.value+" ":"",e+="<\/div>"),"Email"in t&&t.Email.value&&(e+='<div class="shipping-resume-field field-line">'+t.Email.value+"<\/div>"),"Address1"in t&&t.Address1.value&&(e+='<div class="invoice-resume-field field-line">'+t.Address1.value+"<\/div>"),"Address2"in t&&t.Address2.value&&(e+='<div class="invoice-resume-field field-line">'+t.Address2.value+"<\/div>"),("ZipPostalCode"in t&&t.ZipPostalCode.value||"City"in t&&t.City.value||"StateRegion"in t&&t.StateRegion.value)&&(e+='<div class="invoice-resume-field field-line">',e+="ZipPostalCode"in t&&""!=t.ZipPostalCode.value?t.ZipPostalCode.value+", ":"",e+="City"in t?t.City.value+" ":"",e+="StateRegion"in t&&""!=t.StateRegion.value?" ("+t.StateRegion.value+")":"",e+="<\/div>"),"Country"in t&&t.Country.value&&(e+='<div class="invoice-resume-field field-line">'+t.Country.value+"<\/div>"),"Phone"in t&&t.Phone.value&&(e+='<div class="invoice-resume-field field-line">'+t.Phone.value+"<\/div>"),"Attachment"in t&&t.Attachment.value&&(e+='<div class="invoice-resume-field field-line"><u>'+t.Attachment.label+":<\/u> "+t.Attachment.value+"<\/div>"),"Note"in t&&t.Note.value&&(e+='<div class="invoice-resume-field"><u>'+t.Note.label+":<\/u> "+t.Note.value+"<\/div>"),""!=e&&(e='<div class="invoice-resume m-b"><table class="cart-table" cellpadding="0" cellspacing="0" border="0"><thead><tr><td class="first-x last-x">'+I("cart_vat_address","Invoice Address")+'<\/td><\/tr><\/thead><tbody><tr><td class="first-x last-x last-y">'+e+"<\/td><\/tr><\/tbody><\/table><\/div>")),e},q={"af-za":"ZA","ar-ae":"AE","ar-bh":"BH","ar-dz":"DZ","ar-eg":"EG","ar-iq":"IQ","ar-jo":"JO","ar-kw":"KW","ar-lb":"LB","ar-ly":"LY","ar-ma":"MA","ar-om":"OM","ar-qa":"QA","ar-sa":"SA","ar-sy":"SY","ar-tn":"TN","ar-ye":"YE","az-az":"AZ","be-by":"BY","bg-bg":"BG","bs-ba":"BA","ca-es":"ES","cs-cz":"CZ","cy-gb":"GB","da-dk":"DK","de-at":"AT","de-ch":"CH","de-de":"DE","de-li":"LI","de-lu":"LU","dv-mv":"MV","el-gr":"GR","en-au":"AU","en-bz":"BZ","en-ca":"CA","en-gb":"GB","en-ie":"IE","en-jm":"JM","en-nz":"NZ","en-ph":"PH","en-tt":"TT","en-us":"US","en-za":"ZA","en-zw":"ZW","es-ar":"AR","es-bo":"BO","es-cl":"CL","es-co":"CO","es-cr":"CR","es-do":"DO","es-ec":"EC","es-es":"ES","es-gt":"GT","es-hn":"HN","es-mx":"MX","es-ni":"NI","es-pa":"PA","es-pe":"PE","es-pr":"PR","es-py":"PY","es-sv":"SV","es-uy":"UY","es-ve":"VE","et-ee":"EE","eu-es":"ES","fa-ir":"IR","fi-fi":"FI","fo-fo":"FO","fr-be":"BE","fr-ca":"CA","fr-ch":"CH","fr-fr":"FR","fr-lu":"LU","fr-mc":"MC","gl-es":"ES","gu-in":"IN","he-il":"IL","hi-in":"IN","hr-ba":"BA","hr-hr":"HR","hu-hu":"HU","hy-am":"AM","id-id":"ID","is-is":"IS","it-ch":"CH","it-it":"IT","ja-jp":"JP","ka-ge":"GE","kk-kz":"KZ","kn-in":"IN","ko-kr":"KR","kok-in":"IN","ky-kg":"KG","lt-lt":"LT","lv-lv":"LV","mi-nz":"NZ","mk-mk":"MK","mn-mn":"MN","mr-in":"IN","ms-bn":"BN","ms-my":"MY","mt-mt":"MT","nb-no":"NO","nl-be":"BE","nl-nl":"NL","nn-no":"NO","ns-za":"ZA","pa-in":"IN","pl-pl":"PL","ps-af":"AF","pt-br":"BR","pt-pt":"PT","qu-bo":"BO","qu-ec":"EC","qu-pe":"PE","ro-ro":"RO","ru-ru":"RU","sa-in":"IN","se-fi":"FI","se-no":"NO","se-se":"SE","sk-sk":"SK","sl-si":"SI","sq-al":"AL","sr-ba":"BA","sv-fi":"FI","sv-se":"SE","sw-ke":"KE","syr-sy":"SY","ta-in":"IN","te-in":"IN","th-th":"TH","tl-ph":"PH","tn-za":"ZA","tr-tr":"TR","tt-ru":"RU","uk-ua":"UA","ur-pk":"PK","uz-uz":"UZ","vi-vn":"VN","xh-za":"ZA","zh-cn":"CN","zh-hk":"HK","zh-mo":"MO","zh-sg":"SG","zh-tw":"TW","zu-za":"ZA",af:"ZA",ar:"AE",az:"AZ","az-cyrl-az":"AZ",be:"BY",bg:"BG",ca:"ES",cs:"CZ",cy:"GB",da:"DK",de:"DE",dv:"MV",el:"GR",en:"GB","en-cb":"VG",eo:"FR",es:"ES",et:"EE",eu:"ES",fa:"IR",fi:"FI",fo:"FO",fr:"FR",gl:"ES",gu:"IN",he:"IL",hi:"IN",hr:"HR",hu:"HU",hy:"AM",id:"ID",is:"IS",it:"IT",ja:"JP",ka:"GE",kk:"KZ",kn:"IN",ko:"KR",kok:"IN",ky:"KG",lt:"LT",lv:"LV",mi:"NZ",mk:"MK",mn:"MN",mr:"IN",ms:"MY",mt:"MT",nb:"NO",nl:"NL",ns:"ZA",pa:"IN",pl:"PL",ps:"AF",pt:"PT",qu:"PE",ro:"RO",ru:"RU",sa:"IN",se:"FI",sk:"SK",sl:"SI",sq:"AL","sr-cyrl-ba":"BA","sr-sp":"RS","sr-cyrl-sp":"RS",sv:"SE",sw:"KE",syr:"SY",ta:"IN",te:"IN",th:"TH",tl:"PH",tn:"ZA",tr:"TR",tt:"RU",ts:"MZ",uk:"UA",ur:"PK",uz:"UZ","uz-cyrl-uz":"UZ",vi:"VN",xh:"ZA",zh:"CN",zu:"ZA"},$=function(){var t=null,e=null,i,n,r,a;if(o(),z(".imTip").remove(),U.utils.scrollTo(0),k.attr("data-step","0"),S.empty(),C.empty(),z("#im-cart-steps-banner").remove(),0===P.count())return h.empty(),0===w.find("#cart-empty").length&&w.prepend(p),e=w.find("[type=button]"),U.cart.ui.canResumeShopping()||e.hide(),void e.on("click",U.cart.ui.resumeShopping);for(C.append('<h2 id="imPgTitle" class="imTitleMargin">'+I("cart_shopping_cart")+"<\/h2>"),C.append("<p>"+I("cart_step0_cartlist").replace("[FIELD]",I("cart_step0_gonext"))+"<\/p>"),M(),S.append('<div class="container-copoun-and-totalprice"><\/div>'),P.canApplyCoupon()&&z(".container-copoun-and-totalprice").append(z('<div class="coupon-code-container" />').html("<p>"+I("cart_coupon_description","Enter your Coupon Code here")+'<\/p><input type="text" style="margin: 5px 0.8em 0 0;" id="x5CouponCode" placeholder="'+I("cart_coupon_code","Coupon Code")+'" value="'+P.coupon()+'">').append(z('<input type="button" style="margin: 5px 5px 0 0;" id="x5ApplyCouponCode" value="'+I("cart_apply","Apply")+'" />').on("click",function(){var t=z("#x5CouponCode").val(),i=z(this),n=i.val();t.length&&(i.val(I("cart_loading","Loading...")),P.coupon(t,!0,function(t){var e=z("<span />").text(""!==t?I("cart_coupon_enabled","The coupon is active"):I("cart_coupon_disabled","The coupon is not active")).addClass("alert").addClass(""!==t?"alert-green":"alert-red").fadeOut(0);i.siblings(".alert").stop(!1,!1).remove();i.after(e);e.fadeIn().delay(1e4).fadeOut(250,function(){z(this).remove()});M();F();A(I("cart_proceedtoorder"),P);z("#x5CouponCode").val(t);i.val(n);b();""!==t&&U.responsive.isMobileDevice()&&U.utils.scrollTo("#cart-sidebar")}))}))),F(),e=z('<div class="btn-action"><input type="button" class="btn-go-back" value="'+I("cart_continue_shopping","Continue shopping")+'" /><\/div>'),U.cart.ui.canResumeShopping()||e.find("[type=button]").hide(),e.find("[type=button]").on("click",U.cart.ui.resumeShopping),(t=z('<div class="btn-action btn-next"><input type="button" class="btn-go-next" value="'+I("cart_proceedtoorder","Proceed to order")+'" /><\/div>')).find("[type=button]").on("click",function(){var t=P.minimumAmountReached();!0!==t.success?H.alert(t.message):T.location.hash="#step1"}),S.append(z("<div />").addClass("buttons-container").append(e).append(t)),i=P.userShippingData(),n=!z.isEmptyObject(i),n||(i=P.userInvoiceData()),r=P.form().fields,a=0;a<r.length;a++)if("Country"==r[a].id){i[r[a].id+"Code"]||(i[r[a].id+"Code"]={label:r[a].name+" (ISO 3166/A2)",value:x(navigator.language||navigator.userLanguage)},n?P.userShippingData(i):P.userInvoiceData(i));break}A(I("cart_proceedtoorder"),P);b();s()};!function t(e){var i,n,e,r;if(e=e||!1)u.fadeOut(250,t);else{if(e=U.utils.getParam("paynow"),e)P.restore(e),d(!1);else{r=T.location.hash.replace("#","").split("/");switch(r[0]){case"step1":a(1<r.length?r[1]:null);break;case"step2":P.canSetOrder().success?P.isSetUserData()?0!=P.allowedShippingsCount()||0!=P.paymentsCount()?(n=i=null,o(),z(".imTip").remove(),U.utils.scrollTo(0),k.attr("data-step","2"),C.empty(),S.empty(),U.cart.ui.steps.active&&(z("#im-cart-steps-banner").remove(),w.prepend(U.cart.ui.getStepStyleDom(1))),C.append('<h2 id="imPgTitle" class="imTitleMargin">'+I("cart_step2")+"<\/h2>"),C.append("<p>"+I("cart_step2_shiplist").replace("[FIELD]",I("cart_gonext"))+"<\/p>"),c(),N(),n=z('<div class="btn-action"><input type="button" class="btn-go-back" value="'+I("cart_goback","Back")+'" /><\/div>').on("click",function(){H.top.location.hash="#step1"}),i=z('<div class="btn-action btn-next"><input type="button" class="btn-go-next" value="'+I("cart_gonext","Next")+'" /><\/div>').on("click",function(){var t=P.canSetOrder();!0!==t.success?H.alert(t.message):T.location.hash="#step3"}),S.append(z("<div />").addClass("buttons-container").append(n).append(i)),g&&1==g.find("input[type=radio]").length?g.find("input[type=radio]").trigger("click"):g&&!P.payment()&&g.find("input[type=radio]:first").trigger("click"),f&&1==f.find("input[type=radio]").length?f.find("input[type=radio]").trigger("click"):f&&!P.shipping()&&f.find("input[type=radio]:first").trigger("click"),A(I("cart_gonext"),P),b(),s()):H.top.location.hash="#step3":T.location.hash="#step1":T.location.hash="";break;case"step3":l();break;case"step4":d();break;default:$()}}z(H).one("hashchange",t)}}(u.is(":visible"))},addToCart:function(d,u,h,p,f,g){var m,v=U.cart.manager;null!==v&&(u=u||1,f=void 0===f||f,m=(g=g||"")+v.settings().indexpage,v.add(d,parseInt(u,10),h,p).done(function(){var t,o,e,i,c,l,n,r,a,s;f?(z.imCookie("x5CartContinue",U.cart.ui.getWindow().location.href,{path:"/"}),U.utils.location(m)):(t=function(){var t="",e=U.l10n.get,i=v.goodsPrice(!0),n=v.goodsPrice(!1),r=v.goodsVat(),a=v.count(!0),s=a<2?e("cart_article","product"):e("cart_articles","products");switch(v.settings().vattype){case"excluded":t+='<div class="cart-total s-flex"><span class="s-cell-desc left">'+a+" "+s+'<\/span><span class="s-cell right">'+v.formatCurrency(n).replace(/\s/g,"&nbsp;")+"<\/span><\/div>";t+='<div class="cart-vat s-flex"><span class="s-cell-desc left">'+e("cart_vat")+'<\/span><span class="s-cell right">'+v.formatCurrency(r).replace(/\s/g,"&nbsp;")+"<\/span><\/div>";t+='<div class="cart-total-vat s-flex big-font"><span class="s-cell-desc left">'+e("cart_total")+'<\/span><span class="s-cell right">'+v.formatCurrency(i).replace(/\s/g,"&nbsp;")+"<\/span><\/div>";break;case"included":t+='<div class="cart-total-vat s-flex big-font"><span class="s-cell-desc left">'+a+" "+s+'<\/span><span class="s-cell right">'+v.formatCurrency(i).replace(/\s/g,"&nbsp;")+"<\/span><\/div>";t+='<div class="cart-vat-included s-flex"><span class="s-cell-desc">&nbsp;<\/span><span class="s-cell right vat">'+e("cart_vat_included","VAT (Included)")+": "+v.formatCurrency(r).replace(/\s/g,"&nbsp;")+"<\/span><\/div>";break;case"none":t+='<div class="cart-total s-flex big-font"><span class="s-cell-desc left">'+a+" "+s+'<\/span><span class="s-cell right">'+v.formatCurrency(n).replace(/\s/g,"&nbsp;")+"<\/span><\/div>"}return t},o=function(t,e,i,n,r,a){t?(e.addClass("wrapped"),i.removeClass("left"),n.removeClass("right"),t=Math.max(r.width(),a.width()),r.width(t),a.width(t)):(e.removeClass("wrapped"),i.addClass("left"),n.addClass("right"),r.css("width","auto"),a.css("width","auto"))},e={text:(r=x5CartData.products[d],s='<div id="cart-product-added-container" style="min-height: '+(a=325)+'px;"><table class="cart-table cart-product-added" cellpadding="0" cellspacing="0" border="0" style="height: 0; min-height: '+a+'px; margin-bottom: 0;"><thead><tr><td class="first-x last-x"><div class="head-title">'+U.l10n.get("cart_product_added")+'<\/div><\/td><\/tr><\/thead><tbody><tr><td class="first-x last-x last-y">',s+='<div class="box-master">',s+='<div class="box-cont">',s+='<div class="product-col-image-details-btn">',s+='<div class="cont-product-col-image-details">',s+='<div class="product-col-image-details">',U.cart.ui.showProductIcons&&r.media.length?(a=r.media[0],s+='<div class="product-image-cont"><img class="product-image" src="'+(g+("video"===a.type||"youtube"===a.type||"vimeo"===a.type?"res/video_thumb.svg":U.utils.isNullOrEmpty(a.url)?x5CartData.settings.noPreviewImage:a.url))+'" alt="'+r.name+'" /><\/div>'):s+='<div class="product-image-cont" style="width: 1px; min-width: 1px;"><\/div>',s+='<div class="product-info">',s+='<div class="product-name product-data-info">'+r.name+"<\/div>",h&&(s+='<div class="product-options product-data-info">',s+='<span class="lbl-variant">'+r.options[h].name+"<\/span>",p&&(s+=' | <span class="lbl-sub-variant">'+r.options[h].suboptions[p]+"<\/span>"),s+="<\/div>"),s+='<div class="product-quantity product-data-info">',s+="<span>"+U.l10n.get("cart_qty")+":&nbsp;<\/span>",s+="<span>"+u+" <\/span>",s+="<\/div>",s+="<\/div>",s+="<\/div>",s+='<div class="hl"><\/div>',s+='<div class="lbl-summary product-data-info">'+U.l10n.get("cart_articles_summary")+"<\/div>",s+='<div class="ord-total mobile">'+t()+"<\/div>",s+="<\/div>",s+="<\/div>",s+='<div class="vl"><\/div>',s+='<div class="price-info">',s+='<div class="lbl-summary product-data-info">'+U.l10n.get("cart_articles_summary")+"<\/div>",s+='<div class="ord-total">'+t()+"<\/div>",s+="<\/div>",s+="<\/div>",s+='<div class="s-flex buttons-container"><div class="btn-action btn-action-left left"><input type="button" class="btn-go-back" onclick="x5engine.cart.ui.clickButtonAddToCart(0); return false;" value="'+U.l10n.get("cart_continue_shopping")+'" /><\/div><div class="btn-action btn-action-right right"><input type="button" class="btn-go-next" onclick="x5engine.cart.ui.clickButtonAddToCart(1,\''+m+'\'); return false;" value="'+U.l10n.get("cart_proceedtoorder")+'" /><\/div><\/div>',s+="<\/div>",s+="<\/td><\/tr><\/tbody><\/table>"),id:"add-to-cart",position:"center",elementClose:'<svg class="svgClose imCloseInn" viewBox="0 0 1792 1792" xmlns="http://www.w3.org/2000/svg"><path d="M1490 1322q0 40-28 68l-136 136q-28 28-68 28t-68-28l-294-294-294 294q-28 28-68 28t-68-28l-136-136q-28-28-28-68t28-68l294-294-294-294q-28-28-28-68t28-68l136-136q28-28 68-28t68 28l294 294 294-294q28-28 68-28t68 28l136 136q28 28 28 68t-28 68l-294 294 294 294q28 28 28 68z"/><\/svg>',desiredWidth:800,desiredHeight:325},U.imSplashBox(e),i=null,n=!(c=0),U.utils.onElementResize(document.getElementById("add-to-cart"),function(t){c!=t.width&&(c=t.width,i&&clearTimeout(i),i=setTimeout(function(){var t;n&&(t=z("#cart-product-added-container .cart-product-added thead").height(),z("#add-to-cart .imClose").css({height:t,width:t}),n=!1),function(){var t;c=0<c?c:Math.min(z("#imContent").width()-40,800);l=z("#add-to-cart .buttons-container");var e,i,n=z("#add-to-cart .buttons-container .btn-action-left"),r=z("#add-to-cart .buttons-container .btn-action-right"),a=z("#add-to-cart .buttons-container .btn-go-back"),s=z("#add-to-cart .buttons-container .btn-go-next");a.css("width","auto");s.css("width","auto");c<750?(z("#cart-product-added-container").addClass("mobile"),c<450?z("#cart-product-added-container").addClass("hide-image"):z("#cart-product-added-container").removeClass("hide-image"),t=!1,(c<400||(i=s,0<(e=a).length&&0<i.length&&e.offset().top!=i.offset().top))&&(t=!0),o(t,l,n,r,a,s)):(z("#cart-product-added-container").removeClass("mobile"),o(t=!1,l,n,r,a,s))}()},50))}))}).fail(function(t){H.alert(t.message)}))},canResumeShopping:function(){return!!z.imCookie("x5CartContinue",null,{path:"/"})},resumeShopping:function(){var t=z.imCookie("x5CartContinue",null,{path:"/"}),e=U.cart.ui.getWindow();t&&(e.location.href=t)},updatePLOTo:null,updateProductListOptions:function(t,e,i,n,r){var a,h;if(!U.cart.manager)return a=U.cart.ui,clearTimeout(a.updatePLOTo),void(a.updatePLOTo=setTimeout(function(){a.updateProductListOptions(t,e,i,n)},1e3));var s,o,c=U.cart.manager,l=c.store(t),d=z(e),u=z("#"+i+"_fullprice");if(l.option(d.val()),u.length&&(u.html(c.formatCurrency(l.fullPrice(n))),z("#"+i+"_price").html(c.formatCurrency(l.price(n)))),l)if(z("#"+i+"_subopt").remove(),"suboptions"in(s=l.base().options[l.option()])){for(h='<select id="'+i+'_subopt"',null!=r&&r||(h+=' style="float: right; width: 47%;"/>'),h=z(h+="/>"),o=0;o<s.suboptions.length;o++)h.append('<option value="'+o+'">'+U.utils.htmlDecode(s.suboptions[o])+"<\/option>");h.val(0);null!=r&&r||d.width("47%");d.after(h)}else null!=r&&r||d.outerWidth("99%").css("float","none")},updateWidget:function(){var t=U.cart.manager,e=U.cart.ui.updateWidget;if(null===t)return setTimeout(e,500);z(".widget_weight_total").text(U.utils.round(t.goodsWeight(),2));z(".widget_quantity_total").text(t.count());z(".widget_amount_total").text(t.formatCurrency(t.price("included"==t.settings().vattype)));t.bind("x5cart.priceChanged",e).bind("x5cart.quantityChanged",e)},getStepStyleDom:function(t){for(var c,e,i=U.cart.ui.steps,n=0,r=U.l10n.get,a=z("body"),s=z('<div id="im-cart-steps-banner" />'),o=0;o<t;o++)n-=i.image.steps[o].height;for(o=0;o<i.image.steps.length;o++)c=z("<span>"+r("cart_step"+(o+1)+"_header","Step description "+(o+1))+"<\/span>").css(i.font).css({"text-align":"center",position:"absolute",top:-1e3}),a.append(c),e=c.outerWidth(!0),c.remove(),s.append(c.css({left:i.image.steps[t].offsetX[o]-e/2,top:i.image.steps[t].offsetY[o]})),o===t&&c.css("color",i.font.activeColor);return s.height(i.image.steps[t].height).css({"background-image":"url('"+U.settings.currentPath+i.image.url+"')","background-position":"0 "+n+"px",margin:"15px auto",position:"relative","max-width":i.image.width})}});U.cart.loaded=!0}(_jq,x5engine,window),function(u,h){"use strict";u.extend(!0,h.cart.search,{cartSearchContainer:u("#im-cartsearch-container"),jsonFilter:{start:0,length:10,sortOrderBy:"relevance",custom:"",rootCategory:"",rootCategoryCategories:[],rootCategoryFilterIgnore:!1,categories:[],priceStart:-1,priceEnd:-1,onlyNew:0,onlyDiscounted:0,onlyAvailable:0},jsonFilterCache:{},currentUrl:window.location.href+(-1<window.location.href.indexOf("?")?"":"?"),dataSource:"",checkedNodes:[],hiddenNodes:{},numTotCategories:0,buildInProgress:!1,istanceRangeSlider:"",initRangeSlider:function(){var t=void 0===u(".js-range-slider").data().from?0:u(".js-range-slider").data().from,e=void 0===u(".js-range-slider").data().to?1e12:u(".js-range-slider").data().to,i=u("#im-cartsearch-container .range-slider-container .js-range-slider");i.ionRangeSlider({type:"double",min:t,max:e,from:t,to:e,grid:!0,hide_min_max:!0,hide_from_to:!1,force_edges:!0,decorate_both:!0,skin:"round",grid_num:2,prettify_enabled:!0,prettify:function(t){return h.cart.formatCurrency(t,void 0,void 0,!0)},onChange:function(t){h.cart.search.istanceRangeSlider.userFrom=t.from;h.cart.search.istanceRangeSlider.userTo=t.to},onFinish:function(){h.cart.search.refreshProducts(!0)}});h.cart.search.istanceRangeSlider=i.data("ionRangeSlider")},updateRangeSlider:function(t,e){var i;x5CartData.searchPage.searchFieldVisibility.price&&(i={from:i=null!=(i=h.cart.search.istanceRangeSlider.userFrom)&&t<=i?i:t,to:i=null!=(i=h.cart.search.istanceRangeSlider.userTo)&&i<=e?i:e},h.cart.search.istanceRangeSlider.result.min!=t&&(i.min=t),h.cart.search.istanceRangeSlider.result.max!=e&&(i.max=e),h.cart.search.istanceRangeSlider.update(i))},clickPagination:function(t){h.cart.search.jsonFilter.start=t;h.cart.search.refreshProducts()},paginate:function(){var t=h.cart.htmlProducts.getCounterProducts(),e=h.cart.search.jsonFilter.start,i=h.cart.search.jsonFilter.length,n='<div id="im-cartsearch-pagination" class="im-cartsearch-pagination pagination-container">',r=(h.l10n.get,Math.ceil(t/i)),a=e/i+1;if(r<2)return"";0<e&&(n+='<a class="page page-prev" onclick="x5engine.cart.search.clickPagination('+(e-i)+', this); return false;" data-history="start='+(e-i)+"&length="+i+'"><\/a>');for(var s=!1,o=!1,c=1;c<=r;c++)r<7||1==c||c==r||a-1<=c&&c<=1+a?n+='<a onclick="x5engine.cart.search.clickPagination('+i*(c-1)+', this); return false;" class="page'+(c==a?" current":"")+'" data-history="start='+i*(c-1)+"&length="+i+'">'+c+"<\/a>":c<a-1&&!s?(n+='<span class="dots-page">...<\/span>',s=!0):1+a<c&&!o&&(n+='<span class="dots-page">...<\/span>',o=!0);return e+i<t&&(n+='<a class="page page-next" onclick="x5engine.cart.search.clickPagination('+(e+i)+', this); return false;" data-history="start='+(e+i)+"&length="+i+'"><\/a>'),n+"<\/div>"},paginateCheckOverflow:function(){var t,e,i,n=u("#im-cartsearch-pagination");n.length&&(i=u("#im-cartsearch-container .items-container"),t=u("#im-cartsearch-pagination .page-prev"),e=u("#im-cartsearch-pagination .page-next"),n.css("display","none"),i=i.width(),n.css("visibility","hidden"),n.css("display","block"),t.text(h.l10n.get("cmn_pagination_prev")),e.text(h.l10n.get("cmn_pagination_next")),n.width()>i&&(t.text("<"),e.text(">")),n.css("visibility","visible"))},init:function(){function o(t,e){for(var i,n=0;n<t.length;n++)(t[n].checked||(i=t[n],0<u("#im-cartsearch-container #treeview .k-item input#_"+i.uid+"[type=checkbox]:indeterminate").length))&&e.push(t[n].id),t[n].hasChildren&&o(t[n].children.view(),e)}function c(i,t){t.expandRoot=i.node;t.expand(u(t.expandRoot).find(".k-item").addBack());var n=u(i.node).find("input[type=checkbox]").filter(":first").is(":checked");u(i.node).find(".k-group input").prop("checked",n);u(i.node).find(".k-group li.k-item").each(function(t,e){i.sender.dataSource.getByUid(u(e).attr("data-uid")).checked=n});t=[];o(i.sender.dataSource.view(),t);h.cart.search.checkedNodes=t;h.cart.search.jsonFilter.rootCategoryFilterIgnore=""!=h.cart.search.jsonFilter.rootCategory&&0<t.length;h.cart.search.refreshProducts(!0,!0)}function l(t,e){if(null!=e)for(var i,n=0;n<e.length;n++)"category"==e[n].type&&null!=e[n].items&&0<e[n].items.length&&((i={}).id=e[n].id,i.type=e[n].type,i.items=[],null==h.cart.search.hiddenNodes[t.id]&&(h.cart.search.hiddenNodes[t.id]=[]),h.cart.search.hiddenNodes[t.id].push(i.id),l(t,e[n].items))}function d(t,e,i){var n;t&&(i&&1==i&&e.prop("checked",!0),(n=e.parent().parent()).on("click",function(){n.find(".k-checkbox-wrapper").find(e).prop("checked",!e.prop("checked"));h.cart.search.refreshProducts(!0)}))}var t,e,i,n=x5CartData.searchPage.searchFieldVisibility,s=(h.cart.ecommerce(x5CartData),3),r,a;h.cart.search.jsonFilter.length=x5CartData.searchPage.cardStyle.cardsPerRow*x5CartData.searchPage.cardStyle.rowsPerPage;h.cart.search.urlToJsonFilter();h.cart.search.cartSearchContainer.click(function(t){t.stopPropagation();"main"==t.target.parentNode.nodeName.toLowerCase()&&h.cart.search.cartSearchContainer.hasClass("cart-overlay")&&h.cart.search.closeSidebarCSS()});0!=u("#im-cartsearch-container .btn-sidebar").length&&(t=Math.floor(u("#im-cartsearch-container .bar-order .sort-by").height()),u("#im-cartsearch-container .btn-sidebar").css({height:t,width:t}),u("#im-cartsearch-container .btn-sidebar").click(function(t){t.stopPropagation();h.cart.search.cartSearchContainer.hasClass("filter-sidebar-open")?h.cart.search.closeSidebarCSS():h.cart.search.openSidebarCSS()}),u("#im-cartsearch-container .to-close-sidebar").click(function(t){t.stopPropagation();h.cart.search.closeSidebarCSS()}));n.custom&&function(){function e(t){h.cart.search.cartSearchContainer.hasClass("filter-sidebar-open")&&h.cart.search.closeSidebarCSS();h.cart.search.refreshProducts(!0);t.stopPropagation()}u("#im-cartsearch-container .search").val(h.cart.search.jsonFilter.custom||"");var t=u("#im-cartsearch-container .search-button");t.click(e);u("#im-cartsearch-container .search").keydown(function(t){if(13==t.which||13==t.keyCode)return e(t),!1})}();n.sortOrderBy&&(e=u("#im-cartsearch-container .items-container .bar-order .sort-by .c-order > ul.dropdown-sort .icon-arrow"),i=u("#im-cartsearch-container .items-container .bar-order .sort-by .c-order > ul.dropdown-sort .dropdown-sort-inside"),u("#im-cartsearch-container .items-container .bar-order .sort-by .c-order > ul.dropdown-sort").click(function(){(i.hasClass("show")?a:r)()}),u("#im-cartsearch-container .items-container .bar-order .sort-by .c-order > ul.dropdown-sort .dropdown-sort-inside li").click(function(t){t.stopPropagation();t=h.l10n.get("cart_search_page_sort_by")+" "+u(this).text();u("#im-cartsearch-container .items-container .bar-order .sort-by .c-order > ul.dropdown-sort li .order-selected").text(t);a();h.cart.search.refreshProducts(!0)}));n.price&&h.cart.search.initRangeSlider();d(n.discounted,u('input[type="checkbox"][data-id="discounted-products"]'),h.cart.search.jsonFilter.onlyDiscounted);d(n.available,u('input[type="checkbox"][data-id="available-products"]'),h.cart.search.jsonFilter.onlyAvailable);d(n.new,u('input[type="checkbox"][data-id="new-products"]'),h.cart.search.jsonFilter.onlyNew);u('#im-cartsearch-container .filter-sidebar .filter-container[data-id^="property-"]').each(function(){var t=u(this),e=h.cart.search.jsonFilter.properties&&h.cart.search.jsonFilter.properties[t.attr("data-id").slice(9)]||[];t.find('input[type="checkbox"]').each(function(){var t=u(this);d(!0,t,e.includes(t.attr("data-id"))?1:0)})});"Mozilla Firefox"==h.utils.getCurrentBrowser()&&u("body").append("<style>#im-cartsearch-container .filter-sidebar .checkbox-list .k-checkbox-label:before { left: 0; }<\/style>"),function(){(function(){var e=!1,i=!1;u("#treeview").kendoTreeView({checkboxes:{checkChildren:!1},loadOnDemand:!0,check:function(t){c(t,this)},collapse:function(t){e||(e=!0,t.preventDefault(),this.collapse(t.node),e=!1)},expand:function(t){i||(i=!0,t.preventDefault(),this.expand(t.node),i=!1)},dataBound:function(t){this.expandRoot&&this.expand(t.node.find(".k-item"))},select:function(t){t.preventDefault();this.dataItem(t.node).set("checked",!this.dataItem(t.node).checked);c(t,this)},dataSource:function(){var t,e,i,n;if(null==x5CartData.categories||null==x5CartData.categories.dataSource||0==x5CartData.categories.dataSource.length)return h.cart.search.dataSource;for(0<h.cart.search.jsonFilter.rootCategory.length?function(t,e){for(var i=0;i<e.length;i++){if(0<h.cart.search.dataSource.length)return;if(e[i].id==t)return h.cart.search.dataSource=e[i].items,u('#im-cartsearch-container [data-id="categories"] .lbl-title').html("").html(e[i].text);!function t(e,i){if(null!=e)for(var n=0;n<e.length;n++){if(0<h.cart.search.dataSource.length)return;if("category"==e[n].type&&null!=e[n].items&&0<e[n].items.length){if(i==e[n].id)return h.cart.search.dataSource=e[n].items,void u('#im-cartsearch-container [data-id="categories"] .lbl-title').html("").html(e[n].text);t(e[n].items,i)}}}(e[i].items,t)}}(h.cart.search.jsonFilter.rootCategory,x5CartData.categories.dataSource):h.cart.search.dataSource=x5CartData.categories.dataSource,t=[],e=0;e<h.cart.search.dataSource.length;e++)n=h.cart.search.dataSource[e],"category"==n.type&&(h.cart.search.numTotCategories++,(i={}).id=n.id,i.text=n.text,i.type=n.type,i.items=[],i.expanded=!1,i.checked=-1<h.cart.search.jsonFilter.categories.indexOf(i.id),function t(e,i,n){var r,a;if(null!=n){for(r=0;r<n.length;r++)"category"==n[r].type&&null!=n[r].items&&0<n[r].items.length&&(h.cart.search.numTotCategories++,(a={}).id=n[r].id,a.text=n[r].text,a.type=n[r].type,a.items=[],a.checked=-1<h.cart.search.jsonFilter.categories.indexOf(a.id),e<s?t(e+1,a,n[r].items):l(a,n[r].items),i.items.push(a),0!=h.cart.search.jsonFilter.categories.length&&!i.checked||h.cart.search.checkedNodes.push(a.id));return}}(2,i,n.items),t.push(i),0!=h.cart.search.jsonFilter.categories.length&&!i.checked||h.cart.search.checkedNodes.push(n.id));return 0<h.cart.search.jsonFilter.rootCategory.length&&(h.cart.search.jsonFilter.rootCategoryCategories=h.cart.search.checkedNodes),t}()})})();0==h.cart.search.jsonFilter.categories.length&&(h.cart.search.jsonFilter.categories=h.cart.search.checkedNodes);n.categories&&0<u("#treeview").data("kendoTreeView").options.dataSource.length&&(0==u("#im-cartsearch-container #treeview .k-item div .k-icon").length&&u("#im-cartsearch-container #treeview .k-item").css("padding","0px"),function(){var e;5<u("#treeview").data("kendoTreeView").options.dataSource.length&&(u("#im-cartsearch-container #treeview > ul.k-treeview-lines > li.k-item:nth-child(1n+6)").css("display","none"),(e=u('#im-cartsearch-container [data-id="categories"] .show-all-categories')).css("display","block"),e.click(function(){u("#im-cartsearch-container #treeview > ul.k-treeview-lines > li.k-item:nth-child(1n+6)").css("display","block");e.css("display","none")}))}(),u('#im-cartsearch-container [data-id="categories"]').removeClass("hidden"))}();u("#im-cartsearch-container .filter-sidebar .filter-container").each(function(){var e=u(this);e.find(".lbl-title").click(function(){e.toggleClass("closed")})});h.cart.search.fastRefreshProducts();r=function(){i.addClass("show");e.addClass("open")};a=function(){i.removeClass("show");e.removeClass("open")}},updateFiltersVisibilityAfterSearchExecution:function(i){var t=u('#im-cartsearch-container .filter-sidebar .filter-container[data-id="price"]');i.minPrice||i.maxPrice?(t.show(),h.cart.search.updateRangeSlider(i.minPrice,i.maxPrice)):t.hide();u('#im-cartsearch-container .filter-sidebar .filter-container[data-id^="property-"]').each(function(){var t=u(this),e=i.properties[t.attr("data-id").slice(9)];e&&e.length?(t.show(),t.find("li").each(function(){var t=u(this);t.toggle(e.includes(t.attr("data-id")))})):t.hide()})},urlToJsonFilter:function(){var t=h.cart.search.jsonFilter,e=window.location.search.substring(1),i,n,r;if(""!=e){if(i=function(t){for(var e=t.split("&"),i={},n=0;n<e.length;n++){var r=e[n].split("="),a=decodeURIComponent(r[0]),s=decodeURIComponent(r[1]);void 0===i[a]?i[a]=s:"string"==typeof i[a]?(r=[i[a],s],i[a]=r):i[a].push(s)}return i}(e),(null!=i.start&&null!=i.length&&(t.start=i.start,t.length=i.length),null!=i.sortOrderBy&&(t.sortOrderBy=i.sortOrderBy),null!=i.q&&(t.custom=i.q.replace(/\+/g," ").trim()),i.rootCategory&&(t.rootCategory=i.rootCategory),i.categories)&&(n=i.categories.split("|"),0<n.length))for(t.categories=[],r=0;r<n.length;r++)t.categories.push(n[r]);i.prc&&(e=i.prc.split("-"),t.priceStart=e[0],t.priceEnd=e[1]);null!=i.new&&(t.onlyNew=i.new);null!=i.discounted&&(t.onlyDiscounted=i.discounted);null!=i.available&&(t.onlyAvailable=i.available);i.properties&&(t.properties=JSON.parse(atob(i.properties)))}},fieldsToJsonFilter:function(){var t,e,i=x5CartData.searchPage.searchFieldVisibility,n=h.cart.search.jsonFilter,r,a;if(i.sortOrderBy&&(t=(t=u(".order-selected").text().replace(h.l10n.get("cart_search_page_sort_by"),"").trim())==h.l10n.get("cart_search_page_sort_price_asc")?"price_asc":t==h.l10n.get("cart_search_page_sort_price_desc")?"price_desc":"relevance",n.sortOrderBy=t),i.custom&&(t=u("#im-cartsearch-container .filter-sidebar .search").val(),n.custom=t.replace(/\+/g," ").trim()),i.categories)if(r=h.cart.search.checkedNodes,n.categories=[],0<r.length)for(a=0;a<r.length;a++)n.categories.push(r[a]);else if(0<h.cart.search.jsonFilter.rootCategory.length)for(a=0;a<h.cart.search.jsonFilter.rootCategoryCategories.length;a++)n.categories.push(h.cart.search.jsonFilter.rootCategoryCategories[a]);i.price&&(n.priceStart=null!=h.cart.search.istanceRangeSlider.userFrom?h.cart.search.istanceRangeSlider.userFrom:-1,n.priceEnd=null!=h.cart.search.istanceRangeSlider.userTo?h.cart.search.istanceRangeSlider.userTo:-1);i.new&&(e=u('input[type="checkbox"][data-id="new-products"]'),n.onlyNew=e.is(":checked")?1:0);i.discounted&&(e=u('input[type="checkbox"][data-id="discounted-products"]'),n.onlyDiscounted=e.is(":checked")?1:0);i.available&&(i=u('input[type="checkbox"][data-id="available-products"]'),n.onlyAvailable=i.is(":checked")?1:0);delete n.properties;u('#im-cartsearch-container .filter-sidebar [data-id^="property-"]').each(function(){var t=[];u(this).find('input[type="checkbox"]:checked').each(function(){t.push(u(this).attr("data-id"))});0<t.length&&(n.properties=n.properties||{},n.properties[u(this).attr("data-id").slice(9)]=t)})},jsonFilterToUrl:function(){var t=h.cart.search.jsonFilter,e="",i,n;if(0!==Object.keys(t).length){if((t.start&&t.length&&(e+="&start="+t.start+"&length="+t.length),t.sortOrderBy&&(e+="&sortOrderBy="+t.sortOrderBy),t.custom&&""!=t.custom&&(e+="&q="+t.custom.trim().replace(/ /g,"+")),t.rootCategory&&""!=t.rootCategory&&(e+="&rootCategory="+t.rootCategory),t.categories)&&(i=h.cart.search.checkedNodes,0<i.length)){for(e+="&categories=",n=0;n<i.length;n++)e+=i[n]+"|";e=e.substring(0,e.length-1)}null!=t.priceStart&&-1<t.priceStart&&(e+="&prc="+t.priceStart+"-"+t.priceEnd);t.onlyNew&&(e+="&new="+t.onlyNew);t.onlyDiscounted&&(e+="&discounted="+t.onlyDiscounted);t.onlyAvailable&&(e+="&available="+t.onlyAvailable);t.properties&&(e+="&properties="+btoa(JSON.stringify(t.properties)));""!=e&&(e="?"+e);h.cart.search.currentUrl=(x5CartData.settings.searchpage_url+e).replace("?&","?");window.history.pushState("","",h.cart.search.currentUrl)}},refreshProducts:function(t,e){h.cart.search.buildInProgress=!0;h.cart.search.showSidebarLoading();t&&(h.cart.search.jsonFilter.start=0);e&&(h.cart.search.jsonFilterCache={});h.utils.scrollTo(0);h.cart.search.fieldsToJsonFilter();h.cart.search.loadProducts();h.cart.search.jsonFilterToUrl()},fastRefreshProducts:function(){h.cart.search.buildInProgress=!0;h.cart.search.showLoading();h.cart.search.loadProducts()},loadProducts:function(){h.cart.search.deepCompare(h.cart.search.jsonFilter,h.cart.search.jsonFilterCache)?h.cart.search.hideLoading():(h.cart.search.jsonFilterCache=JSON.parse(JSON.stringify(h.cart.search.jsonFilter)),h.cart.htmlProducts.build(h.cart.search.jsonFilter))},draw:function(t){""==(t+=h.cart.search.paginate())&&(t='<p class="search-empty">'+h.l10n.get("search_empty")+"<\/p>");u("#im-products").html("").append(t);u("#im-cartsearch-container .bar-order .total-results .total_product_found").html("").html(h.cart.htmlProducts.getCounterProducts());1==h.cart.htmlProducts.getCounterProducts()?u("#im-cartsearch-container .bar-order .total-results .label-products-found").html("").html(" "+h.l10n.get("cart_search_page_product_found")):u("#im-cartsearch-container .bar-order .total-results .label-products-found").html("").html(" "+h.l10n.get("cart_search_page_products_found"));h.cart.search.paginateCheckOverflow();h.cart.search.buildInProgress=!1;h.cart.search.hideLoading()},deepCompare:function(t,e){var r,a;return r=[],a=[],!!function t(e,i){if(isNaN(e)&&isNaN(i)&&"number"==typeof e&&"number"==typeof i||e===i)return 1;if("function"==typeof e&&"function"==typeof i||e instanceof Date&&i instanceof Date||e instanceof RegExp&&i instanceof RegExp||e instanceof String&&i instanceof String||e instanceof Number&&i instanceof Number)return e.toString()===i.toString();if(e instanceof Object&&i instanceof Object&&!e.isPrototypeOf(i)&&!i.isPrototypeOf(e)&&e.constructor===i.constructor&&e.prototype===i.prototype&&!(-1<r.indexOf(e)||-1<a.indexOf(i))){for(var n in i){if(i.hasOwnProperty(n)!==e.hasOwnProperty(n))return;if(typeof i[n]!=typeof e[n])return}for(n in e){if(i.hasOwnProperty(n)!==e.hasOwnProperty(n))return;if(typeof i[n]!=typeof e[n])return;switch(typeof e[n]){case"object":case"function":if(r.push(e),a.push(i),!t(e[n],i[n]))return;r.pop();a.pop();break;default:if(e[n]!==i[n])return}}return 1}}(t,e)},closeSidebarCSS:function(){u("body").removeClass("filter-sidebar-open");h.cart.search.cartSearchContainer.removeClass("filter-sidebar-open");h.cart.search.cartSearchContainer.removeClass("cart-overlay")},openSidebarCSS:function(){u("body").addClass("filter-sidebar-open");h.cart.search.cartSearchContainer.addClass("filter-sidebar-open");h.cart.search.cartSearchContainer.addClass("cart-overlay")},cleanOverlay:function(){"fixed"!=u("#im-cartsearch-container .filter-sidebar").css("position")&&h.cart.search.cartSearchContainer.hasClass("cart-overlay")&&h.cart.search.closeSidebarCSS();var t=Math.floor(u("#im-cartsearch-container .bar-order .sort-by").height());u("#im-cartsearch-container .btn-sidebar").css({height:t,width:t})},showSidebarLoading:function(){h.cart.search.cartSearchContainer.hasClass("filter-sidebar-open")&&(u("#im-cartsearch-container .search-button").hide(),u("#im-cartsearch-container .search-spinner").show())},showLoading:function(){h.cart.search.showSidebarLoading();h.cart.search.buildInProgress&&u("#im-spinner-overlay").length<1&&(u("#im-cartsearch-container").prepend('<div id="im-spinner-overlay" style="position: absolute; top: 0px; left: 0px; bottom: 0px; right: 0px; z-index: 10703;"><\/div>'),u("#im-cartsearch-container .items-container .content #im-spinner-wrapper").css("display","flex"))},hideLoading:function(){u("#im-cartsearch-container .search-button").show();u("#im-cartsearch-container .search-spinner").hide();0<u("#im-spinner-overlay").length&&u("#im-spinner-overlay").fadeOut(500,function(){u("#im-cartsearch-container .items-container .content #im-spinner-wrapper").css("display","none");u("#im-spinner-overlay").remove()})}})}(_jq,x5engine,window),function(t,e){"use strict";t.extend(!0,e.cart,{productsDataSettings:{getSearchPageCardLinks:function(t){var e=x5CartData.searchPage.cardStyle.card.image.isLink&&t.showboxLink;return{image:e||t.link,title:t.link||e}},showAvailability:function(){return x5CartData.searchPage.cardStyle.card.txtBlock.details.showAvailability},showOptions:function(){return x5CartData.searchPage.cardStyle.card.txtBlock.details.showOptions},showCategory:function(){return x5CartData.searchPage.cardStyle.card.txtBlock.details.showCategory},showPrice:function(){return x5CartData.searchPage.cardStyle.card.txtBlock.details.showPrice},showQuantity:function(){return x5CartData.searchPage.cardStyle.card.txtBlock.details.showQuantity},showVat:function(){return x5CartData.searchPage.cardStyle.card.txtBlock.details.showVat},includeVat:function(){return x5CartData.searchPage.cardStyle.card.txtBlock.details.includeVat},showName:function(){return x5CartData.searchPage.cardStyle.card.txtBlock.name.show},showDescription:function(){return x5CartData.searchPage.cardStyle.card.txtBlock.description.show},showButton:function(){return x5CartData.searchPage.cardStyle.card.txtBlock.button.show},buttonType:function(){return x5CartData.searchPage.cardStyle.card.txtBlock.button.useAddToCartImage},goToCartAfterProductAdding:function(){return x5CartData.searchPage.cardStyle.card.goCartAfterProductAdding},availabilityImage:function(){return"../"+x5CartData.settings.availabilityImage},noPreviewImage:function(){return x5CartData.settings.noPreviewImage},cockadesNewImage:function(){return x5CartData.searchPage.cardStyle.card.cockades.new},cockadesDiscountImage:function(){return x5CartData.searchPage.cardStyle.card.cockades.discount},addToCartImage:function(){return x5CartData.searchPage.cardStyle.card.txtBlock.button.image_obj}}})}(_jq,x5engine),function(n,W){"use strict";n.extend(!0,W.cart,{htmlProducts:{counterProducts:0,getCounterProducts:function(){return W.cart.htmlProducts.counterProducts},setCounterProducts:function(t){W.cart.htmlProducts.counterProducts=t},prodCache:{},build:function(t){function e(){var t,e="relevance"==_.sortOrderBy?(t=x5CartData.products,Object.keys(t).length):(t=x5CartData.products_ordered_by_price.slice(0),x5CartData.products_ordered_by_price.length),i="",n=[],r=0,p,m,a,v;W.cart.htmlProducts.setCounterProducts(r);var a="price_desc"==_.sortOrderBy?e-1:0,s=_.start,o=e<s+_.length?e:s+_.length;if(!(e<=s||o<=s)){for(var c=new Date,l=!1,d=function(t){var e,i={properties:{}},n;for(e in t.properties)for(i.properties[e]=[],n=0;n<t.properties[e].length;n++)i.properties[e].push(t.properties[e][n]);return i}(_),u=function(t,e){function n(t,e){e&&(d.properties[t]=d.properties[t]||[],d.properties[t].includes(e)||d.properties[t].push(e))}var i,r;if(e&&"price"!=e||(i=y(t).singlePrice(!0),(null==d.minPrice||d.minPrice>i)&&(d.minPrice=i),(null==d.maxPrice||d.maxPrice<i)&&(d.maxPrice=i)),e)e.startsWith("property-")&&n(r=e.slice(9),t.properties[r]);else for(r in t.properties)n(r,t.properties[r])},h=function(o){var t=[],e,i;if(o.custom!=""&&t.push({id:"custom",check:function(t){for(var e=t.name!=""?t.name.toLowerCase().trim():"",i=t.description!=""?t.description.toLowerCase().trim():"",n=o.custom.toLowerCase(),a=W.utils.splitWordByText(n," ",'"'),s=0;s<a.length;s++)if(e.indexOf(a[s])>-1||i.indexOf(a[s])>-1)return!0;return!1}}),(o.rootCategory||o.categories.length&&o.categories.length!=W.cart.search.numTotCategories)&&t.push({id:"category",check:function(r){var t=function(t){for(var i,n,e=0;e<t.length;e++){if(t[e]==r.category)return!0;if(t[e]in W.cart.search.hiddenNodes)for(i=W.cart.search.hiddenNodes[t[e]],n=0;n<i.length;n++)if(i[n]==r.category)return!0}return!1};if(o.rootCategoryFilterIgnore||o.rootCategory!=r.category){if(o.categories.length<=W.cart.search.numTotCategories)return t(o.categories)}else return!0;return!1}}),o.onlyNew==1&&t.push({id:"only-new",check:function(t){return t.isNew}}),o.onlyDiscounted==1&&t.push({id:"only-discounted",check:V}),o.onlyAvailable==1&&t.push({id:"only-available",check:function(t){if(t.availabilityType!="unset")if(t.availabilityType=="fixed"){if(t.staticAvailValue=="notavailable"||t.staticAvailValue=="unknown")return!1}else if(W.utils.isOnline()){if(S[t.id]&&S[t.id].availability=="notavailable")return!1}else if(t.staticAvailValue=="notavailable"||t.staticAvailValue=="unknown")return!1;return!0}}),e=function(e,i){return{id:"property-"+e,check:function(t){return t.properties&&t.properties[e]&&i.includes(t.properties[e])}}},o.properties)for(i in o.properties)t.push(e(i,o.properties[i]));return(o.priceStart>0||o.priceEnd>0)&&t.push({id:"price",check:function(t){var e=y(t).singlePrice(!0);return e>=o.priceStart&&(o.priceEnd<0||e<=o.priceEnd)}}),t}(_);"price_desc"==_.sortOrderBy?-1<a:a<e;){p=new Date;!l&&1<=(p-c)/1e3&&(W.cart.search.showLoading(),l=!0);var f=("relevance"==_.sortOrderBy?Object.keys(t):t)[a],g=x5CartData.products[f],p=function(t,e){for(var i=[],n=0;n<t.length&&i.length<2;n++)t[n].check(e)||i.push(t[n].id);return i}(h,g);0==p.length?(u(g),s<=r&&r<o&&(null!=(f=function(t){var e='\t<div id="'+P+"_"+t.id+'" class="im-products-card'+(O&&t.availabilityType!="unset"?" im-products-card-with-availability":"")+(I&&t.options!=undefined?" im-products-card-with-options":"")+'">\n',i=D.getSearchPageCardLinks(t),n="",r="im-products-image",a,s,o,c,l,d,u,h,m,v,_,y,b,x,w,k,C;if(t.media!=null&&t.media.length>0&&t.media[0]!=null?n="../"+(t.media[0].type==="video"?"res/video_thumb.svg":t.media[0].url):(n="../"+D.noPreviewImage(),r+=" contain"),(e+='\t\t<div class="im-wrapper-products-image">',e+='\t\t\t<img class="'+r+'"'+(n!=""?' src="'+n+'"':"")+" "+W.utils.linkJs(i.image,{baseUrl:"../"})+"/>",e+="\t\t<\/div>",A)&&(e+='\t\t<div class="im-products-name">'+W.utils.linkHtml(i.title,{content:t.name,baseUrl:"../"})+"<\/div>\n"),F&&(c=null,x5CartData.categories!=undefined&&x5CartData.categories.dataSource!=undefined&&(l=function(t,e){var i,n;if(e!=undefined&&e!=null){for(i=0;i<e.length;i++)if(e[i].type=="category"){if(e[i].id==t)return e[i].text;if(e[i].items!=undefined&&e[i].items.length>0&&(n=l(t,e[i].items),n))return n}return null}},c=l(t.category,x5CartData.categories.dataSource),c!=null&&(e+='\t\t<div class="im-products-category">'+c+"<\/div>\n"))),M&&(d=t.description.replace("\n","<br />").replace("\r","").replace("\\","\\\\").replace("'","&#39;"),e+='\t\t<div class="im-products-description">'+d+'<div class="im-products-description-fade"><\/div><\/div>\n'),(I||O||N||q)&&(e+='\t\t<div class="im-products-separator"><\/div>\n'),O&&t.availabilityType!="unset"&&(e+='\t\t<div class="im-products-availability">',t.availabilityType=="fixed"?W.utils.isNullOrEmpty($)||t.staticAvailValue=="unknown"||(e+=z(t.staticAvailValue)+H(t.staticAvailValue)):T?S[t.id]&&(u=S[t.id].availability,e+="<table><tr>",e+='<td style="vertical-align: middle">',e+=z(u),e+="<\/td>",e+='<td style="vertical-align: middle">',e+=E?j(u,S[t.id].quantity):H(u),e+="<\/td><\/tr><\/table>"):(e+='<table><tr><td style="vertical-align: middle">'+z(t.staticAvailValue)+"<\/td>",e+=E?'<td style="vertical-align: middle">'+j(t.staticAvailValue,t.offlineAvailableItems)+"<\/td>":'<td style="vertical-align: middle">'+H(t.staticAvailValue)+"<\/td>",e+="<\/tr><\/table>"),e+="<\/div>\n"),t.quantityDiscounts&&E){e+="\t\t<div class=\"im-products-qty-discount\" onmouseover=\"x5engine.imTip.Show(this, {target: $(this).find('img'), text: '<div>"+W.l10n.get("cart_discount")+":<\/div><ul>";for(h in t.quantityDiscounts){var p=h,f=(t.quantityDiscounts[h]*100).toFixed(2),g=f%1==0?parseInt(f):f;e+="<li>"+W.l10n.get("cart_discount_per_qty").replace("[QUANTITY]",p).replace("[DISCOUNT]",g)+"<\/li>"}e+='<\/ul>\'})">\n\t\t\t<img alt="'+W.l10n.get("cart_qty_discount")+'" width="16" height="16" src="../res/info.gif" />\n\t\t\t'+W.l10n.get("cart_qty_discount")+"\n\t\t<\/div>\n"}if(I&&t.options){m=0;v='\t\t<div class="im-products-options">\n';for(o in t.options)t.options[o].suboptions!=undefined&&t.options[o].suboptions.length>0&&(m=m+t.options[o].suboptions.length);if(m==0){v+='\t\t\t<select id="product_'+t.id+'_opt" onchange="x5engine.cart.ui.updateProductListOptions(\''+t.id+"', this, 'product_"+t.id+"', "+(R?"true":"false")+');" style="'+(t.options[Object.keys(t.options)[0]].suboptions==undefined||t.options[Object.keys(t.options)[0]].suboptions.length==0?"width: 99%; ":"width: 47%;")+'">\n';for(o in t.options)a=o,s=t.options[o],v+='\t\t\t\t<option value="'+a+'">'+s.name+"<\/option>\n";v+="\t\t\t<\/select>\n"}else{v+='\t\t\t<select id="product_'+t.id+'_opt" onchange="x5engine.cart.ui.updateProductListOptions(\''+t.id+"', this, 'product_"+t.id+"', "+(R?"true":"false")+');" style="'+(t.options[Object.keys(t.options)[0]].suboptions==undefined||t.options[Object.keys(t.options)[0]].suboptions.length==0?"width: 99%; ":"width: 47%;")+'">\n';for(o in t.options)a=o,s=t.options[o],v+='\t\t\t\t<option value="'+a+'">'+W.utils.htmlDecode(s.name)+"<\/option>\n";if(v+="\t\t\t<\/select>\n",_=t.options[Object.keys(t.options)[0]],_.suboptions!=undefined&&_.suboptions.length>0){for(v+='\t\t\t<select id="product_'+t.id+'_subopt" style="width: 47%;">\n',y=0;y<_.suboptions.length;y++)v+='\t\t\t\t<option value="'+y+'">'+W.utils.htmlDecode(_.suboptions[y])+"<\/option>\n";v+="\t\t\t<\/select>\n"}}v+="\t\t<\/div>\n";e+=v}return N&&(e+='\t\t<div class="im-products-price">\n',e+=B(t,P),e+="<\/div>"),q&&E&&(e+='\t\t<input type="number" id="product_'+t.id+'_qty" class="im-products-qty" value="1" min="1" />\n'),q&&(b=W.l10n.get("cart_add"),D.buttonType()=="image"&&(x=D.addToCartImage(),x&&(w="../"+x.image,b='<img width="'+x.width+'" height="'+x.height+'" src="'+w+'" alt="'+b+'" title="'+b+'" />')),e+='\t\t<div class="im-products-button" onclick="x5engine.cart.ui.addToCart(\''+t.id+"', $('#product_"+t.id+"_qty').val(), $('#product_"+t.id+"_opt').val(), $('#product_"+t.id+"_subopt').val(), "+(D.goToCartAfterProductAdding()?"true":"false")+", '../');\">"+b+"<\/div>\n"),t.isNew&&(e+=L(D.cockadesNewImage(),"New!")),V(t)&&(e+=L(D.cockadesDiscountImage(),"Discount!")),e+="\t<\/div>\n",k=null,t.schemaOrg&&(C=W.cart.search.currentUrl+"#"+P+"_"+t.id,t.schemaOrg.url=C,t.schemaOrg.offers&&(t.schemaOrg.offers.url=C,t.availabilityType=="dynamic"&&T&&S[t.id]&&(t.schemaOrg.offers.availability=U(S[t.id].availability))),k=t.schemaOrg),{html:e,schemaOrg:k}}(g)).schemaOrg&&n.push(f.schemaOrg),i+=f.html),r++):1==p.length&&u(g,p[0]);a="price_desc"==_.sortOrderBy?a-1:a+1}if(W.cart.htmlProducts.setCounterProducts(r),W.cart.search.updateFiltersVisibilityAfterSearchExecution(d),0<n.length){for(m=[],a=0;a<n.length;a++)m.push({"@type":"ListItem",position:a+1,item:n[a]});v={"@context":"https://schema.org","@type":"ItemList",numberOfItems:n.length,itemListElement:m};i='<script type="application/ld+json">'+JSON.stringify(v)+"<\/script>"+i}return i}}function r(t){return-1<i.regardlessOfCouponAndQuantity.indexOf(t.id)}var S,i,_=n.extend(!0,{start:"0",length:"10",sortOrderBy:"relevance",custom:"",categories:[],priceStart:-1,priceEnd:-1,onlyNew:0,onlyDiscounted:0,onlyAvailable:0},t),P="im-products",T=W.utils.isOnline(),D=W.cart.productsDataSettings,O=D.showAvailability(),I=D.showOptions(),A=D.showName(),M=D.showDescription(),F=D.showCategory(),N=D.showPrice(),E=D.showQuantity(),R=D.includeVat(),q=D.showButton(),$=D.availabilityImage(),y=function(t){return W.cart.htmlProducts.prodCache[t.id]||(W.cart.htmlProducts.prodCache[t.id]=new W.cart.product(x5CartData.products[t.id],{quiet:!0})),W.cart.htmlProducts.prodCache[t.id]},z=function(t){var e="",i="../"+x5CartData.settings.availabilityImage;if(null!=i)switch(t){case"available":e+="\t\t\t\t<span style=\"vertical-align: middle; display: inline-block; width: 22px; height: 22px; background-image: url('"+i+"'); background-position: 0 0;\"><\/span>\n";break;case"lacking":e+="\t\t\t\t<span style=\"vertical-align: middle; display: inline-block; width: 22px; height: 22px; background-image: url('"+i+"'); background-position: -22px 0;\"><\/span>\n";break;case"notavailable":e+="\t\t\t\t<span style=\"vertical-align: middle; display: inline-block; width: 22px; height: 22px; background-image: url('"+i+"'); background-position: -44px 0;\"><\/span>\n"}return e},U=function(t){switch(t){case"available":return"http://schema.org/InStock";case"lacking":return"http://schema.org/LimitedAvailability";default:return"http://schema.org/OutOfStock"}},H=function(t){switch(t){case"available":return W.l10n.get("cart_fixedproduct_available");case"lacking":return W.l10n.get("cart_fixedproduct_lack");case"notavailable":return W.l10n.get("cart_fixedproduct_unavailable")}return""},j=function(t,e){switch(t){case"available":return W.l10n.get("cart_dynamicproduct_available").replace("[QUANTITY]",e);case"lacking":return W.l10n.get("cart_dynamicproduct_lack").replace("[QUANTITY]",e);case"notavailable":return W.l10n.get("cart_dynamicproduct_unavailable").replace("[QUANTITY]",e)}return""},L=function(t,e){return t&&t.image_obj?'\t\t<img src="../'+t.image_obj.image+'" style="position: absolute; max-height: '+t.image_obj.height+"px; max-width: "+t.image_obj.width+"px; width: "+t.size+"%; z-index: 2; "+function(t){switch(t){case"topleft":return"top: 0; left: 0;";case"topright":return"top: 0; right: 0;";case"bottomright":return"bottom: 0; right: 0;";case"bottomleft":return"bottom: 0; left: 0;"}return""}(t.align)+'" alt="'+e+'" />\n':""},B=function(t){var e=W.cart.productsDataSettings.showVat()&&"none"!=x5CartData.settings.vattype?'<span style="margin: 3px; font-size: 0.85em;">'+W.l10n.get(W.cart.productsDataSettings.includeVat()?"cart_showvat_included":"cart_showvat_excluded").replace("[FIELD]",t.vat)+"<\/span>":"",i=y(t).singleFullPrice(W.cart.productsDataSettings.includeVat()),n=W.cart.formatCurrency(i);return r(t)?(i=y(t).singlePrice(W.cart.productsDataSettings.includeVat()),i=W.cart.formatCurrency(i),'\t\t\t<span id="product_'+t.id+'_price">'+i+"<\/span>"+e+'\n\t\t\t<span style="text-decoration: line-through; margin-left: 2px;" id="product_'+t.id+'_fullprice">'+n+"<\/span>\n"):'\t\t\t<span id="product_'+t.id+'_fullprice">'+n+"<\/span>"+e+"\n"},V=function(t){return r(t)||-1<i.becauseOfQuantity.indexOf(t.id)};W.cart.manager.callWithSearchPageAdditionalInfos(function(t){S=t.availabilityData;i=t.discountedProducts;W.cart.search.draw(e())})}}})}(_jq,x5engine),function(w,k){"use strict";w.extend(!0,k.cart.productDetails,{init:function(t){function e(t){function m(t,e){var i=w('meta[content*="['+t+'-placeholder]"]');i&&i.attr("content")&&(e?(e=i.attr("content").replace("["+t+"-placeholder]",e),i.attr("content",e)):i.remove())}var r,e,i,n,a,s,o,c,l,d,u,h,p,f,g;if(t.name&&w("#"+y+" .product-title").text(t.name).attr("title",t.name),t.category&&(e="",null==x5CartData.categories||null==x5CartData.categories.dataSource||null!=(e=(r=function(t,e){var i,n;if(null!=e){for(i=0;i<e.length;i++)if("category"==e[i].type){if(e[i].id==t)return e[i].text;if(null!=e[i].items&&0<e[i].items.length&&(n=r(t,e[i].items),n))return n}return null}})(t.category,x5CartData.categories.dataSource))&&w("#"+y+" .product-category").text(e)),k.utils.isNullOrEmpty(_.averageRating)||k.utils.isNullOrEmpty(_.totalComments)?w("#"+y+" .product-stars").css("display","none"):(e='<span class="topic-star-container-small" title="'+_.averageRating+'/5"><span class="topic-star-fixer-small" style="width: '+Math.round(_.averageRating*20)+'%;"><\/span><\/span>',e+="<span>"+_.averageRating+" ("+_.totalComments+" "+k.l10n.get("comments_and_ratings_label_reviews")+")<\/span>",w("#"+y+" .product-stars").append(e)),t.description&&(n=k.utils.replaceAll(t.description,"\n","<br />"),n=k.utils.replaceAll(n,"\\","\\\\"),n=k.utils.replaceAll(n,"'","&#39;"),w("#"+y+" .product-description").append(n+'<div class="im-products-description-fade"><\/div>')),"unset"!=t.availabilityType&&(i=function(t){var e="",i="../"+x5CartData.settings.availabilityImage;if(null!=i)switch(t){case"available":e+="\t\t\t\t<span style=\"vertical-align: middle; display: inline-block; width: 22px; height: 22px; background-image: url('"+i+"'); background-position: 0 0;\"><\/span>\n";break;case"lack":e+="\t\t\t\t<span style=\"vertical-align: middle; display: inline-block; width: 22px; height: 22px; background-image: url('"+i+"'); background-position: -22px 0;\"><\/span>\n";break;case"notavailable":e+="\t\t\t\t<span style=\"vertical-align: middle; display: inline-block; width: 22px; height: 22px; background-image: url('"+i+"'); background-position: -44px 0;\"><\/span>\n"}return e},n=function(t,e){return'<table><tr><td style="vertical-align: middle">'+i(t)+'<\/td><td style="vertical-align: middle">'+function(t,e){switch(t){case"available":return k.l10n.get("cart_dynamicproduct_available").replace("[QUANTITY]",e);case"lack":return k.l10n.get("cart_dynamicproduct_lack").replace("[QUANTITY]",e);case"notavailable":return k.l10n.get("cart_dynamicproduct_unavailable").replace("[QUANTITY]",e)}return""}(t,e)+"<\/td><\/tr><\/table>"},d="","fixed"==t.availabilityType?k.utils.isNullOrEmpty(x5CartData.settings.availabilityImage)||"unknown"==t.staticAvailValue||(d+=i(t.staticAvailValue)+function(t){switch(t){case"available":return k.l10n.get("cart_fixedproduct_available");case"lack":return k.l10n.get("cart_fixedproduct_lack");case"notavailable":return k.l10n.get("cart_fixedproduct_unavailable")}return""}(t.staticAvailValue)):k.utils.isOnline()?"dynamic"==t.availabilityType&&t.dynamicAvailValue&&(d+=n(t.dynamicAvailValue,t.availableItems)):d+=n(t.staticAvailValue,t.offlineAvailableItems),w("#"+y+" .product-available").html(d)),t.quantityDiscounts&&(a="\t\t<div class=\"im-products-qty-discount\" onmouseover=\"x5engine.imTip.Show(this, {target: $(this).find('img'), text: '<div>"+k.l10n.get("cart_discount")+":<\/div><ul>",t.quantityDiscounts.forEach(function(t){var e=t.minimum,t=t.value.toFixed(2),t=t%1==0?parseInt(t):t;a+="<li>"+k.l10n.get("cart_discount_per_qty").replace("[QUANTITY]",e).replace("[DISCOUNT]",t)+"<\/li>"}),a+='<\/ul>\'})">\n\t\t\t<img alt="'+k.l10n.get("cart_qty_discount")+'" width="16" height="16" src="../res/info.gif" />\n\t\t\t'+k.l10n.get("cart_qty_discount")+"\n\t\t<\/div>\n",w("#"+y+" .product-qty-discount").append(a)),t.options&&0<t.options.length){if(s=0,o="",t.options.forEach(function(t){null!=t.suboptions&&0<t.suboptions.length&&(s+=t.suboptions.length)}),0==s)o+='\t\t\t<select id="product_'+t.id+'_opt" onchange="x5engine.cart.ui.updateProductListOptions(\''+t.id+"', this, 'product_"+t.id+"', "+(x?"true":"false")+');" class="opt">\n',t.options.forEach(function(t){o+='\t\t\t\t<option value="'+t.id+'">'+t.name+"<\/option>\n"}),o+="\t\t\t<\/select>\n";else if(o+='\t\t\t<select id="product_'+t.id+'_opt" class="opt" onchange="x5engine.cart.ui.updateProductListOptions(\''+t.id+"', this, 'product_"+t.id+"', "+(x?"true":"false")+', true);">\n',t.options.forEach(function(t){o+='\t\t\t\t<option value="'+t.id+'">'+t.name+"<\/option>\n"}),o+="\t\t\t<\/select>\n",c=t.options[0],null!=c.suboptions&&0<c.suboptions.length){for(o+='\t\t\t<select id="product_'+t.id+'_subopt" class="subopt">\n',l=0;l<c.suboptions.length;l++)o+='\t\t\t\t<option value="'+l+'">'+c.suboptions[l]+"<\/option>\n";o+="\t\t\t<\/select>\n"}w("#"+y+" .product-options").append(o)}if(w("#"+y+" .im-products-qty").attr("id","product_"+t.id+"_qty"),d=k.l10n.get("cart_add"),w("#"+y+" .product-add").append('<input type="button" value="'+d+'" class="im-products-button" onclick="x5engine.cart.ui.addToCart(\''+t.id+"', $('#product_"+t.id+"_qty').val(), $('#product_"+t.id+"_opt').val(), $('#product_"+t.id+"_subopt').val(), false, '../');\"/>"),w("#"+y+" .product-price").append(k.cart.productDetails.getPriceBoxCode(t,x,!0)),k.cart.productDetails.initGallery(y,t,_,0),k.utils.isNullOrEmpty(t.productPageDetailsRichText)||(w("#"+y+" .container-details").append(k.utils.isOnline()?t.productPageDetailsRichText.html.online:t.productPageDetailsRichText.html.preview),w('<style type="text/css">'+t.productPageDetailsRichText.css+"<\/style>").appendTo(w("head")),w("#"+y+" .container-details").removeClass("hidden")),_.showRelatedProducts){if(h={},0<k.settings.breakPoints.length)for(l=0;l<_.innerWidths.length;l++)p="Desktop"==k.responsive.getCurrentBreakPoint().name&&1==_.innerWidths.length?1:k.settings.breakPoints[l].end,0!=p&&(u=Math.floor(_.innerWidths[l]/260),h[p]={},h[p].slidesPerView=Math.max(1,u));f=function(){var t=_.offsetFromRelatedProducts,e=_.offsetToRelatedProducts;k.cart.api.getRelatedProducts(v,t,e).then(function(t){0<t.length?(w("#"+y+" .container-related-products").removeClass("d-none"),t=Object.values(t),b.appendSlide(g(t)),_.offsetFromRelatedProducts+=_.offsetToRelatedProducts):_.offsetFromRelatedProducts=_.offsetMaxRelatedProducts})};g=function(t){for(var n,r,a,e=[],i=0;i<t.length;i++)n=t[i],r="../"+x5CartData.settings.noPreviewImage,0<n.media.length&&(r="../"+("video"===(a=n.media[0]).type||"youtube"===a.type||"vimeo"===a.type?"res/video_thumb.svg":k.utils.isNullOrEmpty(a.url)?x5CartData.settings.noPreviewImage:a.url)),a=[],a.push('<div class="swiper-slide" '+k.utils.linkJs(n.link,{baseUrl:"../"})+' data-product-id="'+n.id+'">'),a.push('<div class="swiper-slide-wrapper-image"><img class="swiper-slide-image" src="'+r+'"><\/div>'),a.push('<div class="product-title three-lines lines-ellipsis" title="'+n.name+'">'+n.name+"<\/div>"),a.push('<div class="product-price">'),a.push(k.cart.productDetails.getPriceBoxCode(n,x,!1)),a.push("<\/div>"),a.push("<\/div>"),a=a.join(""),e.push(a);return e};(b=new Swiper("#"+y+" .container-related-products .swiper-container",{slidesPerView:1,centeredSlides:!1,spaceBetween:10,loop:!1,allowTouchMove:!1,preventClicks:!0,preventClicksPropagation:!0,freeMode:!1,pagination:{el:".container-related-products .swiper-pagination",type:"null"},navigation:{nextEl:"#"+y+" .container-related-products .swiper-button-next",prevEl:"#"+y+" .container-related-products .swiper-button-prev"},breakpoints:h})).on("slideNextTransitionEnd",function(){_.offsetFromRelatedProducts<_.offsetMaxRelatedProducts&&f()});f()}(d=t.schemaOrg)&&(d["@context"]="https://schema.org",w('<script type="application/ld+json">'+JSON.stringify(d)+"<\/script>").appendTo(w("head")));w("title").html(w("title").html().replace("[title-placeholder]",t.name).replace("[tag-title-placeholder]",t.seo.tagTitle));m("title",t.name);m("tag-title",t.seo.tagTitle);m("tag-description",t.seo.tagDescription);m("tag-keywords",t.seo.tagKeywords);m("slug",t.slug);m("og-image",t.thumb.url);m("og-image-type",t.thumb.type);m("og-image-width",t.thumb.width);m("og-image-height",t.thumb.height)}var v,_=w.extend({target:null,galleryHeightPx:400,galleryWidthPerc:50,galleryThumbnailHeightPx:64,showRelatedProducts:!1,innerWidths:[],averageRating:null,totalComments:null,minWidthCategoryBox:250,offsetFromRelatedProducts:0,offsetToRelatedProducts:10,offsetMaxRelatedProducts:50,minThumbSize:48,videoHiresWidth:2560,videoHiresHeight:1440},t),y=_.target,b=null,x="included"==x5CartData.settings.vattype;k.cart.ecommerce(x5CartData);k.cart.productDetails.getIdFromQueryString().then(function(t){v=t;k.utils.isNullOrEmpty(v)||k.cart.api.getProductData(v).then(function(i){var n,r,a;0<i.length&&(e(i[0]),w("#"+y).removeClass("hidden"),n=null,a=!(r=0),k.utils.onElementResize(document.getElementById(y),function(t){r!=t.width&&(r=t.width,n&&clearTimeout(n),n=setTimeout(function(){var t;a?a=!1:(t=w(".swiper-container.gallery-top .swiper-slide-active").attr("data-position"),document.querySelector("#"+_.target+" .swiper-container.gallery-top").swiper.destroy(!0,!0),w("#"+_.target+" .swiper-container.gallery-top .swiper-wrapper").empty(),1<i[0].media.length&&(document.querySelector("#"+_.target+" .swiper-container.gallery-thumbs").swiper.destroy(!0,!0),w("#"+_.target+" .swiper-container.gallery-thumbs .swiper-wrapper").empty()),k.cart.productDetails.initGallery(_.target,i[0],_,t))},50))}))})})},getProdClass:function(t){return new k.cart.product(x5CartData.products[t.id],{quiet:!0})},getPriceBoxCode:function(t,e,i){var n="",r=i&&"none"!=x5CartData.settings.vattype?'<span class="vat-info small-font">'+k.l10n.get(e?"cart_showvat_included":"cart_showvat_excluded").replace("[FIELD]",t.vat)+"<\/span>":"",i=k.cart.productDetails.getProdClass(t).singleFullPrice(e),i=k.cart.formatCurrency(i);return t.isDiscountedRegardlessOfCouponAndQuantity?(e=k.cart.productDetails.getProdClass(t).singlePrice(e),e=k.cart.formatCurrency(e),n+='<div class="product-price-full-price" id="product_'+t.id+'_fullprice">'+i+"<\/div>",n+='<span class="big-font bold product-price-price" id="product_'+t.id+'_price">'+e+"<\/span>"+r):n+='<span class="big-font bold product-price-price" id="product_'+t.id+'_fullprice">'+i+"<\/span>"+r,n},initGallery:function(h,p,f,t){var i=1<p.media.length,e=function(r,a){function s(i,n,t,e,r,a,s){var o,c,l,d,u='<div class="swiper-slide" data-position="'+n+'"';"galleryTop"==e&&r?(u+="><\/div>","video"==s.type&&(s.url="../"+s.url),o=f.videoHiresWidth,c=f.videoHiresHeight,(l=w("#"+f.target+" .swiper-container.gallery-top").width())<o&&(c*=l/o,o=l),(d=w("#"+f.target+" .swiper-container.gallery-top").height())<c&&(o*=d/c,c=d),new k.mediaObject(w.extend(s,{showControls:!1,touchDevice:w("html").hasClass("touchevents"),contentWidth:l,contentHeight:d,width:o,height:c,load:function(t){i.append(u);var e=i.find(".swiper-slide[data-position='"+n+"']");e.append(t.DOMObject());t.AnimateIn(e,function(){})},error:function(){}}))):("galleryTop"==e?u+='><img class="swiper-slide-image" '+k.utils.linkJs(p.showboxLinks[n],{baseUrl:"../"})+' src="'+t+'">':(u+='><img src="'+t+'"',r&&(r=w("#"+h+" .swiper-container.gallery-thumbs .swiper-wrapper").height(),u+="style='width: "+r+"px;'"),u+=">"),u+="<\/div>",i.append(u))}0<p.media.length?p.media.forEach(function(t,e){var i,n;null!=t&&((i="video"===t.type||"youtube"===t.type||"vimeo"===t.type)||"galleryTop"!=a||t.width<r.width()&&(t.height,r.height()),n="../"+(i?"res/video_thumb.svg":k.utils.isNullOrEmpty(t.url)?x5CartData.settings.noPreviewImage:t.url),s(r,e,n,a,i,0,t))}):s(r,0,"../"+x5CartData.settings.noPreviewImage,a,!1)},n;e(w("#"+h+" .swiper-container.gallery-top .swiper-wrapper"),"galleryTop");n=w("#"+h+" .swiper-container.gallery-thumbs .swiper-wrapper");1<p.media.length?e(n,"galleryThumbs"):w("#"+h+" .container-gallery").addClass("one-image");e=null;i&&(e=new Swiper("#"+h+" .swiper-container.gallery-thumbs",{spaceBetween:5,slidesPerView:"auto",loop:!1,freeMode:!1,centerInsufficientSlides:!1,centeredSlides:!0,slideToClickedSlide:!0,observer:!0,observeParents:!0,navigation:{nextEl:"#"+h+" .container-gallery .swiper-button-next.thumbs",prevEl:"#"+h+" .container-gallery .swiper-button-prev.thumbs"},on:{init:function(){},imagesReady:function(){var t,e;i&&(t=w("#"+h+" .swiper-container.gallery-thumbs").width(),e=0,w("#"+h+" .swiper-container.gallery-thumbs .swiper-wrapper .swiper-slide").each(function(){e+=w(this).width()+5}),e<t&&(w("#"+h+" .container-gallery .swiper-button-next.thumbs").css("display","none"),w("#"+h+" .container-gallery .swiper-button-prev.thumbs").css("display","none")))}}}));n=null;n=new Swiper("#"+h+" .swiper-container.gallery-top",{navigation:{nextEl:"#"+h+" .container-gallery .swiper-button-next.top",prevEl:"#"+h+" .container-gallery .swiper-button-prev.top"},spaceBetween:5,loop:!1,allowTouchMove:i,observer:!0,observeParents:!0,thumbs:{swiper:e}});0<t&&(e.slideTo(parseInt(t)),n.slideTo(parseInt(t)))},getIdFromQueryString:function(){var t,e,i;if(!k.utils.isNullOrEmpty(window.location.search)&&1<window.location.search.length){e=[];for(t in window.location.search.substring(1).split("&").forEach(function(t){e.push(t.split("="))}),e){if(i=e[t],1==i.length)return k.cart.api.getIdBySlug(i[0]);if(2==i.length&&"id"==i[0])return Promise.resolve(i[1])}}return Promise.resolve(null)}})}(_jq,x5engine,window),function(a,r,s){"use strict";function c(n,r){return o.then(function(e){var t,i={ids:null==(t=n)?[]:Array.isArray(t)?t:[t],cached:[],uncached:[]};return i.ids.forEach(function(t){e.getProductData(t)?r||i.cached.push(t):i.uncached.push(t)}),i})}function l(i){return i.ids.length?n.then(function(t){var e=0<i.cached.length?t.getProductsDynamicData(i.cached):Promise.resolve([]),t=0<i.uncached.length?t.getProducts(i.uncached):Promise.resolve([]);return Promise.all([t,e])}).then(function(t){return{ids:i.ids,uncached:t[0],cached:t[1]}}):Promise.resolve({})}function d(t,e){return e=c(t,e).then(l),Promise.all([o,e]).then(function(t){var e=t[0],i=t[1],n,r;if(i.uncached)for(n in i.uncached)e.addProduct(i.uncached[n]);if(i.cached)for(n in i.cached)e.addProduct(a.extend(!0,e.getProductData(n),i.cached[n]));return r=[],i.ids&&i.ids.forEach(function(t){r.push(e.getProductData(t))}),r})}var t=new Promise(function(t){r.boot.push(function(){t(r.settings)})}),n=t.then(function(n){if(n.islocal)return{getVersion:function(){return Promise.resolve(Date.now())},getProducts:function(e){return new Promise(function(t){var i={};e.forEach(function(t){var e=n.imCart.localProductsData[t];e&&(i[t]=e)});t(i)})},getProductsDynamicData:function(i){return new Promise(function(t){var e={};i.forEach(function(t){e[t]={}});t(e)})},getIdBySlug:function(t){return Promise.resolve(r.settings.imCart.slugToProductIdMap[t])}};{const i=n.currentPath+"cart/x5cart.php";function e(t){return new Promise(function(e,i){a.ajax(t).always(function(t){t.status&&"ok"===t.status?e(t.data):i(t)})})}var t=e({url:i+"?action=crtvrs",type:"GET"});return{getVersion:function(){return t},getProducts:function(t){return e({url:i+"?action=prdinfo",type:"POST",data:{products:t}})},getProductsDynamicData:function(t){return e({url:i+"?action=prddyna",type:"POST",data:{products:t}})},getIdBySlug:function(t){return e({url:i+"?action=prdid",type:"POST",data:{slug:t}})}}}}),e=n.then(function(t){return t.getVersion()}),i=new Promise(function(t){try{var e,i,n;"localStorage"in s&&s.localStorage&&(e="test",(i=s.localStorage).setItem(e,"asd"),n="asd"==i.getItem(e),i.removeItem(e),n&&t(s.localStorage))}catch(t){}t({_data:{},setItem:function(t,e){return this._data[t]=String(e)},getItem:function(t){if(this._data.hasOwnProperty(t))return this._data[t]},removeItem:function(t){return delete this._data[t]},clear:function(){return this._data={}}})}),t=Promise.all([i,t]).then(function(t){var e=t[0];const i=t[1].siteId+"_cart_api_cache";return{loadCache:function(){try{return JSON.parse(e.getItem(i))}catch(t){return}},saveCache:function(t){try{e.setItem(i,JSON.stringify(t))}catch(t){console.error(t)}}}}),o=Promise.all([t,e]).then(function(t){var n=t[0],r=t[1],t=n.loadCache();return t&&t.version&&r==t.version||n.saveCache({version:r,products:{},slugToIdMap:{}}),{getProductData:function(t){var e=n.loadCache();if(e&&e.products)return e.products[t]},getIdBySlug:function(t){var e=n.loadCache();if(e&&e.slugToIdMap)return e.slugToIdMap[t]},addProduct:function(t){var e=n.loadCache(),i;if(e){if(e.products||(e.products={}),!e.slugToIdMap)for(i in e.slugToIdMap={},e.products)e.slugToIdMap[e.products[i].slug]=i}else e={version:r,products:{},slugToIdMap:{}};e.products[t.id]=t;e.slugToIdMap[t.slug]=t.id;n.saveCache(e)}}}).catch(function(){});a.extend(!0,r.cart,{api:{getIdBySlug:function(e){return o.then(function(t){return t=t.getIdBySlug(e),t||n.then(function(t){return t.getIdBySlug(e)})})},getProductData:d,getRelatedProducts:function(t,e,i){return d(t,!0).then(function(t){if(0<t.length)return e=e||0,t=t[0],t.relatedProducts&&t.relatedProducts.length&&t.relatedProducts.length>e?d(t.relatedProducts.slice(e,e+i||t.relatedProducts.length),!0):[];throw"there's no product with requested id";})}}})}(_jq,x5engine,window),function(){"use strict";var e;e=function(s,o,c,t,l){function r(t,e,i){this.VERSION="2.3.0";this.input=t;this.plugin_count=i;this.current_plugin=0;this.calc_count=0;this.update_tm=0;this.old_from=0;this.old_to=0;this.old_min_interval=null;this.raf_id=null;this.dragging=!1;this.force_redraw=!1;this.no_diapason=!1;this.has_tab_index=!0;this.is_key=!1;this.is_update=!1;this.is_start=!0;this.is_finish=!1;this.is_active=!1;this.is_resize=!1;this.is_click=!1;e=e||{};this.$cache={win:s(c),body:s(o.body),input:s(t),cont:null,rs:null,min:null,max:null,from:null,to:null,single:null,bar:null,line:null,s_single:null,s_from:null,s_to:null,shad_single:null,shad_from:null,shad_to:null,edge:null,grid:null,grid_labels:[]};this.coords={x_gap:0,x_pointer:0,w_rs:0,w_rs_old:0,w_handle:0,p_gap:0,p_gap_left:0,p_gap_right:0,p_step:0,p_pointer:0,p_handle:0,p_single_fake:0,p_single_real:0,p_from_fake:0,p_from_real:0,p_to_fake:0,p_to_real:0,p_bar_x:0,p_bar_w:0,grid_gap:0,big_num:0,big:[],big_w:[],big_p:[],big_x:[]};this.labels={w_min:0,w_max:0,w_from:0,w_to:0,w_single:0,p_min:0,p_max:0,p_from_fake:0,p_from_left:0,p_to_fake:0,p_to_left:0,p_single_fake:0,p_single_left:0};var n,r,a=this.$cache.input,i=a.prop("value"),t={skin:"flat",type:"single",min:10,max:100,from:null,to:null,step:1,min_interval:0,max_interval:0,drag_interval:!1,values:[],p_values:[],from_fixed:!1,from_min:null,from_max:null,from_shadow:!1,to_fixed:!1,to_min:null,to_max:null,to_shadow:!1,prettify_enabled:!0,prettify_separator:" ",prettify:null,force_edges:!1,keyboard:!0,grid:!1,grid_margin:!0,grid_num:4,grid_snap:!1,hide_min_max:!1,hide_from_to:!1,prefix:"",postfix:"",max_postfix:"",decorate_both:!0,values_separator:" â€” ",input_values_separator:";",disable:!1,block:!1,extra_classes:"",scope:null,onStart:null,onChange:null,onFinish:null,onUpdate:null};for(r in"INPUT"!==a[0].nodeName&&console&&console.warn&&console.warn("Base element should be <input>!",a[0]),(n={skin:a.data("skin"),type:a.data("type"),min:a.data("min"),max:a.data("max"),from:a.data("from"),to:a.data("to"),step:a.data("step"),min_interval:a.data("minInterval"),max_interval:a.data("maxInterval"),drag_interval:a.data("dragInterval"),values:a.data("values"),from_fixed:a.data("fromFixed"),from_min:a.data("fromMin"),from_max:a.data("fromMax"),from_shadow:a.data("fromShadow"),to_fixed:a.data("toFixed"),to_min:a.data("toMin"),to_max:a.data("toMax"),to_shadow:a.data("toShadow"),prettify_enabled:a.data("prettifyEnabled"),prettify_separator:a.data("prettifySeparator"),force_edges:a.data("forceEdges"),keyboard:a.data("keyboard"),grid:a.data("grid"),grid_margin:a.data("gridMargin"),grid_num:a.data("gridNum"),grid_snap:a.data("gridSnap"),hide_min_max:a.data("hideMinMax"),hide_from_to:a.data("hideFromTo"),prefix:a.data("prefix"),postfix:a.data("postfix"),max_postfix:a.data("maxPostfix"),decorate_both:a.data("decorateBoth"),values_separator:a.data("valuesSeparator"),input_values_separator:a.data("inputValuesSeparator"),disable:a.data("disable"),block:a.data("block"),extra_classes:a.data("extraClasses")}).values=n.values&&n.values.split(","),n)n.hasOwnProperty(r)&&(n[r]!==l&&""!==n[r]||delete n[r]);i!==l&&""!==i&&((i=i.split(n.input_values_separator||e.input_values_separator||";"))[0]&&i[0]==+i[0]&&(i[0]=+i[0]),i[1]&&i[1]==+i[1]&&(i[1]=+i[1]),e&&e.values&&e.values.length?(t.from=i[0]&&e.values.indexOf(i[0]),t.to=i[1]&&e.values.indexOf(i[1])):(t.from=i[0]&&+i[0],t.to=i[1]&&+i[1]));s.extend(t,e);s.extend(t,n);this.options=t;this.update_check={};this.validate();this.result={input:this.$cache.input,slider:null,min:this.options.min,max:this.options.max,from:this.options.from,from_percent:0,from_value:null,to:this.options.to,to_percent:0,to_value:null};this.init()}var e,i=0,n=0<(e=t.userAgent).search(t=/msie\s\d+/i)&&t.exec(e).toString().split(" ")[1]<9&&(s("html").addClass("lt-ie9"),!0);Function.prototype.bind||(Function.prototype.bind=function(i){var n=this,r=[].slice,a,s;if("function"!=typeof n)throw new TypeError;return a=r.call(arguments,1),s=function(){var e,t;return this instanceof s?(t=function(){},t.prototype=n.prototype,e=new t,t=n.apply(e,a.concat(r.call(arguments))),Object(t)===t?t:e):n.apply(i,a.concat(r.call(arguments)))},s});Array.prototype.indexOf||(Array.prototype.indexOf=function(t,e){var i,n,r;if(null==this)throw new TypeError('"this" is null or not defined');if((n=Object(this),r=n.length>>>0,0==r)||(e=+e||0,r<=(e=Math.abs(e)===1/0?0:e)))return-1;for(i=Math.max(0<=e?e:r-Math.abs(e),0);i<r;){if(i in n&&n[i]===t)return i;i++}return-1});r.prototype={init:function(t){this.no_diapason=!1;this.coords.p_step=this.convertToPercent(this.options.step,!0);this.target="base";this.toggleInput();this.append();this.setMinMax();t?(this.force_redraw=!0,this.calc(!0),this.callOnUpdate()):(this.force_redraw=!0,this.calc(!0),this.callOnStart());this.updateScene()},append:function(){var t='<span class="irs irs--'+this.options.skin+" js-irs-"+this.plugin_count+" "+this.options.extra_classes+'"><\/span>';this.$cache.input.before(t);this.$cache.input.prop("readonly",!0);this.$cache.cont=this.$cache.input.prev();this.result.slider=this.$cache.cont;this.$cache.cont.html('<span class="irs"><span class="irs-line" tabindex="0"><\/span><span class="irs-min">0<\/span><span class="irs-max">1<\/span><span class="irs-from">0<\/span><span class="irs-to">0<\/span><span class="irs-single">0<\/span><\/span><span class="irs-grid"><\/span>');this.$cache.rs=this.$cache.cont.find(".irs");this.$cache.min=this.$cache.cont.find(".irs-min");this.$cache.max=this.$cache.cont.find(".irs-max");this.$cache.from=this.$cache.cont.find(".irs-from");this.$cache.to=this.$cache.cont.find(".irs-to");this.$cache.single=this.$cache.cont.find(".irs-single");this.$cache.line=this.$cache.cont.find(".irs-line");this.$cache.grid=this.$cache.cont.find(".irs-grid");"single"===this.options.type?(this.$cache.cont.append('<span class="irs-bar irs-bar--single"><\/span><span class="irs-shadow shadow-single"><\/span><span class="irs-handle single"><i><\/i><i><\/i><i><\/i><\/span>'),this.$cache.bar=this.$cache.cont.find(".irs-bar"),this.$cache.edge=this.$cache.cont.find(".irs-bar-edge"),this.$cache.s_single=this.$cache.cont.find(".single"),this.$cache.from[0].style.visibility="hidden",this.$cache.to[0].style.visibility="hidden",this.$cache.shad_single=this.$cache.cont.find(".shadow-single")):(this.$cache.cont.append('<span class="irs-bar"><\/span><span class="irs-shadow shadow-from"><\/span><span class="irs-shadow shadow-to"><\/span><span class="irs-handle from"><i><\/i><i><\/i><i><\/i><\/span><span class="irs-handle to"><i><\/i><i><\/i><i><\/i><\/span>'),this.$cache.bar=this.$cache.cont.find(".irs-bar"),this.$cache.s_from=this.$cache.cont.find(".from"),this.$cache.s_to=this.$cache.cont.find(".to"),this.$cache.shad_from=this.$cache.cont.find(".shadow-from"),this.$cache.shad_to=this.$cache.cont.find(".shadow-to"),this.setTopHandler());this.options.hide_from_to&&(this.$cache.from[0].style.display="none",this.$cache.to[0].style.display="none",this.$cache.single[0].style.display="none");this.appendGrid();this.options.disable?(this.appendDisableMask(),this.$cache.input[0].disabled=!0):(this.$cache.input[0].disabled=!1,this.removeDisableMask(),this.bindEvents());this.options.disable||(this.options.block?this.appendDisableMask():this.removeDisableMask());this.options.drag_interval&&(this.$cache.bar[0].style.cursor="ew-resize")},setTopHandler:function(){var t=this.options.min,e=this.options.max,i=this.options.from,n=this.options.to;t<i&&n===e?this.$cache.s_from.addClass("type_last"):n<e&&this.$cache.s_to.addClass("type_last")},changeLevel:function(t){switch(t){case"single":this.coords.p_gap=this.toFixed(this.coords.p_pointer-this.coords.p_single_fake);this.$cache.s_single.addClass("state_hover");break;case"from":this.coords.p_gap=this.toFixed(this.coords.p_pointer-this.coords.p_from_fake);this.$cache.s_from.addClass("state_hover");this.$cache.s_from.addClass("type_last");this.$cache.s_to.removeClass("type_last");break;case"to":this.coords.p_gap=this.toFixed(this.coords.p_pointer-this.coords.p_to_fake);this.$cache.s_to.addClass("state_hover");this.$cache.s_to.addClass("type_last");this.$cache.s_from.removeClass("type_last");break;case"both":this.coords.p_gap_left=this.toFixed(this.coords.p_pointer-this.coords.p_from_fake);this.coords.p_gap_right=this.toFixed(this.coords.p_to_fake-this.coords.p_pointer);this.$cache.s_to.removeClass("type_last");this.$cache.s_from.removeClass("type_last")}},appendDisableMask:function(){this.$cache.cont.append('<span class="irs-disable-mask"><\/span>');this.$cache.cont.addClass("irs-disabled")},removeDisableMask:function(){this.$cache.cont.remove(".irs-disable-mask");this.$cache.cont.removeClass("irs-disabled")},remove:function(){this.$cache.cont.remove();this.$cache.cont=null;this.$cache.line.off("keydown.irs_"+this.plugin_count);this.$cache.body.off("touchmove.irs_"+this.plugin_count);this.$cache.body.off("mousemove.irs_"+this.plugin_count);this.$cache.win.off("touchend.irs_"+this.plugin_count);this.$cache.win.off("mouseup.irs_"+this.plugin_count);n&&(this.$cache.body.off("mouseup.irs_"+this.plugin_count),this.$cache.body.off("mouseleave.irs_"+this.plugin_count));this.$cache.grid_labels=[];this.coords.big=[];this.coords.big_w=[];this.coords.big_p=[];this.coords.big_x=[];cancelAnimationFrame(this.raf_id)},bindEvents:function(){this.no_diapason||(this.$cache.body.on("touchmove.irs_"+this.plugin_count,this.pointerMove.bind(this)),this.$cache.body.on("mousemove.irs_"+this.plugin_count,this.pointerMove.bind(this)),this.$cache.win.on("touchend.irs_"+this.plugin_count,this.pointerUp.bind(this)),this.$cache.win.on("mouseup.irs_"+this.plugin_count,this.pointerUp.bind(this)),this.$cache.line.on("touchstart.irs_"+this.plugin_count,this.pointerClick.bind(this,"click")),this.$cache.line.on("mousedown.irs_"+this.plugin_count,this.pointerClick.bind(this,"click")),this.$cache.line.on("focus.irs_"+this.plugin_count,this.pointerFocus.bind(this)),this.options.drag_interval&&"double"===this.options.type?(this.$cache.bar.on("touchstart.irs_"+this.plugin_count,this.pointerDown.bind(this,"both")),this.$cache.bar.on("mousedown.irs_"+this.plugin_count,this.pointerDown.bind(this,"both"))):(this.$cache.bar.on("touchstart.irs_"+this.plugin_count,this.pointerClick.bind(this,"click")),this.$cache.bar.on("mousedown.irs_"+this.plugin_count,this.pointerClick.bind(this,"click"))),"single"===this.options.type?(this.$cache.single.on("touchstart.irs_"+this.plugin_count,this.pointerDown.bind(this,"single")),this.$cache.s_single.on("touchstart.irs_"+this.plugin_count,this.pointerDown.bind(this,"single")),this.$cache.shad_single.on("touchstart.irs_"+this.plugin_count,this.pointerClick.bind(this,"click")),this.$cache.single.on("mousedown.irs_"+this.plugin_count,this.pointerDown.bind(this,"single")),this.$cache.s_single.on("mousedown.irs_"+this.plugin_count,this.pointerDown.bind(this,"single")),this.$cache.edge.on("mousedown.irs_"+this.plugin_count,this.pointerClick.bind(this,"click")),this.$cache.shad_single.on("mousedown.irs_"+this.plugin_count,this.pointerClick.bind(this,"click"))):(this.$cache.single.on("touchstart.irs_"+this.plugin_count,this.pointerDown.bind(this,null)),this.$cache.single.on("mousedown.irs_"+this.plugin_count,this.pointerDown.bind(this,null)),this.$cache.from.on("touchstart.irs_"+this.plugin_count,this.pointerDown.bind(this,"from")),this.$cache.s_from.on("touchstart.irs_"+this.plugin_count,this.pointerDown.bind(this,"from")),this.$cache.to.on("touchstart.irs_"+this.plugin_count,this.pointerDown.bind(this,"to")),this.$cache.s_to.on("touchstart.irs_"+this.plugin_count,this.pointerDown.bind(this,"to")),this.$cache.shad_from.on("touchstart.irs_"+this.plugin_count,this.pointerClick.bind(this,"click")),this.$cache.shad_to.on("touchstart.irs_"+this.plugin_count,this.pointerClick.bind(this,"click")),this.$cache.from.on("mousedown.irs_"+this.plugin_count,this.pointerDown.bind(this,"from")),this.$cache.s_from.on("mousedown.irs_"+this.plugin_count,this.pointerDown.bind(this,"from")),this.$cache.to.on("mousedown.irs_"+this.plugin_count,this.pointerDown.bind(this,"to")),this.$cache.s_to.on("mousedown.irs_"+this.plugin_count,this.pointerDown.bind(this,"to")),this.$cache.shad_from.on("mousedown.irs_"+this.plugin_count,this.pointerClick.bind(this,"click")),this.$cache.shad_to.on("mousedown.irs_"+this.plugin_count,this.pointerClick.bind(this,"click"))),this.options.keyboard&&this.$cache.line.on("keydown.irs_"+this.plugin_count,this.key.bind(this,"keyboard")),n&&(this.$cache.body.on("mouseup.irs_"+this.plugin_count,this.pointerUp.bind(this)),this.$cache.body.on("mouseleave.irs_"+this.plugin_count,this.pointerUp.bind(this))))},pointerFocus:function(){var e,i;this.target||(e=(i="single"===this.options.type?this.$cache.single:this.$cache.from).offset().left,e+=i.width()/2-1,this.pointerClick("single",{preventDefault:function(){},pageX:e}))},pointerMove:function(t){this.dragging&&(t=t.pageX||t.originalEvent.touches&&t.originalEvent.touches[0].pageX,this.coords.x_pointer=t-this.coords.x_gap,this.calc())},pointerUp:function(t){this.current_plugin===this.plugin_count&&this.is_active&&(this.is_active=!1,this.$cache.cont.find(".state_hover").removeClass("state_hover"),this.force_redraw=!0,n&&s("*").prop("unselectable",!1),this.updateScene(),this.restoreOriginalMinInterval(),(s.contains(this.$cache.cont[0],t.target)||this.dragging)&&this.callOnFinish(),this.dragging=!1)},pointerDown:function(t,e){e.preventDefault();var i=e.pageX||e.originalEvent.touches&&e.originalEvent.touches[0].pageX;2!==e.button&&("both"===t&&this.setTempMinInterval(),t=t||this.target||"from",this.current_plugin=this.plugin_count,this.target=t,this.is_active=!0,this.dragging=!0,this.coords.x_gap=this.$cache.rs.offset().left,this.coords.x_pointer=i-this.coords.x_gap,this.calcPointerPercent(),this.changeLevel(t),n&&s("*").prop("unselectable",!0),this.$cache.line.trigger("focus"),this.updateScene())},pointerClick:function(t,e){e.preventDefault();var i=e.pageX||e.originalEvent.touches&&e.originalEvent.touches[0].pageX;2!==e.button&&(this.current_plugin=this.plugin_count,this.target=t,this.is_click=!0,this.coords.x_gap=this.$cache.rs.offset().left,this.coords.x_pointer=+(i-this.coords.x_gap).toFixed(),this.force_redraw=!0,this.calc(),this.$cache.line.trigger("focus"))},key:function(t,e){if(!(this.current_plugin!==this.plugin_count||e.altKey||e.ctrlKey||e.shiftKey||e.metaKey)){switch(e.which){case 83:case 65:case 40:case 37:e.preventDefault();this.moveByKey(!1);break;case 87:case 68:case 38:case 39:e.preventDefault();this.moveByKey(!0)}return!0}},moveByKey:function(t){var e=this.coords.p_pointer,i=(this.options.max-this.options.min)/100,i=this.options.step/i;t?e+=i:e-=i;this.coords.x_pointer=this.toFixed(this.coords.w_rs/100*e);this.is_key=!0;this.calc()},setMinMax:function(){if(this.options){if(this.options.hide_min_max)return this.$cache.min[0].style.display="none",void(this.$cache.max[0].style.display="none");var t,e;this.options.values.length?(this.$cache.min.html(this.decorate(this.options.p_values[this.options.min])),this.$cache.max.html(this.decorate(this.options.p_values[this.options.max]))):(t=this._prettify(this.options.min),e=this._prettify(this.options.max),this.result.min_pretty=t,this.result.max_pretty=e,this.$cache.min.html(this.decorate(t,this.options.min)),this.$cache.max.html(this.decorate(e,this.options.max)));this.labels.w_min=this.$cache.min.outerWidth(!1);this.labels.w_max=this.$cache.max.outerWidth(!1)}},setTempMinInterval:function(){var t=this.result.to-this.result.from;null===this.old_min_interval&&(this.old_min_interval=this.options.min_interval);this.options.min_interval=t},restoreOriginalMinInterval:function(){null!==this.old_min_interval&&(this.options.min_interval=this.old_min_interval,this.old_min_interval=null)},calc:function(t){var e;if(this.options&&(this.calc_count++,10!==this.calc_count&&!t||(this.calc_count=0,this.coords.w_rs=this.$cache.rs.outerWidth(!1),this.calcHandlePercent()),this.coords.w_rs)){this.calcPointerPercent();e=this.getHandleX();switch("both"===this.target&&(this.coords.p_gap=0,e=this.getHandleX()),"click"===this.target&&(this.coords.p_gap=this.coords.p_handle/2,e=this.getHandleX(),this.target=this.options.drag_interval?"both_one":this.chooseHandle(e)),this.target){case"base":var i=(this.options.max-this.options.min)/100,n=(this.result.from-this.options.min)/i,r=(this.result.to-this.options.min)/i;this.coords.p_single_real=this.toFixed(n);this.coords.p_from_real=this.toFixed(n);this.coords.p_to_real=this.toFixed(r);this.coords.p_single_real=this.checkDiapason(this.coords.p_single_real,this.options.from_min,this.options.from_max);this.coords.p_from_real=this.checkDiapason(this.coords.p_from_real,this.options.from_min,this.options.from_max);this.coords.p_to_real=this.checkDiapason(this.coords.p_to_real,this.options.to_min,this.options.to_max);this.coords.p_single_fake=this.convertToFakePercent(this.coords.p_single_real);this.coords.p_from_fake=this.convertToFakePercent(this.coords.p_from_real);this.coords.p_to_fake=this.convertToFakePercent(this.coords.p_to_real);this.target=null;break;case"single":if(this.options.from_fixed)break;this.coords.p_single_real=this.convertToRealPercent(e);this.coords.p_single_real=this.calcWithStep(this.coords.p_single_real);this.coords.p_single_real=this.checkDiapason(this.coords.p_single_real,this.options.from_min,this.options.from_max);this.coords.p_single_fake=this.convertToFakePercent(this.coords.p_single_real);break;case"from":if(this.options.from_fixed)break;this.coords.p_from_real=this.convertToRealPercent(e);this.coords.p_from_real=this.calcWithStep(this.coords.p_from_real);this.coords.p_from_real>this.coords.p_to_real&&(this.coords.p_from_real=this.coords.p_to_real);this.coords.p_from_real=this.checkDiapason(this.coords.p_from_real,this.options.from_min,this.options.from_max);this.coords.p_from_real=this.checkMinInterval(this.coords.p_from_real,this.coords.p_to_real,"from");this.coords.p_from_real=this.checkMaxInterval(this.coords.p_from_real,this.coords.p_to_real,"from");this.coords.p_from_fake=this.convertToFakePercent(this.coords.p_from_real);break;case"to":if(this.options.to_fixed)break;this.coords.p_to_real=this.convertToRealPercent(e);this.coords.p_to_real=this.calcWithStep(this.coords.p_to_real);this.coords.p_to_real<this.coords.p_from_real&&(this.coords.p_to_real=this.coords.p_from_real);this.coords.p_to_real=this.checkDiapason(this.coords.p_to_real,this.options.to_min,this.options.to_max);this.coords.p_to_real=this.checkMinInterval(this.coords.p_to_real,this.coords.p_from_real,"to");this.coords.p_to_real=this.checkMaxInterval(this.coords.p_to_real,this.coords.p_from_real,"to");this.coords.p_to_fake=this.convertToFakePercent(this.coords.p_to_real);break;case"both":if(this.options.from_fixed||this.options.to_fixed)break;e=this.toFixed(e+.001*this.coords.p_handle);this.coords.p_from_real=this.convertToRealPercent(e)-this.coords.p_gap_left;this.coords.p_from_real=this.calcWithStep(this.coords.p_from_real);this.coords.p_from_real=this.checkDiapason(this.coords.p_from_real,this.options.from_min,this.options.from_max);this.coords.p_from_real=this.checkMinInterval(this.coords.p_from_real,this.coords.p_to_real,"from");this.coords.p_from_fake=this.convertToFakePercent(this.coords.p_from_real);this.coords.p_to_real=this.convertToRealPercent(e)+this.coords.p_gap_right;this.coords.p_to_real=this.calcWithStep(this.coords.p_to_real);this.coords.p_to_real=this.checkDiapason(this.coords.p_to_real,this.options.to_min,this.options.to_max);this.coords.p_to_real=this.checkMinInterval(this.coords.p_to_real,this.coords.p_from_real,"to");this.coords.p_to_fake=this.convertToFakePercent(this.coords.p_to_real);break;case"both_one":if(this.options.from_fixed||this.options.to_fixed)break;var a=this.convertToRealPercent(e),i=this.result.from_percent,n=this.result.to_percent-i,r=n/2,i=a-r,r=a+r;100<(r=i<0?(i=0)+n:r)&&(i=(r=100)-n);this.coords.p_from_real=this.calcWithStep(i);this.coords.p_from_real=this.checkDiapason(this.coords.p_from_real,this.options.from_min,this.options.from_max);this.coords.p_from_fake=this.convertToFakePercent(this.coords.p_from_real);this.coords.p_to_real=this.calcWithStep(r);this.coords.p_to_real=this.checkDiapason(this.coords.p_to_real,this.options.to_min,this.options.to_max);this.coords.p_to_fake=this.convertToFakePercent(this.coords.p_to_real)}"single"===this.options.type?(this.coords.p_bar_x=this.coords.p_handle/2,this.coords.p_bar_w=this.coords.p_single_fake,this.result.from_percent=this.coords.p_single_real,this.result.from=this.convertToValue(this.coords.p_single_real),this.result.from_pretty=this._prettify(this.result.from),this.options.values.length&&(this.result.from_value=this.options.values[this.result.from])):(this.coords.p_bar_x=this.toFixed(this.coords.p_from_fake+this.coords.p_handle/2),this.coords.p_bar_w=this.toFixed(this.coords.p_to_fake-this.coords.p_from_fake),this.result.from_percent=this.coords.p_from_real,this.result.from=this.convertToValue(this.coords.p_from_real),this.result.from_pretty=this._prettify(this.result.from),this.result.to_percent=this.coords.p_to_real,this.result.to=this.convertToValue(this.coords.p_to_real),this.result.to_pretty=this._prettify(this.result.to),this.options.values.length&&(this.result.from_value=this.options.values[this.result.from],this.result.to_value=this.options.values[this.result.to]));this.calcMinMax();this.calcLabels()}},calcPointerPercent:function(){this.coords.w_rs?(this.coords.x_pointer<0||isNaN(this.coords.x_pointer)?this.coords.x_pointer=0:this.coords.x_pointer>this.coords.w_rs&&(this.coords.x_pointer=this.coords.w_rs),this.coords.p_pointer=this.toFixed(this.coords.x_pointer/this.coords.w_rs*100)):this.coords.p_pointer=0},convertToRealPercent:function(t){return t/(100-this.coords.p_handle)*100},convertToFakePercent:function(t){return t/100*(100-this.coords.p_handle)},getHandleX:function(){var t=100-this.coords.p_handle,e=this.toFixed(this.coords.p_pointer-this.coords.p_gap);return e<0?e=0:t<e&&(e=t),e},calcHandlePercent:function(){this.coords.w_handle="single"===this.options.type?this.$cache.s_single.outerWidth(!1):this.$cache.s_from.outerWidth(!1);this.coords.p_handle=this.toFixed(this.coords.w_handle/this.coords.w_rs*100)},chooseHandle:function(t){return"single"===this.options.type?"single":this.coords.p_from_real+(this.coords.p_to_real-this.coords.p_from_real)/2<=t?this.options.to_fixed?"from":"to":this.options.from_fixed?"to":"from"},calcMinMax:function(){this.coords.w_rs&&(this.labels.p_min=this.labels.w_min/this.coords.w_rs*100,this.labels.p_max=this.labels.w_max/this.coords.w_rs*100)},calcLabels:function(){this.coords.w_rs&&!this.options.hide_from_to&&("single"===this.options.type?(this.labels.w_single=this.$cache.single.outerWidth(!1),this.labels.p_single_fake=this.labels.w_single/this.coords.w_rs*100,this.labels.p_single_left=this.coords.p_single_fake+this.coords.p_handle/2-this.labels.p_single_fake/2):(this.labels.w_from=this.$cache.from.outerWidth(!1),this.labels.p_from_fake=this.labels.w_from/this.coords.w_rs*100,this.labels.p_from_left=this.coords.p_from_fake+this.coords.p_handle/2-this.labels.p_from_fake/2,this.labels.p_from_left=this.toFixed(this.labels.p_from_left),this.labels.p_from_left=this.checkEdges(this.labels.p_from_left,this.labels.p_from_fake),this.labels.w_to=this.$cache.to.outerWidth(!1),this.labels.p_to_fake=this.labels.w_to/this.coords.w_rs*100,this.labels.p_to_left=this.coords.p_to_fake+this.coords.p_handle/2-this.labels.p_to_fake/2,this.labels.p_to_left=this.toFixed(this.labels.p_to_left),this.labels.p_to_left=this.checkEdges(this.labels.p_to_left,this.labels.p_to_fake),this.labels.w_single=this.$cache.single.outerWidth(!1),this.labels.p_single_fake=this.labels.w_single/this.coords.w_rs*100,this.labels.p_single_left=(this.labels.p_from_left+this.labels.p_to_left+this.labels.p_to_fake)/2-this.labels.p_single_fake/2,this.labels.p_single_left=this.toFixed(this.labels.p_single_left)),this.labels.p_single_left=this.checkEdges(this.labels.p_single_left,this.labels.p_single_fake))},updateScene:function(){this.raf_id&&(cancelAnimationFrame(this.raf_id),this.raf_id=null);clearTimeout(this.update_tm);this.update_tm=null;this.options&&(this.drawHandles(),this.is_active?this.raf_id=requestAnimationFrame(this.updateScene.bind(this)):this.update_tm=setTimeout(this.updateScene.bind(this),300))},drawHandles:function(){this.coords.w_rs=this.$cache.rs.outerWidth(!1);this.coords.w_rs&&(this.coords.w_rs!==this.coords.w_rs_old&&(this.target="base",this.is_resize=!0),this.coords.w_rs===this.coords.w_rs_old&&!this.force_redraw||(this.setMinMax(),this.calc(!0),this.drawLabels(),this.options.grid&&(this.calcGridMargin(),this.calcGridLabels()),this.force_redraw=!0,this.coords.w_rs_old=this.coords.w_rs,this.drawShadow()),this.coords.w_rs&&(this.dragging||this.force_redraw||this.is_key)&&((this.old_from!==this.result.from||this.old_to!==this.result.to||this.force_redraw||this.is_key)&&(this.drawLabels(),this.$cache.bar[0].style.left=this.coords.p_bar_x+"%",this.$cache.bar[0].style.width=this.coords.p_bar_w+"%","single"===this.options.type?(this.$cache.bar[0].style.left=0,this.$cache.bar[0].style.width=this.coords.p_bar_w+this.coords.p_bar_x+"%",this.$cache.s_single[0].style.left=this.coords.p_single_fake+"%"):(this.$cache.s_from[0].style.left=this.coords.p_from_fake+"%",this.$cache.s_to[0].style.left=this.coords.p_to_fake+"%",this.old_from===this.result.from&&!this.force_redraw||(this.$cache.from[0].style.left=this.labels.p_from_left+"%"),this.old_to===this.result.to&&!this.force_redraw||(this.$cache.to[0].style.left=this.labels.p_to_left+"%")),this.$cache.single[0].style.left=this.labels.p_single_left+"%",this.writeToInput(),this.old_from===this.result.from&&this.old_to===this.result.to||this.is_start||(this.$cache.input.trigger("change"),this.$cache.input.trigger("input")),this.old_from=this.result.from,this.old_to=this.result.to,this.is_resize||this.is_update||this.is_start||this.is_finish||this.callOnChange(),(this.is_key||this.is_click)&&(this.is_key=!1,this.is_click=!1,this.callOnFinish()),this.is_update=!1,this.is_resize=!1,this.is_finish=!1),this.is_start=!1,this.is_key=!1,this.is_click=!1,this.force_redraw=!1))},drawLabels:function(){var t,e,i,n,r,a;this.options&&(t=this.options.values.length,e=this.options.p_values,this.options.hide_from_to||("single"===this.options.type?(n=t?this.decorate(e[this.result.from]):(a=this._prettify(this.result.from),this.decorate(a,this.result.from)),this.$cache.single.html(n),this.calcLabels(),this.$cache.min[0].style.visibility=this.labels.p_single_left<this.labels.p_min+1?"hidden":"visible",this.$cache.max[0].style.visibility=this.labels.p_single_left+this.labels.p_single_fake>99-this.labels.p_max?"hidden":"visible"):(a=t?(this.options.decorate_both?(n=this.decorate(e[this.result.from]),n+=this.options.values_separator,n+=this.decorate(e[this.result.to])):n=this.decorate(e[this.result.from]+this.options.values_separator+e[this.result.to]),r=this.decorate(e[this.result.from]),this.decorate(e[this.result.to])):(a=this._prettify(this.result.from),i=this._prettify(this.result.to),this.options.decorate_both?(n=this.decorate(a,this.result.from),n+=this.options.values_separator,n+=this.decorate(i,this.result.to)):n=this.decorate(a+this.options.values_separator+i,this.result.to),r=this.decorate(a,this.result.from),this.decorate(i,this.result.to)),this.$cache.single.html(n),this.$cache.from.html(r),this.$cache.to.html(a),this.calcLabels(),i=Math.min(this.labels.p_single_left,this.labels.p_from_left),n=this.labels.p_single_left+this.labels.p_single_fake,r=this.labels.p_to_left+this.labels.p_to_fake,a=Math.max(n,r),this.labels.p_from_left+this.labels.p_from_fake>=this.labels.p_to_left?(this.$cache.from[0].style.visibility="hidden",this.$cache.to[0].style.visibility="hidden",this.$cache.single[0].style.visibility="visible",a=this.result.from===this.result.to?("from"===this.target?this.$cache.from[0].style.visibility="visible":"to"===this.target?this.$cache.to[0].style.visibility="visible":this.target||(this.$cache.from[0].style.visibility="visible"),this.$cache.single[0].style.visibility="hidden",r):(this.$cache.from[0].style.visibility="hidden",this.$cache.to[0].style.visibility="hidden",this.$cache.single[0].style.visibility="visible",Math.max(n,r))):(this.$cache.from[0].style.visibility="visible",this.$cache.to[0].style.visibility="visible",this.$cache.single[0].style.visibility="hidden"),this.$cache.min[0].style.visibility=i<this.labels.p_min+1?"hidden":"visible",this.$cache.max[0].style.visibility=a>99-this.labels.p_max?"hidden":"visible")))},drawShadow:function(){var t,e,i=this.options,n=this.$cache,r="number"==typeof i.from_min&&!isNaN(i.from_min),a="number"==typeof i.from_max&&!isNaN(i.from_max),s="number"==typeof i.to_min&&!isNaN(i.to_min),o="number"==typeof i.to_max&&!isNaN(i.to_max);"single"===i.type?i.from_shadow&&(r||a)?(t=this.convertToPercent(r?i.from_min:i.min),e=this.convertToPercent(a?i.from_max:i.max)-t,t=this.toFixed(t-this.coords.p_handle/100*t),e=this.toFixed(e-this.coords.p_handle/100*e),t+=this.coords.p_handle/2,n.shad_single[0].style.display="block",n.shad_single[0].style.left=t+"%",n.shad_single[0].style.width=e+"%"):n.shad_single[0].style.display="none":(i.from_shadow&&(r||a)?(t=this.convertToPercent(r?i.from_min:i.min),e=this.convertToPercent(a?i.from_max:i.max)-t,t=this.toFixed(t-this.coords.p_handle/100*t),e=this.toFixed(e-this.coords.p_handle/100*e),t+=this.coords.p_handle/2,n.shad_from[0].style.display="block",n.shad_from[0].style.left=t+"%",n.shad_from[0].style.width=e+"%"):n.shad_from[0].style.display="none",i.to_shadow&&(s||o)?(s=this.convertToPercent(s?i.to_min:i.min),i=this.convertToPercent(o?i.to_max:i.max)-s,s=this.toFixed(s-this.coords.p_handle/100*s),i=this.toFixed(i-this.coords.p_handle/100*i),s+=this.coords.p_handle/2,n.shad_to[0].style.display="block",n.shad_to[0].style.left=s+"%",n.shad_to[0].style.width=i+"%"):n.shad_to[0].style.display="none")},writeToInput:function(){"single"===this.options.type?(this.options.values.length?this.$cache.input.prop("value",this.result.from_value):this.$cache.input.prop("value",this.result.from),this.$cache.input.data("from",this.result.from)):(this.options.values.length?this.$cache.input.prop("value",this.result.from_value+this.options.input_values_separator+this.result.to_value):this.$cache.input.prop("value",this.result.from+this.options.input_values_separator+this.result.to),this.$cache.input.data("from",this.result.from),this.$cache.input.data("to",this.result.to))},callOnStart:function(){this.writeToInput();this.options.onStart&&"function"==typeof this.options.onStart&&(this.options.scope?this.options.onStart.call(this.options.scope,this.result):this.options.onStart(this.result))},callOnChange:function(){this.writeToInput();this.options.onChange&&"function"==typeof this.options.onChange&&(this.options.scope?this.options.onChange.call(this.options.scope,this.result):this.options.onChange(this.result))},callOnFinish:function(){this.writeToInput();this.options.onFinish&&"function"==typeof this.options.onFinish&&(this.options.scope?this.options.onFinish.call(this.options.scope,this.result):this.options.onFinish(this.result))},callOnUpdate:function(){this.writeToInput();this.options.onUpdate&&"function"==typeof this.options.onUpdate&&(this.options.scope?this.options.onUpdate.call(this.options.scope,this.result):this.options.onUpdate(this.result))},toggleInput:function(){this.$cache.input.toggleClass("irs-hidden-input");this.has_tab_index?this.$cache.input.prop("tabindex",-1):this.$cache.input.removeProp("tabindex");this.has_tab_index=!this.has_tab_index},convertToPercent:function(t,e){var i=this.options.max-this.options.min;return i?(i=(e?t:t-this.options.min)/(i/100),this.toFixed(i)):(this.no_diapason=!0,0)},convertToValue:function(t){var e,i,n=this.options.min,r=this.options.max,a=n.toString().split(".")[1],s=r.toString().split(".")[1],o=0,c=0;if(0===t)return this.options.min;if(100===t)return this.options.max;a&&(o=e=a.length);s&&(o=i=s.length);e&&i&&(o=i<=e?e:i);n<0&&(n=+(n+(c=Math.abs(n))).toFixed(o),r=+(r+c).toFixed(o));var t=(r-n)/100*t+n,n=this.options.step.toString().split(".")[1],t=n?+t.toFixed(n.length):(t/=this.options.step,+(t*=this.options.step).toFixed(0));return c&&(t-=c),(t=n?+t.toFixed(n.length):this.toFixed(t))<this.options.min?t=this.options.min:t>this.options.max&&(t=this.options.max),t},calcWithStep:function(t){var e=Math.round(t/this.coords.p_step)*this.coords.p_step;return 100<e&&(e=100),this.toFixed(e=100===t?100:e)},checkMinInterval:function(t,e,i){var n,r=this.options;return r.min_interval?(n=this.convertToValue(t),e=this.convertToValue(e),"from"===i?e-n<r.min_interval&&(n=e-r.min_interval):n-e<r.min_interval&&(n=e+r.min_interval),this.convertToPercent(n)):t},checkMaxInterval:function(t,e,i){var n,r=this.options;return r.max_interval?(n=this.convertToValue(t),e=this.convertToValue(e),"from"===i?e-n>r.max_interval&&(n=e-r.max_interval):n-e>r.max_interval&&(n=e+r.max_interval),this.convertToPercent(n)):t},checkDiapason:function(t,e,i){var n=this.convertToValue(t),t=this.options;return"number"!=typeof e&&(e=t.min),(i="number"!=typeof i?t.max:i)<(n=n<e?e:n)&&(n=i),this.convertToPercent(n)},toFixed:function(t){return+t.toFixed(20)},_prettify:function(t){return this.options.prettify_enabled?(this.options.prettify&&"function"==typeof this.options.prettify?this.options:this).prettify(t):t},prettify:function(t){return t.toString().replace(/(\d{1,3}(?=(?:\d\d\d)+(?!\d)))/g,"$1"+this.options.prettify_separator)},checkEdges:function(t,e){return this.options.force_edges&&(t<0?t=0:100-e<t&&(t=100-e)),this.toFixed(t)},validate:function(){var t,e,i=this.options,n=this.result,r=i.values,a=r.length;if("string"==typeof i.min&&(i.min=+i.min),"string"==typeof i.max&&(i.max=+i.max),"string"==typeof i.from&&(i.from=+i.from),"string"==typeof i.to&&(i.to=+i.to),"string"==typeof i.step&&(i.step=+i.step),"string"==typeof i.from_min&&(i.from_min=+i.from_min),"string"==typeof i.from_max&&(i.from_max=+i.from_max),"string"==typeof i.to_min&&(i.to_min=+i.to_min),"string"==typeof i.to_max&&(i.to_max=+i.to_max),"string"==typeof i.grid_num&&(i.grid_num=+i.grid_num),i.max<i.min&&(i.max=i.min),a)for(i.p_values=[],i.min=0,i.max=a-1,i.step=1,i.grid_num=i.max,i.grid_snap=!0,e=0;e<a;e++)t=+r[e],t=isNaN(t)?r[e]:(r[e]=t,this._prettify(t)),i.p_values.push(t);("number"!=typeof i.from||isNaN(i.from))&&(i.from=i.min);"number"==typeof i.to&&!isNaN(i.to)||(i.to=i.max);"single"===i.type?(i.from<i.min&&(i.from=i.min),i.from>i.max&&(i.from=i.max)):(i.from<i.min&&(i.from=i.min),i.from>i.max&&(i.from=i.max),i.to<i.min&&(i.to=i.min),i.to>i.max&&(i.to=i.max),this.update_check.from&&(this.update_check.from!==i.from&&i.from>i.to&&(i.from=i.to),this.update_check.to!==i.to&&i.to<i.from&&(i.to=i.from)),i.from>i.to&&(i.from=i.to),i.to<i.from&&(i.to=i.from));("number"!=typeof i.step||isNaN(i.step)||!i.step||i.step<0)&&(i.step=1);"number"==typeof i.from_min&&i.from<i.from_min&&(i.from=i.from_min);"number"==typeof i.from_max&&i.from>i.from_max&&(i.from=i.from_max);"number"==typeof i.to_min&&i.to<i.to_min&&(i.to=i.to_min);"number"==typeof i.to_max&&i.from>i.to_max&&(i.to=i.to_max);n&&(n.min!==i.min&&(n.min=i.min),n.max!==i.max&&(n.max=i.max),(n.from<n.min||n.from>n.max)&&(n.from=i.from),(n.to<n.min||n.to>n.max)&&(n.to=i.to));("number"!=typeof i.min_interval||isNaN(i.min_interval)||!i.min_interval||i.min_interval<0)&&(i.min_interval=0);("number"!=typeof i.max_interval||isNaN(i.max_interval)||!i.max_interval||i.max_interval<0)&&(i.max_interval=0);i.min_interval&&i.min_interval>i.max-i.min&&(i.min_interval=i.max-i.min);i.max_interval&&i.max_interval>i.max-i.min&&(i.max_interval=i.max-i.min)},decorate:function(t,e){var i="",n=this.options;return n.prefix&&(i+=n.prefix),i+=t,n.max_postfix&&(n.values.length&&t===n.p_values[n.max]||e===n.max)&&(i+=n.max_postfix,n.postfix&&(i+=" ")),n.postfix&&(i+=n.postfix),i},updateFrom:function(){this.result.from=this.options.from;this.result.from_percent=this.convertToPercent(this.result.from);this.result.from_pretty=this._prettify(this.result.from);this.options.values&&(this.result.from_value=this.options.values[this.result.from])},updateTo:function(){this.result.to=this.options.to;this.result.to_percent=this.convertToPercent(this.result.to);this.result.to_pretty=this._prettify(this.result.to);this.options.values&&(this.result.to_value=this.options.values[this.result.to])},updateResult:function(){this.result.min=this.options.min;this.result.max=this.options.max;this.updateFrom();this.updateTo()},appendGrid:function(){if(this.options.grid){var t,e,i,n,r,a,s=this.options,o=s.max-s.min,c=s.grid_num,l=0,d=4,u="";for(this.calcGridMargin(),s.grid_snap&&(c=o/s.step),i=this.toFixed(100/(c=50<c?50:c)),4<c&&(d=3),7<c&&(d=2),14<c&&(d=1),28<c&&(d=0),t=0;t<c+1;t++){for(n=d,100<(l=this.toFixed(i*t))&&(l=100),r=((this.coords.big[t]=l)-i*(t-1))/(n+1),e=1;e<=n&&0!==l;e++)u+='<span class="irs-grid-pol small" style="left: '+this.toFixed(l-r*e)+'%"><\/span>';u+='<span class="irs-grid-pol" style="left: '+l+'%"><\/span>';a=this.convertToValue(l);u+='<span class="irs-grid-text js-grid-text-'+t+'" style="left: '+l+'%">'+(a=s.values.length?s.p_values[a]:this._prettify(a))+"<\/span>"}this.coords.big_num=Math.ceil(c+1);this.$cache.cont.addClass("irs-with-grid");this.$cache.grid.html(u);this.cacheGridLabels()}},cacheGridLabels:function(){for(var t,e=this.coords.big_num,i=0;i<e;i++)t=this.$cache.grid.find(".js-grid-text-"+i),this.$cache.grid_labels.push(t);this.calcGridLabels()},calcGridLabels:function(){for(var t,e=[],i=[],n=this.coords.big_num,r=0;r<n;r++)this.coords.big_w[r]=this.$cache.grid_labels[r].outerWidth(!1),this.coords.big_p[r]=this.toFixed(this.coords.big_w[r]/this.coords.w_rs*100),this.coords.big_x[r]=this.toFixed(this.coords.big_p[r]/2),e[r]=this.toFixed(this.coords.big[r]-this.coords.big_x[r]),i[r]=this.toFixed(e[r]+this.coords.big_p[r]);for(this.options.force_edges&&(e[0]<-this.coords.grid_gap&&(e[0]=-this.coords.grid_gap,i[0]=this.toFixed(e[0]+this.coords.big_p[0]),this.coords.big_x[0]=this.coords.grid_gap),i[n-1]>100+this.coords.grid_gap&&(i[n-1]=100+this.coords.grid_gap,e[n-1]=this.toFixed(i[n-1]-this.coords.big_p[n-1]),this.coords.big_x[n-1]=this.toFixed(this.coords.big_p[n-1]-this.coords.grid_gap))),this.calcGridCollision(2,e,i),this.calcGridCollision(4,e,i),r=0;r<n;r++)t=this.$cache.grid_labels[r][0],this.coords.big_x[r]!==Number.POSITIVE_INFINITY&&(t.style.marginLeft=-this.coords.big_x[r]+"%")},calcGridCollision:function(t,e,i){for(var n,r,a=this.coords.big_num,s=0;s<a&&!(a<=(n=s+t/2));s+=t)r=this.$cache.grid_labels[n][0],r.style.visibility=i[s]<=e[n]?"visible":"hidden"},calcGridMargin:function(){this.options.grid_margin&&(this.coords.w_rs=this.$cache.rs.outerWidth(!1),this.coords.w_rs&&(this.coords.w_handle="single"===this.options.type?this.$cache.s_single.outerWidth(!1):this.$cache.s_from.outerWidth(!1),this.coords.p_handle=this.toFixed(this.coords.w_handle/this.coords.w_rs*100),this.coords.grid_gap=this.toFixed(this.coords.p_handle/2-.1),this.$cache.grid[0].style.width=this.toFixed(100-this.coords.p_handle)+"%",this.$cache.grid[0].style.left=this.coords.grid_gap+"%"))},update:function(t){this.input&&(this.is_update=!0,this.options.from=this.result.from,this.options.to=this.result.to,this.update_check.from=this.result.from,this.update_check.to=this.result.to,this.options=s.extend(this.options,t),this.validate(),this.updateResult(t),this.toggleInput(),this.remove(),this.init(!0))},reset:function(){this.input&&(this.updateResult(),this.update())},destroy:function(){this.input&&(this.toggleInput(),this.$cache.input.prop("readonly",!1),s.data(this.input,"ionRangeSlider",null),this.remove(),this.input=null,this.options=null)}};s.fn.ionRangeSlider=function(t){return this.each(function(){s.data(this,"ionRangeSlider")||s.data(this,"ionRangeSlider",new r(this,t,i++))})},function(){for(var a=0,t=["ms","moz","webkit","o"],e=0;e<t.length&&!c.requestAnimationFrame;++e)c.requestAnimationFrame=c[t[e]+"RequestAnimationFrame"],c.cancelAnimationFrame=c[t[e]+"CancelAnimationFrame"]||c[t[e]+"CancelRequestAnimationFrame"];c.requestAnimationFrame||(c.requestAnimationFrame=function(t){var i=(new Date).getTime(),n=Math.max(0,16-(i-a)),r=c.setTimeout(function(){t(i+n)},n);return a=i+n,r});c.cancelAnimationFrame||(c.cancelAnimationFrame=function(t){clearTimeout(t)})}()};!jQuery&&"function"==typeof define&&define.amd?define(["jquery"],function(t){return e(t,document,window,navigator)}):jQuery||"object"!=typeof exports?e(jQuery,document,window,navigator):e(require("jquery"),document,window,navigator)}(),function(){"use strict";("function"==typeof define&&define.amd?define:function(t,e,i){(i||e)()})("kendo.core.min",["jquery"],function(){return function(_,m,J){function t(){}function d(t,e){if(e)return"'"+t.split("'").join("\\'").split('\\"').join('\\\\\\"').replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/\t/g,"\\t")+"'";var i=t.charAt(0),n=t.substring(1);return"="===i?"+("+n+")+":":"===i?"+$kendoHtmlEncode("+n+")+":";"+t+";$kendoOutput+="}function l(t,e,i){return t+="",e=e||2,i=e-t.length,i?H[e].substring(0,i)+t:t}function e(t){var e=t.css(vt.support.transitions.css+"box-shadow")||t.css("box-shadow"),i=e?e.match(Dt)||[0,0,0,0,0]:[0,0,0,0,0],n=kt.max(+i[3],+(i[4]||0));return{left:-i[1]+n,right:+i[1]+n,bottom:+i[2]+n}}function i(t,e){var i,n,r,a,s,o,c,l,d=St.browser,u=vt._outerWidth,h=vt._outerHeight;return t.parent().hasClass("k-animation-container")?(c=t.parent(".k-animation-container"),l=c[0].style,c.is(":hidden")&&c.css({display:"",position:""}),i=Pt.test(l.width)||Pt.test(l.height),i||c.css({width:e?u(t)+1:u(t),height:h(t),boxSizing:"content-box",mozBoxSizing:"content-box",webkitBoxSizing:"content-box"})):(n=t[0].style.width,r=t[0].style.height,a=Pt.test(n),s=Pt.test(r),o=t.hasClass("k-tooltip")||t.is(".k-menu-horizontal.k-context-menu"),i=a||s,!a&&(!e||e&&n||o)&&(n=e?u(t)+1:u(t)),!s&&(!e||e&&r)&&(r=h(t)),t.wrap(_("<div/>").addClass("k-animation-container").css({width:n,height:r})),i&&t.css({width:"100%",height:"100%",boxSizing:"border-box",mozBoxSizing:"border-box",webkitBoxSizing:"border-box"})),d.msie&&kt.floor(d.version)<=7&&(t.css({zoom:1}),t.children(".k-menu").width(t.width())),t.parent()}function n(t){for(var e=1,i=arguments.length,e=1;e<i;e++)u(t,arguments[e]);return t}function u(t,e){var i,n,r,a,s,o=vt.data.ObservableArray,c=vt.data.LazyObservableArray,l=vt.data.DataSource,d=vt.data.HierarchicalDataSource;for(i in e)n=e[i],r=typeof n,a=r===Ft&&null!==n?n.constructor:null,a&&a!==Array&&a!==o&&a!==c&&a!==l&&a!==d&&a!==RegExp?n instanceof Date?t[i]=new Date(n.getTime()):A(n.clone)?t[i]=n.clone():(s=t[i],t[i]=typeof s===Ft?s||{}:{},u(t[i],n)):r!==Rt&&(t[i]=n);return t}function h(t,e,i){for(var n in e)if(e.hasOwnProperty(n)&&e[n].test(t))return n;return i!==J?i:t}function r(t){return t.replace(/([a-z][A-Z])/g,function(t){return t.charAt(0)+"-"+t.charAt(1).toLowerCase()})}function a(t){return t.replace(/\-(\w)/g,function(t,e){return e.toUpperCase()})}function s(t,e){var i,n={};return document.defaultView&&document.defaultView.getComputedStyle?(i=document.defaultView.getComputedStyle(t,""),e&&_.each(e,function(t,e){n[e]=i.getPropertyValue(e)})):(i=t.currentStyle,e&&_.each(e,function(t,e){n[e]=i[a(e)]})),vt.size(n)||(n=i),n}function o(t){if(t&&t.className&&"string"==typeof t.className&&t.className.indexOf("k-auto-scrollable")>-1)return!0;var e=s(t,["overflow"]).overflow;return"auto"==e||"scroll"==e}function c(t,e){var i,n=St.browser.webkit,r=St.browser.mozilla,a=t instanceof _?t[0]:t;if(t)return i=St.isRtl(t),e===J?i&&n?a.scrollWidth-a.clientWidth-a.scrollLeft:Math.abs(a.scrollLeft):(a.scrollLeft=i&&n?a.scrollWidth-a.clientWidth-e:i&&r?-e:e,J)}function p(t){var e,i=0;for(e in t)t.hasOwnProperty(e)&&"toJSON"!=e&&i++;return i}function f(t,e,i){var n,r,a;return e||(e="offset"),n=t[e](),r={top:n.top,right:n.right,bottom:n.bottom,left:n.left},St.browser.msie&&(St.pointers||St.msPointers)&&!i&&(a=St.isRtl(t)?1:-1,r.top-=m.pageYOffset-document.documentElement.scrollTop,r.left-=m.pageXOffset+a*document.documentElement.scrollLeft),r}function g(t){var e={};return yt("string"==typeof t?t.split(" "):t,function(t){e[t]=this}),e}function v(t){return new vt.effects.Element(t)}function y(t,e,i,n){return typeof t===At&&(A(e)&&(n=e,e=400,i=!1),A(i)&&(n=i,i=!1),typeof e===Et&&(i=e,e=400),t={effects:t,duration:e,reverse:i,complete:n}),_t({effects:{},duration:400,reverse:!1,init:wt,teardown:wt,hide:!1},t,{completeCallback:t.complete,complete:wt})}function b(t,e,i,n,r){for(var a,s=0,o=t.length;s<o;s++)a=_(t[s]),a.queue(function(){L.promise(a,y(e,i,n,r))});return t}function x(i,t,e,n){return t&&(t=t.split(" "),yt(t,function(t,e){i.toggleClass(e,n)})),i}function w(t){return(""+t).replace(B,"&amp;").replace(V,"&lt;").replace(Q,"&gt;").replace(W,"&quot;").replace(G,"&#39;")}function k(t,e){var i;return 0===e.indexOf("data")&&(e=e.substring(4),e=e.charAt(0).toLowerCase()+e.substring(1)),e=e.replace(rt,"-$1"),i=t.getAttribute("data-"+vt.ns+e),null===i?i=J:"null"===i?i=null:"true"===i?i=!0:"false"===i?i=!1:Ot.test(i)&&"mask"!=e?i=parseFloat(i):it.test(i)&&!nt.test(i)&&(i=Function("return ("+i+")")()),i}function C(t,e,i){var n,r,a={};for(n in e)r=k(t,n),r!==J&&(et.test(n)&&("string"==typeof r?_("#"+r).length?r=vt.template(_("#"+r).html()):i&&(r=vt.template(i[r])):r=t.getAttribute(n)),a[n]=r);return a}function S(t,e){return _.contains(t,e)?-1:1}function P(){var t=_(this);return _.inArray(t.attr("data-"+vt.ns+"role"),["slider","rangeslider"])>-1||t.is(":visible")}function T(t,e){var i=t.nodeName.toLowerCase();return(/input|select|textarea|button|object/.test(i)?!t.disabled:"a"===i?t.href||e:e)&&D(t)}function D(t){return _.expr.filters.visible(t)&&!_(t).parents().addBack().filter(function(){return"hidden"===_.css(this,"visibility")}).length}function O(t,e){return new O.fn.init(t,e)}var I,A,M,F,N,E,R,q,$,z,U,H,j,L,B,V,W,G,Q,Y,Z,K,X,tt,et,it,nt,rt,at,st,ot,ct,lt,dt,ut,ht,pt,ft,gt,mt,vt=m.kendo=m.kendo||{cultures:{}},_t=_.extend,yt=_.each,bt=_.isArray,xt=_.proxy,wt=_.noop,kt=Math,Ct=m.JSON||{},St={},Pt=/%/,Tt=/\{(\d+)(:[^\}]+)?\}/g,Dt=/(\d+(?:\.?)\d*)px\s*(\d+(?:\.?)\d*)px\s*(\d+(?:\.?)\d*)px\s*(\d+)?/i,Ot=/^(\+|-?)\d+(\.?)\d*$/,It="function",At="string",Mt="number",Ft="object",Nt="null",Et="boolean",Rt="undefined",qt={},$t={},zt=[].slice;vt.version="2019.1.220".replace(/^\s+|\s+$/g,"");t.extend=function(t){var e,i,n=function(){},r=this,a=t&&t.init?t.init:function(){r.apply(this,arguments)};n.prototype=r.prototype;i=a.fn=a.prototype=new n;for(e in t)i[e]=null!=t[e]&&t[e].constructor===Object?_t(!0,{},n.prototype[e],t[e]):t[e];return i.constructor=a,a.extend=r.extend,a};t.prototype._initOptions=function(t){this.options=n({},this.options,t)};A=vt.isFunction=function(t){return"function"==typeof t};M=function(){this._defaultPrevented=!0};F=function(){return this._defaultPrevented===!0};N=t.extend({init:function(){this._events={}},bind:function(t,e,i){var n,r,a,s,o,c=this,l=typeof t===At?[t]:t,d=typeof e===It;if(e===J){for(n in t)c.bind(n,t[n]);return c}for(n=0,r=l.length;n<r;n++)t=l[n],s=d?e:e[t],s&&(i&&(a=s,s=function(){c.unbind(t,s);a.apply(c,arguments)},s.original=a),o=c._events[t]=c._events[t]||[],o.push(s));return c},one:function(t,e){return this.bind(t,e,!0)},first:function(t,e){for(var r,a,s=this,o=typeof t===At?[t]:t,c=typeof e===It,i=0,n=o.length;i<n;i++)t=o[i],r=c?e:e[t],r&&(a=s._events[t]=s._events[t]||[],a.unshift(r));return s},trigger:function(t,e){var i,n,r=this,a=r._events[t];if(a){for(e=e||{},e.sender=r,e._defaultPrevented=!1,e.preventDefault=M,e.isDefaultPrevented=F,a=a.slice(),i=0,n=a.length;i<n;i++)a[i].call(r,e);return e._defaultPrevented===!0}return!1},unbind:function(t,e){var i,n=this,r=n._events[t];if(t===J)n._events={};else if(r)if(e)for(i=r.length-1;i>=0;i--)r[i]!==e&&r[i].original!==e||r.splice(i,1);else n._events[t]=[];return n}});E=/^\w+/;R=/\$\{([^}]*)\}/g;q=/\\\}/g;$=/__CURLY__/g;z=/\\#/g;U=/__SHARP__/g;H=["","0","00","000","0000"];I={paramName:"data",useWithBlock:!0,render:function(t,e){for(var r="",i=0,n=e.length;i<n;i++)r+=t(e[i]);return r},compile:function(e,t){var i,n,r,a=_t({},this,t),s=a.paramName,o=s.match(E)[0],c=a.useWithBlock,l="var $kendoOutput, $kendoHtmlEncode = kendo.htmlEncode;";if(A(e))return e;for(l+=c?"with("+s+"){":"",l+="$kendoOutput=",n=e.replace(q,"__CURLY__").replace(R,"#=$kendoHtmlEncode($1)#").replace($,"}").replace(z,"__SHARP__").split("#"),r=0;r<n.length;r++)l+=d(n[r],r%2==0);l+=c?";}":";";l+="return $kendoOutput;";l=l.replace(U,"#");try{return i=Function(o,l),i._slotCount=Math.floor(n.length/2),i}catch(t){throw Error(vt.format("Invalid template:'{0}' Generated code:'{1}'",e,l));}}},function(){function d(t){return e.lastIndex=0,e.test(t)?'"'+t.replace(e,function(t){var e=i[t];return typeof e===At?e:"\\u"+("0000"+t.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+t+'"'}function u(t,e){var i,n,r,a,s,o,c=h,l=e[t];if(l&&typeof l===Ft&&typeof l.toJSON===It&&(l=l.toJSON(t)),typeof f===It&&(l=f.call(e,t,l)),o=typeof l,o===At)return d(l);if(o===Mt)return isFinite(l)?l+"":Nt;if(o===Et||o===Nt)return l+"";if(o===Ft){if(!l)return Nt;if(h+=p,s=[],"[object Array]"===g.apply(l)){for(a=l.length,i=0;i<a;i++)s[i]=u(i,l)||Nt;return r=0===s.length?"[]":h?"[\n"+h+s.join(",\n"+h)+"\n"+c+"]":"["+s.join(",")+"]",h=c,r}if(f&&typeof f===Ft)for(a=f.length,i=0;i<a;i++)typeof f[i]===At&&(n=f[i],r=u(n,l),r&&s.push(d(n)+(h?": ":":")+r));else for(n in l)Object.hasOwnProperty.call(l,n)&&(r=u(n,l),r&&s.push(d(n)+(h?": ":":")+r));return r=0===s.length?"{}":h?"{\n"+h+s.join(",\n"+h)+"\n"+c+"}":"{"+s.join(",")+"}",h=c,r}}var h,p,f,e=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,i={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},g={}.toString;typeof Date.prototype.toJSON!==It&&(Date.prototype.toJSON=function(){var t=this;return isFinite(t.valueOf())?l(t.getUTCFullYear(),4)+"-"+l(t.getUTCMonth()+1)+"-"+l(t.getUTCDate())+"T"+l(t.getUTCHours())+":"+l(t.getUTCMinutes())+":"+l(t.getUTCSeconds())+"Z":null},String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(){return this.valueOf()});typeof Ct.stringify!==It&&(Ct.stringify=function(t,e,i){var n;if(h="",p="",typeof i===Mt)for(n=0;n<i;n+=1)p+=" ";else typeof i===At&&(p=i);if(f=e,e&&typeof e!==It&&(typeof e!==Ft||typeof e.length!==Mt))throw Error("JSON.stringify");return u("",{"":t})})}(),function(){function n(t){if(t){if(t.numberFormat)return t;if(typeof t===At){var e=vt.cultures;return e[t]||e[t.split("-")[0]]||null}return null}return null}function q(t){return t&&(t=n(t)),t||vt.cultures.current}function r(r,t,e){e=q(e);var a=e.calendars.standard,s=a.days,o=a.months;return t=a.patterns[t]||t,t.replace(i,function(t){var e,i,n;return"d"===t?i=r.getDate():"dd"===t?i=l(r.getDate()):"ddd"===t?i=s.namesAbbr[r.getDay()]:"dddd"===t?i=s.names[r.getDay()]:"M"===t?i=r.getMonth()+1:"MM"===t?i=l(r.getMonth()+1):"MMM"===t?i=o.namesAbbr[r.getMonth()]:"MMMM"===t?i=o.names[r.getMonth()]:"yy"===t?i=l(r.getFullYear()%100):"yyyy"===t?i=l(r.getFullYear(),4):"h"===t?i=r.getHours()%12||12:"hh"===t?i=l(r.getHours()%12||12):"H"===t?i=r.getHours():"HH"===t?i=l(r.getHours()):"m"===t?i=r.getMinutes():"mm"===t?i=l(r.getMinutes()):"s"===t?i=r.getSeconds():"ss"===t?i=l(r.getSeconds()):"f"===t?i=kt.floor(r.getMilliseconds()/100):"ff"===t?(i=r.getMilliseconds(),i>99&&(i=kt.floor(i/10)),i=l(i)):"fff"===t?i=l(r.getMilliseconds(),3):"tt"===t?i=r.getHours()<12?a.AM[0]:a.PM[0]:"zzz"===t?(e=r.getTimezoneOffset(),n=e<0,i=(""+kt.abs(e/60)).split(".")[0],e=kt.abs(e)-60*i,i=(n?"+":"-")+l(i),i+=":"+l(e)):"zz"!==t&&"z"!==t||(i=r.getTimezoneOffset()/60,n=i<0,i=(""+kt.abs(i)).split(".")[0],i=(n?"+":"-")+("zz"===t?l(i):i)),i!==J?i:t.slice(1,t.length-1)})}function a(t,e,i){var n,r,a,s,o,c,l,d,u,h,p,f,g,m,v,_,y,b,x,w,k,C,S,P,T,D,O,I,A,M,F,N,E,R;if(i=q(i),n=i.numberFormat,r=n[B],a=n.decimals,s=n.pattern[0],o=[],p=t<0,_=L,y=L,F=-1,t===J)return L;if(!isFinite(t))return t;if(!e)return i.name.length?t.toLocaleString():""+t;if(h=U.exec(e)){if(e=h[1].toLowerCase(),l="c"===e,d="p"===e,(l||d)&&(n=l?n.currency:n.percent,r=n[B],a=n.decimals,c=n.symbol,s=n.pattern[p?0:1]),u=h[2],u&&(a=+u),"e"===e)return E=u?t.toExponential(a):t.toExponential(),E.replace(B,n[B]);if(d&&(t*=100),t=z(t,a),p=t<0,t=t.split(B),f=t[0],g=t[1],p&&(f=f.substring(1)),y=$(f,0,f.length,n),g&&(y+=r+g),"n"===e&&!p)return y;for(t=L,b=0,x=s.length;b<x;b++)w=s.charAt(b),t+="n"===w?y:"$"===w||"%"===w?c:w;return t}if((e.indexOf("'")>-1||e.indexOf('"')>-1||e.indexOf("\\")>-1)&&(e=e.replace(H,function(t){var e=t.charAt(0).replace("\\",""),i=t.slice(1).replace(e,"");return o.push(i),Q})),e=e.split(";"),p&&e[1])e=e[1],C=!0;else if(0===t&&e[2]){if(e=e[2],e.indexOf(W)==-1&&e.indexOf(G)==-1)return e}else e=e[0];if(I=e.indexOf("%"),A=e.indexOf("$"),d=I!=-1,l=A!=-1,d&&(t*=100),l&&"\\"===e[A-1]&&(e=e.split("\\").join(""),l=!1),(l||d)&&(n=l?n.currency:n.percent,r=n[B],a=n.decimals,c=n.symbol),k=e.indexOf(V)>-1,k&&(e=e.replace(j,L)),S=e.indexOf(B),x=e.length,S!=-1)if(g=(""+t).split("e"),g=g[1]?z(t,Math.abs(g[1])):g[0],g=g.split(B)[1]||L,T=e.lastIndexOf(G)-S,P=e.lastIndexOf(W)-S,D=T>-1,O=P>-1,b=g.length,D||O||(e=e.substring(0,S)+e.substring(S+1),x=e.length,S=-1,b=0),D&&T>P)b=T;else if(P>T)if(O&&b>P){for(R=z(t,P,p);R.charAt(R.length-1)===G&&P>0&&P>T;)P--,R=z(t,P,p);b=P}else D&&b<T&&(b=T);if(t=z(t,b,p),P=e.indexOf(W),M=T=e.indexOf(G),F=P==-1&&T!=-1?T:P!=-1&&T==-1?P:P>T?T:P,P=e.lastIndexOf(W),T=e.lastIndexOf(G),N=P==-1&&T!=-1?T:P!=-1&&T==-1?P:P>T?P:T,F==x&&(N=F),F!=-1){for(y=(""+t).split(B),f=y[0],g=y[1]||L,m=f.length,v=g.length,p&&t*-1>=0&&(p=!1),t=e.substring(0,F),p&&!C&&(t+="-"),b=F;b<x;b++){if(w=e.charAt(b),S==-1){if(N-b<m){t+=f;break}}else if(T!=-1&&T<b&&(_=L),S-b<=m&&S-b>-1&&(t+=f,b=S),S===b){t+=(g?r:L)+g;b+=N-S+1;continue}w===G?(t+=w,_=w):w===W&&(t+=_)}if(k&&(t=$(t,F+(p&&!C?1:0),Math.max(N,m+F),n)),N>=F&&(t+=e.substring(N+1)),l||d){for(y=L,b=0,x=t.length;b<x;b++)w=t.charAt(b),y+="$"===w||"%"===w?c:w;t=y}if(x=o.length)for(b=0;b<x;b++)t=t.replace(Q,o[b])}return t}var $,z,s,i=/dddd|ddd|dd|d|MMMM|MMM|MM|M|yyyy|yy|HH|H|hh|h|mm|m|fff|ff|f|tt|ss|s|zzz|zz|z|"[^"]*"|'[^']*'/g,U=/^(n|c|p|e)(\d*)$/i,H=/(\\.)|(['][^']*[']?)|(["][^"]*["]?)/g,j=/\,/g,L="",B=".",V=",",W="#",G="0",Q="??",o="en-US",c={}.toString;vt.cultures["en-US"]={name:o,numberFormat:{pattern:["-n"],decimals:2,",":",",".":".",groupSize:[3],percent:{pattern:["-n %","n %"],decimals:2,",":",",".":".",groupSize:[3],symbol:"%"},currency:{name:"US Dollar",abbr:"USD",pattern:["($n)","$n"],decimals:2,",":",",".":".",groupSize:[3],symbol:"$"}},calendars:{standard:{days:{names:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],namesAbbr:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],namesShort:["Su","Mo","Tu","We","Th","Fr","Sa"]},months:{names:["January","February","March","April","May","June","July","August","September","October","November","December"],namesAbbr:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]},AM:["AM","am","AM"],PM:["PM","pm","PM"],patterns:{d:"M/d/yyyy",D:"dddd, MMMM dd, yyyy",F:"dddd, MMMM dd, yyyy h:mm:ss tt",g:"M/d/yyyy h:mm tt",G:"M/d/yyyy h:mm:ss tt",m:"MMMM dd",M:"MMMM dd",s:"yyyy'-'MM'-'ddTHH':'mm':'ss",t:"h:mm tt",T:"h:mm:ss tt",u:"yyyy'-'MM'-'dd HH':'mm':'ss'Z'",y:"MMMM, yyyy",Y:"MMMM, yyyy"},"/":"/",":":":",firstDay:0,twoDigitYearMax:2029}}};vt.culture=function(t){var e,i=vt.cultures;return t===J?i.current:(e=n(t)||i[o],e.calendar=e.calendars.standard,i.current=e,J)};vt.findCulture=n;vt.getCulture=q;vt.culture(o);$=function(t,e,i,n){var r,a,s,o,c,l,d=t.indexOf(n[B]),u=n.groupSize.slice(),h=u.shift();if(i=d!==-1?d:i+1,r=t.substring(e,i),a=r.length,a>=h){for(s=a,o=[];s>-1;)if(c=r.substring(s-h,s),c&&o.push(c),s-=h,l=u.shift(),h=l!==J?l:h,0===h){s>0&&o.push(r.substring(0,s));break}r=o.reverse().join(n[V]);t=t.substring(0,e)+r+t.substring(i)}return t};z=function(t,e,i){return e=e||0,t=(""+t).split("e"),t=Math.round(+(t[0]+"e"+(t[1]?+t[1]+e:e))),i&&(t=-t),t=(""+t).split("e"),t=+(t[0]+"e"+(t[1]?+t[1]-e:-e)),t.toFixed(Math.min(e,20))};s=function(t,e,i){if(e){if("[object Date]"===c.call(t))return r(t,e,i);if(typeof t===Mt)return a(t,e,i)}return t!==J?t:""};vt.format=function(t){var r=arguments;return t.replace(Tt,function(t,e,i){var n=r[parseInt(e,10)+1];return s(n,i?i.substring(1):"")})};vt._extractFormat=function(t){return"{0:"===t.slice(0,3)&&(t=t.slice(3,t.length-1)),t};vt._activeElement=function(){try{return document.activeElement}catch(t){return document.documentElement.activeElement}};vt._round=z;vt._outerWidth=function(t,e){return _(t).outerWidth(e||!1)||0};vt._outerHeight=function(t,e){return _(t).outerHeight(e||!1)||0};vt.toString=s}(),function(){function E(t,e,i){return!(t>=e&&t<=i)}function e(t){return t.charAt(0)}function R(t){return _.map(t,e)}function q(t,e){e||23!==t.getHours()||t.setHours(t.getHours()+2)}function n(t){for(var e=0,i=t.length,n=[];e<i;e++)n[e]=(t[e]+"").toLowerCase();return n}function $(t){var e,i={};for(e in t)i[e]=n(t[e]);return i}function c(l,i,t,e){if(!l)return null;var n,r,a,s,o,c,d,u,h,p,f,g,m,v=function(t){for(var e=0;i[O]===t;)e++,O++;return e>0&&(O-=1),e},_=function(t){var e=H[t]||RegExp("^\\d{1,"+t+"}"),i=l.substr(I,t).match(e);return i?(i=i[0],I+=i.length,parseInt(i,10)):null},y=function(t,e){for(var i,n,r,a=0,s=t.length,o=0,c=0;a<s;a++)i=t[a],n=i.length,r=l.substr(I,n),e&&(r=r.toLowerCase()),r==i&&n>o&&(o=n,c=a);return o?(I+=o,c+1):null},b=function(){var t=!1;return l.charAt(I)===i[O]&&(I++,t=!0),t},x=t.calendars.standard,w=null,k=null,C=null,S=null,P=null,T=null,D=null,O=0,I=0,A=!1,M=new Date,F=x.twoDigitYearMax||2029,N=M.getFullYear();for(i||(i="d"),s=x.patterns[i],s&&(i=s),i=i.split(""),a=i.length;O<a;O++)if(n=i[O],A)"'"===n?A=!1:b();else if("d"===n){if(r=v("d"),x._lowerDays||(x._lowerDays=$(x.days)),null!==C&&r>2)continue;if(C=r<3?_(2):y(x._lowerDays[3==r?"namesAbbr":"names"],!0),null===C||E(C,1,31))return null}else if("M"===n){if(r=v("M"),x._lowerMonths||(x._lowerMonths=$(x.months)),k=r<3?_(2):y(x._lowerMonths[3==r?"namesAbbr":"names"],!0),null===k||E(k,1,12))return null;k-=1}else if("y"===n){if(r=v("y"),w=_(r),null===w)return null;2==r&&("string"==typeof F&&(F=N+parseInt(F,10)),w=N-N%100+w,w>F&&(w-=100))}else if("h"===n){if(v("h"),S=_(2),12==S&&(S=0),null===S||E(S,0,11))return null}else if("H"===n){if(v("H"),S=_(2),null===S||E(S,0,23))return null}else if("m"===n){if(v("m"),P=_(2),null===P||E(P,0,59))return null}else if("s"===n){if(v("s"),T=_(2),null===T||E(T,0,59))return null}else if("f"===n){if(r=v("f"),m=l.substr(I,r).match(H[3]),D=_(r),null!==D&&(D=parseFloat("0."+m[0],10),D=vt._round(D,3),D*=1e3),null===D||E(D,0,999))return null}else if("t"===n){if(r=v("t"),u=x.AM,h=x.PM,1===r&&(u=R(u),h=R(h)),o=y(h),!o&&!y(u))return null}else if("z"===n){if(c=!0,r=v("z"),"Z"===l.substr(I,1)){b();continue}if((d=l.substr(I,6).match(r>2?U:z),!d)||(d=d[0].split(":"),p=d[0],f=d[1],!f&&p.length>3&&(I=p.length-2,f=p.substring(I),p=p.substring(0,I)),p=parseInt(p,10),E(p,-12,13))||r>2&&(f=d[0][0]+f,f=parseInt(f,10),isNaN(f)||E(f,-59,59)))return null}else if("'"===n)A=!0,b();else if(!b())return null;return e&&!/^\s*$/.test(l.substr(I))?null:(g=null!==S||null!==P||T||null,null===w&&null===k&&null===C&&g?(w=N,k=M.getMonth(),C=M.getDate()):(null===w&&(w=N),null===C&&(C=1)),o&&S<12&&(S+=12),c?(p&&(S+=-p),f&&(P+=-f),l=new Date(Date.UTC(w,k,C,S,P,T,D))):(l=new Date(w,k,C,S,P,T,D),q(l,S)),w<100&&l.setFullYear(w),l.getDate()!==C&&c===J?null:l)}function l(t){var e="-"===t.substr(0,1)?-1:1;return t=t.substring(1),t=60*parseInt(t.substr(0,2),10)+parseInt(t.substring(2),10),e*t}function d(t){for(var e,i,r=kt.max(g.length,m.length),a=t.calendar||t.calendars.standard,s=a.patterns,o=[],n=0;n<r;n++){for(e=g[n],i=0;i<e.length;i++)o.push(s[e[i]]);o=o.concat(m[n])}return o}function r(t,e,i,n){var r,a,s,o;if("[object Date]"===v.call(t))return t;if(r=0,a=null,t&&0===t.indexOf("/D")&&(a=p.exec(t)))return a=a[1],o=f.exec(a.substring(1)),a=new Date(parseInt(a,10)),o&&(o=l(o[0]),a=vt.timezone.apply(a,0),a=vt.timezone.convert(a,0,-1*o)),a;for(i=vt.getCulture(i),e||(e=d(i)),e=bt(e)?e:[e],s=e.length;r<s;r++)if(a=c(t,e[r],i,n))return a;return a}var u=/\u00A0/g,h=/[eE][\-+]?[0-9]+/,z=/[+|\-]\d{1,2}/,U=/[+|\-]\d{1,2}:?\d{2}/,p=/^\/Date\((.*?)\)\/$/,f=/[+-]\d*/,g=[[],["G","g","F"],["D","d","y","m","T","t"]],m=[["yyyy-MM-ddTHH:mm:ss.fffffffzzz","yyyy-MM-ddTHH:mm:ss.fffffff","yyyy-MM-ddTHH:mm:ss.fffzzz","yyyy-MM-ddTHH:mm:ss.fff","ddd MMM dd yyyy HH:mm:ss","yyyy-MM-ddTHH:mm:sszzz","yyyy-MM-ddTHH:mmzzz","yyyy-MM-ddTHH:mmzz","yyyy-MM-ddTHH:mm:ss","yyyy-MM-dd HH:mm:ss","yyyy/MM/dd HH:mm:ss"],["yyyy-MM-ddTHH:mm","yyyy-MM-dd HH:mm","yyyy/MM/dd HH:mm"],["yyyy/MM/dd","yyyy-MM-dd","HH:mm:ss","HH:mm"]],H={2:/^\d{1,2}/,3:/^\d{1,3}/,4:/^\d{4}/},v={}.toString;vt.parseDate=function(t,e,i){return r(t,e,i,!1)};vt.parseExactDate=function(t,e,i){return r(t,e,i,!0)};vt.parseInt=function(t,e){var i=vt.parseFloat(t,e);return i&&(i=0|i),i};vt.parseFloat=function(t,e,i){if(!t&&0!==t)return null;if(typeof t===Mt)return t;t=""+t;e=vt.getCulture(e);var n,r,a=e.numberFormat,s=a.percent,o=a.currency,c=o.symbol,l=s.symbol,d=t.indexOf("-");return h.test(t)?(t=parseFloat(t.replace(a["."],".")),isNaN(t)&&(t=null),t):d>0?null:(d=d>-1,t.indexOf(c)>-1||i&&i.toLowerCase().indexOf("c")>-1?(a=o,n=a.pattern[0].replace("$",c).split("n"),t.indexOf(n[0])>-1&&t.indexOf(n[1])>-1&&(t=t.replace(n[0],"").replace(n[1],""),d=!0)):t.indexOf(l)>-1&&(r=!0,a=s,c=l),t=t.replace("-","").replace(c,"").replace(u," ").split(a[","].replace(u," ")).join("").replace(a["."],"."),t=parseFloat(t),isNaN(t)?t=null:d&&(t*=-1),t&&r&&(t/=100),t)}}(),function(){var n,t,r,a,e,i,s,o,c,l;St._scrollbar=J;St.scrollbar=function(t){if(isNaN(St._scrollbar)||t){var e,i=document.createElement("div");return i.style.cssText="overflow:scroll;overflow-x:hidden;zoom:1;clear:both;display:block",i.innerHTML="&nbsp;",document.body.appendChild(i),St._scrollbar=e=i.offsetWidth-i.scrollWidth,document.body.removeChild(i),e}return St._scrollbar};St.isRtl=function(t){return _(t).closest(".k-rtl").length>0};n=document.createElement("table");try{n.innerHTML="<tr><td><\/td><\/tr>";St.tbodyInnerHtml=!0}catch(t){St.tbodyInnerHtml=!1}St.touch="ontouchstart"in m;t=document.documentElement.style;r=St.transitions=!1;a=St.transforms=!1;e="HTMLElement"in m?HTMLElement.prototype:[];St.hasHW3D="WebKitCSSMatrix"in m&&"m11"in new m.WebKitCSSMatrix||"MozPerspective"in t||"msPerspective"in t;St.cssFlexbox="flexWrap"in t||"WebkitFlexWrap"in t||"msFlexWrap"in t;yt(["Moz","webkit","O","ms"],function(){var t,e=""+this,i=typeof n.style[e+"Transition"]===At;if(i||typeof n.style[e+"Transform"]===At)return t=e.toLowerCase(),a={css:"ms"!=t?"-"+t+"-":"",prefix:e,event:"o"===t||"webkit"===t?t:""},i&&(r=a,r.event=r.event?r.event+"TransitionEnd":"transitionend"),!1});n=null;St.transforms=a;St.transitions=r;St.devicePixelRatio=m.devicePixelRatio===J?1:m.devicePixelRatio;try{St.screenWidth=m.outerWidth||m.screen?m.screen.availWidth:m.innerWidth;St.screenHeight=m.outerHeight||m.screen?m.screen.availHeight:m.innerHeight}catch(t){St.screenWidth=m.screen.availWidth;St.screenHeight=m.screen.availHeight}St.detectOS=function(t){var e,i,n=!1,r=[],a=!/mobile safari/i.test(t),s={wp:/(Windows Phone(?: OS)?)\s(\d+)\.(\d+(\.\d+)?)/,fire:/(Silk)\/(\d+)\.(\d+(\.\d+)?)/,android:/(Android|Android.*(?:Opera|Firefox).*?\/)\s*(\d+)\.?(\d+(\.\d+)?)?/,iphone:/(iPhone|iPod).*OS\s+(\d+)[\._]([\d\._]+)/,ipad:/(iPad).*OS\s+(\d+)[\._]([\d_]+)/,meego:/(MeeGo).+NokiaBrowser\/(\d+)\.([\d\._]+)/,webos:/(webOS)\/(\d+)\.(\d+(\.\d+)?)/,blackberry:/(BlackBerry|BB10).*?Version\/(\d+)\.(\d+(\.\d+)?)/,playbook:/(PlayBook).*?Tablet\s*OS\s*(\d+)\.(\d+(\.\d+)?)/,windows:/(MSIE)\s+(\d+)\.(\d+(\.\d+)?)/,tizen:/(tizen).*?Version\/(\d+)\.(\d+(\.\d+)?)/i,sailfish:/(sailfish).*rv:(\d+)\.(\d+(\.\d+)?).*firefox/i,ffos:/(Mobile).*rv:(\d+)\.(\d+(\.\d+)?).*Firefox/},o={ios:/^i(phone|pad|pod)$/i,android:/^android|fire$/i,blackberry:/^blackberry|playbook/i,windows:/windows/,wp:/wp/,flat:/sailfish|ffos|tizen/i,meego:/meego/},c={tablet:/playbook|ipad|fire/i},l={omini:/Opera\sMini/i,omobile:/Opera\sMobi/i,firefox:/Firefox|Fennec/i,mobilesafari:/version\/.*safari/i,ie:/MSIE|Windows\sPhone/i,chrome:/chrome|crios/i,webkit:/webkit/i};for(i in s)if(s.hasOwnProperty(i)&&(r=t.match(s[i]))){if("windows"==i&&"plugins"in navigator)return!1;n={};n.device=i;n.tablet=h(i,c,!1);n.browser=h(t,l,"default");n.name=h(i,o);n[n.name]=!0;n.majorVersion=r[2];n.minorVersion=(r[3]||"0").replace("_",".");e=n.minorVersion.replace(".","").substr(0,2);n.flatVersion=n.majorVersion+e+Array(3-(e.length<3?e.length:2)).join("0");n.cordova=typeof m.PhoneGap!==Rt||typeof m.cordova!==Rt;n.appMode=m.navigator.standalone||/file|local|wmapp/.test(m.location.protocol)||n.cordova;n.android&&(St.devicePixelRatio<1.5&&n.flatVersion<400||a)&&(St.screenWidth>800||St.screenHeight>800)&&(n.tablet=i);break}return n};i=St.mobileOS=St.detectOS(navigator.userAgent);St.wpDevicePixelRatio=i.wp?screen.width/320:0;St.hasNativeScrolling=!1;(i.ios||i.android&&i.majorVersion>2||i.wp)&&(St.hasNativeScrolling=i);St.delayedClick=function(){if(St.touch){if(i.ios)return!0;if(i.android)return!St.browser.chrome||!(St.browser.version<32)&&!(_("meta[name=viewport]").attr("content")||"").match(/user-scalable=no/i)}return!1};St.mouseAndTouchPresent=St.touch&&!(St.mobileOS.ios||St.mobileOS.android);St.detectBrowser=function(t){var e,i=!1,n=[],r={edge:/(edge)[ \/]([\w.]+)/i,webkit:/(chrome|crios)[ \/]([\w.]+)/i,safari:/(webkit)[ \/]([\w.]+)/i,opera:/(opera)(?:.*version|)[ \/]([\w.]+)/i,msie:/(msie\s|trident.*? rv:)([\w.]+)/i,mozilla:/(mozilla)(?:.*? rv:([\w.]+)|)/i};for(e in r)if(r.hasOwnProperty(e)&&(n=t.match(r[e]))){i={};i[e]=!0;i[n[1].toLowerCase().split(" ")[0].split("/")[0]]=!0;i.version=parseInt(document.documentMode||n[2],10);break}return i};St.browser=St.detectBrowser(navigator.userAgent);St.detectClipboardAccess=function(){var t={copy:!!document.queryCommandSupported&&document.queryCommandSupported("copy"),cut:!!document.queryCommandSupported&&document.queryCommandSupported("cut"),paste:!!document.queryCommandSupported&&document.queryCommandSupported("paste")};return St.browser.chrome&&(t.paste=!1,St.browser.version>=43&&(t.copy=!0,t.cut=!0)),t};St.clipboard=St.detectClipboardAccess();St.zoomLevel=function(){var t,e,i;try{return t=St.browser,e=0,i=document.documentElement,t.msie&&11==t.version&&i.scrollHeight>i.clientHeight&&!St.touch&&(e=St.scrollbar()),St.touch?i.clientWidth/m.innerWidth:t.msie&&t.version>=10?((top||m).document.documentElement.offsetWidth+e)/(top||m).innerWidth:1}catch(t){return 1}};St.cssBorderSpacing=J!==t.borderSpacing&&!(St.browser.msie&&St.browser.version<8),function(t){var e="",i=_(document.documentElement),n=parseInt(t.version,10);t.msie?e="ie":t.mozilla?e="ff":t.safari?e="safari":t.webkit?e="webkit":t.opera?e="opera":t.edge&&(e="edge");e&&(e="k-"+e+" k-"+e+n);St.mobileOS&&(e+=" k-mobile");St.cssFlexbox||(e+=" k-no-flexbox");i.addClass(e)}(St.browser);St.eventCapture=document.documentElement.addEventListener;s=document.createElement("input");St.placeholder="placeholder"in s;St.propertyChangeEvent="onpropertychange"in s;St.input=function(){for(var t,e=["number","date","time","month","week","datetime","datetime-local"],i=e.length,n="test",r={},a=0;a<i;a++)t=e[a],s.setAttribute("type",t),s.value=n,r[t.replace("-","")]="text"!==s.type&&s.value!==n;return r}();s.style.cssText="float:left;";St.cssFloat=!!s.style.cssFloat;s=null;St.stableSort=function(){for(var i=[{index:0,field:"b"}],t=1;t<513;t++)i.push({index:t,field:"a"});return i.sort(function(t,e){return t.field>e.field?1:t.field<e.field?-1:0}),1===i[0].index}();St.matchesSelector=e.webkitMatchesSelector||e.mozMatchesSelector||e.msMatchesSelector||e.oMatchesSelector||e.matchesSelector||e.matches||function(t){for(var e=document.querySelectorAll?(this.parentNode||document).querySelectorAll(t)||[]:_(t),i=e.length;i--;)if(e[i]==this)return!0;return!1};St.matchMedia="matchMedia"in m;St.pushState=m.history&&m.history.pushState;o=document.documentMode;St.hashChange="onhashchange"in m&&!(St.browser.msie&&(!o||o<=8));St.customElements="registerElement"in m.document;c=St.browser.chrome;l=St.browser.mozilla;St.msPointers=!c&&m.MSPointerEvent;St.pointers=!c&&!l&&m.PointerEvent;St.kineticScrollNeeded=i&&(St.touch||St.msPointers||St.pointers)}();j={left:{reverse:"right"},right:{reverse:"left"},down:{reverse:"up"},up:{reverse:"down"},top:{reverse:"bottom"},bottom:{reverse:"top"},"in":{reverse:"out"},out:{reverse:"in"}};L={};_.extend(L,{enabled:!0,Element:function(t){this.element=_(t)},promise:function(t,e){t.is(":visible")||t.css({display:t.data("olddisplay")||"block"}).css("display");e.hide&&t.data("olddisplay",t.css("display")).hide();e.init&&e.init();e.completeCallback&&e.completeCallback(t);t.dequeue()},disable:function(){this.enabled=!1;this.promise=this.promiseShim},enable:function(){this.enabled=!0;this.promise=this.animatedPromise}});L.promiseShim=L.promise;"kendoAnimate"in _.fn||_t(_.fn,{kendoStop:function(t,e){return this.stop(t,e)},kendoAnimate:function(t,e,i,n){return b(this,t,e,i,n)},kendoAddClass:function(t,e){return vt.toggleClass(this,t,e,!0)},kendoRemoveClass:function(t,e){return vt.toggleClass(this,t,e,!1)},kendoToggleClass:function(t,e,i){return vt.toggleClass(this,t,e,i)}});B=/&/g;V=/</g;W=/"/g;G=/'/g;Q=/>/g;Y=function(t){return t.target};St.touch&&(Y=function(t){var e="originalEvent"in t?t.originalEvent.changedTouches:"changedTouches"in t?t.changedTouches:null;return e?document.elementFromPoint(e[0].clientX,e[0].clientY):t.target},yt(["swipe","swipeLeft","swipeRight","swipeUp","swipeDown","doubleTap","tap"],function(t,e){_.fn[e]=function(t){return this.bind(e,t)}}));St.touch?St.mobileOS?(St.mousedown="touchstart",St.mouseup="touchend",St.mousemove="touchmove",St.mousecancel="touchcancel",St.click="touchend",St.resize="orientationchange"):(St.mousedown="mousedown touchstart",St.mouseup="mouseup touchend",St.mousemove="mousemove touchmove",St.mousecancel="mouseleave touchcancel",St.click="click",St.resize="resize"):St.pointers?(St.mousemove="pointermove",St.mousedown="pointerdown",St.mouseup="pointerup",St.mousecancel="pointercancel",St.click="pointerup",St.resize="orientationchange resize"):St.msPointers?(St.mousemove="MSPointerMove",St.mousedown="MSPointerDown",St.mouseup="MSPointerUp",St.mousecancel="MSPointerCancel",St.click="MSPointerUp",St.resize="orientationchange resize"):(St.mousemove="mousemove",St.mousedown="mousedown",St.mouseup="mouseup",St.mousecancel="mouseleave",St.click="click",St.resize="resize");Z=function(t,e){for(var i,a,s=e||"d",o=1,n=0,r=t.length;n<r;n++)a=t[n],""!==a&&(i=a.indexOf("["),0!==i&&(i==-1?a="."+a:(o++,a="."+a.substring(0,i)+" || {})"+a.substring(i))),o++,s+=a+(n<r-1?" || {})":")"));return Array(o).join("(")+s};K=/^([a-z]+:)?\/\//i;_t(vt,{widgets:[],_widgetRegisteredCallbacks:[],ui:vt.ui||{},fx:vt.fx||v,effects:vt.effects||L,mobile:vt.mobile||{},data:vt.data||{},dataviz:vt.dataviz||{},drawing:vt.drawing||{},spreadsheet:{messages:{}},keys:{INSERT:45,DELETE:46,BACKSPACE:8,TAB:9,ENTER:13,ESC:27,LEFT:37,UP:38,RIGHT:39,DOWN:40,END:35,HOME:36,SPACEBAR:32,PAGEUP:33,PAGEDOWN:34,F2:113,F10:121,F12:123,NUMPAD_PLUS:107,NUMPAD_MINUS:109,NUMPAD_DOT:110},support:vt.support||St,animate:vt.animate||b,ns:"",attr:function(t){return"data-"+vt.ns+t},getShadows:e,wrap:i,deepExtend:n,getComputedStyles:s,isScrollable:o,scrollLeft:c,size:p,toCamelCase:a,toHyphens:r,getOffset:vt.getOffset||f,parseEffects:vt.parseEffects||g,toggleClass:vt.toggleClass||x,directions:vt.directions||j,Observable:N,Class:t,Template:I,template:xt(I.compile,I),render:xt(I.render,I),stringify:xt(Ct.stringify,Ct),eventTarget:Y,htmlEncode:w,isLocalUrl:function(t){return t&&!K.test(t)},expr:function(t,e,i){return t=t||"",typeof e==At&&(i=e,e=!1),i=i||"d",t&&"["!==t.charAt(0)&&(t="."+t),e?(t=t.replace(/"([^.]*)\.([^"]*)"/g,'"$1_$DOT$_$2"'),t=t.replace(/'([^.]*)\.([^']*)'/g,"'$1_$DOT$_$2'"),t=Z(t.split("."),i),t=t.replace(/_\$DOT\$_/g,".")):t=i+t,t},getter:function(t,e){var i=t+e;return qt[i]=qt[i]||Function("d","return "+vt.expr(t,e))},setter:function(t){return $t[t]=$t[t]||Function("d,value",vt.expr(t)+"=value")},accessor:function(t){return{get:vt.getter(t),set:vt.setter(t)}},guid:function(){for(var e,i="",t=0;t<32;t++)e=16*kt.random()|0,8!=t&&12!=t&&16!=t&&20!=t||(i+="-"),i+=(12==t?4:16==t?3&e|8:e).toString(16);return i},roleSelector:function(t){return t.replace(/(\S+)/g,"["+vt.attr("role")+"=$1],").slice(0,-1)},directiveSelector:function(t){var e,i=t.split(" ");if(i)for(e=0;e<i.length;e++)"view"!=i[e]&&(i[e]=i[e].replace(/(\w*)(view|bar|strip|over)$/,"$1-$2"));return i.join(" ").replace(/(\S+)/g,"kendo-mobile-$1,").slice(0,-1)},triggeredByInput:function(t){return/^(label|input|textarea|select)$/i.test(t.target.tagName)},onWidgetRegistered:function(t){for(var e=0,i=vt.widgets.length;e<i;e++)t(vt.widgets[e]);vt._widgetRegisteredCallbacks.push(t)},logToConsole:function(t,e){var i=m.console;!vt.suppressLog&&J!==i&&i.log&&i[e||"log"](t)}});X=N.extend({init:function(t,e){var i,n=this;n.element=vt.jQuery(t).handler(n);n.angular("init",e);N.fn.init.call(n);i=e?e.dataSource:null;i&&(e=_t({},e,{dataSource:{}}));e=n.options=_t(!0,{},n.options,e);i&&(e.dataSource=i);n.element.attr(vt.attr("role"))||n.element.attr(vt.attr("role"),(e.name||"").toLowerCase());n.element.data("kendo"+e.prefix+e.name,n);n.bind(n.events,e)},events:[],options:{prefix:""},_hasBindingTarget:function(){return!!this.element[0].kendoBindingTarget},_tabindex:function(t){t=t||this.wrapper;var e=this.element,i="tabindex",n=t.attr(i)||e.attr(i);e.removeAttr(i);t.attr(i,isNaN(n)?0:n)},setOptions:function(t){this._setEvents(t);_.extend(this.options,t)},_setEvents:function(t){for(var e,i=this,n=0,r=i.events.length;n<r;n++)e=i.events[n],i.options[e]&&t[e]&&i.unbind(e,i.options[e]);i.bind(i.events,t)},resize:function(t){var e=this.getSize(),i=this._size;(t||(e.width>0||e.height>0)&&(!i||e.width!==i.width||e.height!==i.height))&&(this._size=e,this._resize(e,t),this.trigger("resize",e))},getSize:function(){return vt.dimensions(this.element)},size:function(t){return t?(this.setSize(t),J):this.getSize()},setSize:_.noop,_resize:_.noop,destroy:function(){var t=this;t.element.removeData("kendo"+t.options.prefix+t.options.name);t.element.removeData("handler");t.unbind()},_destroy:function(){this.destroy()},angular:function(){},_muteAngularRebind:function(t){this._muteRebind=!0;t.call(this);this._muteRebind=!1}});tt=X.extend({dataItems:function(){return this.dataSource.flatView()},_angularItems:function(t){var e=this;e.angular(t,function(){return{elements:e.items(),data:_.map(e.dataItems(),function(t){return{dataItem:t}})}})}});vt.dimensions=function(t,e){var i=t[0];return e&&t.css(e),{width:i.offsetWidth,height:i.offsetHeight}};vt.notify=wt;et=/template$/i;it=/^\s*(?:\{(?:.|\r\n|\n)*\}|\[(?:.|\r\n|\n)*\])\s*$/;nt=/^\{(\d+)(:[^\}]+)?\}|^\[[A-Za-z_]+\]$/;rt=/([A-Z])/g;vt.initWidget=function(t,e,i){var n,r,a,s,o,c,l,d,u,h,p,f,g;if(i?i.roles&&(i=i.roles):i=vt.ui.roles,t=t.nodeType?t:t[0],c=t.getAttribute("data-"+vt.ns+"role")){u=c.indexOf(".")===-1;a=u?i[c]:vt.getter(c)(m);p=_(t).data();f=a?"kendo"+a.fn.options.prefix+a.fn.options.name:"";h=u?RegExp("^kendo.*"+c+"$","i"):RegExp("^"+f+"$","i");for(g in p)if(g.match(h)){if(g!==f)return p[g];n=p[g]}if(a){for(d=k(t,"dataSource"),e=_.extend({},C(t,a.fn.options),e),d&&(e.dataSource=typeof d===At?vt.getter(d)(m):d),s=0,o=a.fn.events.length;s<o;s++)r=a.fn.events[s],l=k(t,r),l!==J&&(e[r]=vt.getter(l)(m));return n?_.isEmptyObject(e)||n.setOptions(e):n=new a(t,e),n}}};vt.rolesFromNamespaces=function(t){var e,i,n=[];for(t[0]||(t=[vt.ui,vt.dataviz.ui]),e=0,i=t.length;e<i;e++)n[e]=t[e].roles;return _t.apply(null,[{}].concat(n.reverse()))};vt.init=function(t){var e=vt.rolesFromNamespaces(zt.call(arguments,1));_(t).find("[data-"+vt.ns+"role]").addBack().each(function(){vt.initWidget(this,{},e)})};vt.destroy=function(t){_(t).find("[data-"+vt.ns+"role]").addBack().each(function(){var t,e=_(this).data();for(t in e)0===t.indexOf("kendo")&&typeof e[t].destroy===It&&e[t].destroy()})};vt.resize=function(t,e){var i,n=_(t).find("[data-"+vt.ns+"role]").addBack().filter(P);n.length&&(i=_.makeArray(n),i.sort(S),_.each(i,function(){var t=vt.widgetInstance(_(this));t&&t.resize(e)}))};vt.parseOptions=C;_t(vt.ui,{Widget:X,DataBoundWidget:tt,roles:{},progress:function(t,e,i){var n,r,a,s,o,c=t.find(".k-loading-mask"),l=vt.support,d=l.browser;i=_.extend({},{width:"100%",height:"100%",top:t.scrollTop(),opacity:!1},i);o=i.opacity?"k-loading-mask k-opaque":"k-loading-mask";e?c.length||(n=l.isRtl(t),r=n?"right":"left",s=t.scrollLeft(),a=d.webkit&&n?t[0].scrollWidth-t.width()-2*s:0,c=_(vt.format("<div class='{0}'><span class='k-loading-text'>{1}<\/span><div class='k-loading-image'/><div class='k-loading-color'/><\/div>",o,vt.ui.progress.messages.loading)).width(i.width).height(i.height).css("top",i.top).css(r,Math.abs(s)+a).prependTo(t)):c&&c.remove()},plugin:function(t,e,i){var n,r,a,s,o=t.fn.options.name;for(e=e||vt.ui,i=i||"",e[o]=t,e.roles[o.toLowerCase()]=t,n="getKendo"+i+o,o="kendo"+i+o,r={name:o,widget:t,prefix:i||""},vt.widgets.push(r),a=0,s=vt._widgetRegisteredCallbacks.length;a<s;a++)vt._widgetRegisteredCallbacks[a](r);_.fn[o]=function(n){var r,a=this;return typeof n===At?(r=zt.call(arguments,1),this.each(function(){var t,e,i=_.data(this,o);if(!i)throw Error(vt.format("Cannot call method '{0}' of {1} before it is initialized",n,o));if(t=i[n],typeof t!==It)throw Error(vt.format("Cannot find method '{0}' of {1}",n,o));if(e=t.apply(i,r),e!==J)return a=e,!1})):this.each(function(){return new t(this,n)}),a};_.fn[o].widget=t;_.fn[n]=function(){return this.data(o)}}});vt.ui.progress.messages={loading:"Loading..."};at={bind:function(){return this},nullObject:!0,options:{}};st=X.extend({init:function(t,e){X.fn.init.call(this,t,e);this.element.autoApplyNS();this.wrapper=this.element;this.element.addClass("km-widget")},destroy:function(){X.fn.destroy.call(this);this.element.kendoDestroy()},options:{prefix:"Mobile"},events:[],view:function(){var t=this.element.closest(vt.roleSelector("view splitview modalview drawer"));return vt.widgetInstance(t,vt.mobile.ui)||at},viewHasNativeScrolling:function(){var t=this.view();return t&&t.options.useNativeScrolling},container:function(){var t=this.element.closest(vt.roleSelector("view layout modalview drawer splitview"));return vt.widgetInstance(t.eq(0),vt.mobile.ui)||at}});_t(vt.mobile,{init:function(t){vt.init(t,vt.mobile.ui,vt.ui,vt.dataviz.ui)},appLevelNativeScrolling:function(){return vt.mobile.application&&vt.mobile.application.options&&vt.mobile.application.options.useNativeScrolling},roles:{},ui:{Widget:st,DataBoundWidget:tt.extend(st.prototype),roles:{},plugin:function(t){vt.ui.plugin(t,vt.mobile.ui,"Mobile")}}});n(vt.dataviz,{init:function(t){vt.init(t,vt.dataviz.ui)},ui:{roles:{},themes:{},views:[],plugin:function(t){vt.ui.plugin(t,vt.dataviz.ui)}},roles:{}});vt.touchScroller=function(t,i){return i||(i={}),i.useNative=!0,_(t).map(function(t,e){return e=_(e),!(!St.kineticScrollNeeded||!vt.mobile.ui.Scroller||e.data("kendoMobileScroller"))&&(e.kendoMobileScroller(i),e.data("kendoMobileScroller"))})[0]};vt.preventDefault=function(t){t.preventDefault()};vt.widgetInstance=function(t,e){var i,n,r,a,s,o=t.data(vt.ns+"role"),c=[];if(o){if("content"===o&&(o="scroller"),"editortoolbar"===o&&(r=t.data("kendoEditorToolbar")))return r;if(e)if(e[0])for(i=0,n=e.length;i<n;i++)c.push(e[i].roles[o]);else c.push(e.roles[o]);else c=[vt.ui.roles[o],vt.dataviz.ui.roles[o],vt.mobile.ui.roles[o]];for(o.indexOf(".")>=0&&(c=[vt.getter(o)(m)]),i=0,n=c.length;i<n;i++)if(a=c[i],a&&(s=t.data("kendo"+a.fn.options.prefix+a.fn.options.name)))return s}};vt.onResize=function(t){var e=t;return St.mobileOS.android&&(e=function(){setTimeout(t,600)}),_(m).on(St.resize,e),e};vt.unbindResize=function(t){_(m).off(St.resize,t)};vt.attrValue=function(t,e){return t.data(vt.ns+e)};vt.days={Sunday:0,Monday:1,Tuesday:2,Wednesday:3,Thursday:4,Friday:5,Saturday:6};_.extend(_.expr[":"],{kendoFocusable:function(t){var e=_.attr(t,"tabindex");return T(t,!isNaN(e)&&e>-1)}});ot=["mousedown","mousemove","mouseenter","mouseleave","mouseover","mouseout","mouseup","click"];ct="label, input, [data-rel=external]";lt={setupMouseMute:function(){var t,e=0,i=ot.length,n=document.documentElement;if(!lt.mouseTrap&&St.eventCapture)for(lt.mouseTrap=!0,lt.bustClick=!1,lt.captureMouse=!1,t=function(t){lt.captureMouse&&("click"===t.type?lt.bustClick&&!_(t.target).is(ct)&&(t.preventDefault(),t.stopPropagation()):t.stopPropagation())};e<i;e++)n.addEventListener(ot[e],t,!0)},muteMouse:function(t){lt.captureMouse=!0;t.data.bustClick&&(lt.bustClick=!0);clearTimeout(lt.mouseTrapTimeoutID)},unMuteMouse:function(){clearTimeout(lt.mouseTrapTimeoutID);lt.mouseTrapTimeoutID=setTimeout(function(){lt.captureMouse=!1;lt.bustClick=!1},400)}};dt={down:"touchstart mousedown",move:"mousemove touchmove",up:"mouseup touchend touchcancel",cancel:"mouseleave touchcancel"};St.touch&&(St.mobileOS.ios||St.mobileOS.android)?dt={down:"touchstart",move:"touchmove",up:"touchend touchcancel",cancel:"touchcancel"}:St.pointers?dt={down:"pointerdown",move:"pointermove",up:"pointerup",cancel:"pointercancel pointerleave"}:St.msPointers&&(dt={down:"MSPointerDown",move:"MSPointerMove",up:"MSPointerUp",cancel:"MSPointerCancel MSPointerLeave"});!St.msPointers||"onmspointerenter"in m||_.each({MSPointerEnter:"MSPointerOver",MSPointerLeave:"MSPointerOut"},function(t,a){_.event.special[t]={delegateType:a,bindType:a,handle:function(t){var e,i=this,n=t.relatedTarget,r=t.handleObj;return n&&(n===i||_.contains(i,n))||(t.type=r.origType,e=r.handler.apply(this,arguments),t.type=a),e}}});ut=function(t){return dt[t]||t};ht=/([^ ]+)/g;vt.applyEventMap=function(t,e){return t=t.replace(ht,ut),e&&(t=t.replace(ht,"$1."+e)),t};pt=_.fn.on;_t(!0,O,_);O.fn=O.prototype=new _;O.fn.constructor=O;O.fn.init=function(t,e){return e&&e instanceof _&&!(e instanceof O)&&(e=O(e)),_.fn.init.call(this,t,e,ft)};O.fn.init.prototype=O.fn;ft=O(document);_t(O.fn,{handler:function(t){return this.data("handler",t),this},autoApplyNS:function(t){return this.data("kendoNS",t||vt.guid()),this},on:function(){var e,t,i,n,r,a,s=this,o=s.data("kendoNS");return 1===arguments.length?pt.call(s,arguments[0]):(e=s,t=zt.call(arguments),typeof t[t.length-1]===Rt&&t.pop(),i=t[t.length-1],n=vt.applyEventMap(t[0],o),St.mouseAndTouchPresent&&n.search(/mouse|click/)>-1&&this[0]!==document.documentElement&&(lt.setupMouseMute(),r=2===t.length?null:t[1],a=n.indexOf("click")>-1&&n.indexOf("touchend")>-1,pt.call(this,{touchstart:lt.muteMouse,touchend:lt.unMuteMouse},r,{bustClick:a})),typeof i===At&&(e=s.data("handler"),i=e[i],t[t.length-1]=function(t){i.call(e,t)}),t[0]=n,pt.apply(s,t),s)},kendoDestroy:function(t){return t=t||this.data("kendoNS"),t&&this.off("."+t),this}});vt.jQuery=O;vt.eventMap=dt;vt.timezone=function(){function o(t,e){var i,n,r,a=e[3],s=e[4],o=e[5],c=e[8];return c||(e[8]=c={}),c[t]?c[t]:(isNaN(s)?0===s.indexOf("last")?(i=new Date(Date.UTC(t,d[a]+1,1,o[0]-24,o[1],o[2],0)),n=u[s.substr(4,3)],r=i.getUTCDay(),i.setUTCDate(i.getUTCDate()+n-r-(n>r?7:0))):s.indexOf(">=")>=0&&(i=new Date(Date.UTC(t,d[a],s.substr(5),o[0],o[1],o[2],0)),n=u[s.substr(0,3)],r=i.getUTCDay(),i.setUTCDate(i.getUTCDate()+n-r+(n<r?7:0))):i=new Date(Date.UTC(t,d[a],s,o[0],o[1],o[2],0)),c[t]=i)}function a(t,e,i){var n,r,a,s;return(e=e[i])?(a=new Date(t).getUTCFullYear(),e=jQuery.grep(e,function(t){var e=t[0],i=t[1];return e<=a&&(i>=a||e==a&&"only"==i||"max"==i)}),e.push(t),e.sort(function(t,e){return"number"!=typeof t&&(t=+o(a,t)),"number"!=typeof e&&(e=+o(a,e)),t-e}),s=e[jQuery.inArray(t,e)-1]||e[e.length-1],isNaN(s)?s:null):(n=i.split(":"),r=0,n.length>1&&(r=60*n[0]+ +n[1]),[-1e6,"max","-","Jan",1,[0,0,0],r,"-"])}function s(t,e,i){var n,r,a,s=e[i];if("string"==typeof s&&(s=e[s]),!s)throw Error('Timezone "'+i+'" is either incorrect, or kendo.timezones.min.js is not included.');for(n=s.length-1;n>=0&&(r=s[n][3],!(r&&t>r));n--);if(a=s[n+1],!a)throw Error('Timezone "'+i+'" not found on '+t+".");return a}function c(t,e,i,n){typeof t!=Mt&&(t=Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()));var r=s(t,e,n);return{zone:r,rule:a(t,i,r[1])}}function t(t,e){var i,n,r;return"Etc/UTC"==e||"Etc/GMT"==e?0:(i=c(t,this.zones,this.rules,e),n=i.zone,r=i.rule,vt.parseFloat(r?n[0]-r[6]:n[0]))}function e(t,e){var i=c(t,this.zones,this.rules,e),n=i.zone,r=i.rule,a=n[2];return a.indexOf("/")>=0?a.split("/")[r&&+r[6]?1:0]:a.indexOf("%s")>=0?a.replace("%s",r&&"-"!=r[7]?r[7]:""):a}function i(t,e,i){var n,r,a,s=i;return typeof e==At&&(e=this.offset(t,e)),typeof i==At&&(i=this.offset(t,i)),r=t.getTimezoneOffset(),t=new Date(t.getTime()+6e4*(e-i)),a=t.getTimezoneOffset(),typeof s==At&&(s=this.offset(t,s)),n=a-r+(i-s),new Date(t.getTime()+6e4*n)}function n(t,e){return this.convert(t,t.getTimezoneOffset(),e)}function r(t,e){return this.convert(t,e,t.getTimezoneOffset())}function l(t){return this.apply(new Date(t),"Etc/UTC")}var d={Jan:0,Feb:1,Mar:2,Apr:3,May:4,Jun:5,Jul:6,Aug:7,Sep:8,Oct:9,Nov:10,Dec:11},u={Sun:0,Mon:1,Tue:2,Wed:3,Thu:4,Fri:5,Sat:6};return{zones:{},rules:{},offset:t,convert:i,apply:n,remove:r,abbr:e,toLocalDate:l}}();vt.date=function(){function r(t,e){return 0===e&&23===t.getHours()&&(t.setHours(t.getHours()+2),!0)}function n(t,e,i){var n=t.getHours();i=i||1;e=(e-t.getDay()+7*i)%7;t.setDate(t.getDate()+e);r(t,n)}function i(t,e,i){return t=new Date(t),n(t,e,i),t}function a(t){return new Date(t.getFullYear(),t.getMonth(),1)}function t(t){var e=new Date(t.getFullYear(),t.getMonth()+1,0),i=a(t),n=Math.abs(e.getTimezoneOffset()-i.getTimezoneOffset());return n&&e.setHours(i.getHours()+n/60),e}function s(t,e){return 1!==e?p(i(t,e,-1),4):p(t,4-(t.getDay()||7))}function o(t,e){var i=new Date(t.getFullYear(),0,1,-6),n=s(t,e),r=n.getTime()-i.getTime(),a=Math.floor(r/b);return 1+Math.floor(a/7)}function e(t,e){var i,n,r;return e===J&&(e=vt.culture().calendar.firstDay),i=p(t,-7),n=p(t,7),r=o(t,e),0===r?o(i,e)+1:53===r&&o(n,e)>1?1:r}function c(t){return t=new Date(t.getFullYear(),t.getMonth(),t.getDate(),0,0,0),r(t,0),t}function l(t){return Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds())}function d(t){return _(t).getTime()-c(_(t))}function u(t,e,i){var n,r=d(e),a=d(i);return!t||r==a||(e>=i&&(i+=b),n=d(t),r>n&&(n+=b),a<r&&(a+=b),n>=r&&n<=a)}function h(t,e,i){var n,r=e.getTime(),a=i.getTime();return r>=a&&(a+=b),n=t.getTime(),n>=r&&n<=a}function p(t,e){var i=t.getHours();return t=new Date(t),f(t,e*b),r(t,i),t}function f(t,e,i){var n,r=t.getTimezoneOffset();t.setTime(t.getTime()+e);i||(n=t.getTimezoneOffset()-r,t.setTime(t.getTime()+n*y))}function g(t,e){return t=new Date(vt.date.getDate(t).getTime()+vt.date.getMilliseconds(e)),r(t,e.getHours()),t}function m(){return c(new Date)}function v(t){return c(t).getTime()==m().getTime()}function _(t){var e=new Date(1980,1,1,0,0,0);return t&&e.setHours(t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()),e}var y=6e4,b=864e5;return{adjustDST:r,dayOfWeek:i,setDayOfWeek:n,getDate:c,isInDateRange:h,isInTimeRange:u,isToday:v,nextDay:function(t){return p(t,1)},previousDay:function(t){return p(t,-1)},toUtcTime:l,MS_PER_DAY:b,MS_PER_HOUR:60*y,MS_PER_MINUTE:y,setTime:f,setHours:g,addDays:p,today:m,toInvariantTime:_,firstDayOfMonth:a,lastDayOfMonth:t,weekInYear:e,getMilliseconds:d}}();vt.stripWhitespace=function(e){var t,i,n;if(document.createNodeIterator)for(t=document.createNodeIterator(e,NodeFilter.SHOW_TEXT,function(t){return t.parentNode==e?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_REJECT},!1);t.nextNode();)t.referenceNode&&!t.referenceNode.textContent.trim()&&t.referenceNode.parentNode.removeChild(t.referenceNode);else for(i=0;i<e.childNodes.length;i++)n=e.childNodes[i],3!=n.nodeType||/\S/.test(n.nodeValue)||(e.removeChild(n),i--),1==n.nodeType&&vt.stripWhitespace(n)};gt=m.requestAnimationFrame||m.webkitRequestAnimationFrame||m.mozRequestAnimationFrame||m.oRequestAnimationFrame||m.msRequestAnimationFrame||function(t){setTimeout(t,1e3/60)};vt.animationFrame=function(t){gt.call(m,t)};mt=[];vt.queueAnimation=function(t){mt[mt.length]=t;1===mt.length&&vt.runNextAnimation()};vt.runNextAnimation=function(){vt.animationFrame(function(){mt[0]&&(mt.shift()(),mt[0]&&vt.runNextAnimation())})};vt.parseQueryStringParams=function(t){for(var e=t.split("?")[1]||"",i={},n=e.split(/&|=/),r=n.length,a=0;a<r;a+=2)""!==n[a]&&(i[decodeURIComponent(n[a])]=decodeURIComponent(n[a+1]));return i};vt.elementUnderCursor=function(t){if(J!==t.x.client)return document.elementFromPoint(t.x.client,t.y.client)};vt.wheelDeltaY=function(t){var e,i=t.originalEvent,n=i.wheelDeltaY;return i.wheelDelta?(n===J||n)&&(e=i.wheelDelta):i.detail&&i.axis===i.VERTICAL_AXIS&&(e=10*-i.detail),e};vt.throttle=function(r,a){var s,t,o=0;return!a||a<=0?r:(t=function(){function t(){r.apply(e,n);o=+new Date}var e=this,i=+new Date-o,n=arguments;return o?(s&&clearTimeout(s),i>a?t():s=setTimeout(t,a-i),J):t()},t.cancel=function(){clearTimeout(s)},t)};vt.caret=function(t,e,i){var n,r,a,s,o,c=e!==J;if(i===J&&(i=e),t[0]&&(t=t[0]),!c||!t.disabled){try{t.selectionStart!==J?c?(t.focus(),r=St.mobileOS,r.wp||r.android?setTimeout(function(){t.setSelectionRange(e,i)},0):t.setSelectionRange(e,i)):e=[t.selectionStart,t.selectionEnd]:document.selection&&(_(t).is(":visible")&&t.focus(),n=t.createTextRange(),c?(n.collapse(!0),n.moveStart("character",e),n.moveEnd("character",i-e),n.select()):(a=n.duplicate(),n.moveToBookmark(document.selection.createRange().getBookmark()),a.setEndPoint("EndToStart",n),s=a.text.length,o=s+n.text.length,e=[s,o]))}catch(t){e=[]}return e}};vt.compileMobileDirective=function(e,i){var t=m.angular;return e.attr("data-"+vt.ns+"role",e[0].tagName.toLowerCase().replace("kendo-mobile-","").replace("-","")),t.element(e).injector().invoke(["$compile",function(t){t(e)(i);/^\$(digest|apply)$/.test(i.$$phase)||i.$digest()}]),vt.widgetInstance(e,vt.mobile.ui)};vt.antiForgeryTokens=function(){var t={},e=_("meta[name=csrf-token],meta[name=_csrf]").attr("content"),i=_("meta[name=csrf-param],meta[name=_csrf_header]").attr("content");return _("input[name^='__RequestVerificationToken']").each(function(){t[this.name]=this.value}),i!==J&&e!==J&&(t[i]=e),t};vt.cycleForm=function(t){function e(t){var e=vt.widgetInstance(t);e&&e.focus?e.focus():t.focus()}var i=t.find("input, .k-widget").first(),n=t.find("button, .k-button").last();n.on("keydown",function(t){t.keyCode!=vt.keys.TAB||t.shiftKey||(t.preventDefault(),e(i))});i.on("keydown",function(t){t.keyCode==vt.keys.TAB&&t.shiftKey&&(t.preventDefault(),e(n))})};vt.focusElement=function(e){var i=[],t=e.parentsUntil("body").filter(function(t,e){var i=vt.getComputedStyles(e,["overflow"]);return"visible"!==i.overflow}).add(m);t.each(function(t,e){i[t]=_(e).scrollTop()});try{e[0].setActive()}catch(t){e[0].focus()}t.each(function(t,e){_(e).scrollTop(i[t])})};vt.matchesMedia=function(t){var e=vt._bootstrapToMedia(t)||t;return St.matchMedia&&m.matchMedia(e).matches};vt._bootstrapToMedia=function(t){return{xs:"(max-width: 576px)",sm:"(min-width: 576px)",md:"(min-width: 768px)",lg:"(min-width: 992px)",xl:"(min-width: 1200px)"}[t]},function(){function i(t,e,i,n){var r,a,s=_("<form>").attr({action:i,method:"POST",target:n}),o=vt.antiForgeryTokens();o.fileName=e;r=t.split(";base64,");o.contentType=r[0].replace("data:","");o.base64=r[1];for(a in o)o.hasOwnProperty(a)&&_("<input>").attr({value:o[a],name:a,type:"hidden"}).appendTo(s);s.appendTo("body").submit().remove()}function n(t,e){var i,n,r,a,s,o=t;if("string"==typeof t){for(i=t.split(";base64,"),n=i[0],r=atob(i[1]),a=new Uint8Array(r.length),s=0;s<r.length;s++)a[s]=r.charCodeAt(s);o=new Blob([a.buffer],{type:n})}navigator.msSaveBlob(o,e)}function r(t,e){m.Blob&&t instanceof Blob&&(t=URL.createObjectURL(t));a.download=e;a.href=t;var i=document.createEvent("MouseEvents");i.initMouseEvent("click",!0,!1,m,0,0,0,0,0,!1,!1,!1,!1,0,null);a.dispatchEvent(i);setTimeout(function(){URL.revokeObjectURL(t)})}var a=document.createElement("a"),s="download"in a&&!vt.support.browser.edge;vt.saveAs=function(t){var e=i;t.forceProxy||(s?e=r:navigator.msSaveBlob&&(e=n));e(t.dataURI,t.fileName,t.proxyURL,t.proxyTarget)}}();vt.proxyModelSetters=function(i){var t={};return Object.keys(i||{}).forEach(function(e){Object.defineProperty(t,e,{get:function(){return i[e]},set:function(t){i[e]=t;i.dirty=!0}})}),t}}(jQuery,window),window.kendo});("function"==typeof define&&define.amd?define:function(t,e,i){(i||e)()})("kendo.data.min",["kendo.core.min","kendo.data.odata.min","kendo.data.xml.min"],function(){return function(v,y){function l(n,r,a,s){return function(t){var e,i={};for(e in t)i[e]=t[e];i.field=s?a+"."+t.field:a;r==Nt&&n._notifyChange&&n._notifyChange(i);n.trigger(r,i)}}function a(t,e){if(t===e)return!0;var i,n=v.type(t),r=v.type(e);if(n!==r)return!1;if("date"===n)return t.getTime()===e.getTime();if("object"!==n&&"array"!==n)return!1;for(i in t)if(!a(t[i],e[i]))return!1;return!0}function s(t,e){var i;for(var n in t)if((i=t[n],mt(i)&&i.field&&i.field===e)||i===e)return i;return null}function g(t){this.data=t||[]}function b(t,e){if(t){var i=typeof t===Tt?{field:t,dir:e}:t,n=_t(i)?i:i!==y?[i]:[];return yt(n,function(t){return!!t.dir})}}function o(t){var e,i,n,r,a=t.filters;if(a)for(e=0,i=a.length;e<i;e++)n=a[e],r=n.operator,r&&typeof r===Tt&&(n.operator=nt[r.toLowerCase()]||r),o(n)}function u(t){if(t&&!vt(t))return!_t(t)&&t.filters||(t={logic:"and",filters:_t(t)?t:[t]}),o(t),t}function c(t,e){return!t.logic&&!e.logic&&t.field===e.field&&t.value===e.value&&t.operator===e.operator}function d(t){return t=t||{},vt(t)?{logic:"and",filters:[]}:u(t)}function h(t,e){return e.logic||t.field>e.field?1:t.field<e.field?-1:0}function p(t,e){var i,n,r,a,s;if((t=d(t),e=d(e),t.logic!==e.logic)||(r=(t.filters||[]).slice(),a=(e.filters||[]).slice(),r.length!==a.length))return!1;for(r=r.sort(h),a=a.sort(h),s=0;s<r.length;s++)if(i=r[s],n=a[s],i.logic&&n.logic){if(!p(i,n))return!1}else if(!c(i,n))return!1;return!0}function i(t){return _t(t)?t:[t]}function m(t,e,i,n){var r=typeof t===Tt?{field:t,dir:e,compare:i,skipItemSorting:n}:t,a=_t(r)?r:r!==y?[r]:[];return Q(a,function(t){return{field:t.field,dir:t.dir||"asc",aggregates:t.aggregates,compare:t.compare,skipItemSorting:t.skipItemSorting}})}function x(t,e,i){for(var r=m(t,e,i),n=0;n<r.length;n++)delete r[n].compare;return r}function _(t){for(var i=_t(t)?t:[t],e=0;e<i.length;e++)if(i[e]&&Ct(i[e].compare))return!0;return!1}function f(t,e){return t&&t.getTime&&e&&e.getTime?t.getTime()===e.getTime():t===e}function w(t,e,i,n,r,a){var s,o,c,l,d;for(e=e||[],l=e.length,s=0;s<l;s++)o=e[s],c=o.aggregate,d=o.field,t[d]=t[d]||{},a[d]=a[d]||{},a[d][c]=a[d][c]||{},t[d][c]=rt[c.toLowerCase()](t[d][c],i,kt.accessor(d),n,r,a[d][c])}function k(t){return"number"==typeof t&&!isNaN(t)}function r(t){return t&&t.getTime}function C(t){for(var i=t.length,n=Array(i),e=0;e<i;e++)n[e]=t[e].toJSON();return n}function S(t,e,i,n,r){for(var a,s,o,d={},c=0,l=t.length;c<l;c++){a=t[c];for(s in e)o=r[s],o&&o!==s&&(d[o]||(d[o]=kt.setter(o)),d[o](a,e[s](a)),delete a[s])}}function P(t,e,i,n,r){for(var a,s,o,c=0,l=t.length;c<l;c++){a=t[c];for(s in e)a[s]=i._parse(s,e[s](a)),o=r[s],o&&o!==s&&delete a[o]}}function T(t,e,i,n,r){for(var a,o,s=0,c=t.length;s<c;s++)a=t[s],o=n[a.field],o&&o!=a.field&&(a.field=o),a.value=i._parse(a.field,a.value),a.hasSubgroups?T(a.items,e,i,n,r):P(a.items,e,i,n,r)}function D(e,i,n,r,a,s){return function(t){return t=e(t),O(i,n,r,a,s)(t)}}function O(e,i,n,r,a){return function(t){return t&&!vt(n)&&("[object Array]"===Xt.call(t)||t instanceof ie||(t=[t]),i(t,n,new e,r,a)),t||[]}}function I(t,e){var i,n,r;if(e.items&&e.items.length)for(r=0;r<e.items.length;r++)i=t.items[r],n=e.items[r],i&&n?i.hasSubgroups?I(i,n):i.field&&i.value==n.value?i.items.push.apply(i.items,n.items):t.items.push.apply(t.items,[n]):n&&t.items.push.apply(t.items,[n])}function A(t,e,i,n){for(var r,a,s,o=0;e.length&&n&&(r=e[o],a=r.items,s=a.length,t&&t.field===r.field&&t.value===r.value?(t.hasSubgroups&&t.items.length?A(t.items[t.items.length-1],r.items,i,n):(a=a.slice(i,i+n),t.items=t.items.concat(a)),e.splice(o--,1)):r.hasSubgroups&&a.length?(A(r,a,i,n),r.items.length||e.splice(o--,1)):(a=a.slice(i,i+n),r.items=a,r.items.length||e.splice(o--,1)),0===a.length?i-=s:(i=0,n-=a.length),!(++o>=e.length)););o<e.length&&e.splice(o,e.length-o)}function M(t,e){for(var i,n,a,s=[],o=(t||[]).length,c=Ct(e)?e:function(t,e){return t[e]},r=0;r<o;r++)if(i=c(t,r),i.hasSubgroups)s=s.concat(M(i.items));else for(n=i.items,a=0;a<n.length;a++)s.push(c(n,a));return s}function F(t){for(var n,r,a,s=[],e=0,i=t.length;e<i;e++)if(a=t.at(e),a.hasSubgroups)s=s.concat(F(a.items));else for(n=a.items,r=0;r<n.length;r++)s.push(n.at(r));return s}function N(t,e){var i,n,r;if(e)for(i=0,n=t.length;i<n;i++)r=t.at(i),r.hasSubgroups?N(r.items,e):r.items=new J(r.items,e,r.items._events)}function n(t,e){for(var i=0;i<t.length;i++)if(t[i].hasSubgroups){if(n(t[i].items,e))return!0}else if(e(t[i].items,t[i]))return!0}function E(t,e,i,n){for(var r=0;r<t.length&&t[r].data!==e&&!R(t[r].data,i,n);r++);}function R(t,e,i){for(var n=0,r=t.length;n<r;n++){if(t[n]&&t[n].hasSubgroups)return R(t[n].items,e,i);if(t[n]===e||t[n]===i)return t[n]=i,!0}}function q(t,e,i,n,r){for(var o,c,a=0,s=t.length;a<s;a++)if(o=t[a],o&&!(o instanceof n))if(o.hasSubgroups===y||r){for(c=0;c<e.length;c++)if(e[c]===o){t[a]=e.at(c);E(i,e,o,t[a]);break}}else q(o.items,e,i,n,r)}function $(t,e){for(var i,r=t.length,n=0;n<r;n++)if(i=t[n],i.uid&&i.uid==e.uid)return t.splice(n,1),i}function z(t,e){return e?H(t,function(t){return t.uid&&t.uid==e.uid||t[e.idField]===e.id&&e.id!==e._defaultId}):-1}function U(t,e){return e?H(t,function(t){return t.uid==e.uid}):-1}function H(t,e){for(var i=0,n=t.length;i<n;i++)if(e(t[i]))return i;return-1}function j(t,e){var i,n;return t&&!vt(t)?(i=t[e],n=mt(i)?i.from||i.field||e:t[e]||e,Ct(n)?e:n):e}function L(t,e){var i,n,r,a={};for(r in t)"filters"!==r&&(a[r]=t[r]);if(t.filters)for(a.filters=[],i=0,n=t.filters.length;i<n;i++)a.filters[i]=L(t.filters[i],e);else a.field=j(e.fields,a.field);return a}function B(t,e){for(var r,a,s,o=[],i=0,n=t.length;i<n;i++){r={};a=t[i];for(s in a)r[s]=a[s];r.field=j(e.fields,r.field);r.aggregates&&_t(r.aggregates)&&(r.aggregates=B(r.aggregates,e));o.push(r)}return o}function V(t,e){var i,n,r,a,s,o,c,l,d,u;for(t=v(t)[0],i=t.options,n=e[0],r=e[1],a=[],s=0,o=i.length;s<o;s++)d={},l=i[s],c=l.parentNode,c===t&&(c=null),l.disabled||c&&c.disabled||(c&&(d.optgroup=c.label),d[n.field]=l.text,u=l.attributes.value,u=u&&u.specified?l.value:l.text,d[r.field]=u,a.push(d));return a}function W(t,e){for(var r,a,s,o,c,l=v(t)[0].tBodies[0],d=l?l.rows:[],u=e.length,h=[],i=0,n=d.length;i<n;i++){for(s={},c=!0,a=d[i].cells,r=0;r<u;r++)o=a[r],"th"!==o.nodeName.toLowerCase()&&(c=!1,s[e[r].field]=o.innerHTML);c||h.push(s)}return h}function t(i){return function(){var t=this._data,e=ct.fn[i].apply(this,Zt.call(arguments));return this._data!=t&&this._attachBubbleHandlers(),e}}function G(t,e){function i(t,e){return t.filter(e).add(t.find(e))}for(var a,s,o,c,l,d,u=v(t).children(),h=[],p=e[0].field,f=e[1]&&e[1].field,g=e[2]&&e[2].field,m=e[3]&&e[3].field,n=0,r=u.length;n<r;n++)a={_loaded:!0},s=u.eq(n),c=s[0].firstChild,d=s.children(),t=d.filter("ul"),d=d.filter(":not(ul)"),o=s.attr("data-id"),o&&(a.id=o),c&&(a[p]=3==c.nodeType?c.nodeValue:d.text()),f&&(a[f]=i(d,"a").attr("href")),m&&(a[m]=i(d,"img").attr("src")),g&&(l=i(d,".k-sprite").prop("className"),a[g]=l&&v.trim(l.replace("k-sprite",""))),t.length&&(a.items=G(t.eq(0),e)),"true"==s.attr("data-hasChildren")&&(a.hasChildren=!0),h.push(a);return h}var Q,J,Y,Z,K,X,tt,et,it,nt,rt,at,st,ot,e,ct,lt,dt,ut,ht,pt,ft=v.extend,gt=v.proxy,mt=v.isPlainObject,vt=v.isEmptyObject,_t=v.isArray,yt=v.grep,bt=v.ajax,xt=v.each,wt=v.noop,kt=window.kendo,Ct=kt.isFunction,St=kt.Observable,Pt=kt.Class,Tt="string",Dt="function",Ot="asc",It="create",At="read",Mt="update",Ft="destroy",Nt="change",Et="sync",Rt="get",qt="error",$t="requestStart",zt="progress",Ut="requestEnd",Ht=[It,At,Mt,Ft],jt=function(t){return t},Lt=kt.getter,Bt=kt.stringify,Vt=Math,Wt=[].push,Gt=[].join,Qt=[].pop,Jt=[].splice,Yt=[].shift,Zt=[].slice,Kt=[].unshift,Xt={}.toString,te=kt.support.stableSort,ee=/^\/Date\((.*?)\)\/$/,ie=St.extend({init:function(t,e){var i=this;i.type=e||Y;St.fn.init.call(i);i.length=t.length;i.wrapAll(t,i)},at:function(t){return this[t]},toJSON:function(){for(var e,i=this.length,n=Array(i),t=0;t<i;t++)e=this[t],e instanceof Y&&(e=e.toJSON()),n[t]=e;return n},parent:wt,wrapAll:function(t,e){var i,n,r=this,a=function(){return r};for(e=e||[],i=0,n=t.length;i<n;i++)e[i]=r.wrap(t[i],a);return e},wrap:function(t,e){var i,n=this;return null!==t&&"[object Object]"===Xt.call(t)&&(i=t instanceof n.type||t instanceof X,i||(t=t instanceof Y?t.toJSON():t,t=new n.type(t)),t.parent=e,t.bind(Nt,function(t){n.trigger(Nt,{field:t.field,node:t.node,index:t.index,items:t.items||[this],action:t.node?t.action||"itemloaded":"itemchange"})})),t},push:function(){var t,e=this.length,i=this.wrapAll(arguments);return t=Wt.apply(this,i),this.trigger(Nt,{action:"add",index:e,items:i}),t},slice:Zt,sort:[].sort,join:Gt,pop:function(){var t=this.length,e=Qt.apply(this);return t&&this.trigger(Nt,{action:"remove",index:t-1,items:[e]}),e},splice:function(t,e,i){var n,r,a,s=this.wrapAll(Zt.call(arguments,2));if(n=Jt.apply(this,[t,e].concat(s)),n.length)for(this.trigger(Nt,{action:"remove",index:t,items:n}),r=0,a=n.length;r<a;r++)n[r]&&n[r].children&&n[r].unbind(Nt);return i&&this.trigger(Nt,{action:"add",index:t,items:s}),n},shift:function(){var t=this.length,e=Yt.apply(this);return t&&this.trigger(Nt,{action:"remove",index:0,items:[e]}),e},unshift:function(){var t,e=this.wrapAll(arguments);return t=Kt.apply(this,e),this.trigger(Nt,{action:"add",index:0,items:e}),t},indexOf:function(t){for(var n=this,e=0,i=n.length;e<i;e++)if(n[e]===t)return e;return-1},forEach:function(t,e){for(var i=0,n=this.length,r=e||window;i<n;i++)t.call(r,this[i],i,this)},map:function(t,e){for(var i=0,n=[],r=this.length,a=e||window;i<r;i++)n[i]=t.call(a,this[i],i,this);return n},reduce:function(t){var e,i=0,n=this.length;for(2==arguments.length?e=arguments[1]:i<n&&(e=this[i++]);i<n;i++)e=t(e,this[i],i,this);return e},reduceRight:function(t){var e,i=this.length-1;for(2==arguments.length?e=arguments[1]:i>0&&(e=this[i--]);i>=0;i--)e=t(e,this[i],i,this);return e},filter:function(t,e){for(var i,n=0,r=[],a=this.length,s=e||window;n<a;n++)i=this[n],t.call(s,i,n,this)&&(r[r.length]=i);return r},find:function(t,e){for(var i,n=0,r=this.length,a=e||window;n<r;n++)if(i=this[n],t.call(a,i,n,this))return i},every:function(t,e){for(var i,n=0,r=this.length,a=e||window;n<r;n++)if(i=this[n],!t.call(a,i,n,this))return!1;return!0},some:function(t,e){for(var i,n=0,r=this.length,a=e||window;n<r;n++)if(i=this[n],t.call(a,i,n,this))return!0;return!1},remove:function(t){var e=this.indexOf(t);e!==-1&&this.splice(e,1)},empty:function(){this.splice(0,this.length)}});"undefined"!=typeof Symbol&&Symbol.iterator&&!ie.prototype[Symbol.iterator]&&(ie.prototype[Symbol.iterator]=[][Symbol.iterator]);J=ie.extend({init:function(t,e,i){St.fn.init.call(this);this.type=e||Y;i&&(this._events=i);for(var n=0;n<t.length;n++)this[n]=t[n];this.length=n;this._parent=gt(function(){return this},this)},at:function(t){var e=this[t];return e instanceof this.type?e.parent=this._parent:e=this[t]=this.wrap(e,this._parent),e}});Y=St.extend({init:function(t){var e,i,n=this,r=function(){return n};St.fn.init.call(this);this._handlers={};for(i in t)e=t[i],"object"==typeof e&&e&&!e.getTime&&"_"!=i.charAt(0)&&(e=n.wrap(e,i,r)),n[i]=e;n.uid=kt.guid()},shouldSerialize:function(t){return this.hasOwnProperty(t)&&"_handlers"!==t&&"_events"!==t&&typeof this[t]!==Dt&&"uid"!==t},forEach:function(t){for(var e in this)this.shouldSerialize(e)&&t(this[e],e)},toJSON:function(){var t,e,i={};for(e in this)this.shouldSerialize(e)&&(t=this[e],(t instanceof Y||t instanceof ie)&&(t=t.toJSON()),i[e]=t);return i},get:function(t){var e,i=this;return i.trigger(Rt,{field:t}),e="this"===t?i:kt.getter(t,!0)(i)},_set:function(t,e){var i,n,r,a=this,s=t.indexOf(".")>=0;if(s)for(i=t.split("."),n="";i.length>1;){if(n+=i.shift(),r=kt.getter(n,!0)(a),r instanceof Y)return r.set(i.join("."),e),s;n+="."}return kt.setter(t)(a,e),s},set:function(t,e){var i=this,n=!1,r=t.indexOf(".")>=0,a=kt.getter(t,!0)(i);return a!==e&&(a instanceof St&&this._handlers[t]&&(this._handlers[t].get&&a.unbind(Rt,this._handlers[t].get),a.unbind(Nt,this._handlers[t].change)),n=i.trigger("set",{field:t,value:e}),n||(r||(e=i.wrap(e,t,function(){return i})),(!i._set(t,e)||t.indexOf("(")>=0||t.indexOf("[")>=0)&&i.trigger(Nt,{field:t}))),n},parent:wt,wrap:function(t,e,i){var n,r,a,s,o=this,c=Xt.call(t);return null==t||"[object Object]"!==c&&"[object Array]"!==c||(a=t instanceof ie,s=t instanceof ct,"[object Object]"!==c||s||a?("[object Array]"===c||a||s)&&(a||s||(t=new ie(t)),r=l(o,Nt,e,!1),t.bind(Nt,r),o._handlers[e]={change:r}):(t instanceof Y||(t=new Y(t)),n=l(o,Rt,e,!0),t.bind(Rt,n),r=l(o,Nt,e,!0),t.bind(Nt,r),o._handlers[e]={get:n,change:r}),t.parent=i),t}});Z={number:function(t){return typeof t===Tt&&"null"===t.toLowerCase()?null:kt.parseFloat(t)},date:function(t){return typeof t===Tt&&"null"===t.toLowerCase()?null:kt.parseDate(t)},boolean:function(t){return typeof t===Tt?"null"===t.toLowerCase()?null:"true"===t.toLowerCase():null!=t?!!t:t},string:function(t){return typeof t===Tt&&"null"===t.toLowerCase()?null:null!=t?t+"":t},"default":function(t){return t}};K={string:"",number:0,date:new Date,boolean:!1,"default":""};X=Y.extend({init:function(t){var e,i,n=this;if((!t||v.isEmptyObject(t))&&(t=v.extend({},n.defaults,t),n._initializers))for(e=0;e<n._initializers.length;e++)i=n._initializers[e],t[i]=n.defaults[i]();Y.fn.init.call(n,t);n.dirty=!1;n.dirtyFields={};n.idField&&(n.id=n.get(n.idField),n.id===y&&(n.id=n._defaultId))},shouldSerialize:function(t){return Y.fn.shouldSerialize.call(this,t)&&"uid"!==t&&!("id"!==this.idField&&"id"===t)&&"dirty"!==t&&"dirtyFields"!==t&&"_accessors"!==t},_parse:function(t,e){var i,n=this,r=t,a=n.fields||{};return t=a[t],t||(t=s(a,r)),t&&(i=t.parse,!i&&t.type&&(i=Z[t.type.toLowerCase()])),i?i(e):e},_notifyChange:function(t){var e=t.action;"add"!=e&&"remove"!=e||(this.dirty=!0,this.dirtyFields[t.field]=!0)},editable:function(t){return t=(this.fields||{})[t],!t||t.editable!==!1},set:function(t,e,i){var n=this,r=n.dirty;n.editable(t)&&(e=n._parse(t,e),a(e,n.get(t))?n.trigger("equalSet",{field:t,value:e}):(n.dirty=!0,n.dirtyFields[t]=!0,Y.fn.set.call(n,t,e,i)&&!r&&(n.dirty=r,n.dirty||(n.dirtyFields[t]=!1))))},accept:function(t){var e,i,n=this,r=function(){return n};for(e in t)i=t[e],"_"!=e.charAt(0)&&(i=n.wrap(t[e],e,r)),n._set(e,i);n.idField&&(n.id=n.get(n.idField));n.dirty=!1;n.dirtyFields={}},isNew:function(){return this.id===this._defaultId}});X.define=function(t,e){e===y&&(e=t,t=X);var i,n,r,a,s,o,c,l,d=ft({defaults:{}},e),u={},h=d.id,p=[];if(h&&(d.idField=h),d.id&&delete d.id,h&&(d.defaults[h]=d._defaultId=""),"[object Array]"===Xt.call(d.fields)){for(o=0,c=d.fields.length;o<c;o++)r=d.fields[o],typeof r===Tt?u[r]={}:r.field&&(u[r.field]=r);d.fields=u}for(n in d.fields)r=d.fields[n],a=r.type||"default",s=null,l=n,n=typeof r.field===Tt?r.field:n,r.nullable||(s=d.defaults[l!==n?l:n]=r.defaultValue!==y?r.defaultValue:K[a.toLowerCase()],"function"==typeof s&&p.push(n)),e.id===n&&(d._defaultId=s),d.defaults[l!==n?l:n]=s,r.parse=r.parse||Z[a];return p.length>0&&(d._initializers=p),i=t.extend(d),i.define=function(t){return X.define(i,t)},d.fields&&(i.fields=d.fields,i.idField=d.idField),i};tt={selector:function(t){return Ct(t)?t:Lt(t)},compare:function(t){var i=this.selector(t);return function(t,e){return t=i(t),e=i(e),null==t&&null==e?0:null==t?-1:null==e?1:t.localeCompare?t.localeCompare(e):t>e?1:t<e?-1:0}},create:function(t){var i=t.compare||this.compare(t.field);return"desc"==t.dir?function(t,e){return i(e,t,!0)}:i},combine:function(a){return function(t,e){for(var r=a[0](t,e),i=1,n=a.length;i<n;i++)r=r||a[i](t,e);return r}}};et=ft({},tt,{asc:function(t){var r=this.selector(t);return function(t,e){var i=r(t),n=r(e);return i&&i.getTime&&n&&n.getTime&&(i=i.getTime(),n=n.getTime()),i===n?t.__position-e.__position:null==i?-1:null==n?1:i.localeCompare?i.localeCompare(n):i>n?1:-1}},desc:function(t){var r=this.selector(t);return function(t,e){var i=r(t),n=r(e);return i&&i.getTime&&n&&n.getTime&&(i=i.getTime(),n=n.getTime()),i===n?t.__position-e.__position:null==i?1:null==n?-1:n.localeCompare?n.localeCompare(i):i<n?1:-1}},create:function(t){return this[t.dir](t.field)}});Q=function(t,e){for(var n=t.length,r=Array(n),i=0;i<n;i++)r[i]=e(t[i],i,t);return r};it=function(){function a(t){return"string"==typeof t&&(t=t.replace(/[\r\n]+/g,"")),JSON.stringify(t)}function t(n){return function(t,e,i){return e+="",i&&(t="("+t+" || '').toString().toLowerCase()",e=e.toLowerCase()),n(t,a(e),i)}}function n(t,e,i,n){if(null!=i){if(typeof i===Tt){var r=ee.exec(i);r?i=new Date(+r[1]):n?(i=a(i.toLowerCase()),e="(("+e+" || '')+'').toLowerCase()"):i=a(i)}i.getTime&&(e="("+e+"&&"+e+".getTime?"+e+".getTime():"+e+")",i=i.getTime())}return e+" "+t+" "+i}function i(t){var e,i,n,r;for(e="/^",i=!1,n=0;n<t.length;++n){if(r=t.charAt(n),i)e+="\\"+r;else{if("~"==r){i=!0;continue}e+="*"==r?".*":"?"==r?".":".+^$()[]{}|\\/\n\r\u2028\u2029Â ".indexOf(r)>=0?"\\"+r:r}i=!1}return e+"$/"}return{quote:function(t){return t&&t.getTime?"new Date("+t.getTime()+")":a(t)},eq:function(t,e,i){return n("==",t,e,i)},neq:function(t,e,i){return n("!=",t,e,i)},gt:function(t,e,i){return n(">",t,e,i)},gte:function(t,e,i){return n(">=",t,e,i)},lt:function(t,e,i){return n("<",t,e,i)},lte:function(t,e,i){return n("<=",t,e,i)},startswith:t(function(t,e){return t+".lastIndexOf("+e+", 0) == 0"}),doesnotstartwith:t(function(t,e){return t+".lastIndexOf("+e+", 0) == -1"}),endswith:t(function(t,e){var i=e?e.length-2:0;return t+".indexOf("+e+", "+t+".length - "+i+") >= 0"}),doesnotendwith:t(function(t,e){var i=e?e.length-2:0;return t+".indexOf("+e+", "+t+".length - "+i+") < 0"}),contains:t(function(t,e){return t+".indexOf("+e+") >= 0"}),doesnotcontain:t(function(t,e){return t+".indexOf("+e+") == -1"}),matches:t(function(t,e){return e=e.substring(1,e.length-1),i(e)+".test("+t+")"}),doesnotmatch:t(function(t,e){return e=e.substring(1,e.length-1),"!"+i(e)+".test("+t+")"}),isempty:function(t){return t+" === ''"},isnotempty:function(t){return t+" !== ''"},isnull:function(t){return"("+t+" == null)"},isnotnull:function(t){return"("+t+" != null)"},isnullorempty:function(t){return"("+t+" === null) || ("+t+" === '')"},isnotnullorempty:function(t){return"("+t+" !== null) && ("+t+" !== '')"}}}();g.filterExpr=function(t){for(var n,r,a,s,o=[],l=[],d=[],u=t.filters,e=0,i=u.length;e<i;e++)n=u[e],a=n.field,s=n.operator,n.filters?(r=g.filterExpr(n),n=r.expression.replace(/__o\[(\d+)\]/g,function(t,e){return e=+e,"__o["+(d.length+e)+"]"}).replace(/__f\[(\d+)\]/g,function(t,e){return e=+e,"__f["+(l.length+e)+"]"}),d.push.apply(d,r.operators),l.push.apply(l,r.fields)):(typeof a===Dt?(r="__f["+l.length+"](d)",l.push(a)):r=kt.expr(a),typeof s===Dt?(n="__o["+d.length+"]("+r+", "+it.quote(n.value)+")",d.push(s)):n=it[(s||"eq").toLowerCase()](r,n.value,n.ignoreCase===y||n.ignoreCase)),o.push(n);return{expression:"("+o.join({and:" && ",or:" || "}[t.logic])+")",fields:l,operators:d}};nt={"==":"eq",equals:"eq",isequalto:"eq",equalto:"eq",equal:"eq","!=":"neq",ne:"neq",notequals:"neq",isnotequalto:"neq",notequalto:"neq",notequal:"neq","<":"lt",islessthan:"lt",lessthan:"lt",less:"lt","<=":"lte",le:"lte",islessthanorequalto:"lte",lessthanequal:"lte",">":"gt",isgreaterthan:"gt",greaterthan:"gt",greater:"gt",">=":"gte",isgreaterthanorequalto:"gte",greaterthanequal:"gte",ge:"gte",notsubstringof:"doesnotcontain",isnull:"isnull",isempty:"isempty",isnotempty:"isnotempty"};g.normalizeFilter=u;g.compareFilters=p;g.prototype={toArray:function(){return this.data},range:function(t,e){return new g(this.data.slice(t,t+e))},skip:function(t){return new g(this.data.slice(t))},take:function(t){return new g(this.data.slice(0,t))},select:function(t){return new g(Q(this.data,t))},order:function(t,e,i){var n={dir:e};return t&&(t.compare?n.compare=t.compare:n.field=t),new g(i?this.data.sort(tt.create(n)):this.data.slice(0).sort(tt.create(n)))},orderBy:function(t,e){return this.order(t,"asc",e)},orderByDescending:function(t,e){return this.order(t,"desc",e)},sort:function(t,e,i,n){var r,a,s=b(t,e),o=[];if(i=i||tt,s.length){for(r=0,a=s.length;r<a;r++)o.push(i.create(s[r]));return this.orderBy({compare:i.combine(o)},n)}return this},filter:function(t){var e,i,n,r,a,s,o,c,l=this.data,d=[];if(t=u(t),!t||0===t.filters.length)return this;for(r=g.filterExpr(t),s=r.fields,o=r.operators,a=c=Function("d, __f, __o","return "+r.expression),(s.length||o.length)&&(c=function(t){return a(t,s,o)}),e=0,n=l.length;e<n;e++)i=l[e],c(i)&&d.push(i);return new g(d)},group:function(i,n){i=m(i||[]);n=n||this.data;var r,t=this,e=new g(t.data);return i.length>0&&(r=i[0],e=e.groupBy(r).select(function(t){var e=new g(n).filter([{field:t.field,operator:"eq",value:t.value,ignoreCase:!1}]);return{field:t.field,value:t.value,items:i.length>1?new g(t.items).group(i.slice(1),e.toArray()).toArray():t.items,hasSubgroups:i.length>1,aggregates:e.aggregate(r.aggregates)}})),e},groupBy:function(t){var e,i,n,r,a,s,o,c,l,d,u=this;if(vt(t)||!this.data.length)return new g([]);for(e=t.field,i=t.skipItemSorting?this.data:this._sortForGrouping(e,t.dir||"asc"),n=kt.accessor(e),a=n.get(i[0],e),s={field:e,value:a,items:[]},d=[s],c=0,l=i.length;c<l;c++)r=i[c],o=n.get(r,e),f(a,o)||(a=o,s={field:e,value:a,items:[]},d.push(s)),s.items.push(r);return d=u._sortGroups(d,t),new g(d)},_sortForGrouping:function(t,e){var i,n,r=this.data;if(!te){for(i=0,n=r.length;i<n;i++)r[i].__position=i;for(r=new g(r).sort(t,e,et).toArray(),i=0,n=r.length;i<n;i++)delete r[i].__position;return r}return this.sort(t,e).toArray()},_sortGroups:function(t,e){var i=t;return e&&Ct(e.compare)&&(i=new g(i).order({compare:e.compare},e.dir||Ot).toArray()),i},aggregate:function(t){var e,i,n={},r={};if(t&&t.length)for(e=0,i=this.data.length;e<i;e++)w(n,t,this.data[e],e,i,r);return n}};rt={sum:function(t,e,i){var n=i.get(e);return k(t)?k(n)&&(t+=n):t=n,t},count:function(t){return(t||0)+1},average:function(t,e,i,n,r,a){var s=i.get(e);return a.count===y&&(a.count=0),k(t)?k(s)&&(t+=s):t=s,k(s)&&a.count++,n==r-1&&k(t)&&(t/=a.count),t},max:function(t,e,i){var n=i.get(e);return k(t)||r(t)||(t=n),t<n&&(k(n)||r(n))&&(t=n),t},min:function(t,e,i){var n=i.get(e);return k(t)||r(t)||(t=n),t>n&&(k(n)||r(n))&&(t=n),t}};g.normalizeGroup=m;g.normalizeSort=b;g.process=function(t,e,i){var n,r,a,s,o,c,l,d,u,h,p,f;return e=e||{},n=e.group,r=_(m(n||[])),a=new g(t),s=x(n||[]),o=b(e.sort||[]),c=r?o:s.concat(o),u=e.filterCallback,h=e.filter,p=e.skip,f=e.take,c&&i&&(a=a.sort(c,y,y,i)),h&&(a=a.filter(h),u&&(a=u(a)),d=a.toArray().length),c&&!i&&(a=a.sort(c),n&&(t=a.toArray())),r?(a=a.group(n,t),p!==y&&f!==y&&(a=new g(M(a.toArray())).range(p,f),l=Q(s,function(t){return ft({},t,{skipItemSorting:!0})}),a=a.group(l,t))):(p!==y&&f!==y&&(a=a.range(p,f)),n&&(a=a.group(n,t))),{total:d,data:a.toArray()}};at=Pt.extend({init:function(t){this.data=t.data},read:function(t){t.success(this.data)},update:function(t){t.success(t.data)},create:function(t){t.success(t.data)},destroy:function(t){t.success(t.data)}});st=Pt.extend({init:function(i){var n,t=this;i=t.options=ft({},t.options,i);xt(Ht,function(t,e){typeof i[e]===Tt&&(i[e]={url:i[e]})});t.cache=i.cache?ot.create(i.cache):{find:wt,add:wt};n=i.parameterMap;i.submit&&(t.submit=i.submit);Ct(i.push)&&(t.push=i.push);t.push||(t.push=jt);t.parameterMap=Ct(n)?n:function(t){var i={};return xt(t,function(t,e){t in n&&(t=n[t],mt(t)&&(e=t.value(e),t=t.key));i[t]=e}),i}},options:{parameterMap:jt},create:function(t){return bt(this.setup(t,It))},read:function(e){var i,t,n,r=this,a=r.cache;e=r.setup(e,At);i=e.success||wt;t=e.error||wt;n=a.find(e.data);n!==y?i(n):(e.success=function(t){a.add(e.data,t);i(t)},v.ajax(e))},update:function(t){return bt(this.setup(t,Mt))},destroy:function(t){return bt(this.setup(t,Ft))},setup:function(t,e){t=t||{};var i,n=this,r=n.options[e],a=Ct(r.data)?r.data(t.data):r.data;return t=ft(!0,{},r,t),i=ft(!0,{},a,t.data),t.data=n.parameterMap(i,e),Ct(t.url)&&(t.url=t.url(i)),t}});ot=Pt.extend({init:function(){this._store={}},add:function(t,e){t!==y&&(this._store[Bt(t)]=e)},find:function(t){return this._store[Bt(t)]},clear:function(){this._store={}},remove:function(t){delete this._store[Bt(t)]}});ot.create=function(t){var e={inmemory:function(){return new ot}};return mt(t)&&Ct(t.find)?t:t===!0?new ot:e[t]()};e=Pt.extend({init:function(t){var e,i,n,r,a,s,o,c,l,d,u,h,p,f,g=this;t=t||{};for(e in t)i=t[e],g[e]=typeof i===Tt?Lt(i):i;r=t.modelBase||X;mt(g.model)&&(g.model=n=r.define(g.model));a=gt(g.data,g);g._dataAccessFunction=a;g.model&&(s=gt(g.groups,g),o=gt(g.serialize,g),c={},l={},d={},u={},h=!1,n=g.model,n.fields&&(xt(n.fields,function(t,e){var i;p=t;mt(e)&&e.field?p=e.field:typeof e===Tt&&(p=e);mt(e)&&e.from&&(i=e.from);h=h||i&&i!==t||p!==t;f=i||p;l[t]=f.indexOf(".")!==-1?Lt(f,!0):Lt(f);d[t]=Lt(t);c[i||p]=t;u[t]=i||p}),!t.serialize&&h&&(g.serialize=D(o,n,S,d,c,u))),g._dataAccessFunction=a,g._wrapDataAccessBase=O(n,P,l,c,u),g.data=D(a,n,P,l,c,u),g.groups=D(s,n,T,l,c,u))},errors:function(t){return t?t.errors:null},parse:jt,data:jt,total:function(t){return t.length},groups:jt,aggregates:function(){return{}},serialize:function(t){return t}});ct=St.extend({init:function(t){var e,i,n,r=this;t&&(i=t.data);t=r.options=ft({},r.options,t);r._map={};r._prefetch={};r._data=[];r._pristineData=[];r._ranges=[];r._view=[];r._pristineTotal=0;r._destroyed=[];r._pageSize=t.pageSize;r._page=t.page||(t.pageSize?1:y);r._sort=b(t.sort);r._filter=u(t.filter);r._group=m(t.group);r._aggregate=t.aggregate;r._total=t.total;r._shouldDetachObservableParents=!0;St.fn.init.call(r);r.transport=lt.create(t,i,r);Ct(r.transport.push)&&r.transport.push({pushCreate:gt(r._pushCreate,r),pushUpdate:gt(r._pushUpdate,r),pushDestroy:gt(r._pushDestroy,r)});null!=t.offlineStorage&&("string"==typeof t.offlineStorage?(n=t.offlineStorage,r._storage={getItem:function(){return JSON.parse(localStorage.getItem(n))},setItem:function(t){localStorage.setItem(n,Bt(r.reader.serialize(t)))}}):r._storage=t.offlineStorage);r.reader=new kt.data.readers[t.schema.type||"json"](t.schema);e=r.reader.model||{};r._detachObservableParents();r._data=r._observe(r._data);r._online=!0;r.bind(["push",qt,Nt,$t,Et,Ut,zt],t)},options:{data:null,schema:{modelBase:X},offlineStorage:null,serverSorting:!1,serverPaging:!1,serverFiltering:!1,serverGrouping:!1,serverAggregates:!1,batch:!1,inPlaceSort:!1},clone:function(){return this},online:function(t){return t!==y?this._online!=t&&(this._online=t,t)?this.sync():v.Deferred().resolve().promise():this._online},offlineData:function(t){return null==this.options.offlineStorage?null:t!==y?this._storage.setItem(t):this._storage.getItem()||[]},_isServerGrouped:function(){var t=this.group()||[];return this.options.serverGrouping&&t.length},_pushCreate:function(t){this._push(t,"pushCreate")},_pushUpdate:function(t){this._push(t,"pushUpdate")},_pushDestroy:function(t){this._push(t,"pushDestroy")},_push:function(t,e){var i=this._readData(t);i||(i=t);this[e](i)},_flatData:function(t,e){if(t){if(this._isServerGrouped())return F(t);if(!e)for(var i=0;i<t.length;i++)t.at(i)}return t},parent:wt,get:function(t){for(var n=this._flatData(this._data,this.options.useRanges),e=0,i=n.length;e<i;e++)if(n[e].id==t)return n[e]},getByUid:function(t){return this._getByUid(t,this._data)},_getByUid:function(t,e){var i,n,r=this._flatData(e,this.options.useRanges);if(r)for(i=0,n=r.length;i<n;i++)if(r[i].uid==t)return r[i]},indexOf:function(t){return U(this._data,t)},at:function(t){return this._data.at(t)},data:function(t){var e,i=this;if(t===y){if(i._data)for(e=0;e<i._data.length;e++)i._data.at(e);return i._data}i._detachObservableParents();i._data=this._observe(t);i._pristineData=t.slice(0);i._storeData();i._ranges=[];i.trigger("reset");i._addRange(i._data);i._total=i._data.length;i._pristineTotal=i._total;i._process(i._data)},view:function(t){return t===y?this._view:(this._view=this._observeView(t),y)},_observeView:function(t){var e,i=this;return q(t,i._data,i._ranges,i.reader.model||Y,i._isServerGrouped()),e=new J(t,i.reader.model),e.parent=function(){return i.parent()},e},flatView:function(){var t=this.group()||[];return t.length?F(this._view):this._view},add:function(t){return this.insert(this._data.length,t)},_createNewModel:function(t){return this.reader.model?new this.reader.model(t):t instanceof Y?t:new Y(t)},insert:function(t,e){return e||(e=t,t=0),e instanceof X||(e=this._createNewModel(e)),this._isServerGrouped()?this._data.splice(t,0,this._wrapInEmptyGroup(e)):this._data.splice(t,0,e),this._insertModelInRange(t,e),e},pushInsert:function(t,e){var i,n,r,a,s,o,c=this,l=c._getCurrentRangeSpan();e||(e=t,t=0);_t(e)||(e=[e]);i=[];n=this.options.autoSync;this.options.autoSync=!1;try{for(r=0;r<e.length;r++)a=e[r],s=this.insert(t,a),i.push(s),o=s.toJSON(),this._isServerGrouped()&&(o=this._wrapInEmptyGroup(o)),this._pristineData.push(o),l&&l.length&&v(l).last()[0].pristineData.push(o),t++}finally{this.options.autoSync=n}i.length&&this.trigger("push",{type:"create",items:i})},pushCreate:function(t){this.pushInsert(this._data.length,t)},pushUpdate:function(t){var e,i,n,r,a;for(_t(t)||(t=[t]),e=[],i=0;i<t.length;i++)n=t[i],r=this._createNewModel(n),a=this.get(r.id),a?(e.push(a),a.accept(n),a.trigger(Nt),this._updatePristineForModel(a,n)):this.pushCreate(n);e.length&&this.trigger("push",{type:"update",items:e})},pushDestroy:function(t){var e=this._removeItems(t);e.length&&this.trigger("push",{type:"destroy",items:e})},_removeItems:function(t,e){var i,n,r,a,s,o,c;_t(t)||(t=[t]);i=y===e||e;n=[];r=this.options.autoSync;this.options.autoSync=!1;try{for(a=0;a<t.length;a++)s=t[a],o=this._createNewModel(s),c=!1,this._eachItem(this._data,function(t){for(var i,e=0;e<t.length;e++)if(i=t.at(e),i.id===o.id){n.push(i);t.splice(e,1);c=!0;break}}),c&&i&&(this._removePristineForModel(o),this._destroyed.pop())}finally{this.options.autoSync=r}return n},remove:function(e){var i,n=this,r=n._isServerGrouped();return this._eachItem(n._data,function(t){if(i=$(t,e),i&&r)return i.isNew&&i.isNew()||n._destroyed.push(i),!0}),this._removeModelFromRanges(e),e},destroyed:function(){return this._destroyed},created:function(){for(var i=[],n=this._flatData(this._data,this.options.useRanges),t=0,e=n.length;t<e;t++)n[t].isNew&&n[t].isNew()&&i.push(n[t]);return i},updated:function(){for(var i=[],n=this._flatData(this._data,this.options.useRanges),t=0,e=n.length;t<e;t++)n[t].isNew&&!n[t].isNew()&&n[t].dirty&&i.push(n[t]);return i},sync:function(){var t,i=this,e=[],n=[],r=i._destroyed,a=v.Deferred().resolve().promise();if(i.online()){if(!i.reader.model)return a;e=i.created();n=i.updated();t=[];i.options.batch&&i.transport.submit?t=i._sendSubmit(e,n,r):(t.push.apply(t,i._send("create",e)),t.push.apply(t,i._send("update",n)),t.push.apply(t,i._send("destroy",r)));a=v.when.apply(null,t).then(function(){for(var t=0,e=arguments.length;t<e;t++)arguments[t]&&i._accept(arguments[t]);i._storeData(!0);i._syncEnd();i._change({action:"sync"});i.trigger(Et)})}else i._storeData(!0),i._syncEnd(),i._change({action:"sync"});return a},_syncEnd:wt,cancelChanges:function(t){var e=this;t instanceof kt.data.Model?e._cancelModel(t):(e._destroyed=[],e._detachObservableParents(),e._data=e._observe(e._pristineData),e.options.serverPaging&&(e._total=e._pristineTotal),e._ranges=[],e._addRange(e._data,0),e._changesCanceled(),e._change(),e._markOfflineUpdatesAsDirty())},_changesCanceled:wt,_markOfflineUpdatesAsDirty:function(){var t=this;null!=t.options.offlineStorage&&t._eachItem(t._data,function(t){for(var i,e=0;e<t.length;e++)i=t.at(e),"update"!=i.__state__&&"create"!=i.__state__||(i.dirty=!0)})},hasChanges:function(){var t,e,i=this._flatData(this._data,this.options.useRanges);if(this._destroyed.length)return!0;for(t=0,e=i.length;t<e;t++)if(i[t].isNew&&i[t].isNew()||i[t].dirty)return!0;return!1},_accept:function(t){var e,i=this,n=t.models,r=t.response,a=0,s=i._isServerGrouped(),o=i._pristineData,c=t.type;if(i.trigger(Ut,{response:r,type:c}),r&&!vt(r)){if(r=i.reader.parse(r),i._handleCustomErrors(r))return;r=i.reader.data(r);_t(r)||(r=[r])}else r=v.map(n,function(t){return t.toJSON()});for("destroy"===c&&(i._destroyed=[]),a=0,e=n.length;a<e;a++)"destroy"!==c?(n[a].accept(r[a]),"create"===c?o.push(s?i._wrapInEmptyGroup(n[a].toJSON()):r[a]):"update"===c&&i._updatePristineForModel(n[a],r[a])):i._removePristineForModel(n[a])},_updatePristineForModel:function(t,i){this._executeOnPristineForModel(t,function(t,e){kt.deepExtend(e[t],i)})},_executeOnPristineForModel:function(i,n){this._eachPristineItem(function(t){var e=z(t,i);if(e>-1)return n(e,t),!0})},_removePristineForModel:function(t){this._executeOnPristineForModel(t,function(t,e){e.splice(t,1)})},_readData:function(t){var e=this._isServerGrouped()?this.reader.groups:this.reader.data;return e.call(this.reader,t)},_eachPristineItem:function(i){var n=this,t=n.options,e=n._getCurrentRangeSpan();n._eachItem(n._pristineData,i);t.serverPaging&&t.useRanges&&xt(e,function(t,e){n._eachItem(e.pristineData,i)})},_eachItem:function(t,e){t&&t.length&&(this._isServerGrouped()?n(t,e):e(t))},_pristineForModel:function(e){var i,n,t=function(t){if(n=z(t,e),n>-1)return i=t[n],!0};return this._eachPristineItem(t),i},_cancelModel:function(i){var n=this,r=this._pristineForModel(i);this._eachItem(this._data,function(t){var e=U(t,i);e>=0&&(!r||i.isNew()&&!r.__state__?(n._modelCanceled(i),t.splice(e,1),n._removeModelFromRanges(i)):(t[e].accept(r),"update"==r.__state__&&(t[e].dirty=!0)))})},_modelCanceled:wt,_submit:function(r,t){var a=this;a.trigger($t,{type:"submit"});a.trigger(zt);a.transport.submit(ft({success:function(t,e){var i=v.grep(r,function(t){return t.type==e})[0];i&&i.resolve({response:t,models:i.models,type:e})},error:function(t,e,i){for(var n=0;n<r.length;n++)r[n].reject(t);a.error(t,e,i)}},t))},_sendSubmit:function(e,i,n){var t=this,r=[];return t.options.batch&&(e.length&&r.push(v.Deferred(function(t){t.type="create";t.models=e})),i.length&&r.push(v.Deferred(function(t){t.type="update";t.models=i})),n.length&&r.push(v.Deferred(function(t){t.type="destroy";t.models=n})),t._submit(r,{data:{created:t.reader.serialize(C(e)),updated:t.reader.serialize(C(i)),destroyed:t.reader.serialize(C(n))}})),r},_promise:function(t,e,i){var r=this;return v.Deferred(function(n){r.trigger($t,{type:i});r.trigger(zt);r.transport[i].call(r.transport,ft({success:function(t){n.resolve({response:t,models:e,type:i})},error:function(t,e,i){n.reject(t);r.error(t,e,i)}},t))}).promise()},_send:function(t,e){var i,n,r=this,a=[],s=r.reader.serialize(C(e));if(r.options.batch)e.length&&a.push(r._promise({data:{models:s}},e,t));else for(i=0,n=e.length;i<n;i++)a.push(r._promise({data:s[i]},[e[i]],t));return a},read:function(t){var e=this,i=e._params(t),n=v.Deferred();return e._queueRequest(i,function(){var t=e.trigger($t,{type:"read"});t?(e._dequeueRequest(),n.resolve(t)):(e.trigger(zt),e._ranges=[],e.trigger("reset"),e.online()?e.transport.read({data:i,success:function(t){e._ranges=[];e.success(t,i);n.resolve()},error:function(){var t=Zt.call(arguments);e.error.apply(e,t);n.reject.apply(n,t)}}):null!=e.options.offlineStorage&&(e.success(e.offlineData(),i),n.resolve()))}),n.promise()},_readAggregates:function(t){return this.reader.aggregates(t)},success:function(t){var e,i,n,r,a,s,o,c,l,d,u,h=this,p=h.options;if(h.trigger(Ut,{response:t,type:"read"}),h.online()){if(t=h.reader.parse(t),h._handleCustomErrors(t))return h._dequeueRequest(),y;h._total=h.reader.total(t);h._pageSize>h._total&&(h._pageSize=h._total,h.options.pageSize&&h.options.pageSize>h._pageSize&&(h._pageSize=h.options.pageSize));h._aggregate&&p.serverAggregates&&(h._aggregateResult=h._readAggregates(t));t=h._readData(t);h._destroyed=[]}else{for(t=h._readData(t),e=[],n={},r=h.reader.model,a=r?r.idField:"id",s=0;s<this._destroyed.length;s++)o=this._destroyed[s][a],n[o]=o;for(s=0;s<t.length;s++)c=t[s],l=c.__state__,"destroy"==l?n[c[a]]||this._destroyed.push(this._createNewModel(c)):e.push(c);t=e;h._total=t.length}if(h._pristineTotal=h._total,i=h._skip&&h._data.length&&h._skip<h._data.length,h.options.endless)for(i&&h._pristineData.splice(h._skip,h._pristineData.length),e=t.slice(0),d=0;d<e.length;d++)h._pristineData.push(e[d]);else h._pristineData=t.slice(0);if(h._detachObservableParents(),h.options.endless){for(h._data.unbind(Nt,h._changeHandler),h._isServerGrouped()&&h._data[h._data.length-1].value===t[0].value&&(I(h._data[h._data.length-1],t[0]),t.shift()),t=h._observe(t),i&&h._data.splice(h._skip,h._data.length),u=0;u<t.length;u++)h._data.push(t[u]);h._data.bind(Nt,h._changeHandler)}else h._data=h._observe(t);h._markOfflineUpdatesAsDirty();h._storeData();h._addRange(h._data);h._process(h._data);h._dequeueRequest()},_detachObservableParents:function(){if(this._data&&this._shouldDetachObservableParents)for(var t=0;t<this._data.length;t++)this._data[t].parent&&(this._data[t].parent=wt)},_storeData:function(t){function a(t){for(var i,n,r=[],e=0;e<t.length;e++)i=t.at(e),n=i.toJSON(),s&&i.items?n.items=a(i.items):(n.uid=i.uid,o&&(i.isNew()?n.__state__="create":i.dirty&&(n.__state__="update"))),r.push(n);return r}var e,i,n,r,s=this._isServerGrouped(),o=this.reader.model;if(null!=this.options.offlineStorage){for(e=a(this._data),i=[],n=0;n<this._destroyed.length;n++)r=this._destroyed[n].toJSON(),r.__state__="destroy",i.push(r);this.offlineData(e.concat(i));t&&(this._pristineData=this.reader.reader?this.reader.reader._wrapDataAccessBase(e):this.reader._wrapDataAccessBase(e))}},_addRange:function(t,e){var i=this,n=y!==e?e:i._skip||0,r=n+i._flatData(t,!0).length;i._ranges.push({start:n,end:r,data:t,pristineData:t.toJSON(),timestamp:i._timeStamp()});i._sortRanges()},_sortRanges:function(){this._ranges.sort(function(t,e){return t.start-e.start})},error:function(t,e,i){this._dequeueRequest();this.trigger(Ut,{});this.trigger(qt,{xhr:t,status:e,errorThrown:i})},_params:function(t){var e=this,i=ft({take:e.take(),skip:e.skip(),page:e.page(),pageSize:e.pageSize(),sort:e._sort,filter:e._filter,group:e._group,aggregate:e._aggregate},t);return e.options.serverPaging||(delete i.take,delete i.skip,delete i.page,delete i.pageSize),e.options.serverGrouping?e.reader.model&&i.group&&(i.group=B(i.group,e.reader.model)):delete i.group,e.options.serverFiltering?e.reader.model&&i.filter&&(i.filter=L(i.filter,e.reader.model)):delete i.filter,e.options.serverSorting?e.reader.model&&i.sort&&(i.sort=B(i.sort,e.reader.model)):delete i.sort,e.options.serverAggregates?e.reader.model&&i.aggregate&&(i.aggregate=B(i.aggregate,e.reader.model)):delete i.aggregate,i},_queueRequest:function(t,e){var i=this;i._requestInProgress?i._pending={callback:gt(e,i),options:t}:(i._requestInProgress=!0,i._pending=y,e())},_dequeueRequest:function(){var t=this;t._requestInProgress=!1;t._pending&&t._queueRequest(t._pending.options,t._pending.callback)},_handleCustomErrors:function(t){if(this.reader.errors){var e=this.reader.errors(t);if(e)return this.trigger(qt,{xhr:null,status:"customerror",errorThrown:"custom error",errors:e}),!0}return!1},_shouldWrap:function(t){var e=this.reader.model;return!(!e||!t.length)&&!(t[0]instanceof e)},_observe:function(t){var e,i=this,n=i.reader.model;return i._shouldDetachObservableParents=!0,t instanceof ie?(i._shouldDetachObservableParents=!1,i._shouldWrap(t)&&(t.type=i.reader.model,t.wrapAll(t,t))):(e=i.pageSize()&&!i.options.serverPaging?J:ie,t=new e(t,i.reader.model),t.parent=function(){return i.parent()}),i._isServerGrouped()&&N(t,n),!(i._changeHandler&&i._data&&i._data instanceof ie)||i.options.useRanges&&i.options.serverPaging?i._changeHandler=gt(i._change,i):i._data.unbind(Nt,i._changeHandler),t.bind(Nt,i._changeHandler)},_updateTotalForAction:function(t,e){var i=this,n=parseInt(i._total,10);k(i._total)||(n=parseInt(i._pristineTotal,10));"add"===t?n+=e.length:"remove"===t?n-=e.length:"itemchange"===t||"sync"===t||i.options.serverPaging?"sync"===t&&(n=i._pristineTotal=parseInt(i._total,10)):n=i._pristineTotal;i._total=n},_change:function(e){var t,i,n,r=this,a=e?e.action:"";if("remove"===a)for(t=0,i=e.items.length;t<i;t++)e.items[t].isNew&&e.items[t].isNew()||r._destroyed.push(e.items[t]);!r.options.autoSync||"add"!==a&&"remove"!==a&&"itemchange"!==a?(r._updateTotalForAction(a,e?e.items:[]),r._process(r._data,e)):(n=function(t){"sync"===t.action&&(r.unbind("change",n),r._updateTotalForAction(a,e.items))},r.first("change",n),r.sync())},_calculateAggregates:function(t,e){e=e||{};var i=new g(t),n=e.aggregate,r=e.filter;return r&&(i=i.filter(r)),i.aggregate(n)},_process:function(t,e){var i,n=this,r={};n.options.serverPaging!==!0&&(r.skip=n._skip,r.take=n._take||n._pageSize,r.skip===y&&n._page!==y&&n._pageSize!==y&&(r.skip=(n._page-1)*n._pageSize),n.options.useRanges&&(r.skip=n.currentRangeStart()));n.options.serverSorting!==!0&&(r.sort=n._sort);n.options.serverFiltering!==!0&&(r.filter=n._filter);n.options.serverGrouping!==!0&&(r.group=n._group);n.options.serverAggregates!==!0&&(r.aggregate=n._aggregate);n.options.serverGrouping&&n._clearEmptyGroups(t);i=n._queryProcess(t,r);n.options.serverAggregates!==!0&&(n._aggregateResult=n._calculateAggregates(i.dataToAggregate||t,r));n.view(i.data);n._setFilterTotal(i.total,!1);e=e||{};e.items=e.items||n._view;n.trigger(Nt,e)},_clearEmptyGroups:function(t){for(var i,e=t.length-1;e>=0;e--)i=t[e],i.hasSubgroups?this._clearEmptyGroups(i.items):i.items&&!i.items.length&&Jt.apply(i.parent(),[e,1])},_queryProcess:function(t,e){return this.options.inPlaceSort?g.process(t,e,this.options.inPlaceSort):g.process(t,e)},_mergeState:function(t){var e=this;return t!==y&&(e._pageSize=t.pageSize,e._page=t.page,e._sort=t.sort,e._filter=t.filter,e._group=t.group,e._aggregate=t.aggregate,e._skip=e._currentRangeStart=t.skip,e._take=t.take,e._skip===y&&(e._skip=e._currentRangeStart=e.skip(),t.skip=e.skip()),e._take===y&&e._pageSize!==y&&(e._take=e._pageSize,t.take=e._take),t.sort&&(e._sort=t.sort=b(t.sort)),t.filter&&(e._filter=t.filter=u(t.filter)),t.group&&(e._group=t.group=m(t.group)),t.aggregate&&(e._aggregate=t.aggregate=i(t.aggregate))),t},query:function(t){var e,i,n,r=this.options.serverSorting||this.options.serverPaging||this.options.serverFiltering||this.options.serverGrouping||this.options.serverAggregates;return r||(this._data===y||0===this._data.length)&&!this._destroyed.length?(this.options.endless&&(i=t.pageSize-this.pageSize(),i>0?(i=this.pageSize(),t.page=t.pageSize/i,t.pageSize=i):(t.page=1,this.options.endless=!1)),this.read(this._mergeState(t))):(n=this.trigger($t,{type:"read"}),n||(this.trigger(zt),e=this._queryProcess(this._data,this._mergeState(t)),this._setFilterTotal(e.total,!0),this._aggregateResult=this._calculateAggregates(e.dataToAggregate||this._data,t),this.view(e.data),this.trigger(Ut,{type:"read"}),this.trigger(Nt,{items:e.data})),v.Deferred().resolve(n).promise())},_setFilterTotal:function(t,e){var i=this;i.options.serverFiltering||(t!==y?i._total=t:e&&(i._total=i._data.length))},fetch:function(e){var i=this,t=function(t){t!==!0&&Ct(e)&&e.call(i)};return this._query().done(t)},_query:function(t){var e=this;return e.query(ft({},{page:e.page(),pageSize:e.pageSize(),sort:e.sort(),filter:e.filter(),group:e.group(),aggregate:e.aggregate()},t))},next:function(t){var e=this,i=e.page(),n=e.total();if(t=t||{},i&&!(n&&i+1>e.totalPages()))return e._skip=e._currentRangeStart=i*e.take(),i+=1,t.page=i,e._query(t),i},prev:function(t){var e=this,i=e.page();if(t=t||{},i&&1!==i)return e._skip=e._currentRangeStart=e._skip-e.take(),i-=1,t.page=i,e._query(t),i},page:function(t){var e,i=this;return t!==y?(t=Vt.max(Vt.min(Vt.max(t,1),i.totalPages()),1),i._query(i._pageableQueryOptions({page:t})),y):(e=i.skip(),e!==y?Vt.round((e||0)/(i.take()||1))+1:y)},pageSize:function(t){var e=this;return t!==y?(e._query(e._pageableQueryOptions({pageSize:t,page:1})),y):e.take()},sort:function(t){var e=this;return t!==y?(e._query({sort:t}),y):e._sort},filter:function(t){var e=this;return t===y?e._filter:(e.trigger("reset"),e._query({filter:t,page:1}),y)},group:function(t){var e=this;return t!==y?(e._query({group:t}),y):e._group},total:function(){return parseInt(this._total||0,10)},aggregate:function(t){var e=this;return t!==y?(e._query({aggregate:t}),y):e._aggregate},aggregates:function(){var t=this._aggregateResult;return vt(t)&&(t=this._emptyAggregates(this.aggregate())),t},_emptyAggregates:function(t){var e,i,n={};if(!vt(t))for(e={},_t(t)||(t=[t]),i=0;i<t.length;i++)e[t[i].aggregate]=0,n[t[i].field]=e;return n},_pageableQueryOptions:function(t){return t},_wrapInEmptyGroup:function(t){for(var e,i,a=this.group(),n=a.length-1,r=0;n>=r;n--)i=a[n],e={value:t.get?t.get(i.field):t[i.field],field:i.field,items:e?[e]:[t],hasSubgroups:!!e,aggregates:this._emptyAggregates(i.aggregates)};return e},totalPages:function(){var t=this,e=t.pageSize()||t.total();return Vt.ceil((t.total()||0)/e)},inRange:function(t,e){var i=this,n=Vt.min(t+e,i.total());return!i.options.serverPaging&&i._data.length>0||i._findRange(t,n).length>0},lastRange:function(){var t=this._ranges;return t[t.length-1]||{start:0,end:0,data:[]}},firstItemUid:function(){var t=this._ranges;return t.length&&t[0].data.length&&t[0].data[0].uid},enableRequestsInProgress:function(){this._skipRequestsInProgress=!1},_timeStamp:function(){return(new Date).getTime()},range:function(t,e,i){this._currentRequestTimeStamp=this._timeStamp();this._skipRequestsInProgress=!0;t=Vt.min(t||0,this.total());i=Ct(i)?i:wt;var n,r=this,a=Vt.max(Vt.floor(t/e),0)*e,s=Vt.min(a+e,r.total());return n=r._findRange(t,Vt.min(t+e,r.total())),n.length||0===r.total()?(r._processRangeData(n,t,e,a,s),i(),y):(e!==y&&(r._rangeExists(a,s)?a<t&&r.prefetch(s,e,function(){r.range(t,e,i)}):r.prefetch(a,e,function(){t>a&&s<r.total()&&!r._rangeExists(s,Vt.min(s+e,r.total()))?r.prefetch(s,e,function(){r.range(t,e,i)}):r.range(t,e,i)})),y)},_findRange:function(t,e){for(var i,r,a,s,o,c,l,d,u,p,f=this,g=f._ranges,m=[],v=f.options,_=v.serverSorting||v.serverPaging||v.serverFiltering||v.serverGrouping||v.serverAggregates,n=0,h=g.length;n<h;n++)if(i=g[n],t>=i.start&&t<=i.end){for(u=0,r=n;r<h;r++)if(i=g[r],d=f._flatData(i.data,!0),d.length&&t+u>=i.start&&(o=i.data,c=i.end,_||(v.inPlaceSort?l=f._queryProcess(i.data,{filter:f.filter()}):(p=x(f.group()||[]).concat(b(f.sort()||[])),l=f._queryProcess(i.data,{sort:p,filter:f.filter()})),d=o=l.data,l.total!==y&&(c=l.total)),a=0,t+u>i.start&&(a=t+u-i.start),s=d.length,c>e&&(s-=c-e),u+=s-a,m=f._mergeGroups(m,o,a,s),e<=i.end&&u==e-t))return m;break}return[]},_mergeGroups:function(t,e,i,n){if(this._isServerGrouped()){var r,a=e.toJSON();return t.length&&(r=t[t.length-1]),A(r,a,i,n),t.concat(a)}return t.concat(e.slice(i,n))},_processRangeData:function(t,e,i,n,r){var a,s,o,c,l=this;l._pending=y;l._skip=e>l.skip()?Vt.min(r,(l.totalPages()-1)*l.take()):n;l._currentRangeStart=e;l._take=i;a=l.options.serverPaging;s=l.options.serverSorting;o=l.options.serverFiltering;c=l.options.serverAggregates;try{l.options.serverPaging=!0;l._isServerGrouped()||l.group()&&l.group().length||(l.options.serverSorting=!0);l.options.serverFiltering=!0;l.options.serverPaging=!0;l.options.serverAggregates=!0;a&&(l._detachObservableParents(),l._data=t=l._observe(t));l._process(t)}finally{l.options.serverPaging=a;l.options.serverSorting=s;l.options.serverFiltering=o;l.options.serverAggregates=c}},skip:function(){var t=this;return t._skip===y?t._page!==y?(t._page-1)*(t.take()||1):y:t._skip},currentRangeStart:function(){return this._currentRangeStart||0},take:function(){return this._take||this._pageSize},_prefetchSuccessHandler:function(s,o,c,l){var d=this,u=d._timeStamp();return function(t){var e,i,n,r=!1,a={start:s,end:o,data:[],timestamp:d._timeStamp()};if(d._dequeueRequest(),d.trigger(Ut,{response:t,type:"read"}),t=d.reader.parse(t),n=d._readData(t),n.length){for(e=0,i=d._ranges.length;e<i;e++)if(d._ranges[e].start===s){r=!0;a=d._ranges[e];a.pristineData=n;a.data=d._observe(n);a.end=a.start+d._flatData(a.data,!0).length;d._sortRanges();break}r||d._addRange(d._observe(n),s)}d._total=d.reader.total(t);(l||u>=d._currentRequestTimeStamp||!d._skipRequestsInProgress)&&(c&&n.length?c():d.trigger(Nt,{}))}},prefetch:function(t,e,i){var n=this,r=Vt.min(t+e,n.total()),a={take:e,skip:t,page:t/e+1,pageSize:e,sort:n._sort,filter:n._filter,group:n._group,aggregate:n._aggregate};n._rangeExists(t,r)?i&&i():(clearTimeout(n._timeout),n._timeout=setTimeout(function(){n._queueRequest(a,function(){n.trigger($t,{type:"read"})?n._dequeueRequest():n.transport.read({data:n._params(a),success:n._prefetchSuccessHandler(t,r,i),error:function(){var t=Zt.call(arguments);n.error.apply(n,t)}})})},100))},_multiplePrefetch:function(t,e,i){var n=this,r=Vt.min(t+e,n.total()),a={take:e,skip:t,page:t/e+1,pageSize:e,sort:n._sort,filter:n._filter,group:n._group,aggregate:n._aggregate};n._rangeExists(t,r)?i&&i():n.trigger($t,{type:"read"})||n.transport.read({data:n._params(a),success:n._prefetchSuccessHandler(t,r,i,!0)})},_rangeExists:function(t,e){for(var r=this,a=r._ranges,i=0,n=a.length;i<n;i++)if(a[i].start<=t&&a[i].end>=e)return!0;return!1},_getCurrentRangeSpan:function(){for(var t,i=this,n=i._ranges,r=i.currentRangeStart(),a=r+(i.take()||0),s=[],o=n.length,e=0;e<o;e++)t=n[e],(t.start<=r&&t.end>=r||t.start>=r&&t.start<=a)&&s.push(t);return s},_removeModelFromRanges:function(t){for(var e,r=this,i=0,n=this._ranges.length;i<n;i++)e=this._ranges[i],r._removeModelFromRange(e,t);r._updateRangesLength()},_removeModelFromRange:function(t,n){this._eachItem(t.data,function(t){for(var i,e=0;e<t.length;e++)if(i=t[e],i.uid&&i.uid==n.uid){[].splice.call(t,e,1);break}})},_insertModelInRange:function(t,e){for(var i,r=this,a=r._ranges||[],s=a.length,n=0;n<s;n++)if(i=a[n],i.start<=t&&i.end>=t){r._getByUid(e.uid,i.data)||(r._isServerGrouped()?i.data.splice(t,0,r._wrapInEmptyGroup(e)):i.data.splice(t,0,e));break}r._updateRangesLength()},_updateRangesLength:function(){for(var t,i=this,n=i._ranges||[],r=n.length,a=!1,s=0,o=0,e=0;e<r;e++)t=n[e],o=i._flatData(t.data,!0).length-Vt.abs(t.end-t.start),a||0===o?a&&(t.start+=s,t.end+=s):(a=!0,s=o,t.end+=s)}});lt={};lt.create=function(t,e,i){var n,r=t.transport?v.extend({},t.transport):null;return r?(r.read=typeof r.read===Tt?{url:r.read}:r.read,"jsdo"===t.type&&(r.dataSource=i),t.type&&(kt.data.transports=kt.data.transports||{},kt.data.schemas=kt.data.schemas||{},kt.data.transports[t.type]?mt(kt.data.transports[t.type])?r=ft(!0,{},kt.data.transports[t.type],r):n=new kt.data.transports[t.type](ft(r,{data:e})):kt.logToConsole("Unknown DataSource transport type '"+t.type+"'.\nVerify that registration scripts for this type are included after Kendo UI on the page.","warn"),t.schema=ft(!0,{},kt.data.schemas[t.type],t.schema)),n||(n=Ct(r.read)?r:new st(r))):n=new at({data:t.data||[]}),n};ct.create=function(t){(_t(t)||t instanceof ie)&&(t={data:t});var e,i,n,r=t||{},a=r.data,s=r.fields,o=r.table,c=r.select,l={};if(a||!s||r.transport||(o?a=W(o,s):c&&(a=V(c,s),r.group===y&&a[0]&&a[0].optgroup!==y&&(r.group="optgroup"))),kt.data.Model&&s&&(!r.schema||!r.schema.model)){for(e=0,i=s.length;e<i;e++)n=s[e],n.type&&(l[n.field]=n);vt(l)||(r.schema=ft(!0,r.schema,{model:{fields:l}}))}return r.data=a,c=null,r.select=null,o=null,r.table=null,r instanceof ct?r:new ct(r)};dt=X.define({idField:"id",init:function(t){var e,i=this,n=i.hasChildren||t&&t.hasChildren,r="items",a={};kt.data.Model.fn.init.call(i,t);typeof i.children===Tt&&(r=i.children);a={schema:{data:r,model:{hasChildren:n,id:i.idField,fields:i.fields}}};typeof i.children!==Tt&&ft(a,i.children);a.data=t;n||(n=a.schema.data);typeof n===Tt&&(n=kt.getter(n));Ct(n)&&(e=n.call(i,i),i.hasChildren=(!e||0!==e.length)&&!!e);i._childrenOptions=a;i.hasChildren&&i._initChildren();i._loaded=!(!t||!t._loaded)},_initChildren:function(){var t,e,i,n=this;n.children instanceof ut||(t=n.children=new ut(n._childrenOptions),e=t.transport,i=e.parameterMap,e.parameterMap=function(t,e){return t[n.idField||"id"]=n.id,i&&(t=i(t,e)),t},t.parent=function(){return n},t.bind(Nt,function(t){t.node=t.node||n;n.trigger(Nt,t)}),t.bind(qt,function(t){var e=n.parent();e&&(t.node=t.node||n,e.trigger(qt,t))}),n._updateChildrenField())},append:function(t){this._initChildren();this.loaded(!0);this.children.add(t)},hasChildren:!1,level:function(){for(var t=this.parentNode(),e=0;t&&t.parentNode;)e++,t=t.parentNode?t.parentNode():null;return e},_updateChildrenField:function(){var t=this._childrenOptions.schema.data;this[t||"items"]=this.children.data()},_childrenLoaded:function(){this._loaded=!0;this._updateChildrenField()},load:function(){var t,e,i={},n="_query";return this.hasChildren?(this._initChildren(),t=this.children,i[this.idField||"id"]=this.id,this._loaded||(t._data=y,n="read"),t.one(Nt,gt(this._childrenLoaded,this)),this._matchFilter&&(i.filter={field:"_matchFilter",operator:"eq",value:!0}),e=t[n](i)):this.loaded(!0),e||v.Deferred().resolve().promise()},parentNode:function(){var t=this.parent();return t.parent()},loaded:function(t){return t===y?this._loaded:(this._loaded=t,y)},shouldSerialize:function(t){return X.fn.shouldSerialize.call(this,t)&&"children"!==t&&"_loaded"!==t&&"hasChildren"!==t&&"_childrenOptions"!==t}});ut=ct.extend({init:function(t){var e=dt.define({children:t});t.filter&&!t.serverFiltering&&(this._hierarchicalFilter=t.filter,t.filter=null);ct.fn.init.call(this,ft(!0,{},{schema:{modelBase:e,model:e}},t));this._attachBubbleHandlers()},_attachBubbleHandlers:function(){var e=this;e._data.bind(qt,function(t){e.trigger(qt,t)})},read:function(t){var e=ct.fn.read.call(this,t);return this._hierarchicalFilter&&(this._data&&this._data.length>0?this.filter(this._hierarchicalFilter):(this.options.filter=this._hierarchicalFilter,this._filter=u(this.options.filter),this._hierarchicalFilter=null)),e},remove:function(t){var e,i=t.parentNode(),n=this;return i&&i._initChildren&&(n=i.children),e=ct.fn.remove.call(n,t),i&&!n.data().length&&(i.hasChildren=!1),e},success:t("success"),data:t("data"),insert:function(t,e){var i=this.parent();return i&&i._initChildren&&(i.hasChildren=!0,i._initChildren()),ct.fn.insert.call(this,t,e)},filter:function(t){return t===y?this._filter:(!this.options.serverFiltering&&this._markHierarchicalQuery(t)&&(t={logic:"or",filters:[t,{field:"_matchFilter",operator:"equals",value:!0}]}),this.trigger("reset"),this._query({filter:t,page:1}),y)},_markHierarchicalQuery:function(t){var e,i,n,r,a;return t=u(t),t&&0!==t.filters.length?(e=g.filterExpr(t),n=e.fields,r=e.operators,i=a=Function("d, __f, __o","return "+e.expression),(n.length||r.length)&&(a=function(t){return i(t,n,r)}),this._updateHierarchicalFilter(a),!0):(this._updateHierarchicalFilter(function(){return!0}),!1)},_updateHierarchicalFilter:function(t){for(var e,n=this._data,r=!1,i=0;i<n.length;i++)e=n[i],e.hasChildren?(e._matchFilter=e.children._updateHierarchicalFilter(t),e._matchFilter||(e._matchFilter=t(e))):e._matchFilter=t(e),e._matchFilter&&(r=!0);return r},_find:function(t,e){var i,n,r,a,s=this._data;if(s){if(r=ct.fn[t].call(this,e))return r;for(s=this._flatData(this._data),i=0,n=s.length;i<n;i++)if(a=s[i].children,a instanceof ut&&(r=a[t](e)))return r}},get:function(t){return this._find("get",t)},getByUid:function(t){return this._find("getByUid",t)}});ut.create=function(t){t=t&&t.push?{data:t}:t;var e=t||{},i=e.data,n=e.fields,r=e.list;return i&&i._dataSource?i._dataSource:(i||!n||e.transport||r&&(i=G(r,n)),e.data=i,e instanceof ut?e:new ut(e))};ht=kt.Observable.extend({init:function(t,e,i){kt.Observable.fn.init.call(this);this._prefetching=!1;this.dataSource=t;this.prefetch=!i;var n=this;t.bind("change",function(){n._change()});t.bind("reset",function(){n._reset()});this._syncWithDataSource();this.setViewSize(e)},setViewSize:function(t){this.viewSize=t;this._recalculate()},at:function(t){var e=this.pageSize,i=!0;return t>=this.total()?(this.trigger("endreached",{index:t}),null):this.useRanges?this.useRanges?((t<this.dataOffset||t>=this.skip+e)&&(i=this.range(Math.floor(t/e)*e)),t===this.prefetchThreshold&&this._prefetch(),t===this.midPageThreshold?this.range(this.nextMidRange,!0):t===this.nextPageThreshold?this.range(this.nextFullRange):t===this.pullBackThreshold&&this.range(this.offset===this.skip?this.previousMidRange:this.previousFullRange),i?this.dataSource.at(t-this.dataOffset):(this.trigger("endreached",{index:t}),null)):y:this.dataSource.view()[t]},indexOf:function(t){return this.dataSource.data().indexOf(t)+this.dataOffset},total:function(){return parseInt(this.dataSource.total(),10)},next:function(){var t=this,e=t.pageSize,i=t.skip-t.viewSize+e,n=Vt.max(Vt.floor(i/e),0)*e;this.offset=i;this.dataSource.prefetch(n,e,function(){t._goToRange(i,!0)})},range:function(t,e){if(this.offset===t)return!0;var i=this,n=this.pageSize,r=Vt.max(Vt.floor(t/n),0)*n,a=this.dataSource;return e&&(r+=n),a.inRange(t,n)?(this.offset=t,this._recalculate(),this._goToRange(t),!0):!this.prefetch||(a.prefetch(r,n,function(){i.offset=t;i._recalculate();i._goToRange(t,!0)}),!1)},syncDataSource:function(){var t=this.offset;this.offset=null;this.range(t)},destroy:function(){this.unbind()},_prefetch:function(){var t=this,e=this.pageSize,i=this.skip+e,n=this.dataSource;n.inRange(i,e)||this._prefetching||!this.prefetch||(this._prefetching=!0,this.trigger("prefetching",{skip:i,take:e}),n.prefetch(i,e,function(){t._prefetching=!1;t.trigger("prefetched",{skip:i,take:e})}))},_goToRange:function(t,e){this.offset===t&&(this.dataOffset=t,this._expanding=e,this.dataSource.range(t,this.pageSize),this.dataSource.enableRequestsInProgress())},_reset:function(){this._syncPending=!0},_change:function(){var t=this.dataSource;this.length=this.useRanges?t.lastRange().end:t.view().length;this._syncPending&&(this._syncWithDataSource(),this._recalculate(),this._syncPending=!1,this.trigger("reset",{offset:this.offset}));this.trigger("resize");this._expanding&&this.trigger("expand");delete this._expanding},_syncWithDataSource:function(){var t=this.dataSource;this._firstItemUid=t.firstItemUid();this.dataOffset=this.offset=t.skip()||0;this.pageSize=t.pageSize();this.useRanges=t.options.serverPaging},_recalculate:function(){var t=this.pageSize,e=this.offset,i=this.viewSize,n=Math.ceil(e/t)*t;this.skip=n;this.midPageThreshold=n+t-1;this.nextPageThreshold=n+i-1;this.prefetchThreshold=n+Math.floor(t/3*2);this.pullBackThreshold=this.offset-1;this.nextMidRange=n+t-i;this.nextFullRange=n;this.previousMidRange=e-i;this.previousFullRange=n-t}});pt=kt.Observable.extend({init:function(t,e){var i=this;kt.Observable.fn.init.call(i);this.dataSource=t;this.batchSize=e;this._total=0;this.buffer=new ht(t,3*e);this.buffer.bind({endreached:function(t){i.trigger("endreached",{index:t.index})},prefetching:function(t){i.trigger("prefetching",{skip:t.skip,take:t.take})},prefetched:function(t){i.trigger("prefetched",{skip:t.skip,take:t.take})},reset:function(){i._total=0;i.trigger("reset")},resize:function(){i._total=Math.ceil(this.length/i.batchSize);i.trigger("resize",{total:i.total(),offset:this.offset})}})},syncDataSource:function(){this.buffer.syncDataSource()},at:function(t){var e,i,n=this.buffer,r=t*this.batchSize,a=this.batchSize,s=[];for(n.offset>r&&n.at(n.offset-1),i=0;i<a&&(e=n.at(r+i),null!==e);i++)s.push(e);return s},total:function(){return this._total},destroy:function(){this.buffer.destroy();this.unbind()}});ft(!0,kt.data,{readers:{json:e},Query:g,DataSource:ct,HierarchicalDataSource:ut,Node:dt,ObservableObject:Y,ObservableArray:ie,LazyObservableArray:J,LocalTransport:at,RemoteTransport:st,Cache:ot,DataReader:e,Model:X,Buffer:ht,BatchBuffer:pt})}(window.kendo.jQuery),window.kendo});("function"==typeof define&&define.amd?define:function(t,e,i){(i||e)()})("kendo.treeview.min",["kendo.data.min","kendo.treeview.draganddrop.min"],function(){return function(v,d){function t(i){return function(t){var e=t.children(".k-animation-container");return e.length||(e=t),e.children(i)}}function n(t){return b.template(t,{useWithBlock:!1})}function h(t){return t.find(".k-checkbox-wrapper:first input[type=checkbox]")}function e(a){return function(t,r){r=r.closest(B);var e,i=r.parent();return i.parent().is("li")&&(e=i.parent()),this._dataSourceMove(t,i,e,function(t,e){var i=this.dataItem(r),n=i?i.parent().indexOf(i):r.index();return this._insert(t.data(),e,n+a)})}}function s(t,e){for(var i;t&&"ul"!=t.nodeName.toLowerCase();)i=t,t=t.nextSibling,3==i.nodeType&&(i.nodeValue=v.trim(i.nodeValue)),a.test(i.className)?e.insertBefore(i,e.firstChild):e.appendChild(i)}function _(t){var e=t.children("div"),i=t.children("ul"),n=e.children(".k-icon"),r=t.children("input[type=checkbox]"),a=e.children(".k-in");t.hasClass("k-treeview")||(e.length||(e=v("<div />").prependTo(t)),!n.length&&i.length?n=v("<span class='k-icon' />").prependTo(e):i.length&&i.children().length||(n.remove(),i.remove()),r.length&&v("<span class='k-checkbox-wrapper' />").appendTo(e).append(r),a.length||(a=t.children("a").eq(0).addClass("k-in k-link"),a.length||(a=v("<span class='k-in' />")),a.appendTo(e),e.length&&s(e[0].nextSibling,a[0])))}var i,y,p,r,a,b=window.kendo,f=b.ui,o=b.data,c=v.extend,l=b.template,u=v.isArray,g=f.Widget,m=o.HierarchicalDataSource,x=v.proxy,w=b.keys,k=".kendoTreeView",C=".kendoTreeViewTemp",S="select",P="check",T="navigate",O="change",I="error",A="checked",M="indeterminate",N="dragstart",E="drag",R="drop",q="dragend",$="dataBound",z="click",U="undefined",H="k-state-hover",j="k-treeview",L=":visible",B=".k-item",V="string",W="aria-checked",G="aria-selected",Q="aria-disabled",J="k-state-disabled",Y={text:"dataTextField",url:"dataUrlField",spriteCssClass:"dataSpriteCssClassField",imageUrl:"dataImageUrlField"},Z=function(t){return t instanceof b.jQuery||window.jQuery&&t instanceof window.jQuery},K=function(t){return"object"==typeof HTMLElement?t instanceof HTMLElement:t&&"object"==typeof t&&1===t.nodeType&&typeof t.nodeName===V};y=t(".k-group");p=t(".k-group,.k-content");r=function(t){return t.children("div").children(".k-icon")};a=/k-sprite/;i=b.ui.DataBoundWidget.extend({init:function(t,e){var i,n=this,r=!1,a=e&&!!e.dataSource;u(e)&&(e={dataSource:e});e&&typeof e.loadOnDemand==U&&u(e.dataSource)&&(e.loadOnDemand=!1);g.prototype.init.call(n,t,e);t=n.element;e=n.options;n._dataSourceUids={};i=t.is("ul")&&t||t.hasClass(j)&&t.children("ul");r=!a&&i.length;r&&(e.dataSource.list=i);n._animation();n._accessors();n._templates();t.hasClass(j)?(n.wrapper=t,n.root=t.children("ul").eq(0)):(n._wrapper(),i&&(n.root=t,n._group(n.wrapper)));n._tabindex();n.wrapper.attr("role","tree");n._dataSource(r);n._attachEvents();n._dragging();r?n._syncHtmlAndDataSource():e.autoBind&&(n._progress(!0),n.dataSource.fetch());e.checkboxes&&e.checkboxes.checkChildren&&n.updateIndeterminate();n.element[0].id&&(n._ariaId=b.format("{0}_tv_active",n.element[0].id));b.notify(n)},_attachEvents:function(){var e=this,t=".k-in:not(.k-state-selected,.k-state-disabled)",i="mouseenter";e.wrapper.on(i+k,".k-in.k-state-selected",function(t){t.preventDefault()}).on(i+k,t,function(){v(this).addClass(H)}).on("mouseleave"+k,t,function(){v(this).removeClass(H)}).on(z+k,t,x(e._click,e)).on("dblclick"+k,".k-in:not(.k-state-disabled)",x(e._toggleButtonClick,e)).on(z+k,".k-i-expand,.k-i-collapse",x(e._toggleButtonClick,e)).on("keydown"+k,x(e._keydown,e)).on("keypress"+k,x(e._keypress,e)).on("focus"+k,x(e._focus,e)).on("blur"+k,x(e._blur,e)).on("mousedown"+k,".k-in,.k-checkbox-wrapper :checkbox,.k-i-expand,.k-i-collapse",x(e._mousedown,e)).on("change"+k,".k-checkbox-wrapper :checkbox",x(e._checkboxChange,e)).on("click"+k,".checkbox-span",x(e._checkboxLabelClick,e)).on("click"+k,".k-request-retry",x(e._retryRequest,e)).on("click"+k,".k-link.k-state-disabled",function(t){t.preventDefault()}).on("click"+k,function(t){v(t.target).is(":kendoFocusable")||e.focus()})},_checkboxLabelClick:function(t){var e=v(t.target.previousSibling);e.is("[disabled]")||(e.prop("checked",!e.prop("checked")),e.trigger("change"))},_syncHtmlAndDataSource:function(t,e){t=t||this.root;e=e||this.dataSource;for(var n,r,a,s,o=e.view(),c=b.attr("uid"),l=b.attr("expanded"),d=this.options.checkboxes,u=t.children("li"),i=0;i<u.length;i++)r=o[i],a=r.uid,n=u.eq(i),n.attr("role","treeitem").attr(c,a).attr(G,n.hasClass("k-state-selected")),r.expanded="true"===n.attr(l),d&&(s=h(n),r.checked=s.prop(A),s.attr("id","_"+a),s.next(".k-checkbox-label").attr("for","_"+a)),this._syncHtmlAndDataSource(n.children("ul"),r.children)},_animation:function(){var t=this.options,e=t.animation,i=e.collapse&&"effects"in e.collapse,n=c({},e.expand,e.collapse);i||(n=c(n,{reverse:!0}));e===!1&&(e={expand:{effects:{}},collapse:{hide:!0,effects:{}}});e.collapse=c(n,{hide:!0});t.animation=e},_dragging:function(){var a,t=this.options.dragAndDrop,e=this.dragging;t&&!e?(a=this,this.dragging=new f.HierarchicalDragAndDrop(this.element,{reorderable:!0,$angular:this.options.$angular,autoScroll:this.options.autoScroll,filter:"div:not(.k-state-disabled) .k-in",allowedContainers:".k-treeview",itemSelector:".k-treeview .k-item",hintText:x(this._hintText,this),contains:function(t,e){return v.contains(t,e)},dropHintContainer:function(t){return t},itemFromTarget:function(t){var e=t.closest(".k-top,.k-mid,.k-bot");return{item:e,content:t.closest(".k-in"),first:e.hasClass("k-top"),last:e.hasClass("k-bot")}},dropPositionFrom:function(t){return t.prevAll(".k-in").length>0?"after":"before"},dragstart:function(t){return a.trigger(N,{sourceNode:t[0]})},drag:function(t){a.trigger(E,{originalEvent:t.originalEvent,sourceNode:t.source[0],dropTarget:t.target[0],pageY:t.pageY,pageX:t.pageX,statusClass:t.status,setStatusClass:t.setStatus})},drop:function(e){var t=v(e.dropTarget),i=t.closest("a");return i&&i.attr("href")&&a._tempPreventNavigation(i),a.trigger(R,{originalEvent:e.originalEvent,sourceNode:e.source,destinationNode:e.destination,valid:e.valid,setValid:function(t){this.valid=t;e.setValid(t)},dropTarget:e.dropTarget,dropPosition:e.position})},dragend:function(e){function t(t){a.options.checkboxes&&a.options.checkboxes.checkChildren&&a.updateIndeterminate();a.trigger(q,{originalEvent:e.originalEvent,sourceNode:t&&t[0],destinationNode:n[0],dropPosition:r})}var i=e.source,n=e.destination,r=e.position;"over"==r?a.append(i,n,t):("before"==r?i=a.insertBefore(i,n):"after"==r&&(i=a.insertAfter(i,n)),t(i))}})):!t&&e&&(e.destroy(),this.dragging=null)},_tempPreventNavigation:function(e){e.on(z+k+C,function(t){t.preventDefault();e.off(z+k+C)})},_hintText:function(t){return this.templates.dragClue({item:this.dataItem(t),treeview:this.options})},_templates:function(){var t=this,e=t.options,i=x(t._fieldAccessor,t);e.template&&typeof e.template==V?e.template=l(e.template):e.template||(e.template=n("# var text = "+i("text")+"(data.item); ## if (typeof data.item.encoded != 'undefined' && data.item.encoded === false) {##= text ## } else { ##: text ## } #"));t._checkboxes();t.templates={wrapperCssClass:function(t,e){var i="k-item",n=e.index;return t.firstLevel&&0===n&&(i+=" k-first"),n==t.length-1&&(i+=" k-last"),i},cssClass:function(t,e){var i="",n=e.index,r=t.length-1;return t.firstLevel&&0===n&&(i+="k-top "),i+(0===n&&n!=r?"k-top":n==r?"k-bot":"k-mid")},textClass:function(t,e){var i="k-in";return e&&(i+=" k-link"),t.enabled===!1&&(i+=" k-state-disabled"),t.selected===!0&&(i+=" k-state-selected"),i},toggleButtonClass:function(t){return"k-icon"+(t.expanded!==!0?" k-i-expand":" k-i-collapse")},groupAttributes:function(t){var e="";return t.firstLevel||(e="role='group'"),e+(t.expanded!==!0?" style='display:none'":"")},groupCssClass:function(t){var e="k-group";return t.firstLevel&&(e+=" k-treeview-lines"),e},dragClue:n("#= data.treeview.template(data) #"),group:n("<ul class='#= data.r.groupCssClass(data.group) #'#= data.r.groupAttributes(data.group) #>#= data.renderItems(data) #<\/ul>"),itemContent:n("# var imageUrl = "+i("imageUrl")+"(data.item); ## var spriteCssClass = "+i("spriteCssClass")+"(data.item); ## if (imageUrl) { #<img class='k-image' alt='' src='#= imageUrl #'># } ## if (spriteCssClass) { #<span class='k-sprite #= spriteCssClass #'><\/span># } ##= data.treeview.template(data) #"),itemElement:n("# var item = data.item, r = data.r; ## var url = "+i("url")+"(item); #<div class='#= r.cssClass(data.group, item) #'># if (item.hasChildren) { #<span class='#= r.toggleButtonClass(item) #'><\/span># } ## if (data.treeview.checkboxes) { #<span class='k-checkbox-wrapper' role='presentation'>#= data.treeview.checkboxes.template(data) #<\/span># } ## var tag = url ? 'a' : 'span'; ## var textAttr = url ? ' href=\\'' + url + '\\'' : ''; #<#=tag# class='#= r.textClass(item, !!url) #'#= textAttr #>#= r.itemContent(data) #<\/#=tag#><\/div>"),item:n("# var item = data.item, r = data.r; #<li role='treeitem' class='#= r.wrapperCssClass(data.group, item) #'"+b.attr("uid")+'=\'#= item.uid #\' # if (data.treeview.checkboxes) { #aria-checked=\'#= item.checked ? "true" : "false" #\' # } #aria-selected=\'#= item.selected ? "true" : "false" #\' #=item.enabled === false ? "aria-disabled=\'true\'" : \'\'#aria-expanded=\'#= item.expanded ? "true" : "false" #\' data-expanded=\'#= item.expanded ? "true" : "false" #\' >#= r.itemElement(data) #<\/li>'),loading:n("<div class='k-icon k-i-loading'><\/div> #: data.messages.loading #"),retry:n("#: data.messages.requestFailed # <button class='k-button k-request-retry'>#: data.messages.retry #<\/button>")}},items:function(){return this.element.find(".k-item > div:first-child")},setDataSource:function(t){var e=this.options;e.dataSource=t;this._dataSourceUids={};this._dataSource();e.checkboxes&&e.checkboxes.checkChildren&&this.dataSource.one("change",v.proxy(this.updateIndeterminate,this,null));this.options.autoBind&&this.dataSource.fetch()},_bindDataSource:function(){this._refreshHandler=x(this.refresh,this);this._errorHandler=x(this._error,this);this.dataSource.bind(O,this._refreshHandler);this.dataSource.bind(I,this._errorHandler)},_unbindDataSource:function(){var t=this.dataSource;t&&(t.unbind(O,this._refreshHandler),t.unbind(I,this._errorHandler))},_dataSource:function(t){function i(t){for(var e=0;e<t.length;e++)t[e]._initChildren(),t[e].children.fetch(),i(t[e].children.view())}var e=this,n=e.options,r=n.dataSource;r=u(r)?{data:r}:r;e._unbindDataSource();r.fields||(r.fields=[{field:"text"},{field:"url"},{field:"spriteCssClass"},{field:"imageUrl"}]);e.dataSource=r=m.create(r);t&&(r.fetch(),i(r.view()));e._bindDataSource()},events:[N,E,R,q,$,"expand","collapse",S,O,T,P],options:{name:"TreeView",dataSource:{},animation:{expand:{effects:"expand:vertical",duration:200},collapse:{duration:100}},messages:{loading:"Loading...",requestFailed:"Request failed.",retry:"Retry"},dragAndDrop:!1,checkboxes:!1,autoBind:!0,autoScroll:!1,loadOnDemand:!0,template:"",dataTextField:null},_accessors:function(){var t,e,i,n=this,r=n.options,a=n.element;for(t in Y)e=r[Y[t]],i=a.attr(b.attr(t+"-field")),!e&&i&&(e=i),e||(e=t),u(e)||(e=[e]),r[Y[t]]=e},_fieldAccessor:function(t){var e=this.options[Y[t]],i=e.length,n="(function(item) {";return 0===i?n+="return item['"+t+"'];":(n+="var levels = ["+v.map(e,function(t){return"function(d){ return "+b.expr(t)+"}"}).join(",")+"];",n+="return levels[Math.min(item.level(), "+i+"-1)](item)"),n+"})"},setOptions:function(t){g.fn.setOptions.call(this,t);this._animation();this._dragging();this._templates()},_trigger:function(t,e){return this.trigger(t,{node:e.closest(B)[0]})},_setChecked:function(t,e){if(t&&v.isFunction(t.view))for(var i=0,n=t.view();i<n.length;i++)n[i].enabled!==!1&&this._setCheckedValue(n[i],e),n[i].children&&this._setChecked(n[i].children,e)},_setCheckedValue:function(t,e){t[A]=e},_setIndeterminate:function(t){var e,i,n,r=y(t),a=!0;if(r.length&&(e=h(r.children()),i=e.length)){if(i>1){for(n=1;n<i;n++)if(e[n].checked!=e[n-1].checked||e[n].indeterminate||e[n-1].indeterminate){a=!1;break}}else a=!e[0].indeterminate;return t.attr(W,a?e[0].checked:"mixed"),h(t).data(M,!a).prop(M,!a).prop(A,a&&e[0].checked)}},updateIndeterminate:function(t){var e,i,n,r;if(t=t||this.wrapper,e=y(t).children(),e.length){for(i=0;i<e.length;i++)this.updateIndeterminate(e.eq(i));if(t.is(".k-treeview"))return;n=this._setIndeterminate(t);r=this.dataItem(t);n&&n.prop(A)?r.checked=!0:r&&delete r.checked}},_bubbleIndeterminate:function(t,e){if(t.length){e||this.updateIndeterminate(t);var i,n=this.parent(t);n.length&&(this._setIndeterminate(n),i=n.children("div").find(".k-checkbox-wrapper input[type=checkbox]"),this._skip=!0,i.prop(M)===!1?this.dataItem(n).set(A,i.prop(A)):this.dataItem(n).set(A,!1),this._skip=!1,this._bubbleIndeterminate(n,!0))}},_checkboxChange:function(t){var e=v(t.target),i=e.prop(A),n=e.closest(B),r=this.dataItem(n);this._preventChange||r.checked!=i&&(r.set(A,i),n.attr(W,i),this._trigger(P,n))},_toggleButtonClick:function(t){var e=v(t.currentTarget).closest(B);e.is("[aria-disabled='true']")||this.toggle(e)},_mousedown:function(t){var e=this,i=v(t.currentTarget),n=v(t.currentTarget).closest(B),r=b.support.browser;n.is("[aria-disabled='true']")||((r.msie||r.edge)&&i.is(":checkbox")&&(i.prop(M)?(e._preventChange=!1,i.prop(A,!i.prop(A)),i.trigger(O),i.on(z+k,function(t){t.preventDefault()}),e._preventChange=!0):(i.off(z+k),e._preventChange=!1)),e._clickTarget=n,e.current(n))},_focusable:function(t){return t&&t.length&&t.is(":visible")&&!t.find(".k-in:first").hasClass(J)},_focus:function(){var t=this.select(),e=this._clickTarget;b.support.touch||(e&&e.length&&(t=e),this._focusable(t)||(t=this.current()),this._focusable(t)||(t=this._nextVisible(v())),this.current(t))},focus:function(){var t,e=this.wrapper,i=e[0],n=[],r=[],a=document.documentElement;do i=i.parentNode,i.scrollHeight>i.clientHeight&&(n.push(i),r.push(i.scrollTop));while(i!=a);for(b.focusElement(e),t=0;t<n.length;t++)n[t].scrollTop=r[t]},_blur:function(){this.current().find(".k-in:first").removeClass("k-state-focused")},_enabled:function(t){return!t.children("div").children(".k-in").hasClass(J)},parent:function(t){var e,i,r=/\bk-item\b/;typeof t==V&&(t=this.element.find(t));K(t)||(t=t[0]);i=r.test(t.className);do t=t.parentNode,r.test(t.className)&&(i?e=t:i=!0);while(!/\bk-treeview\b/.test(t.className)&&!e);return v(e)},_nextVisible:function(t){function e(t){for(;t.length&&!t.next().length;)t=n.parent(t);return t.next().length?t.next():t}var i,n=this,r=n._expanded(t);return t.length&&t.is(":visible")?r?(i=y(t).children().first(),i.length||(i=e(t))):i=e(t):i=n.root.children().eq(0),i},_previousVisible:function(t){var e,i,n=this;if(!t.length||t.prev().length)for(i=t.length?t.prev():n.root.children().last();n._expanded(i)&&(e=y(i).children().last(),e.length);)i=e;else i=n.parent(t)||t;return i},_keydown:function(t){var e,i=this,n=t.keyCode,r=i.current(),a=i._expanded(r),s=r.find(".k-checkbox-wrapper:first :checkbox"),o=b.support.isRtl(i.element);t.target==t.currentTarget&&(!o&&n==w.RIGHT||o&&n==w.LEFT?a?e=i._nextVisible(r):r.find(".k-in:first").hasClass(J)||i.expand(r):!o&&n==w.LEFT||o&&n==w.RIGHT?a&&!r.find(".k-in:first").hasClass(J)?i.collapse(r):(e=i.parent(r),i._enabled(e)||(e=d)):n==w.DOWN?e=i._nextVisible(r):n==w.UP?e=i._previousVisible(r):n==w.HOME?e=i._nextVisible(v()):n==w.END?e=i._previousVisible(v()):n!=w.ENTER||r.find(".k-in:first").hasClass(J)?n==w.SPACEBAR&&s.length&&(r.find(".k-in:first").hasClass(J)||(s.prop(A,!s.prop(A)).data(M,!1).prop(M,!1),i._checkboxChange({target:s})),e=r):r.find(".k-in:first").hasClass("k-state-selected")||i._trigger(S,r)||i.select(r),e&&(t.preventDefault(),r[0]!=e[0]&&(i._trigger(T,e),i.current(e))))},_keypress:function(t){var e,i=this,r=i.current().get(0),a=t.key,s=1===a.length;s&&(i._match||(i._match=""),i._match+=a,clearTimeout(i._matchTimer),i._matchTimer=setTimeout(function(){i._match=""},300),e=r&&i._matchNextByText(Array.prototype.indexOf.call(i.element.find(".k-item"),r),i._match),e.length||(e=i._matchNextByText(-1,i._match)),e.get(0)&&e.get(0)!==r&&(i._trigger(T,e),i.current(e)))},_matchNextByText:function(i,n){var t=this.element,e=t.find(".k-in").filter(function(t,e){return t>i&&v(e).is(":visible")&&0===v(e).text().toLowerCase().indexOf(n)});return e.eq(0).closest(B)},_click:function(t){var e,i=this,n=v(t.currentTarget),r=p(n.closest(B)),a=n.attr("href");e=a?"#"==a||a.indexOf("#"+this.element.id+"-")>=0:r.length&&!r.children().length;e&&t.preventDefault();n.hasClass(".k-state-selected")||i._trigger(S,n)||i.select(n)},_wrapper:function(){var t,e,i=this,n=i.element;n.is("ul")?(t=n.wrap("<div />").parent(),e=n):(t=n,e=t.children("ul").eq(0));i.wrapper=t.addClass("k-widget k-treeview");i.root=e},_getSelectedNode:function(){return this.element.find(".k-state-selected").closest(B)},_group:function(t){var e=this,i=t.hasClass(j),n={firstLevel:i,expanded:i||e._expanded(t)},r=t.children("ul");r.addClass(e.templates.groupCssClass(n)).css("display",n.expanded?"":"none");e._nodes(r,n)},_nodes:function(t,i){var n,r=this,e=t.children("li");i=c({length:e.length},i);e.each(function(t,e){e=v(e);n={index:t,expanded:r._expanded(e)};_(e);r._updateNodeClasses(e,i,n);r._group(e)})},_checkboxes:function(){var t,e=this.options,i=e.checkboxes;i&&(t="<input type='checkbox' tabindex='-1' #= (item.enabled === false) ? 'disabled' : '' # #= item.checked ? 'checked' : '' #",i.name&&(t+=" name='"+i.name+"'"),t+=" id='_#= item.uid #' class='k-checkbox' /><span class='k-checkbox-label checkbox-span'><\/span>",i=c({template:t},e.checkboxes),typeof i.template==V&&(i.template=l(i.template)),e.checkboxes=i)},_updateNodeClasses:function(t,e,i){var n,r,a=t.children("div"),s=t.children("ul"),o=this.templates;t.hasClass("k-treeview")||(i=i||{},i.expanded=typeof i.expanded!=U?i.expanded:this._expanded(t),i.index=typeof i.index!=U?i.index:t.index(),i.enabled=typeof i.enabled!=U?i.enabled:!a.children(".k-in").hasClass("k-state-disabled"),e=e||{},e.firstLevel=typeof e.firstLevel!=U?e.firstLevel:t.parent().parent().hasClass(j),e.length=typeof e.length!=U?e.length:t.parent().children().length,t.removeClass("k-first k-last").addClass(o.wrapperCssClass(e,i)),a.removeClass("k-top k-mid k-bot").addClass(o.cssClass(e,i)),n=a.children(".k-in"),r=n[0]&&"a"==n[0].nodeName.toLowerCase(),n.removeClass("k-in k-link k-state-default k-state-disabled").addClass(o.textClass(i,r)),(s.length||"true"==t.attr("data-hasChildren"))&&(a.children(".k-icon").removeClass("k-i-expand k-i-collapse").addClass(o.toggleButtonClass(i)),s.addClass("k-group")))},_processNodes:function(t,e){for(var n=this,r=n.element.find(t),i=0;i<r.length;i++)e.call(n,i,v(r[i]).closest(B))},dataItem:function(t){var e=v(t).closest(B).attr(b.attr("uid")),i=this.dataSource;return i&&i.getByUid(e)},_dataItem:function(t){var e=v(t).closest(B).attr(b.attr("uid")),i=this.dataSource;return i&&this._dataSourceUids[e]},_insertNode:function(t,e,i,n,r){for(var a,s,c,l,d,u=this,h=y(i),p=h.children().length+1,f={firstLevel:i.hasClass(j),expanded:!r,length:p},g="",m=function(t,e){t.appendTo(e)},o=0;o<t.length;o++)c=t[o],c.index=e+o,g+=u._renderItem({group:f,item:c});if(s=v(g),s.length){for(u.angular("compile",function(){return{elements:s.get(),data:t.map(function(t){return{dataItem:t}})}}),h.length||(h=v(u._renderGroup({group:f})).appendTo(i)),n(s,h),i.hasClass("k-item")&&(_(i),u._updateNodeClasses(i,f,{expanded:!r})),l=s.prev().first(),d=s.next().last(),u._updateNodeClasses(l,{},{expanded:"true"==l.attr(b.attr("expanded"))}),u._updateNodeClasses(d,{},{expanded:"true"==d.attr(b.attr("expanded"))}),o=0;o<t.length;o++)c=t[o],c.hasChildren&&(a=c.children.data(),a.length&&u._insertNode(a,c.index,s.eq(o),m,!c.expanded));return s}},_updateNodes:function(t,e){function i(t,e){t.is(".k-group")&&t.find(".k-item:not([aria-disabled])").attr(W,e);t.find(".k-checkbox-wrapper input[type=checkbox]:not([disabled])").prop(A,e).data(M,!1).prop(M,!1)}var n,r,a,s,o,c,l,d=this,u={treeview:d.options,item:s},h="expanded"!=e&&"checked"!=e;if("selected"==e)s=t[0],r=d.findByUid(s.uid).find(".k-in:first").removeClass("k-state-hover").toggleClass("k-state-selected",s[e]).end(),s[e]&&d.current(r),r.attr(G,!!s[e]);else{for(l=v.map(t,function(t){return d.findByUid(t.uid).children("div")}),h&&d.angular("cleanup",function(){return{elements:l}}),n=0;n<t.length;n++)u.item=s=t[n],a=l[n],r=a.parent(),h&&a.children(".k-in").html(d.templates.itemContent(u)),e==A?(o=s[e],i(a,o),r.attr(W,o),d.options.checkboxes.checkChildren&&(i(r.children(".k-group"),o),d._setChecked(s.children,o),d._bubbleIndeterminate(r))):"expanded"==e?d._toggle(r,s,s[e]):"enabled"==e&&(r.find(".k-checkbox-wrapper input[type=checkbox]").prop("disabled",!s[e]),c=!p(r).is(L),r.removeAttr(Q),s[e]||(s.selected&&s.set("selected",!1),s.expanded&&s.set("expanded",!1),c=!0,r.attr(G,!1).attr(Q,!0)),d._updateNodeClasses(r,{},{enabled:s[e],expanded:!c})),a.length&&this.trigger("itemChange",{item:a,data:s,ns:f});h&&d.angular("compile",function(){return{elements:l,data:v.map(t,function(t){return[{dataItem:t}]})}})}},_appendItems:function(i,t,e){var n,r,a,s=y(e),o=s.children(),c=!this._expanded(e);this.element===e?(n=this.dataSource.data(),r=this.dataSource.view(),a=r.length<n.length?r:n,i=a.indexOf(t[0])):t.length&&(i=t[0].parent().indexOf(t[0]));typeof i==U&&(i=o.length);this._insertNode(t,i,e,function(t,e){i>=o.length?t.appendTo(e):t.insertBefore(o.eq(i))},c);c||(this._updateNodeClasses(e,{},{expanded:!c}),y(e).css("display","block"))},_refreshChildren:function(t,e,i){var n,r,a,s=this.options,o=s.loadOnDemand,c=s.checkboxes&&s.checkboxes.checkChildren;if(y(t).empty(),e.length)for(this._appendItems(i,e,t),r=y(t).children(),o&&c&&this._bubbleIndeterminate(r.last()),n=0;n<r.length;n++)a=r.eq(n),this.trigger("itemChange",{item:a.children("div"),data:e[n],ns:f});else _(t)},_refreshRoot:function(t){var e,i,n,r=this._renderGroup({items:t,group:{firstLevel:!0,expanded:!0}});for(this.root.length?(this._angularItems("cleanup"),e=v(r),this.root.attr("class",e.attr("class")).html(e.html())):this.root=this.wrapper.html(r).children("ul"),i=this.root.children(".k-item"),n=0;n<t.length;n++)this.trigger("itemChange",{item:i.eq(n),data:t[n],ns:f});this._angularItems("compile")},refresh:function(t){var e,i,n=t.node,r=t.action,a=t.items,s=this.wrapper,o=this.options,c=o.loadOnDemand,l=o.checkboxes&&o.checkboxes.checkChildren;if(!this._skip){for(e=0;e<a.length;e++)this._dataSourceUids[a[e].uid]=a[e];if(t.field)return!a[0]||!a[0].level?void 0:this._updateNodes(a,t.field);if(n&&(s=this.findByUid(n.uid),this._progress(s,!1)),l&&"remove"!=r){for(i=!1,e=0;e<a.length;e++)if("checked"in a[e]){i=!0;break}if(!i&&n&&n.checked)for(e=0;e<a.length;e++)a[e].checked=!0}if("add"==r?this._appendItems(t.index,a,s):"remove"==r?this._remove(this.findByUid(a[0].uid),!1):"itemchange"==r?this._updateNodes(a):"itemloaded"==r?this._refreshChildren(s,a,t.index):this._refreshRoot(a),"remove"!=r)for(e=0;e<a.length;e++)(!c||a[e].expanded||a[e]._loaded)&&a[e].load();this.trigger($,{node:n?s:d});this.dataSource.filter()&&this.options.checkboxes.checkChildren&&this.updateIndeterminate(s)}},_error:function(t){var e=t.node&&this.findByUid(t.node.uid),i=this.templates.retry({messages:this.options.messages});e?(this._progress(e,!1),this._expanded(e,!1),r(e).addClass("k-i-reload"),t.node.loaded(!1)):(this._progress(!1),this.element.html(i))},_retryRequest:function(t){t.preventDefault();this.dataSource.fetch()},expand:function(t){this._processNodes(t,function(t,e){this.toggle(e,!0)})},collapse:function(t){this._processNodes(t,function(t,e){this.toggle(e,!1)})},enable:function(t,i){"boolean"==typeof t?(i=t,t=this.items()):i=2!=arguments.length||!!i;this._processNodes(t,function(t,e){this.dataItem(e).set("enabled",i)})},current:function(t){var e=this,i=e._current,n=e.element,r=e._ariaId;return arguments.length>0&&t&&t.length?(i&&(i[0].id===r&&i.removeAttr("id"),i.find(".k-in:first").removeClass("k-state-focused")),i=e._current=v(t,n).closest(B),i.find(".k-in:first").addClass("k-state-focused"),r=i[0].id||r,r&&(e.wrapper.removeAttr("aria-activedescendant"),i.attr("id",r),e.wrapper.attr("aria-activedescendant",r)),d):(i||(i=e._nextVisible(v())),i)},select:function(t){var e=this,i=e.element;return arguments.length?(t=v(t,i).closest(B),i.find(".k-state-selected").each(function(){var t=e.dataItem(this);t?(t.set("selected",!1),delete t.selected):v(this).removeClass("k-state-selected")}),t.length&&(e.dataItem(t).set("selected",!0),e._clickTarget=t),e.trigger(O),d):i.find(".k-state-selected").closest(B)},_toggle:function(t,e,i){var n,r=this.options,a=p(t),s=i?"expand":"collapse";a.data("animating")||(n=e&&e.loaded(),i&&!n?(r.loadOnDemand&&this._progress(t,!0),a.remove(),e.load()):(this._updateNodeClasses(t,{},{expanded:i}),i||a.css("height",a.height()).css("height"),a.kendoStop(!0,!0).kendoAnimate(c({reset:!0},r.animation[s],{complete:function(){i&&a.css("height","")}}))))},toggle:function(t,e){t=v(t);r(t).is(".k-i-expand, .k-i-collapse")&&(1==arguments.length&&(e=!this._expanded(t)),this._expanded(t,e))},destroy:function(){var t=this;g.fn.destroy.call(t);t.wrapper.off(k);t.wrapper.find(".k-checkbox-wrapper :checkbox").off(k);t._unbindDataSource();t.dragging&&t.dragging.destroy();t._dataSourceUids={};b.destroy(t.element);t.root=t.wrapper=t.element=null},_expanded:function(t,e,i){var n,r=b.attr("expanded"),a=e,s=a?"expand":"collapse";return 1==arguments.length?(n=this._dataItem(t),"true"===t.attr(r)||n&&n.expanded):(n=this.dataItem(t),p(t).data("animating")||!i&&this._trigger(s,t)||(a?(t.attr(r,"true"),t.attr("aria-expanded","true")):(t.removeAttr(r),t.attr("aria-expanded","false")),n&&(n.set("expanded",a),a=n.expanded)),d)},_progress:function(t,e){var i=this.element,n=this.templates.loading({messages:this.options.messages});1==arguments.length?(e=t,e?i.html(n):i.empty()):r(t).toggleClass("k-i-loading",e).removeClass("k-i-reload")},text:function(t,e){var i=this.dataItem(t),n=this.options[Y.text],r=i.level(),a=n.length,s=n[Math.min(r,a-1)];return e?(i.set(s,e),d):i[s]},_objectOrSelf:function(t){return v(t).closest("[data-role=treeview]").data("kendoTreeView")||this},_dataSourceMove:function(t,e,i,n){var r,a=this._objectOrSelf(i||e),s=a.dataSource,o=v.Deferred().resolve().promise();return i&&i[0]!=a.element[0]&&(r=a.dataItem(i),r.loaded()||(a._progress(i,!0),o=r.load()),i!=this.root&&(s=r.children,s&&s instanceof m||(r._initChildren(),r.loaded(!0),s=r.children))),t=this._toObservableData(t),n.call(a,s,t,o)},_toObservableData:function(t){var e,i,n=t;return(Z(t)||K(t))&&(e=this._objectOrSelf(t).dataSource,i=v(t).attr(b.attr("uid")),n=e.getByUid(i),n&&(n=e.remove(n))),n},_insert:function(t,e,i){e instanceof b.data.ObservableArray?e=e.toJSON():u(e)||(e=[e]);var n=t.parent();return n&&n._initChildren&&(n.hasChildren=!0,n._initChildren()),t.splice.apply(t,[i,0].concat(e)),this.findByUid(t[i].uid)},insertAfter:e(1),insertBefore:e(0),append:function(t,s,o){var e=this.root;if(!(s&&t instanceof jQuery&&s[0]===t[0]))return s=s&&s.length?s:null,s&&(e=y(s)),this._dataSourceMove(t,e,s,function(i,n,t){function e(){s&&a._expanded(s,!0,!0);var t=i.data(),e=Math.max(t.length,0);return a._insert(t,n,e)}var r,a=this;return t.done(function(){r=e();(o=o||v.noop)(r)}),r||null})},_remove:function(t,e){var i,n,r,a=this;return t=v(t,a.element),this.angular("cleanup",function(){return{elements:t.get()}}),i=t.parent().parent(),n=t.prev(),r=t.next(),t[e?"detach":"remove"](),i.hasClass("k-item")&&(_(i),a._updateNodeClasses(i)),a._updateNodeClasses(n),a._updateNodeClasses(r),t},remove:function(t){var e=this.dataItem(t);e&&this.dataSource.remove(e)},detach:function(t){return this._remove(t,!0)},findByText:function(i){return v(this.element).find(".k-in").filter(function(t,e){return v(e).text()==i}).closest(B)},findByUid:function(t){for(var e,n=this.element.find(".k-item"),r=b.attr("uid"),i=0;i<n.length;i++)if(n[i].getAttribute(r)==t){e=n[i];break}return v(e)},expandPath:function(t,e){function i(){a.shift();a.length?n(a[0]).then(i):s.call(r)}function n(t){var e=v.Deferred(),i=r.dataSource.get(t);return i?i.loaded()?(i.set("expanded",!0),e.resolve()):(r._progress(r.findByUid(i.uid),!0),i.load().then(function(){i.set("expanded",!0);e.resolve()})):e.resolve(),e.promise()}var r=this,a=t.slice(0),s=e||v.noop;n(a[0]).then(i)},_parentIds:function(t){for(var e=t&&t.parentNode(),i=[];e&&e.parentNode;)i.unshift(e.id),e=e.parentNode();return i},expandTo:function(t){t instanceof b.data.Node||(t=this.dataSource.get(t));var e=this._parentIds(t);this.expandPath(e)},_renderItem:function(t){return t.group||(t.group={}),t.treeview=this.options,t.r=this.templates,this.templates.item(t)},_renderGroup:function(t){var s=this;return t.renderItems=function(t){var e="",i=0,n=t.items,r=n?n.length:0,a=t.group;for(a.length=r;i<r;i++)t.group=a,t.item=n[i],t.item.index=i,e+=s._renderItem(t);return e},t.r=s.templates,s.templates.group(t)}});f.plugin(i)}(window.kendo.jQuery),window.kendo})}()